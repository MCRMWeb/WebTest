import{j as e,a as le,r as u,w as ze,L as H,c as T,b as ge,x as xe,e as ce,y as ie,z as qt,A as zt,B as Ft,u as ht,C as gt}from"./index-DYxtvusx.js";import{u as Tt}from"./userStore-Ch4KdBGw.js";import{C as E}from"./CustomIcon-B6T_3kn-.js";import{s as Ye}from"./shop1Store-CxwK2VoC.js";import{c as Fe,a as Ke,H as Vt}from"./Header-BL0KLkV7.js";import{C as Ne,a as ve,s as K,M as bt}from"./Modal-BIR58sYf.js";import{b as be}from"./bannerStore-DWqEcKDS.js";import{C as Te}from"./CustomIcon-B8qWtCtQ.js";import{C as Ht}from"./CustomIcon-Du2dvNSj.js";import"./XMarkIcon-D6stU_U1.js";const Xt="_wrapper_ldu5l_1",Gt="_wrapper_title_ldu5l_4",Zt="_content_ldu5l_10",Jt="_content_left_ldu5l_16",Qt="_content_right_ldu5l_19",Yt="_tools_ldu5l_45",Kt="_tools_link_ldu5l_50",es="_tools_link_active_ldu5l_63",ts="_settings_ldu5l_86",ss="_settings_title_ldu5l_89",os="_settings_content_ldu5l_94",ns="_settings_content_top_ldu5l_97",as="_settings_content_buttons_ldu5l_100",rs="_settings_content_btn_ldu5l_110",cs="_settings_content_btn_cancel_ldu5l_122",is="_settings_content_btn_save_ldu5l_125",ls="_settings_tools_ldu5l_128",_s="_settings_tools_link_ldu5l_133",ds="_settings_tools_link_active_ldu5l_148",ps="_wrapperModules_ldu5l_153",us="_item_ldu5l_160",ms="_item_top_ldu5l_165",hs="_item_top_title_ldu5l_176",gs="_item_top_arrow_ldu5l_180",bs="_item_top_arrow_active_ldu5l_188",xs="_item_block_ldu5l_191",fs="_item_block_item_ldu5l_202",vs="_item_block_open_ldu5l_205",js="_item_onOff_ldu5l_211",ks="_item_delivery_ldu5l_211",ys="_versions_block_ldu5l_217",ws="_versions_block_top_ldu5l_222",Cs="_versions_block_top_title_ldu5l_232",Ns="_versions_block_top_arrow_ldu5l_237",Is="_versions_block_top_arrow_active_ldu5l_246",Ss="_versions_block_dropdown_ldu5l_249",$s="_versions_block_dropdown_item_ldu5l_260",Ps="_versions_block_dropdown_open_ldu5l_271",Ds="_versions_block_onOff_ldu5l_277",Os="_versions_block_delivery_ldu5l_277",Bs="_categoriesDropDown_title_ldu5l_283",Ms="_categoriesDropDown_item_ldu5l_286",As="_categoriesDropDown_item_top_ldu5l_292",Es="_categoriesDropDown_item_top_title_ldu5l_303",Ws="_categoriesDropDown_item_top_arrow_ldu5l_307",Us="_categoriesDropDown_item_top_arrow_active_ldu5l_314",Ls="_categoriesDropDown_item_block_ldu5l_317",Rs="_categoriesDropDown_item_block_line_ldu5l_326",qs="_categoriesDropDown_item_block_active_ldu5l_338",zs="_categoriesDropDown_item_block_open_ldu5l_341",Fs="_categoriesDropDown_item_onOff_ldu5l_346",Ts="_categoriesDropDown_item_delivery_ldu5l_346",Vs="_products_buttons_ldu5l_352",Hs="_products_btn_ldu5l_358",Xs="_products_btn_active_ldu5l_369",Gs="_productItem_title_ldu5l_374",Zs="_productItem_basePhoto_ldu5l_379",Js="_productItem_photos_ldu5l_385",Qs="_productItem_photos_desc_ldu5l_391",Ys="_productItem_photo_ldu5l_385",Ks="_productItem_photo_img_ldu5l_406",eo="_productItem_photo_close_ldu5l_417",to="_productItem_photo_active_ldu5l_429",so="_productItem_add_ldu5l_433",oo="_productItem_add_text_ldu5l_441",no="_productItem_settings_ldu5l_446",ao="_productItem_left_info_ldu5l_450",ro="_productItem_left_item_ldu5l_458",co="_productItem_left_item_top_ldu5l_462",io="_productItem_left_item_top_input_ldu5l_483",lo="_productItem_left_item_bottom_ldu5l_489",_o="_productItem_left_form_ldu5l_502",po="_productItem_left_form_label_ldu5l_509",uo="_productItem_left_form_title_ldu5l_513",mo="_productItem_left_form_input_ldu5l_519",ho="_productItem_left_form_textarea_ldu5l_527",go="_productItem_left_form_size_ldu5l_535",bo="_productItem_right_ldu5l_543",xo="_productItem_right_item_ldu5l_550",fo="_productItem_right_top_ldu5l_555",vo="_productItem_right_title_ldu5l_562",jo="_productItem_right_bottom_items_ldu5l_568",ko="_productItem_right_bottom_items_active_ldu5l_577",yo="_productItem_right_bottom_item_ldu5l_568",wo="_productItem_right_bottom_row_ldu5l_603",Co="_productItem_right_bottom_del_ldu5l_608",No="_banner_nav_list_ldu5l_619",Io="_banner_nav_link_ldu5l_625",So="_banner_nav_link_active_ldu5l_640",$o="_addingWrapper_title_ldu5l_645",Po="_addingWrapper_form_ldu5l_650",Do="_addingWrapper_form_btn_ldu5l_655",Oo="_addingWrapper_search_ldu5l_672",Bo="_addingWrapper_search_input_ldu5l_678",Mo="_addingWrapper_search_icon_ldu5l_686",Ao="_addingWrapper_table_ldu5l_689",Eo="_addingWrapper_table_error_ldu5l_692",Wo="_addingWrapper_thead_tr_ldu5l_696",Uo="_addingWrapper_thead_th_ldu5l_700",Lo="_addingWrapper_tbody_tr_ldu5l_707",Ro="_addingWrapper_tbody_td_ldu5l_710",qo="_addingWrapper_tbody_buttons_ldu5l_724",zo="_addingWrapper_tbody_add_ldu5l_729",Fo="_addingWrapper_tbody_del_ldu5l_736",To="_errorWrapper_ldu5l_744",Vo="_errorWrapper_block_ldu5l_753",Ho="_errorWrapper_block_close_ldu5l_763",Xo="_layout_title_ldu5l_774",Go="_layout_buttons_ldu5l_779",Zo="_layout_btn_ldu5l_785",Jo="_layout_btn_active_ldu5l_799",Qo="_editBlock_ldu5l_804",Yo="_articleModal_ldu5l_816",Ko="_articleModal_block_ldu5l_825",en="_articleModal_block_nav_ldu5l_832",tn="_articleModal_block_title_ldu5l_839",sn="_articleModal_block_info_ldu5l_844",on="_articleModal_block_info_item_ldu5l_847",nn="_articleModal_block_recommended_ldu5l_862",an="_articleModal_block_recommended_title_ldu5l_865",rn="_articleModal_block_recommended_item_ldu5l_871",cn="_articleModal_block_recommended_item_title_ldu5l_875",ln="_articleModal_block_recommended_content_ldu5l_881",_n="_articleModal_block_recommended_img_ldu5l_886",dn="_articleModal_block_recommended_info_ldu5l_896",pn="_articleModal_block_recommended_desc_ldu5l_901",un="_articleModal_block_recommended_article_ldu5l_915",mn="_articleModal_block_search_ldu5l_920",hn="_articleModal_block_search_box_ldu5l_923",gn="_articleModal_block_search_input_ldu5l_928",bn="_articleModal_block_search_btn_ldu5l_940",xn="_articleModal_block_found_ldu5l_950",fn="_articleModal_block_buttonBox_ldu5l_956",vn="_articleModal_block_button_ldu5l_956",jn="_homePage_wrapper_title_ldu5l_973",kn="_homePage_blocks_ldu5l_983",yn="_homePage_addBlock_ldu5l_989",wn="_homePage_addBlock_title_ldu5l_1006",Cn="_homePage_addBlock_active_ldu5l_1009",Nn="_homePage_addBlockItem_ldu5l_1013",In="_homePage_addBlockItem_close_ldu5l_1022",Sn="_homePage_addBlockItem_super_ldu5l_1028",$n="_homePage_addBlockItem_super_title_ldu5l_1032",Pn="_homePage_addBlockItem_super_block_ldu5l_1037",Dn="_homePage_addBlockItem_super_item_ldu5l_1062",On="_homePage_addBlockItem_content_ldu5l_1078",Bn="_homePage_addBlockItem_categories_ldu5l_1102",Mn="_homePage_delModal_ldu5l_1109",An="_homePage_delModal_block_ldu5l_1119",En="_homePage_delModal_buttons_ldu5l_1129",Wn="_homePage_delModal_btn_ldu5l_1139",Un="_homePage_delModal_del_ldu5l_1148",Ln="_homePage_delModal_cancel_ldu5l_1151",c={wrapper:Xt,wrapper_title:Gt,content:Zt,content_left:Jt,content_right:Qt,tools:Yt,tools_link:Kt,tools_link_active:es,settings:ts,settings_title:ss,settings_content:os,settings_content_top:ns,settings_content_buttons:as,settings_content_btn:rs,settings_content_btn_cancel:cs,settings_content_btn_save:is,settings_tools:ls,settings_tools_link:_s,settings_tools_link_active:ds,wrapperModules:ps,item:us,item_top:ms,item_top_title:hs,item_top_arrow:gs,item_top_arrow_active:bs,item_block:xs,item_block_item:fs,item_block_open:vs,item_onOff:js,item_delivery:ks,versions_block:ys,versions_block_top:ws,versions_block_top_title:Cs,versions_block_top_arrow:Ns,versions_block_top_arrow_active:Is,versions_block_dropdown:Ss,versions_block_dropdown_item:$s,versions_block_dropdown_open:Ps,versions_block_onOff:Ds,versions_block_delivery:Os,categoriesDropDown_title:Bs,categoriesDropDown_item:Ms,categoriesDropDown_item_top:As,categoriesDropDown_item_top_title:Es,categoriesDropDown_item_top_arrow:Ws,categoriesDropDown_item_top_arrow_active:Us,categoriesDropDown_item_block:Ls,categoriesDropDown_item_block_line:Rs,categoriesDropDown_item_block_active:qs,categoriesDropDown_item_block_open:zs,categoriesDropDown_item_onOff:Fs,categoriesDropDown_item_delivery:Ts,products_buttons:Vs,products_btn:Hs,products_btn_active:Xs,productItem_title:Gs,productItem_basePhoto:Zs,productItem_photos:Js,productItem_photos_desc:Qs,productItem_photo:Ys,productItem_photo_img:Ks,productItem_photo_close:eo,productItem_photo_active:to,productItem_add:so,productItem_add_text:oo,productItem_settings:no,productItem_left_info:ao,productItem_left_item:ro,productItem_left_item_top:co,productItem_left_item_top_input:io,productItem_left_item_bottom:lo,productItem_left_form:_o,productItem_left_form_label:po,productItem_left_form_title:uo,productItem_left_form_input:mo,productItem_left_form_textarea:ho,productItem_left_form_size:go,productItem_right:bo,productItem_right_item:xo,productItem_right_top:fo,productItem_right_title:vo,productItem_right_bottom_items:jo,productItem_right_bottom_items_active:ko,productItem_right_bottom_item:yo,productItem_right_bottom_row:wo,productItem_right_bottom_del:Co,banner_nav_list:No,banner_nav_link:Io,banner_nav_link_active:So,addingWrapper_title:$o,addingWrapper_form:Po,addingWrapper_form_btn:Do,addingWrapper_search:Oo,addingWrapper_search_input:Bo,addingWrapper_search_icon:Mo,addingWrapper_table:Ao,addingWrapper_table_error:Eo,addingWrapper_thead_tr:Wo,addingWrapper_thead_th:Uo,addingWrapper_tbody_tr:Lo,addingWrapper_tbody_td:Ro,addingWrapper_tbody_buttons:qo,addingWrapper_tbody_add:zo,addingWrapper_tbody_del:Fo,errorWrapper:To,errorWrapper_block:Vo,errorWrapper_block_close:Ho,layout_title:Xo,layout_buttons:Go,layout_btn:Zo,layout_btn_active:Jo,editBlock:Qo,articleModal:Yo,articleModal_block:Ko,articleModal_block_nav:en,articleModal_block_title:tn,articleModal_block_info:sn,articleModal_block_info_item:on,articleModal_block_recommended:nn,articleModal_block_recommended_title:an,articleModal_block_recommended_item:rn,articleModal_block_recommended_item_title:cn,articleModal_block_recommended_content:ln,articleModal_block_recommended_img:_n,articleModal_block_recommended_info:dn,articleModal_block_recommended_desc:pn,articleModal_block_recommended_article:un,articleModal_block_search:mn,articleModal_block_search_box:hn,articleModal_block_search_input:gn,articleModal_block_search_btn:bn,articleModal_block_found:xn,articleModal_block_buttonBox:fn,articleModal_block_button:vn,homePage_wrapper_title:jn,homePage_blocks:kn,homePage_addBlock:yn,homePage_addBlock_title:wn,homePage_addBlock_active:Cn,homePage_addBlockItem:Nn,homePage_addBlockItem_close:In,homePage_addBlockItem_super:Sn,homePage_addBlockItem_super_title:$n,homePage_addBlockItem_super_block:Pn,homePage_addBlockItem_super_item:Dn,homePage_addBlockItem_content:On,homePage_addBlockItem_categories:Bn,homePage_delModal:Mn,homePage_delModal_block:An,homePage_delModal_buttons:En,homePage_delModal_btn:Wn,homePage_delModal_del:Un,homePage_delModal_cancel:Ln},Rn="_versions_1cgvq_1",qn="_versions_block_1cgvq_6",zn="_versions_block_top_1cgvq_11",Fn="_versions_block_top_title_1cgvq_21",Tn="_versions_block_top_arrow_1cgvq_25",Vn="_versions_block_top_arrow_active_1cgvq_34",Hn="_versions_block_dropdown_1cgvq_37",Xn="_versions_block_dropdown_item_1cgvq_49",Gn="_versions_block_dropdown_open_1cgvq_60",Zn="_versions_block_onOff_1cgvq_66",Jn="_versions_block_delivery_1cgvq_66",Qn="_versions2_1cgvq_72",Yn="_versions2_block_1cgvq_77",Kn="_versions2_block_top_1cgvq_82",ea="_versions2_block_top_title_1cgvq_92",ta="_versions2_block_top_arrow_1cgvq_96",sa="_versions2_block_top_arrow_active_1cgvq_105",oa="_versions2_block_dropdown_1cgvq_108",na="_versions2_block_dropdown_item_1cgvq_119",aa="_versions2_block_dropdown_open_1cgvq_130",ra="_versions2_block_onOff_1cgvq_136",ca="_versions2_block_delivery_1cgvq_136",ia="_version3_1cgvq_142",la="_version3_title_1cgvq_147",_a="_version3_block_1cgvq_153",da="_version3_block_top_1cgvq_158",pa="_version3_block_top_title_1cgvq_169",ua="_version3_block_top_arrow_1cgvq_173",ma="_version3_block_top_arrow_active_1cgvq_183",ha="_version3_block_dropdown_1cgvq_186",ga="_version3_block_dropdown_item_1cgvq_197",ba="_version3_block_dropdown_open_1cgvq_213",xa="_version3_block_onOff_1cgvq_237",fa="_version3_block_delivery_1cgvq_237",va="_versionExtraOptions_1cgvq_243",ja="_versionExtraOptions_title_1cgvq_248",ka="_versionExtraOptions_block_1cgvq_254",ya="_versionExtraOptions_block_top_1cgvq_259",wa="_versionExtraOptions_block_top_title_1cgvq_270",Ca="_versionExtraOptions_block_top_arrow_1cgvq_275",Na="_versionExtraOptions_block_top_arrow_active_1cgvq_285",Ia="_versionExtraOptions_block_dropdown_1cgvq_288",Sa="_versionExtraOptions_block_dropdown_item_1cgvq_299",$a="_versionExtraOptions_block_dropdown_open_1cgvq_316",Pa="_versionExtraOptions_block_onOff_1cgvq_340",Da="_versionExtraOptions_block_delivery_1cgvq_340",L={versions:Rn,versions_block:qn,versions_block_top:zn,versions_block_top_title:Fn,versions_block_top_arrow:Tn,versions_block_top_arrow_active:Vn,versions_block_dropdown:Hn,versions_block_dropdown_item:Xn,versions_block_dropdown_open:Gn,versions_block_onOff:Zn,versions_block_delivery:Jn,versions2:Qn,versions2_block:Yn,versions2_block_top:Kn,versions2_block_top_title:ea,versions2_block_top_arrow:ta,versions2_block_top_arrow_active:sa,versions2_block_dropdown:oa,versions2_block_dropdown_item:na,versions2_block_dropdown_open:aa,versions2_block_onOff:ra,versions2_block_delivery:ca,version3:ia,version3_title:la,version3_block:_a,version3_block_top:da,version3_block_top_title:pa,version3_block_top_arrow:ua,version3_block_top_arrow_active:ma,version3_block_dropdown:ha,version3_block_dropdown_item:ga,version3_block_dropdown_open:ba,version3_block_onOff:xa,version3_block_delivery:fa,versionExtraOptions:va,versionExtraOptions_title:ja,versionExtraOptions_block:ka,versionExtraOptions_block_top:ya,versionExtraOptions_block_top_title:wa,versionExtraOptions_block_top_arrow:Ca,versionExtraOptions_block_top_arrow_active:Na,versionExtraOptions_block_dropdown:Ia,versionExtraOptions_block_dropdown_item:Sa,versionExtraOptions_block_dropdown_open:$a,versionExtraOptions_block_onOff:Pa,versionExtraOptions_block_delivery:Da};function at({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:i,setOpenBlock:p,setCurrentVersion:r,setVersionList:_}){const l=d=>{r(d.title);const m=s.map(x=>({id:x.id,title:x.title,isActive:!1})),g=m.find(x=>x.id==d.id),h=m.findIndex(x=>x.id==d.id);g&&(g.isActive=!0,m.splice(h,1,g),_(m))};return e.jsxs("div",{className:a??L.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:L.versions_block,children:[e.jsxs("div",{className:L.versions_block_top,children:[e.jsx("h2",{className:L.versions_block_top_title,style:{color:o},children:i}),e.jsx("button",{className:L.versions_block_top_btn,onClick:()=>p(!n),children:e.jsx("div",{className:`${L.versions_block_top_arrow} ${n?L.versions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${L.versions_block_dropdown} ${n?L.versions_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:L.versions_block_dropdown_item,onClick:()=>l(d),children:d.title},d.id))})]})]})}function Oa(){const{modulesCashRegisterStatus:o,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:a,openBlockCashRegister:n,openBlockCashRegisterVersion:i,openBlockCart:p,cartVersionList:r,modulesCartStatus:_,cartCurrentVersion:l,openBlockCartVersion:d,setCartVersionList:m,setCartCurrentVersion:g,setModulesCartStatus:h,setOpenBlockCart:x,setOpenBlockCartVersion:f,setDeliveryStatus:y,setOpenBlockCashRegister:$,setCashRegisterVersionList:N,setModulesCashRegisterStatus:O,setCashRegisterCurrentVersion:P,setOpenBlockCashRegisterVersion:j}=le(),v=()=>{x(!p)},b=()=>{$(!n)};return e.jsxs("div",{className:c.wrapperModules,children:[e.jsxs("div",{className:c.item,children:[e.jsxs("div",{className:c.item_top,onClick:()=>v(),children:[e.jsx("h2",{className:c.item_top_title,children:"Корзина"}),e.jsx("button",{className:c.item_top_btn,onClick:()=>v(),children:e.jsx("div",{className:`${c.item_top_arrow} ${p?c.item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${c.item_block} ${p?c.item_block_open:""}`,children:[e.jsxs("div",{className:c.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:c.item_shell,onClick:()=>h(!_),children:e.jsx(Ne,{status:_,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(at,{color:"rgb(137, 250, 135)",openBlock:d,setOpenBlock:f,title:"Выберите версию",versionList:r,currentVersion:l,setCurrentVersion:g,setVersionList:m}),e.jsxs("div",{className:c.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:c.item_shell,onClick:()=>y(!t),children:e.jsx(Ne,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:c.item,children:[e.jsxs("div",{className:c.item_top,onClick:()=>b(),children:[e.jsx("h2",{className:c.item_top_title,children:"Кacca"}),e.jsx("button",{className:c.item_top_btn,onClick:()=>b(),children:e.jsx("div",{className:`${c.item_top_arrow} ${n?c.item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${c.item_block} ${n?c.item_block_open:""}`,children:[e.jsxs("div",{className:c.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:c.item_shell,onClick:()=>O(!o),children:e.jsx(Ne,{status:o,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(at,{color:"rgb(137, 250, 135)",openBlock:i,setOpenBlock:j,title:"Выберите версию",versionList:s,currentVersion:a,setCurrentVersion:P,setVersionList:N})]})]})]})}function Ba(){const{templates:o,setTemplates:t}=le(),[s,a]=u.useState([...o]);u.useEffect(()=>{a([...o])},[o]);const n=r=>{const _=s.map(l=>l.id===r?{...l,open:!l.open}:l);a(_)},i=(r,_)=>{const l=s.map(d=>d.id===r?{...d,isActive:!0,templateThemes:d.templateThemes.map(m=>m.id===_?{...m,isActive:!0}:{...m,isActive:!1})}:{...d,isActive:!1,templateThemes:d.templateThemes.map(m=>({...m,isActive:!1}))});a(l)};function p(){t(s)}return e.jsxs("div",{className:c.wrapperModules,children:[s.map(r=>e.jsxs("div",{className:c.item,children:[e.jsxs("div",{className:c.item_top,onClick:()=>n(r.id),children:[e.jsx("h2",{className:c.item_top_title,children:r.title}),e.jsx("button",{className:c.item_top_btn,onClick:()=>n(r.id),children:e.jsx("div",{className:`${c.item_top_arrow} ${r.open?c.item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${c.item_block} ${r.open?c.item_block_open:""}`,children:r.templateThemes.map(_=>e.jsxs("div",{className:c.item_onOff,children:[e.jsx("span",{children:_.title}),e.jsx("div",{className:c.item_shell,onClick:()=>i(r.id,_.id),children:e.jsx(Ne,{status:_.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},_.id))})]},r.id)),e.jsxs("div",{className:c.settings_content_buttons,children:[e.jsx("button",{className:`${c.settings_content_btn} ${c.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${c.settings_content_btn} ${c.settings_content_btn_save}`,onClick:()=>p(),children:"Сохранить"})]})]})}function Ma({title:o,setOpenModal:t}){const{currentCategory:s}=le(),[a,n]=u.useState(""),{selectedSuperCategory:i,selectedCategory:p}=Fe();u.useEffect(()=>{s=="Котегории"&&i&&r(i),s=="Подкотегории"&&p&&r(p)},[s,i,p]);const r=async l=>{try{const m=await(await ze.get(`https://api.mcrm.uz/api/categories/${l}`)).data;n(m.name.ru)}catch(d){console.error("Ошибка произошла при получении названия варианта категории",d)}},_=()=>{t&&t(!0)};return e.jsxs("div",{className:c.editBlock,onClick:_,children:[a||o,e.jsx(E,{name:"PencilIcon"})]})}const Aa="_modalCategory_xzv82_1",Ea="_modalCategory_block_xzv82_10",Wa="_modalCategory_nav_xzv82_16",Ua="_modalCategory_nav_title_xzv82_23",La="_modalCategory_content_xzv82_29",Ra="_modalCategory_content_message_xzv82_36",qa="_modalCategory_content_link_xzv82_44",za="_modalCategory_content_link_active_xzv82_72",Fa="_modalCategory_content_item_xzv82_82",Ta="_modalCategory_content_block_xzv82_104",Va="_modalCategory_content_block_title_xzv82_108",Ha="_settings_xzv82_115",Xa="_settings_title_xzv82_118",Ga="_settings_content_xzv82_123",Za="_settings_content_top_xzv82_126",Ja="_settings_content_buttons_xzv82_129",Qa="_settings_content_btn_xzv82_139",Ya="_settings_content_btn_cancel_xzv82_151",Ka="_settings_content_btn_save_xzv82_154",er="_settings_tools_xzv82_157",tr="_settings_tools_link_xzv82_162",sr="_settings_tools_link_active_xzv82_177",ne={modalCategory:Aa,modalCategory_block:Ea,modalCategory_nav:Wa,modalCategory_nav_title:Ua,modalCategory_content:La,modalCategory_content_message:Ra,modalCategory_content_link:qa,modalCategory_content_link_active:za,modalCategory_content_item:Fa,modalCategory_content_block:Ta,modalCategory_content_block_title:Va,settings:Ha,settings_title:Xa,settings_content:Ga,settings_content_top:Za,settings_content_buttons:Ja,settings_content_btn:Qa,settings_content_btn_cancel:Ya,settings_content_btn_save:Ka,settings_tools:er,settings_tools_link:tr,settings_tools_link_active:sr};function or({setCancel:o}){return e.jsxs("div",{className:ne.modalCategory_nav,children:[e.jsx("h2",{className:ne.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:ne.modalCategory_nav_close,onClick:o,children:e.jsx(E,{width:24,height:24,name:"XMarkIcon"})})]})}function nr({superCategory:o,category:t,setMessageStatus:s,fetchCategories:a}){const{currentCategory:n}=le(),{selectedSuperCategory:i,setSelectedSuperCategory:p}=Fe(),{setCurrentCategory:r}=ve(),[_,l]=u.useState(10),d=(g,h)=>{if(g.preventDefault(),n==="Подкотегории"){a("category",1,10,h.id);const x=t.filter(f=>f.parentId==h.id);r(x),p(h.id),s(!1)}p(h.id)},m=g=>{g.preventDefault();const h=_+10;l(h),a("super",1,h)};return e.jsxs("div",{className:ne.modalCategory_content_block,children:[e.jsx("h2",{className:ne.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:ne.modalCategory_content_item,children:[o.map(g=>e.jsxs(H,{to:"#",className:`${ne.modalCategory_content_link} ${g.id==i?ne.modalCategory_content_link_active:""} `,onClick:h=>d(h,g),children:[g.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},g.id)),e.jsx(H,{to:"#",className:ne.modalCategory_content_link,onClick:g=>m(g),children:"Ещё..."})]})]})}function ar({categoryId:o,category:t,setCategoryId:s,setSubCategory:a,fetchCategories:n}){const{selectedSuperCategory:i}=Fe(),[p,r]=u.useState(10),_=d=>{d.preventDefault();const m=p+10;r(m),n("category",1,m,i)},l=(d,m)=>{a(d,m),s(m.id)};return t.length>0&&e.jsxs("div",{className:ne.modalCategory_content_block,children:[e.jsx("h2",{className:ne.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:ne.modalCategory_content_item,children:[t==null?void 0:t.map(d=>e.jsxs(H,{to:"#",className:`${ne.modalCategory_content_link} ${d.id==o?ne.modalCategory_content_link_active:""} `,onClick:m=>l(m,d),children:[d.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},d.id)),e.jsx(H,{to:"#",className:ne.modalCategory_content_link,onClick:d=>_(d),children:"Ещё..."})]})]})}function rr({setSettings:o,setCancel:t}){return e.jsxs("div",{className:ne.settings_content_buttons,children:[e.jsx("button",{className:`${ne.settings_content_btn} ${ne.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(H,{to:"#",className:`${ne.settings_content_btn} ${ne.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function cr({setOpenModal:o}){const{currentCategory:t}=le(),{selectedSuperCategory:s,setSelectedSuperCategory:a,selectedCategory:n,setSelectedCategory:i}=Fe(),[p,r]=u.useState(0),[_,l]=u.useState(!1),[d,m]=u.useState("Выберите категорию"),[g,h]=u.useState([]),[x,f]=u.useState([]);u.useEffect(()=>{O("super",1,10),n&&r(n)},[]);const y=(j,v)=>{j.preventDefault(),O("subCategory",1,10,v.id),l(!1)},$=()=>{t=="Котегории"?a(s):t=="Подкотегории"&&i(p),N()},N=()=>{l(!1),m("Выберите категорию"),o(!1)},O=async(j,v,b,w)=>{try{const k=j=="super"?`https://api.mcrm.uz/api/categories?&page=${v}&perPage=${b}`:`https://api.mcrm.uz/api/categories?parentId=${w}&page=${v}&perPage=${b}`,A=(await ze.get(k)).data.data.map(te=>({...te,label:j==="super"?"Супер категория":j==="category"?"Категория":"Субкатегория"}));j==="super"&&h([...A]),j==="category"&&f([...A])}catch(k){console.error(`Ошибка произошла при получении ${j} категорий`,k)}},P=()=>{o(!1)};return e.jsx("div",{className:ne.modalCategory,onClick:P,children:e.jsxs("div",{className:ne.modalCategory_block,onClick:j=>j.stopPropagation(),children:[e.jsx(or,{setCancel:N}),e.jsx("p",{className:ne.modalCategory_content_message,children:_?d:""}),e.jsxs("div",{className:ne.modalCategory_content,children:[e.jsx(nr,{superCategory:g,category:x,setMessageStatus:l,fetchCategories:O}),t==="Подкотегории"&&e.jsx(ar,{categoryId:p,category:x,setCategoryId:r,setSubCategory:y,fetchCategories:O}),e.jsx(rr,{setSettings:$,setCancel:N})]})]})})}function ir(){const[o,t]=u.useState(!1),[s,a]=u.useState(!1),{currentCategory:n,categoriesStatus:i,categories:p,setCategoriesStatus:r,setCurrentCategory:_}=le();u.useEffect(()=>{t(n==="Котегории"||n==="Подкотегории")},[n]);const l=d=>{_(d.title),d.title==="Котегории"||d.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:c.categoriesDropDown,children:[e.jsx("h2",{className:c.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(cr,{setOpenModal:a}),e.jsxs("div",{className:c.categoriesDropDown_item,children:[e.jsxs("div",{className:c.categoriesDropDown_item_top,onClick:()=>r(!i),children:[e.jsx("h2",{className:c.categoriesDropDown_item_top_title,children:n}),e.jsx("button",{className:c.categoriesDropDown_item_top_btn,onClick:()=>r(!i),children:e.jsx("div",{className:`${c.categoriesDropDown_item_top_arrow} ${i?c.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${c.categoriesDropDown_item_block} ${i?c.categoriesDropDown_item_block_open:""}`,children:p.map(d=>e.jsx("div",{className:`${c.categoriesDropDown_item_block_line} ${d.title==n?c.categoriesDropDown_item_block_active:""}`,onClick:()=>l(d),children:d.title},d.id))})]}),o&&e.jsx(Ma,{title:"Выберите вариант",setOpenModal:a})]})}const lr="_banner_xoj3o_1",_r="_banner_title_xoj3o_6",dr="_products_banner_xoj3o_11",pr="_products_banner_wrap_xoj3o_14",ur="_products_banner_wrap_btn_xoj3o_20",mr="_products_banner_wrap_filter_xoj3o_31",hr="_products_banner_wrap_filter_text_xoj3o_41",gr="_products_banner_form_xoj3o_49",br="_products_banner_form_wrap_xoj3o_54",xr="_products_banner_form_wrap_btn_xoj3o_60",fr="_products_banner_form_wrap_input_xoj3o_76",vr="_products_banner_form_wrap_icon_xoj3o_84",jr="_table_xoj3o_88",kr="_table_tbody_xoj3o_93",yr="_table_tbody_tr_xoj3o_98",wr="_table_tbody_tr_active_xoj3o_101",Cr="_table_tbody_img_xoj3o_104",Nr="_table_tr_xoj3o_109",Ir="_table_th_xoj3o_112",Sr="_table_td_xoj3o_123",$r="_table_td_edit_xoj3o_131",Pr="_table_btn_xoj3o_137",Dr="_versions_xoj3o_145",Or="_versions_block_xoj3o_150",Br="_versions_block_top_xoj3o_155",Mr="_versions_block_top_title_xoj3o_165",Ar="_versions_block_top_arrow_xoj3o_169",Er="_versions_block_top_arrow_active_xoj3o_178",Wr="_versions_block_dropdown_xoj3o_181",Ur="_versions_block_dropdown_item_xoj3o_196",Lr="_versions_block_dropdown_open_xoj3o_207",Rr="_add_banner_xoj3o_214",qr="_add_banner_header_xoj3o_222",zr="_add_banner_header_title_xoj3o_226",Fr="_add_banner_content_xoj3o_230",Tr="_add_banner_content_product_xoj3o_233",Vr="_add_banner_content_link_xoj3o_255",Hr="_add_banner_content_info_xoj3o_263",Xr="_add_banner_content_info_text_xoj3o_267",Gr="_add_banner_content_download_xoj3o_273",Zr="_add_banner_content_download_link_xoj3o_281",Jr="_add_banner_content_btns_xoj3o_293",Qr="_add_banner_content_btn_xoj3o_293",Yr="_category_wrap_xoj3o_311",Kr="_modalCategory_xoj3o_315",ec="_modalCategory_block_xoj3o_323",tc="_modalCategory_nav_xoj3o_328",sc="_modalCategory_nav_title_xoj3o_335",oc="_modalCategory_content_xoj3o_341",nc="_modalCategory_content_message_xoj3o_348",ac="_modalCategory_content_link_xoj3o_356",rc="_modalCategory_content_link_active_xoj3o_384",cc="_modalCategory_content_item_xoj3o_394",ic="_modalCategory_content_block_xoj3o_416",lc="_modalCategory_content_block_title_xoj3o_420",_c="_add_link_xoj3o_427",dc="_add_link_title_xoj3o_430",pc="_add_link_input_xoj3o_434",uc="_modal_btn_xoj3o_443",I={banner:lr,banner_title:_r,products_banner:dr,products_banner_wrap:pr,products_banner_wrap_btn:ur,products_banner_wrap_filter:mr,products_banner_wrap_filter_text:hr,products_banner_form:gr,products_banner_form_wrap:br,products_banner_form_wrap_btn:xr,products_banner_form_wrap_input:fr,products_banner_form_wrap_icon:vr,table:jr,table_tbody:kr,table_tbody_tr:yr,table_tbody_tr_active:wr,table_tbody_img:Cr,table_tr:Nr,table_th:Ir,table_td:Sr,table_td_edit:$r,table_btn:Pr,versions:Dr,versions_block:Or,versions_block_top:Br,versions_block_top_title:Mr,versions_block_top_arrow:Ar,versions_block_top_arrow_active:Er,versions_block_dropdown:Wr,versions_block_dropdown_item:Ur,versions_block_dropdown_open:Lr,add_banner:Rr,add_banner_header:qr,add_banner_header_title:zr,add_banner_content:Fr,add_banner_content_product:Tr,add_banner_content_link:Vr,add_banner_content_info:Hr,add_banner_content_info_text:Xr,add_banner_content_download:Gr,add_banner_content_download_link:Zr,add_banner_content_btns:Jr,add_banner_content_btn:Qr,category_wrap:Yr,modalCategory:Kr,modalCategory_block:ec,modalCategory_nav:tc,modalCategory_nav_title:sc,modalCategory_content:oc,modalCategory_content_message:nc,modalCategory_content_link:ac,modalCategory_content_link_active:rc,modalCategory_content_item:cc,modalCategory_content_block:ic,modalCategory_content_block_title:lc,add_link:_c,add_link_title:dc,add_link_input:pc,modal_btn:uc};function xt({color:o="black",title:t="",versionList:s=[],className:a,openBlock:n,setOpenBlock:i,setVersionList:p}){const[r,_]=u.useState(s[0].title),{setChangeCategoryStyles:l}=be(),d=m=>{const g=s.map(h=>({...h,isOpen:h.id===m.id}));m.title=="Категория"&&l(!0),_(m.title),p(g),i(!1)};return e.jsxs("div",{className:a??I.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:I.versions_block,children:[e.jsxs("div",{className:I.versions_block_top,onClick:()=>i(!n),style:{cursor:"pointer"},children:[e.jsx("h2",{className:I.versions_block_top_title,style:{color:o},children:r}),e.jsx("button",{className:I.versions_block_top_btn,children:e.jsx("div",{className:`${I.versions_block_top_arrow} ${n?I.versions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${I.versions_block_dropdown} ${n?I.versions_block_dropdown_open:""}`,children:s.map(m=>e.jsx(H,{className:I.versions_block_dropdown_item,to:m.href,onClick:()=>d(m),children:m.title},m.id))})]})]})}function Je({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:i=1.1,status:p=!1}){const r={width:`${o}px`,height:`${o/2-o/20}px`,background:p?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},_={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${p?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${i}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:_})})}const Ae=({arr:o=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:a=!1,isEdit:n=!1,isCategory:i,isLinks:p,setArrToUse:r,setPickedProduct:_,setPickedProductActive:l,bannersArrProduct:d})=>{const{selectedProductId:m,setSelectedProductId:g,setCurrentProductOpen:h,clearPickedProductsArr:x,setOpenAddBanner:f}=be(),[y,$]=u.useState(null),N=b=>d==null?void 0:d.some(w=>w.type_id===b),O=async(b,w)=>{if(s==="byId"&&(_==null||_(b)),n&&w)try{if(!N(w==null?void 0:w.id)){const A=await(await T.patch(`web-banners/${m}`,{typeId:b})).data;console.log("data",A);const te=d==null?void 0:d.map(V=>V.id===m?A:V);h(!1),r==null||r(te)}}catch(k){console.log(k)}$(b)},P=(b,w)=>{s==="productId"&&(f(!0),l==null||l(b),O==null||O(b),$(b),x(),g(b))},j=b=>b.typeId!==void 0,v=async(b,w,k)=>{b.stopPropagation();try{await T.patch(`web-banners/${w}`,{isActive:!k.isActive})}catch(A){console.log(A)}const C=t.map(A=>A.id===w?{...A,isActive:!A.isActive}:A);r==null||r(C)};return e.jsxs("table",{className:I.table,children:[e.jsx("thead",{className:I.table_thead,children:e.jsx("tr",{className:I.table_tr,children:o.map(b=>e.jsx("th",{className:I.table_th,children:b.title},b.id))})}),e.jsx("tbody",{className:I.table_tbody,children:t==null?void 0:t.map(b=>{var w;return e.jsxs("tr",{className:`${I.table_tbody_tr}
            ${!n&&y==b.id?I.table_tbody_tr_active:""}
            `,style:{cursor:a||i||p?"pointer":"default"},onClick:()=>P(b.id),children:[e.jsx("td",{className:I.table_td,children:e.jsxs("div",{style:{width:"70px",height:"40px"},children:[s==="byId"&&(b==null?void 0:b.title),n?b.title:"",a&&e.jsx("img",{className:I.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),i&&e.jsx("img",{className:I.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),p&&e.jsx("img",{className:I.table_tbody_img,src:b.image??"",alt:"Banner"})]})}),e.jsxs("td",{className:I.table_td,children:[i?b.title:"",a?b.title:(w=b.nomenclature)==null?void 0:w.price,p&&b.title]}),e.jsx("td",{className:I.table_td,children:a?"":b.crmAmount}),e.jsx("td",{className:I.table_td,children:i?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:k=>{const C=b;C.id&&v(k,C.id,C)},children:e.jsx(Je,{width:62,status:b.isActive})}):a?e.jsx("div",{className:I.table_td_edit,children:e.jsx("div",{onClick:k=>{const C=b;C.id&&v(k,C.id,C)},children:e.jsx(Je,{width:62,status:b.isActive})})}):p?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:k=>{const C=b;C.id&&v(k,C.id,C)},children:e.jsx(Je,{width:62,status:b.isActive})}):e.jsx("button",{className:I.table_btn,onClick:()=>O(b.id,b),children:n?"Заменить":"Выбрать"})})]},j(b)?b.typeId:b.id)})})]})};function mc({setCancel:o}){return e.jsxs("div",{className:K.modalCategory_nav,children:[e.jsx("h2",{className:K.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:K.modalCategory_nav_close,onClick:o,children:e.jsx(E,{width:24,height:24,name:"XMarkIcon"})})]})}function hc({superCategory:o,category:t,superId:s,setLocalPicked:a,setSuperId:n,setMessageStatus:i,setSubCategories:p,fetchCategories:r,setSuperCategoryObj:_,getBannersItems:l}){const{changeCategoryStyles:d,categoriesArr:m,setCategoriesArr:g,setActiveCategory:h,setActiveCategoryTitle:x,setOpenAddBanner:f}=be(),{setCurrentCategory:y}=ve(),[$,N]=u.useState(10),O=(j,v)=>{j.preventDefault(),r("category",1,10,v.id),p([]);const b=t.filter(w=>w.parentId==v.id);if(y(b),a(v),n(v.id),i(!1),d&&v.label&&(h(v),x(v.name.ru)),d){const w=m.filter(k=>k.label!==v.label);w.push(v),g(w)}_==null||_(v),f(!0),l==null||l()},P=()=>{const j=$+10;N(j),r("super",1,j),console.log("addPage",j)};return e.jsxs("div",{className:K.modalCategory_content_block,children:[e.jsx("h2",{className:K.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:K.modalCategory_content_item,children:[o.map(j=>e.jsxs(H,{to:"#",className:`${K.modalCategory_content_link} ${j.id==s?K.modalCategory_content_link_active:""} `,onClick:v=>O(v,j),children:[j.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},j.id)),e.jsx(H,{to:"#",className:K.modalCategory_content_link,onClick:()=>P(),children:"Ещё..."})]})]})}function gc({superId:o,categoryId:t,category:s,setSubCategory:a,fetchCategories:n}){const[i,p]=u.useState(10),r=()=>{const l=i+10;p(l),n("category",1,l,o),console.log("addPage",l,o)},_=(l,d)=>{a(l,d)};return s.length>0&&e.jsxs("div",{className:K.modalCategory_content_block,children:[e.jsx("h2",{className:K.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:K.modalCategory_content_item,children:[s==null?void 0:s.map(l=>e.jsxs(H,{to:"#",className:`${K.modalCategory_content_link} ${l.id==t?K.modalCategory_content_link_active:""} `,onClick:d=>_(d,l),children:[l.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id)),e.jsx(H,{to:"#",className:K.modalCategory_content_link,onClick:()=>r(),children:"Ещё..."})]})]})}function bc({subId:o,categoryId:t,subCategories:s,setSubProductsList:a,fetchCategories:n}){const[i,p]=u.useState(10),r=()=>{const _=i+10;p(_),n("subCategory",1,_,t),console.log("addPage",_)};return s.length>0&&e.jsxs("div",{className:K.modalCategory_content_block,children:[e.jsx("h2",{className:K.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:K.modalCategory_content_item,children:[s==null?void 0:s.map(_=>e.jsxs(H,{to:"#",className:`${K.modalCategory_content_link} ${_.id==o?K.modalCategory_content_link_active:""} `,onClick:l=>a(l,_),children:[_.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},_.id)),e.jsx(H,{to:"#",className:K.modalCategory_content_link,onClick:()=>r(),children:"Ещё..."})]})]})}function xc({setSettings:o,setCancel:t}){return e.jsxs("div",{className:K.settings_content_buttons,children:[e.jsx("button",{className:`${K.settings_content_btn} ${K.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${K.settings_content_btn} ${K.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function Ve({isProduct:o,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:a,setCurrentCategory:n,setCurrentSubCategory:i}=ve(),{changeCategoryStyles:p,categoriesArr:r,pickedProducts:_,setCategoriesArr:l,setPickedProducts:d,setActiveCategory:m,setActiveCategoryTitle:g,setBannersArr1:h,bannersArr1:x,setOpenModalCategoryBanner:f}=be(),y=p?I:K,[$,N]=u.useState(0),[O,P]=u.useState(0),[j,v]=u.useState(0),[b,w]=u.useState({}),[k,C]=u.useState(!1),[A,te]=u.useState("Выберите категорию"),[V,G]=u.useState([]),[he,ye]=u.useState([]),[fe,X]=u.useState([]),[z,Z]=u.useState(null),[ee,ae]=u.useState(null),[R,S]=u.useState(null);u.useEffect(()=>{console.log("pickedProducts",_)},[_]),u.useEffect(()=>{ke("super",1,10)},[]);const[oe]=u.useState(1),[_e]=u.useState(10);async function ue(){const Q=ge.get("multi-store");try{const q=await T.get(`web-banners?multiStoreId=${Q}&page=${oe}&perPage=${_e}`);h(q.data.data),console.log("bannersArr1",x)}catch(q){console.log("error",q)}}const we=(Q,q)=>{Q.preventDefault(),ke("subCategory",1,10,q.id);const Y=fe.filter(J=>J.parentId==q.id);if(i(Y),w(q),P(q.id),C(!1),p&&q.label&&(m(q),g(q.name.ru)),p){const J=r.filter(Oe=>Oe.label!==q.label);J.push(q),l(J)}ae(q),ue()},Ce=(Q,q)=>{if(Q.preventDefault(),w(q),v(q.id),C(!1),p&&q.label&&(m(q),g(q.name.ru)),p){const Y=r.filter(J=>J.name.ru!==q.name.ru);Y.push(q),console.log("newCategories",Y),l(Y)}S(q),ue()};async function re(Q){const q=ge.get("multi-store");try{const Y=await T.get(`web-nomenclatures?multiStoreId=${q}&categoryId=${Q}&page=${oe}&perPage=${_e}`);d(Y.data.data)}catch(Y){console.log("error",Y)}}const me=()=>{if(Object.keys(b).length===0){C(!0),te("Выберите Суперкотегорию");return}if(he.length>0&&O===0){C(!0),te("Выберите Категорию");return}if(fe.length>0&&j===0){C(!0),te("Выберите Подкотегорию");return}re(b.id),console.log("localPicked",b);const Q=[];z&&Q.push(z),ee&&Q.push(ee),R&&Q.push(R),l(Q),je()},je=()=>{a(b),s(!1),N(0),P(0),v(0),w({}),n([]),i([]),C(!1),te("Выберите категорию"),f(!1)},ke=async(Q,q,Y,J)=>{try{const Oe=Q=="super"?`https://api.mcrm.uz/api/categories?&page=${q}&perPage=${Y}`:`https://api.mcrm.uz/api/categories?parentId=${J}&page=${q}&perPage=${Y}`,Ze=(await ze.get(Oe)).data.data.map(Rt=>({...Rt,label:Q==="super"?"Супер категория":Q==="category"?"Категория":"Субкатегория"}));Q==="super"&&G([...Ze]),Q==="category"&&ye([...Ze]),Q==="subCategory"&&X([...Ze])}catch(Oe){console.error(`Ошибка произошла при получении ${Q} категорий`,Oe)}};return e.jsx("div",{className:y.modalCategory,children:e.jsxs("div",{className:y.modalCategory_block,children:[!p&&e.jsx(mc,{setCancel:je}),e.jsx("p",{className:y.modalCategory_content_message,children:k?A:""}),e.jsxs("div",{className:y.modalCategory_content,children:[e.jsx(hc,{superId:$,superCategory:V,category:he,setLocalPicked:w,setSuperId:N,setMessageStatus:C,fetchCategories:ke,setSubCategories:X,setSuperCategoryObj:Z,getBannersItems:ue}),e.jsx(gc,{superId:$,categoryId:O,category:he,setSubCategory:we,fetchCategories:ke}),e.jsx(bc,{subId:j,categoryId:O,subCategories:fe,setSubProductsList:Ce,fetchCategories:ke}),!t&&e.jsx(xc,{setSettings:me,setCancel:je})]})]})})}const Pe=({title:o,currentProductEdit:t,isEdit:s,isCategory:a,isLinks:n,linkTextEdit:i,deleteBanner:p,isProduct:r,arrToUse:_,setArrToUse:l,typeOfBanner:d})=>{const{currentProductTable:m,changeCategoryStyles:g,categoriesArr:h,linksPageBannerText:x,openLinksPage:f,activeCategory:y,bannersArr1:$,setCurrentProductOpen:N,setOpenAddBanner:O}=be(),[P,j]=u.useState(null),[v,b]=u.useState(""),[w,k]=u.useState(null);async function C(X){if(X){const z=new FormData;z.append("files[]",X);try{const ee=await(await T.post("media-objects/uploads",z)).data;return console.log("data",ee),b(ee[0]),ee}catch(Z){console.log("не удалось добавить картинку на сервер",Z)}}}async function A(X){try{const Z=await(await T.post("web-banners",X)).data;console.log("data",Z)}catch(z){console.log("ошибка при добовления баннера к продукту",z)}}async function te(X,z){try{return await(await T.patch(`web-banners/${X.id}`,{image:z})).data}catch(Z){console.log(Z)}}const V=X=>{if(X.target.files&&X.target.files[0]){const z=X.target.files[0];k(z),C(z);const Z=new FileReader;Z.onloadend=()=>{const ee=Z.result;j(ee)},Z.readAsDataURL(z)}},G=()=>{document.getElementById("upload").click()},he=()=>{const X=Number(ge.get("multi-store"));if(w){if(d==="product"){const z={multiStoreId:X,type:"product",typeId:m==null?void 0:m.id,image:v};$.filter(ae=>ae.type==="product").some(ae=>ae.type_id===(m==null?void 0:m.id))||A(z),O(!1),j(null),k(null);const ee=document.getElementById("upload");ee&&(ee.value="")}if(d==="category"){const z={multiStoreId:X,type:"category",typeId:y.id,image:v};$.filter(ae=>ae.type==="category").some(ae=>ae.type_id===(y==null?void 0:y.id))||(A(z),O(!1)),j(null),k(null);const ee=document.getElementById("upload");ee&&(ee.value="")}}},ye=async()=>{if(r){const X=await te(t,v),z=_==null?void 0:_.map(Z=>Z.id===(t==null?void 0:t.id)?X:Z);l==null||l(z)}if(a){const X=$.filter(z=>z.type==="category").some(z=>z.type_id===(y==null?void 0:y.id));try{if(!X){const z=await te(t,v),ee=await(await T.patch(`web-banners/${t==null?void 0:t.id}`,{typeId:y.id})).data;console.log("activeCategory",y),console.log("currentProductEdit",t),console.log("data",ee);const ae=_==null?void 0:_.map(R=>R.id===(t==null?void 0:t.id)?{...R,image:z.image,title:ee.title,type_id:ee.type_id}:R);l==null||l(ae),console.log("updatedBannerCategory",ae)}}catch(z){console.log(z)}}N(!1),O(!1)},fe=()=>{p==null||p(t==null?void 0:t.id),O(!1)};return e.jsxs("div",{className:I.add_banner,children:[e.jsx("div",{className:I.add_banner_header,children:e.jsx("h3",{className:I.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:I.add_banner_content,children:[g?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:I.add_banner_content_product,children:[o,":",a&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]}),n&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),h==null?void 0:h.map(X=>e.jsx("span",{className:I.add_banner_content_product,children:X.name.ru},X.name.ru))]}):e.jsx("p",{className:I.add_banner_content_product,children:f?`${o}: ${x}`:`${o}: ${m==null?void 0:m.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:V}),e.jsx("label",{htmlFor:"upload",className:I.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:I.add_banner_content_info,children:e.jsx("p",{className:I.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:I.add_banner_content_download,children:e.jsx("img",{src:P||`https://api.mcrm.uz/${t==null?void 0:t.image}`,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{className:I.add_banner_content_download,children:P?e.jsx("img",{src:P,alt:"Uploaded",className:I.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:I.add_banner_content_download_link,onClick:()=>G(),children:[e.jsx(E,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:I.add_banner_content_btns,children:[e.jsx("button",{className:I.add_banner_content_btn,onClick:fe,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:I.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>ye(),children:"Изменить"})]}):e.jsxs("div",{className:I.add_banner_content_btns,children:[e.jsx("button",{className:I.add_banner_content_btn,onClick:()=>N(!1),children:"Отмена"}),e.jsx("button",{className:I.add_banner_content_btn,onClick:()=>he(),children:"Сохранить"})]})]})]})};function ft({inputText:o,setInputText:t,filteredUsers:s,isProductEdit:a}){const{categoriesArr:n,setCurrentProductOpen:i,setChangeCategoryStyles:p,setOpenModalCategoryBanner:r,clearCategoriesArr:_}=be(),l=()=>{a&&i(!1),p(!1),r(!0),_()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:I.products_banner_wrap,children:[e.jsx("button",{className:I.products_banner_wrap_btn,onClick:l,children:e.jsx(E,{name:"FunnelIcon",width:20})}),(n==null?void 0:n.length)!==0&&e.jsx("div",{className:I.products_banner_wrap_filter,children:n==null?void 0:n.map(d=>e.jsx("span",{className:I.products_banner_wrap_filter_text,children:d.name.ru},d.id))}),e.jsxs("form",{action:"",className:I.products_banner_form,onSubmit:d=>s==null?void 0:s(d),children:[e.jsxs("div",{className:I.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:I.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:o,onChange:d=>t==null?void 0:t(d.target.value)}),e.jsx(E,{className:I.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:I.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const fc=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],vc=()=>{const{openModalCategoryBanner:o,setOpenModalCategoryBanner:t,searchTextBanner:s,setSearchTextBanner:a,pickedProducts:n,clearPickedProductsArr:i,webProductsArr:p,setBannersArr1:r,bannersArr1:_,openAddBanner:l,setOpenAddBanner:d,setCurrentProductTable:m,clearCategoriesArr:g,setOpenLinksPage:h,setOpenProductsPage:x,setChangeCategoryStyles:f}=be(),[y]=u.useState(1),[$]=u.useState(10),[N,O]=u.useState(""),[P,j]=u.useState(p);async function v(){const k=ge.get("multi-store");try{const C=await T.get(`web-banners?multiStoreId=${k}&page=${y}&perPage=${$}`);r(C.data.data),console.log("bannersArr1",_)}catch(C){console.log("error",C)}}const b=k=>{k.preventDefault(),a(N)},w=async k=>{const C=P.find(A=>A.id===k);C&&(await v(),m(C),d(!0))};return u.useEffect(()=>{s&&j(P.filter(k=>{var C;return(C=k.title)==null?void 0:C.toLowerCase().includes(s.toLowerCase())})),n.length>0&&j(n)},[s,n]),u.useEffect(()=>{N===""?(j(p),a(""),i(),d(!1)):(j(p),g()),o&&O("")},[N,o]),u.useEffect(()=>{d(!1),h(!1),x(!0),t(!1),f(!1),g()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(ft,{inputText:N,setInputText:O,filteredUsers:b}),e.jsx(Ae,{arrToUse:P,arr:fc,setPickedProduct:w,selectionMode:"byId"})]}),o&&e.jsx(Ve,{isProduct:!0}),l&&e.jsx(Pe,{title:"Товар",typeOfBanner:"product"})]})},jc=()=>{const{categoriesArr:o,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:a,openAddBanner:n}=be();return u.useEffect(()=>{t(!1),s(!0),a(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:I.category_wrap,children:e.jsx(Ve,{isCategory:!0})}),n&&e.jsx(Pe,{title:"Каталог",categories:o,typeOfBanner:"category"})]})},kc=()=>{const{linksPageBannerText:o,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:a,setOpenProductsPage:n}=be();return u.useEffect(()=>{s(!0),a(!1),t(""),n(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.add_link,children:[e.jsx("h3",{className:I.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:I.add_link_input,type:"text",value:o,onChange:i=>t(i.target.value)})]}),e.jsx(Pe,{title:"Страница"})]})};function yc(){const{openBannerDropdown:o,setOpenBannerDropdown:t,setWebProductsArr:s}=be(),a=xe(),[n,i]=u.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Категория",href:"/admin/settings/banner/newBanner/category"},{id:3,title:"Страница",href:"/admin/settings/banner/newBanner/link"}]),[p]=u.useState(1),[r]=u.useState(10);async function _(){const l=ge.get("multi-store");try{const d=await T.get(`web-nomenclatures?multiStoreId=${l}&page=${p}&perPage=${r}`);s(d.data.data)}catch(d){console.log("error",d)}}return u.useEffect(()=>{_()},[]),e.jsxs("div",{className:I.banner,children:[e.jsx("h3",{className:I.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(xt,{openBlock:o,setOpenBlock:t,versionList:n,setVersionList:i}),e.jsxs("div",{className:I.banner_content,children:[a.pathname.startsWith("/admin/settings/banner/newBanner/products")&&e.jsx(vc,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/category")&&e.jsx(jc,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/link")&&e.jsx(kc,{})]})]})}const wc=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Cc=()=>{const{pickedProducts:o,currentProductOpen:t,openModalCategoryBanner:s,bannersArr1:a,searchTextBanner:n,currentProductTable:i,webProductsArr:p,clearPickedProductsArr:r,clearCategoriesArr:_,setCurrentProductOpen:l,setCurrentProductTable:d,setSearchTextBanner:m,setOpenLinksPage:g,setOpenProductsPage:h,setOpenModalCategoryBanner:x,setBannersArr1:f}=be(),[y,$]=u.useState(""),[N,O]=u.useState(p),[P,j]=u.useState([]),[v]=u.useState(1),[b]=u.useState(20);async function w(){const V=ge.get("multi-store");try{const ye=(await(await T.get(`web-banners?multiStoreId=${V}&page=${v}&perPage=${b}`)).data.data).filter(fe=>fe.type==="product");j(ye)}catch(G){console.log("не удалось получить обьекты с баннерами",G)}}async function k(V){try{T.delete(`web-banners/${V}`)}catch(G){console.log("не удалось удалить",G)}}const C=V=>{V.preventDefault(),m(y),_()},A=V=>{const G=P.find(he=>he.id===V);G&&(d(G),l(!0))};u.useEffect(()=>{n&&O(N.filter(V=>{var G;return(G=V.title)==null?void 0:G.toLowerCase().includes(n.toLowerCase())})),o.length>0&&O(o)},[n,o]);const te=V=>{j(P.filter(G=>G.id!==V)),f(a.filter(G=>G.id!==V)),k(V)};return u.useEffect(()=>{l(!1),g(!1),h(!0),x(!1),_()},[l,g,h,x,_]),u.useEffect(()=>{w()},[]),u.useEffect(()=>{y===""?(O(p),m(""),r()):(O(p),_())},[y]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ae,{arrToUse:P,setArrToUse:j,arr:wc,setPickedProductActive:A,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(ft,{filteredUsers:C,setInputText:$}),e.jsx(Ae,{arrToUse:N,bannersArrProduct:P,setArrToUse:j,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Pe,{arrToUse:P,setArrToUse:j,title:"Продукт",currentProductEdit:i,isEdit:!0,isProduct:!0,deleteBanner:te})]})]}),s&&e.jsx(Ve,{})]})},Nc=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ic=()=>{const{currentProductTable:o,currentProductOpen:t,setCurrentProductOpen:s,setCurrentProductTable:a,setOpenAddBanner:n,openAddBanner:i}=be(),[p,r]=u.useState([]),[_]=u.useState(1),[l]=u.useState(20);async function d(){const x=ge.get("multi-store");try{const $=(await(await T.get(`web-banners?multiStoreId=${x}&page=${_}&perPage=${l}`)).data.data).filter(N=>N.type==="category");r($)}catch(f){console.log("не удалось получить обьекты с баннерами",f)}}async function m(x){try{T.delete(`web-banners/${x}`)}catch(f){console.log("не удалось удалить",f)}}const g=x=>{const f=p.find(y=>y.id===x);f&&(a(f),s(!0))},h=x=>{r(p.filter(f=>f.id!=x)),m(x)};return u.useEffect(()=>{d()},[]),u.useEffect(()=>{s(!1),n(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ae,{arr:Nc,arrToUse:p,setArrToUse:r,selectionMode:"productId",isCategory:!0,setPickedProductActive:g}),i&&e.jsx(Ve,{isCategory:!0}),i&&e.jsx(Pe,{arrToUse:p,setArrToUse:r,title:"Каталог",currentProductEdit:o,isEdit:!0,isCategory:!0,deleteBanner:h})]})},Sc=({setLinkText:o,currentProductEdit:t})=>{be();const[s,a]=u.useState(t.brandName||""),n=i=>{a(i),o(i)};return u.useEffect(()=>{a(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:I.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:I.add_link_input,type:"text",onChange:i=>n(i.target.value),value:s})]})},$c=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Pc=()=>{const{currentProductOpen:o,currentProductTable:t,setCurrentProductTable:s,setCurrentProductOpen:a}=be(),[n,i]=u.useState(""),[p,r]=u.useState([]),[_]=u.useState(1),[l]=u.useState(20);async function d(){const x=ge.get("multi-store");try{const $=(await(await T.get(`web-banners?multiStoreId=${x}&page=${_}&perPage=${l}`)).data.data).filter(N=>N.type==="link");r($)}catch(f){console.log("не удалось получить обьекты с баннерами",f)}}async function m(x){try{T.delete(`web-banners/${x}`)}catch(f){console.log("не удалось удалить",f)}}u.useEffect(()=>{d()},[]);const g=x=>{const f=p.find(y=>y.id===x);f&&(s(f),console.log("currentProductTable",t),a(!0))},h=x=>{r(p.filter(f=>f.id!==x)),m(x)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ae,{arr:$c,arrToUse:p,selectionMode:"productId",setPickedProductActive:g,isLinks:!0}),o&&e.jsxs(e.Fragment,{children:[e.jsx(Sc,{setLinkText:i,currentProductEdit:t}),e.jsx(Pe,{title:"Страница",currentProductEdit:t,deleteBanner:h,isLinks:!0,isEdit:!0,linkTextEdit:n})]})]})};function Dc(){const{openBannerDropdown:o,setOpenBannerDropdown:t}=be(),s=xe(),[a,n]=u.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/activeBanner/activeProducts"},{id:1,title:"Категория",href:"/admin/settings/banner/activeBanner/activeCategory"},{id:1,title:"Страница",href:"/admin/settings/banner/activeBanner/activeLink"}]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:I.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(xt,{openBlock:o,setOpenBlock:t,versionList:a,setVersionList:n})]}),e.jsxs("div",{className:I.banner_content,children:[s.pathname.startsWith("/admin/settings/banner/activeBanner/activeProducts")&&e.jsx(Cc,{}),s.pathname.startsWith("/admin/settings/banner/activeBanner/activeCategory")&&e.jsx(Ic,{}),s.pathname.startsWith("/admin/settings/banner/activeBanner/activeLink")&&e.jsx(Pc,{})]})]})}const Oc=[{id:1,title:"Новый",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner/activeProducts"}];function Bc(){const t=xe().pathname,{setCurrentProductOpen:s}=be();return u.useEffect(()=>{s(!1)},[]),e.jsx("div",{className:c.banner,children:e.jsxs("div",{className:c.banner_nav,children:[e.jsx("ul",{className:c.banner_nav_list,children:Oc.map(a=>e.jsx("li",{children:e.jsx(H,{to:a.href,className:`${c.banner_nav_link} ${t.startsWith(a.href.split("/products")[0])||t.startsWith(a.href.split("/activeProducts")[0])?c.banner_nav_link_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:c.settings_content_base,children:[t.startsWith("/admin/settings/banner/newBanner")&&e.jsx(yc,{}),t.startsWith("/admin/settings/banner/activeBanner")&&e.jsx(Dc,{})]})]})})}const Mc="_contacts_mxkpi_1",Ac="_contacts_content_mxkpi_4",Ec="_contacts_nav_mxkpi_7",Wc="_contacts_nav_list_mxkpi_10",Uc="_contacts_nav_link_mxkpi_15",Lc="_contacts_nav_link_active_mxkpi_30",Rc="_contacts_btn_mxkpi_34",qc="_socials_mxkpi_55",zc="_socials_title_mxkpi_60",Fc="_socials_content_mxkpi_65",Tc="_socials_content_wrap_mxkpi_70",Vc="_socials_content_wrap_input_mxkpi_75",Hc="_aboutUs_mxkpi_84",Xc="_aboutUs_add_image_mxkpi_87",Gc="_aboutUs_content_mxkpi_90",Zc="_aboutUs_image_wrap_mxkpi_95",Jc="_aboutUs_download_mxkpi_104",Qc="_aboutUs_text_mxkpi_112",Yc="_aboutUs_inputs_mxkpi_120",Kc="_aboutUs_inputs_wrap_mxkpi_126",ei="_aboutUs_inputs_wrap_title_mxkpi_130",ti="_aboutUs_inputs_wrap_input_mxkpi_136",si="_aboutUs_inputs_wrap_textarea_mxkpi_144",oi="_aboutUs_btn_mxkpi_152",ni="_aboutUs_week_info_mxkpi_172",ai="_aboutUs_week_info_text_mxkpi_178",ri="_aboutUs_week_content_mxkpi_183",ci="_aboutUs_week_wrap_mxkpi_189",ii="_aboutUs_week_wrap_colored_mxkpi_193",li="_aboutUs_week_wrap_colored_active_mxkpi_203",_i="_aboutUs_week_wrap_colored_last_mxkpi_206",di="_aboutUs_week_wrap_day_mxkpi_209",pi="_aboutUs_week_wrap_schedule_mxkpi_215",ui="_aboutUs_week_wrap_input_mxkpi_221",mi="_custom_checkbox_mxkpi_241",hi="_custom_checkbox_input_mxkpi_247",gi="_custom_checkbox_box_mxkpi_252",bi="_custom_checkbox_box_icon_mxkpi_261",U={contacts:Mc,contacts_content:Ac,contacts_nav:Ec,contacts_nav_list:Wc,contacts_nav_link:Uc,contacts_nav_link_active:Lc,contacts_btn:Rc,socials:qc,socials_title:zc,socials_content:Fc,socials_content_wrap:Tc,socials_content_wrap_input:Vc,aboutUs:Hc,aboutUs_add_image:Xc,aboutUs_content:Gc,aboutUs_image_wrap:Zc,aboutUs_download:Jc,aboutUs_text:Qc,aboutUs_inputs:Yc,aboutUs_inputs_wrap:Kc,aboutUs_inputs_wrap_title:ei,aboutUs_inputs_wrap_input:ti,aboutUs_inputs_wrap_textarea:si,aboutUs_btn:oi,aboutUs_week_info:ni,aboutUs_week_info_text:ai,aboutUs_week_content:ri,aboutUs_week_wrap:ci,aboutUs_week_wrap_colored:ii,aboutUs_week_wrap_colored_active:li,aboutUs_week_wrap_colored_last:_i,aboutUs_week_wrap_day:di,aboutUs_week_wrap_schedule:pi,aboutUs_week_wrap_input:ui,custom_checkbox:mi,custom_checkbox_input:hi,custom_checkbox_box:gi,custom_checkbox_box_icon:bi},xi=({temporaryImageUrl:o,setTemporaryImageUrl:t})=>{Ke();const[s,a]=u.useState(null),[n,i]=u.useState(null);u.useEffect(()=>{const _=localStorage.getItem("savedLogoImageUrl");_&&(a(_),t(_))},[t]);const p=_=>{if(_.target.files&&_.target.files[0]){const l=_.target.files[0];i(l);const d=new FileReader;d.onloadend=()=>{const m=d.result;a(m),t(m),localStorage.setItem("savedLogoImageUrl",m)},d.readAsDataURL(l)}},r=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:U.aboutUs_add_image,children:[e.jsx("div",{className:U.aboutUs_image_wrap,children:s||o?e.jsx("img",{src:o||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>r(),children:e.jsx(E,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:p}),e.jsx("label",{htmlFor:"upload",className:U.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:U.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function Ie(){return Ie=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},Ie.apply(this,arguments)}const vt=(o,t)=>{const s={};for(const a in o)t.indexOf(a)===-1&&(s[a]=o[a]);return s},jt=ce.createContext(null),He=ce.createContext(null),fi=o=>t=>ce.createElement(He.Consumer,null,s=>ce.createElement(o,Ie({parent:s},t))),vi=(o=[])=>{const[t,s]=u.useState(!1),a=u.useRef(o),n=(()=>{const p=u.useContext(jt);if(p===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return p})(),i=n.getApi();return u.useEffect(()=>{n.load().then(()=>Promise.all(a.current.map(n.loadModule))).then(()=>s(!0))},[]),t&&i?i:null},ji=()=>{},ki=["onLoad","onError","modules","apiLoader"];function kt(o,t=!1,s=[]){return a=>{const{width:n,height:i,modules:p=[],onLoad:r=ji}=a,_=vi(s.concat(p)),l=!t||!!_,d=vt(a,ki);return u.useEffect(()=>_?r(_):void 0,[_]),l?ce.createElement(o,Ie({ymaps:_},d)):ce.createElement("div",{style:{width:n,height:i}})}}const yi=typeof window<"u",rt={lang:"ru_RU",load:"",ns:"",mode:"release"},wi=o=>{const{version:t="2.1",enterprise:s=!1,query:a={lang:"ru_RU",load:"",ns:""},preload:n=!1,children:i}=o,p=u.useRef((r=>{const{query:_=rt}=r,l=Date.now().toString(32),d=_.ns||"",m="__yandex-maps-api-onload__$$"+l,g="__yandex-maps-api-onerror__$$"+l,h=yi?window:{},x={};let f;const y=()=>d?h[d]:f,$=()=>{delete h[m],delete h[g]};return{load:()=>{if(y())return Promise.resolve(f);if(x[d])return x[d];const N={onload:m,onerror:g,...rt,..._},O=Object.keys(N).map(j=>`${j}=${N[j]}`).join("&"),P=[`https://${r.enterprise?"enterprise.":""}api-maps.yandex.ru`,r.version,"?"+O].join("/");return x[d]=new Promise((j,v)=>{h[m]=b=>{$(),b.ready(()=>{f=b,j(b)})},h[g]=b=>{$(),v(b)},(b=>new Promise((w,k)=>{const C=document.createElement("script");C.type="text/javascript",C.onload=w,C.onerror=k,C.src=b,C.async=!0,document.head.appendChild(C)}))(P).catch(h[g])}),x[d]},getApi:y,loadModule:N=>new Promise((O,P)=>{f.modules.require(N).done(j=>{j.forEach(v=>{((b,w,k,C=!1)=>{const A=typeof w=="string"?w.split("."):w.slice();let te,V=b;for(;A.length>1;)te=A.shift(),V[te]||(V[te]={}),V=V[te];const G=A[0];V[G]=C===!0&&V[G]||k})(f,N,v,!0)}),O(f)},P)})}})({version:t,enterprise:s,query:a,preload:n}));return u.useEffect(()=>{n&&p.current.load()},[p.current]),ce.createElement(jt.Provider,{value:p.current},i)},ct=/^on(?=[A-Z])/;function se(o){return Object.keys(o).reduce((t,s)=>{if(ct.test(s)){const a=s.replace(ct,"").toLowerCase();t._events[a]=o[s]}else t[s]=o[s];return t},{_events:{}})}function Se(o,t,s){typeof s=="function"&&o.events.add(t,s)}function $e(o,t,s){typeof s=="function"&&o.events.remove(t,s)}function De(o,t,s){Object.keys(Object.assign({},t,s)).forEach(a=>{t[a]!==s[a]&&($e(o,a,t[a]),Se(o,a,s[a]))})}const yt=o=>"default"+o.charAt(0).toUpperCase()+o.slice(1);function de(o,t){return o[t]!==void 0||o[yt(t)]===void 0}function D(o,t,s){return(de(o,t)?o[t]:o[yt(t)])||s}function pe(o,t,s=null){if(o!==t){if(o&&("current"in o?o.current=null:typeof o=="function"&&o(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function wt(o){const{width:t,height:s,style:a,className:n}=o;return a!==void 0||n!==void 0?Object.assign({},a&&{style:a},n&&{className:n}):{style:{width:t,height:s}}}class Ci extends ce.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:a=()=>{}}=this.props;a(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const Ct=o=>({onError:t,...s})=>ce.createElement(Ci,{onError:t},ce.createElement(o,s));class Be extends ce.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Be.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Be.updateObject(this.instance,t,this.props)}componentWillUnmount(){Be.unmountObject(this.instance,this.props)}render(){const t=wt(this.props),s=se(this.props),a=vt(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return ce.createElement(He.Provider,{value:this.state.instance},ce.createElement("div",Ie({ref:this._getRef},t,a),this.props.children))}static mountObject(t,s,a){const{instanceRef:n,_events:i}=se(a),p=new s(t,D(a,"state"),D(a,"options"));return Object.keys(i).forEach(r=>Se(p,r,i[r])),pe(null,n,p),p}static updateObject(t,s,a){const{_events:n,instanceRef:i}=se(a),{_events:p,instanceRef:r}=se(s);if(de(a,"state")){const _=D(s,"state",{}),l=D(a,"state",{});_.type!==l.type&&t.setType(l.type),_.behaviors!==l.behaviors&&(_.behaviors&&t.behaviors.disable(_.behaviors),l.behaviors&&t.behaviors.enable(l.behaviors)),l.zoom&&_.zoom!==l.zoom&&t.setZoom(l.zoom),l.center&&_.center!==l.center&&t.setCenter(l.center),l.bounds&&_.bounds!==l.bounds&&t.setBounds(l.bounds)}if(de(a,"options")){const _=D(s,"options"),l=D(a,"options",{});_!==l&&t.options.set(l)}D(s,"width")===D(a,"width")&&D(s,"height")===D(a,"height")||t.container.fitToViewport(),De(t,p,n),pe(r,i,t)}static unmountObject(t,s){const{instanceRef:a,_events:n}=se(s);t!==null&&(Object.keys(n).forEach(i=>$e(t,i,n[i])),t.destroy(),pe(a))}}const Nt=Ct(kt(Be,!0,["Map"]));Nt.defaultProps={width:320,height:240};class We extends ce.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&We.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&We.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,We.unmountObject(this.state.instance,this.props)}render(){const t=wt(this.props);return ce.createElement("div",Ie({ref:this._getRef},t))}static mountObject(t,s,a){const{instanceRef:n,_events:i}=se(a),p=D(a,"point"),r=D(a,"locateOptions"),_=D(a,"options");return new Promise((l,d)=>{s.locate(p,r).done(m=>{if(m.length>0){const g=new s.Player(t,m[0],_);pe(null,n,g),Object.keys(i).forEach(h=>Se(g,h,i[h])),l(g)}},d)})}static updateObject(t,s,a){const{_events:n,instanceRef:i}=se(a),{_events:p,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),l=D(a,"options");_!==l&&t.options.set(l)}if(de(a,"point")){const _=D(a,"point"),l=D(s,"point"),d=D(a,"locateOptions");_!==l&&t.moveTo(_,d)}De(t,p,n),pe(r,i,t)}static unmountObject(t,s){const{instanceRef:a,_events:n}=se(s);t!==null&&(Object.keys(n).forEach(i=>$e(t,i,n[i])),pe(a))}}class Me extends ce.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Me.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Me.updateControl(this.instance,t,this.props)}componentWillUnmount(){Me.unmountControl(this.instance,this.props)}render(){return ce.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:a,parent:n,lazy:i,_events:p}=se(s),r=new t({data:D(s,"data"),options:D(s,"options"),state:D(s,"state"),mapTypes:D(s,"mapTypes"),lazy:i});if(Object.keys(p).forEach(_=>Se(r,_,p[_])),n&&n.controls&&typeof n.controls.add=="function")n.controls.add(r);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(r)}return pe(null,a,r),r}static updateControl(t,s,a){const{_events:n,instanceRef:i}=se(a),{_events:p,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),l=D(a,"options");_!==l&&t.options.set(l)}if(de(a,"data")){const _=D(s,"data"),l=D(a,"data");_!==l&&t.data.set(l)}if(de(a,"state")){const _=D(s,"state"),l=D(a,"state");_!==l&&t.state.set(l)}if(de(a,"mapTypes")){const _=D(s,"mapTypes"),l=D(a,"mapTypes");_!==l&&(t.removeAllMapTypes(),l.forEach(d=>t.addMapType(d)))}De(t,p,n),pe(r,i,t)}static unmountControl(t,s){const{instanceRef:a,parent:n,_events:i}=se(s);t!==null&&(Object.keys(i).forEach(p=>$e(t,p,i[p])),n.controls&&typeof n.controls.remove=="function"?n.controls.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),pe(a))}}var Ni=Ct(fi(kt(o=>ce.createElement(Me,Ie({},o,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ue extends ce.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ue.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ue.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ue.unmountObject(this.instance,this.props)}render(){return ce.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:a,parent:n,_events:i}=se(s),p=new t(D(s,"options"));if(Object.keys(i).forEach(r=>Se(p,r,i[r])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(p);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount Clusterer");n.add(p)}return pe(null,a,p),p}static updateObject(t,s,a){const{_events:n,instanceRef:i}=se(a),{_events:p,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),l=D(a,"options");_!==l&&t.options.set(l)}De(t,p,n),pe(r,i,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:i}=se(s);t!==null&&(Object.keys(i).forEach(p=>$e(t,p,i[p])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),pe(a))}}class Le extends ce.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Le.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Le.updateObject(this.instance,t,this.props)}componentWillUnmount(){Le.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:n,_events:i}=se(s),p=D(s,"options",{}),r=D(s,"features",{}),_=D(s,"filter",null),l=D(s,"objects",{}),d=D(s,"clusters",{}),m=new t(p);if(m.add(r||[]),m.setFilter(_),m.objects.options.set(l),m.clusters.options.set(d),Object.keys(i).forEach(g=>Se(m,g,i[g])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(m);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount ObjectManager");n.add(m)}return pe(null,a,m),m}static updateObject(t,s,a){const{_events:n,instanceRef:i}=se(a),{_events:p,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),l=D(a,"options");_!==l&&t.options.set(l)}if(de(a,"objects")){const _=D(s,"objects"),l=D(a,"objects");_!==l&&t.objects.options.set(l)}if(de(a,"clusters")){const _=D(s,"clusters"),l=D(a,"clusters");_!==l&&t.clusters.options.set(l)}if(de(a,"filter")){const _=D(s,"filter"),l=D(a,"filter");_!==l&&t.setFilter(l)}if(de(a,"features")){const _=D(s,"features"),l=D(a,"features");_!==l&&(t.remove(_),t.add(l))}De(t,p,n),pe(r,i,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:i}=se(s);t!==null&&(Object.keys(i).forEach(p=>$e(t,p,i[p])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),pe(a))}}class Re extends ce.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:a}=this.props,n=Re.mountObject(a&&typeof a.modifyConstructor=="function"?a.modifyConstructor(s[t]):s[t],this.props);this.instance=n,this.setState({instance:n})}componentDidUpdate(t){this.instance!==null&&Re.updateObject(this.instance,t,this.props)}componentWillUnmount(){Re.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:n,_events:i}=se(s),p=new t(D(s,"geometry"),D(s,"properties"),D(s,"options"));if(Object.keys(i).forEach(r=>Se(p,r,i[r])),n&&n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(p);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(p)}return pe(null,a,p),p}static updateObject(t,s,a){const{_events:n,instanceRef:i}=se(a),{_events:p,instanceRef:r}=se(s);if(de(a,"geometry")){const _=D(s,"geometry",{}),l=D(a,"geometry",{});Array.isArray(l)&&l!==_?Array.isArray(l[0])&&typeof l[1]=="number"?(t.geometry.setCoordinates(l[0]),t.geometry.setRadius(l[1])):t.geometry.setCoordinates(l):typeof l=="object"&&(l.coordinates!==_.coordinates&&t.geometry.setCoordinates(l.coordinates),l.radius!==_.radius&&t.geometry.setRadius(l.radius))}if(de(a,"properties")){const _=D(s,"properties"),l=D(a,"properties");_!==l&&t.properties.set(l)}if(de(a,"options")){const _=D(s,"options"),l=D(a,"options");_!==l&&t.options.set(l)}De(t,p,n),pe(r,i,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:i}=se(s);t!==null&&(Object.keys(i).forEach(p=>$e(t,p,i[p])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),pe(a))}}const Ii=()=>{const o=u.useRef(null);return e.jsx(wi,{children:e.jsx("div",{children:e.jsx(Nt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{o.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(Ni,{options:{position:{bottom:20,right:20}}})})})})},Si=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(a,n)=>{t(i=>i.map(p=>p.id===n?{...p,text:a}:p))};return e.jsxs("div",{className:U.aboutUs_inputs,children:[o.map(a=>e.jsx("div",{className:U.aboutUs_inputs_wrap,children:a.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:U.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("textarea",{className:U.aboutUs_inputs_wrap_textarea,onChange:n=>s(n.target.value,a.id),value:a.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:U.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("input",{className:U.aboutUs_inputs_wrap_input,type:a.type==="isPhone"?"number":a.type==="isEmail"?"email":"text",onChange:n=>s(n.target.value,a.id),value:a.text})]})},a.id)),e.jsx(Ii,{})]})},$i=({id:o,checked:t,onChange:s})=>{const a=n=>{s(o,n.target.checked)};return e.jsxs("label",{className:U.custom_checkbox,children:[e.jsx("input",{className:U.custom_checkbox_input,type:"checkbox",checked:t,onChange:a}),e.jsx("span",{className:U.custom_checkbox_box,children:e.jsx(E,{name:"CheckIcon",width:18,height:18,className:U.custom_checkbox_box_icon})})]})},Pi=({temporaryContactsSchedule:o,setTemporaryContactsSchedule:t})=>{const s=r=>{const _=r.replace(/\D/g,"");return _.length<=2?_:`${_.slice(0,2)}:${_.slice(2,4)}`},a=(r,_,l,d)=>{if(!d.isActive)return;const m=s(l);t(g=>g.map(h=>h.id===r?{...h,workHours:{...h.workHours,[_]:m}}:h))},n=(r,_)=>{t(l=>l.map(d=>d.id===r?{...d,isActive:_,workHours:_?d.workHours:{start:"",end:""}}:d))},i=u.useRef({}),p=u.useRef({});return u.useEffect(()=>{o.forEach(r=>{var _;r.isActive&&i.current[r.id]&&!p.current[r.id]&&((_=i.current[r.id])==null||_.focus(),p.current[r.id]=!0)})},[o]),e.jsxs("div",{className:U.aboutUs_week,children:[e.jsxs("div",{className:U.aboutUs_week_info,children:[e.jsx("span",{className:U.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:U.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:U.aboutUs_week_content,children:o.map((r,_)=>{const l=_===o.length-1,d=l&&r.isActive?U.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:U.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${U.aboutUs_week_wrap_colored} 
                  ${r.isActive?U.aboutUs_week_wrap_colored_active:""} 
                  ${l?U.aboutUs_week_wrap_colored_last:""} 
                  ${d}
                `,children:[e.jsx("span",{className:U.aboutUs_week_wrap_day,children:r.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:U.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:m=>i.current[r.id]=m,className:U.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:m=>a(r.id,"start",m.target.value,r),value:r.workHours.start}),e.jsx("span",{className:U.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:U.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:m=>a(r.id,"end",m.target.value,r),value:r.workHours.end})]})]}),e.jsx($i,{id:r.id,checked:r.isActive,onChange:n})]},r.id)})})]})},Di=()=>{const{contactsFormInputsArr:o,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:a,setImageUrlLogo:n}=Ke(),[i,p]=u.useState(o),[r,_]=u.useState(""),[l,d]=u.useState(s),m=()=>{t(i),n(r);const g=l.map(h=>h.workHours&&h.workHours.start===""&&h.workHours.end===""?{...h,isActive:!1}:h);a(g)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:U.aboutUs,children:[e.jsx(xi,{temporaryImageUrl:r,setTemporaryImageUrl:_}),e.jsxs("div",{className:U.aboutUs_content,children:[e.jsx(Si,{temporarySocialPlatforms:i,setTemporarySocialPlatforms:p}),e.jsx(Pi,{temporaryContactsSchedule:l,setTemporaryContactsSchedule:d})]})]}),e.jsx("button",{className:U.aboutUs_btn,onClick:m,children:"Сохранить"})]})};function Oi({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:i=1.1,status:p=!1,disabled:r=!1}){const _={width:`${o}px`,height:`${o/2-o/20}px`,background:p?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},l={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${p?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${i}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:_,children:e.jsx("div",{style:l})})}const Bi=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(n,i)=>{t(p=>p.map(r=>r.id===n?{...r,url:i,isActive:i===""?!1:r.isActive}:r))},a=(n,i)=>{n.url!==""&&t(p=>p.map(r=>r.id===i?{...r,isActive:!r.isActive,url:n.isActive?"":n.url}:r))};return e.jsx(e.Fragment,{children:o.map(n=>e.jsxs("div",{className:U.socials_content_wrap,children:[e.jsx("img",{src:n.icon,alt:n.alt}),e.jsx("input",{type:"text",className:U.socials_content_wrap_input,value:n.url||"",onChange:i=>s(n.id,i.target.value)}),e.jsx("div",{onClick:()=>a(n,n.id),children:e.jsx(Oi,{status:n.isActive})})]},n.id))})},Mi=()=>{const{socialPlatforms:o,setSocialPlatforms:t,setActiveSocials:s}=Ke(),[a,n]=u.useState(o);async function i(){const r=ge.get("multi-store"),_=await T.get(`web-credentials/${r}`);if(_){const l=Object.entries(_.data.social).filter(([m,g])=>g.isActive).map(([m,g])=>({name:m,...g})),d=o.filter(m=>l.some(g=>g.name===m.name)).map(m=>{const g=l.find(h=>h.name===m.name);return{...m,...g,isActive:!0}});s(d)}}async function p(){t(a);const r=ge.get("multi-store"),_=a.reduce((l,d)=>(l[d.name]={url:d.url,isActive:d.isActive},l),{});try{const l=await T.patch(`web-credentials/${r}`,{social:_});i()}catch(l){console.log("error",l)}}return e.jsxs("div",{className:U.socials,children:[e.jsx("h3",{className:U.socials_title,children:"Соц-сети"}),e.jsx("div",{className:U.socials_content,children:e.jsx(Bi,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:n})}),e.jsx("button",{className:U.contacts_btn,onClick:p,children:"Сохранить"})]})},Ai=[{id:ie(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:ie(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function Ei(){const t=xe().pathname;return e.jsx("div",{className:U.contacts,children:e.jsxs("div",{className:U.contacts_content,children:[e.jsx("div",{className:U.contacts_nav,children:e.jsx("ul",{className:U.contacts_nav_list,children:Ai.map(s=>e.jsx(H,{to:s.href,className:`${U.contacts_nav_link} ${s.href==t?U.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(Mi,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Di,{})]})})}const Wi="_delivery_fas3b_1",Ui="_delivery_wrap_fas3b_5",Li="_delivery_settingsAdd_fas3b_8",Ri="_delivery_brief_title_fas3b_29",qi="_delivery_brief_wrap_fas3b_34",zi="_delivery_brief_info_fas3b_40",Fi="_delivery_brief_info_header_fas3b_44",Ti="_delivery_brief_info_header_title_fas3b_50",Vi="_delivery_brief_info_content_fas3b_54",Hi="_delivery_brief_info_content_item_fas3b_59",Xi="_delivery_brief_info_city_fas3b_64",Gi="_delivery_brief_info_text_fas3b_68",Zi="_delivery_brief_btn_fas3b_73",Ji="_deliverySettings_fas3b_79",Qi="_deliverySettings_top_fas3b_82",Yi="_deliverySettings_cities_fas3b_91",Ki="_deliverySettings_selected_fas3b_96",el="_deliverySettings_radio_fas3b_102",tl="_deliverySettings_btn_fas3b_107",sl="_fixedDelivery_fas3b_114",ol="_fixedDelivery_wrap_fas3b_118",nl="_fixedDelivery_add_fas3b_124",al="_fullInfo_header_fas3b_130",rl="_fullInfo_title_fas3b_136",cl="_fullInfo_wrap_fas3b_140",il="_fullInfo_card_title_fas3b_145",ll="_fullInfo_card_price_fas3b_150",_l="_fullInfo_card_price_desc_fas3b_154",dl="_fullInfo_card_price_desc_text_fas3b_162",pl="_fullInfo_btn_fas3b_168",ul="_editDelivery_fas3b_174",ml="_editDelivery_title_fas3b_177",hl="_editDelivery_link_fas3b_183",gl="_editDelivery_content_fas3b_190",bl="_editDelivery_settings_header_fas3b_195",xl="_editDelivery_settings_content_fas3b_205",fl="_editDelivery_settings_content_container_fas3b_210",vl="_editDelivery_settings_content_container_wrap_fas3b_214",jl="_editDelivery_settings_content_container_btn_fas3b_217",kl="_editDelivery_btn_fas3b_221",yl="_addCity_fas3b_231",wl="_addCity_title_fas3b_235",Cl="_addCity_content_fas3b_241",Nl="_addCity_radio_fas3b_246",Il="_addCity_addBtn_fas3b_251",Sl="_addCity_saveBtn_fas3b_257",B={delivery:Wi,delivery_wrap:Ui,delivery_settingsAdd:Li,delivery_brief_title:Ri,delivery_brief_wrap:qi,delivery_brief_info:zi,delivery_brief_info_header:Fi,delivery_brief_info_header_title:Ti,delivery_brief_info_content:Vi,delivery_brief_info_content_item:Hi,delivery_brief_info_city:Xi,delivery_brief_info_text:Gi,delivery_brief_btn:Zi,deliverySettings:Ji,deliverySettings_top:Qi,deliverySettings_cities:Yi,deliverySettings_selected:Ki,deliverySettings_radio:el,deliverySettings_btn:tl,fixedDelivery:sl,fixedDelivery_wrap:ol,fixedDelivery_add:nl,fullInfo_header:al,fullInfo_title:rl,fullInfo_wrap:cl,fullInfo_card_title:il,fullInfo_card_price:ll,fullInfo_card_price_desc:_l,fullInfo_card_price_desc_text:dl,fullInfo_btn:pl,editDelivery:ul,editDelivery_title:ml,editDelivery_link:hl,editDelivery_content:gl,editDelivery_settings_header:bl,editDelivery_settings_content:xl,editDelivery_settings_content_container:fl,editDelivery_settings_content_container_wrap:vl,editDelivery_settings_content_container_btn:jl,editDelivery_btn:kl,addCity:yl,addCity_title:wl,addCity_content:Cl,addCity_radio:Nl,addCity_addBtn:Il,addCity_saveBtn:Sl},Xe=qt()(zt(Ft(o=>({cities:[{id:ie(),city:"Ташкент",isActive:!0},{id:ie(),city:"Самарканд",isActive:!0},{id:ie(),city:"Бухара",isActive:!0}],setCities:t=>o({cities:t}),selectedCities:[],setSelectedCities:t=>o({selectedCities:t}),deliveryStores:[{id:ie(),store:"Магазин1",checked:!1},{id:ie(),store:"Магазин2",checked:!1},{id:ie(),store:"Магазин3",checked:!1}],setDeliveryStores:t=>o({deliveryStores:t}),typeOfDelivery:"",setTypeOfDelivery:t=>o({typeOfDelivery:t}),saveSettingDelivery:[],setSaveSettingDelivery:t=>o({saveSettingDelivery:t})}),{name:"delivery-storage",partialize:o=>({...o})}))),$l="_dropdown_block_16xgq_1",Pl="_dropdown_block_top_16xgq_6",Dl="_dropdown_block_top_title_16xgq_17",Ol="_dropdown_block_top_arrow_16xgq_21",Bl="_dropdown_block_top_arrow_active_16xgq_30",Ml="_dropdown_block_dropdown_16xgq_33",Al="_dropdown_block_dropdown_item_16xgq_45",El="_dropdown_block_dropdown_open_16xgq_56",Wl="_dropdown_block_onOff_16xgq_62",Ul="_dropdown_block_delivery_16xgq_62",Ll="_radio_16xgq_68",Rl="_radio_selected_16xgq_74",ql="_radio_radio_16xgq_74",zl="_radio_input_16xgq_82",Fl="_radio_text_16xgq_95",Tl="_addBtn_16xgq_100",Vl="_fixed_inputs_16xgq_114",Hl="_fixed_inputs_wrap_16xgq_119",Xl="_fixed_inputs_subtitle_16xgq_123",Gl="_fixed_inputs_input_16xgq_126",Zl="_fixed_inputs_price_16xgq_126",Jl="_flexible_inputs_16xgq_136",Ql="_flexible_inputs_top_16xgq_143",Yl="_flexible_inputs_bottom_16xgq_148",Kl="_flexible_inputs_wrapLarge_16xgq_154",e_="_flexible_inputs_wrapSmall_16xgq_154",t_="_flexible_inputs_title_16xgq_166",s_="_flexible_inputs_input_16xgq_169",o_="_flexible_inputs_btn_16xgq_175",n_="_deliveryStore_16xgq_179",a_="_deliveryCity_16xgq_187",r_="_deliveryCity_active_16xgq_196",c_="_btns_save_16xgq_203",i_="_btns_back_16xgq_203",W={dropdown_block:$l,dropdown_block_top:Pl,dropdown_block_top_title:Dl,dropdown_block_top_arrow:Ol,dropdown_block_top_arrow_active:Bl,dropdown_block_dropdown:Ml,dropdown_block_dropdown_item:Al,dropdown_block_dropdown_open:El,dropdown_block_onOff:Wl,dropdown_block_delivery:Ul,radio:Ll,radio_selected:Rl,radio_radio:ql,radio_input:zl,radio_text:Fl,addBtn:Tl,fixed_inputs:Vl,fixed_inputs_wrap:Hl,fixed_inputs_subtitle:Xl,fixed_inputs_input:Gl,fixed_inputs_price:Zl,flexible_inputs:Jl,flexible_inputs_top:Ql,flexible_inputs_bottom:Yl,flexible_inputs_wrapLarge:Kl,flexible_inputs_wrapSmall:e_,flexible_inputs_title:t_,flexible_inputs_input:s_,flexible_inputs_btn:o_,deliveryStore:n_,deliveryCity:a_,deliveryCity_active:r_,btns_save:c_,btns_back:i_};function It({color:o="black",className:t,versionList:s,setVersionList:a,openBlock:n,currentVersion:i,setOpenBlock:p}){const{selectedCities:r,setSelectedCities:_,deliveryStores:l}=Xe(),d=g=>{r.some(x=>x.id===g.id)||(_([g,...r]),a==null||a(s==null?void 0:s.filter(x=>x.id!==g.id))),p(!1)},m=()=>{l.some(h=>h.checked)?p(!n):alert("выберите магазин"),(s==null?void 0:s.length)==0&&p(!1)};return e.jsx("div",{className:t??W.dropdown,children:e.jsxs("div",{className:W.dropdown_block,children:[e.jsxs("div",{className:W.dropdown_block_top,onClick:()=>m(),children:[e.jsx("h2",{className:W.dropdown_block_top_title,style:{color:o},children:i}),e.jsx("button",{className:W.dropdown_block_top_btn,children:e.jsx("div",{className:`${W.dropdown_block_top_arrow} ${n?W.dropdown_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${W.dropdown_block_dropdown} ${n?W.dropdown_block_dropdown_open:""}`,children:s==null?void 0:s.map(g=>e.jsx("span",{className:W.dropdown_block_dropdown_item,onClick:()=>d(g),children:g.city},g.id))})]})})}const St=({label:o,checked:t})=>{const s={backgroundColor:t?"#45D442":"#fff",border:"1px solid #D8D8D8",width:"20px",height:"20px",borderRadius:"3px",display:"flex",justifyContent:"center",alignItems:"center"};return e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",checked:t,style:{display:"none"},onChange:()=>!t}),e.jsxs("label",{style:{cursor:"pointer",display:o?"flex":"block",gap:o?"10px":"0",alignItems:o?"center":"initial"},children:[e.jsx("div",{style:s,children:t&&e.jsx(E,{name:"CheckIcon",width:17,color:"white"})}),e.jsx("span",{style:{fontSize:"14px"},children:o})]})]})},l_=({store:o,setChecked:t})=>e.jsx("div",{className:W.deliveryStore,children:e.jsx("div",{onClick:()=>t(o.id),children:e.jsx(St,{checked:o.checked,label:o.store})})}),qe=({id:o,value:t,checked:s,text:a,onChange:n})=>e.jsxs("label",{className:`${W.radio} ${s?W.radio_selected:""}`,children:[e.jsx("input",{type:"radio",id:o,value:t,checked:s,onChange:()=>n(o),className:W.radio_input}),e.jsx("span",{className:W.radio_radio}),e.jsx("span",{className:W.radio_text,children:a})]}),$t=({city:o,cityName:t})=>{const{selectedCities:s,cities:a,setSelectedCities:n,setCities:i}=Xe(),p=(r,_)=>{n(s.filter(l=>l.id!==r)),i([_,...a])};return e.jsxs("div",{className:`${W.deliveryCity} ${o!=null&&o.isActive?W.deliveryCity_active:""}`,children:[e.jsx("span",{children:(o==null?void 0:o.city)||t}),e.jsx("button",{onClick:()=>p(o==null?void 0:o.id,o),children:e.jsx(Te,{name:"TrashIcon",width:16})})]})},Pt=({id:o,onRemove:t,purchasePrice:s,price:a,onInputChange:n})=>{const i=p=>{const{name:r,value:_}=p.target;n==null||n(o,r,_)};return e.jsxs("div",{className:W.fixed_inputs,children:[e.jsxs("div",{className:W.fixed_inputs_wrap,children:[e.jsx("span",{className:W.fixed_inputs_subtitle,children:"Сумма покупки от"}),e.jsx("input",{className:W.fixed_inputs_input,type:"number",name:"purchasePrice",value:s,onChange:i})]}),e.jsxs("div",{className:W.fixed_inputs_wrap,children:[e.jsx("span",{className:W.fixed_inputs_subtitle,children:"Сумма"}),e.jsx("input",{className:W.fixed_inputs_price,type:"number",name:"price",value:a,onChange:i})]}),e.jsx("button",{style:{alignSelf:"end",cursor:"pointer"},onClick:()=>t==null?void 0:t(o),children:e.jsx(Te,{name:"TrashIcon",width:17})})]})},Ee=({text:o})=>e.jsxs("button",{className:W.addBtn,children:[o||"Добавить еще",e.jsx(E,{name:"PlusIcon",width:12})]}),Dt=()=>{Xe();const[o,t]=u.useState([{id:ie(),purchasePrice:"",price:""}]),s=n=>{o.length!=1&&t(o.filter(i=>i.id!==n))},a=(n,i,p)=>{t(r=>r.map(_=>_.id===n?{..._,[i]:p}:_))};return e.jsxs("div",{className:B.fixedDelivery,children:[o.map(n=>e.jsx("div",{className:B.fixedDelivery_wrap,children:e.jsx(Pt,{id:n.id,purchasePrice:n.purchasePrice,price:n.price,onInputChange:a,onRemove:s})},n.id)),e.jsx("div",{className:B.fixedDelivery_add,children:e.jsx(Ee,{})})]})},Ot=()=>e.jsxs("div",{className:W.flexible_inputs,children:[e.jsxs("div",{className:W.flexible_inputs_top,children:[e.jsxs("div",{className:W.flexible_inputs_wrapLarge,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"Сумма покупки от"}),e.jsx("input",{type:"text",className:W.flexible_inputs_input})]}),e.jsxs("div",{className:W.flexible_inputs_wrapSmall,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"Первые км"}),e.jsx("input",{className:W.flexible_inputs_input,type:"text"})]}),e.jsxs("div",{className:W.flexible_inputs_wrapSmall,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"Цена"}),e.jsx("input",{className:W.flexible_inputs_input,type:"text"})]})]}),e.jsxs("div",{className:W.flexible_inputs_bottom,children:[e.jsxs("div",{className:W.flexible_inputs_wrapLarge,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"За каждый следующий км"}),e.jsx("input",{className:W.flexible_inputs_input,type:"text"})]}),e.jsx("button",{className:W.flexible_inputs_btn,children:e.jsx(Te,{name:"TrashIcon",width:17})})]})]}),Bt=()=>e.jsxs("div",{style:{maxWidth:"355px",width:"100%"},children:[e.jsx(Ot,{}),e.jsx("div",{style:{display:"flex",justifyContent:"end",marginTop:"10px"},children:e.jsx(Ee,{})})]}),Ge=({href:o,text:t})=>e.jsx(H,{to:o,className:W.btns,children:e.jsx("button",{className:W.btns_save,children:t||"Сохранить"})}),__=()=>{const{cities:o,setCities:t,selectedCities:s,deliveryStores:a,setDeliveryStores:n,typeOfDelivery:i,setTypeOfDelivery:p}=Xe(),[r,_]=u.useState(!1),[l]=u.useState("Выбирите город"),[d,m]=u.useState(!1),g=()=>{if(s.length>0)return;const f=!d;n(a.map(y=>({...y,checked:f}))),m(f)},h=f=>{if(s.length>0)return;const y=a.map(N=>N.id===f?{...N,checked:!N.checked}:N);n(y);const $=y.every(N=>N.checked);m($)},x=f=>{p(f)};return u.useEffect(()=>{s.length===0&&p(""),s.length===0&&(m(!1),n(a.map(f=>({...f,checked:!1}))))},[s]),e.jsxs("div",{className:B.deliverySettings,children:[e.jsx("div",{onClick:g,style:{marginBottom:"20px",paddingLeft:"10px"},children:e.jsx(St,{label:d?"Отключить все":"Выбрать все",checked:d})}),e.jsx("div",{className:B.deliverySettings_cities,children:a.map(f=>e.jsx(l_,{store:f,setChecked:h},f.id))}),e.jsx("div",{style:{marginBottom:`${s.length>0?"20px":"0"}`},children:e.jsx(It,{openBlock:r,setOpenBlock:_,currentVersion:l,versionList:o,setVersionList:t})}),e.jsx("div",{className:B.deliverySettings_selected,children:s.map(f=>e.jsx($t,{city:f},f.id))}),s.length>0&&e.jsxs("div",{className:B.deliverySettings_radio,children:[e.jsx(qe,{text:"Фиксированная доставка",id:"fixedDelivery",value:"fixedDelivery",checked:i==="fixedDelivery",onChange:x}),e.jsx(qe,{text:"Гибкая доставка",id:"flexibleDelivery",value:"flexibleDelivery",checked:i==="flexibleDelivery",onChange:x})]}),i!==""&&e.jsxs("div",{children:[i==="fixedDelivery"&&e.jsx(Dt,{}),i==="flexibleDelivery"&&e.jsx(Bt,{})]}),e.jsx("div",{className:B.deliverySettings_btn,children:e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})})]})},d_=()=>e.jsxs("div",{className:B.delivery_brief_info,children:[e.jsxs("div",{className:B.delivery_brief_info_header,children:[e.jsx("span",{className:B.delivery_brief_info_header_title,children:"Магазин 1"}),e.jsx(H,{to:"/admin/settings/delivery/fullInfo",children:e.jsx(E,{name:"EyeIcon",width:18,height:16})})]}),e.jsxs("div",{className:B.delivery_brief_info_content,children:[e.jsxs("div",{className:B.delivery_brief_info_content_item,children:[e.jsx("span",{className:B.delivery_brief_info_city,children:"Ташкент"}),e.jsx("span",{className:B.delivery_brief_info_text,children:"Фиксированная"})]}),e.jsxs("div",{className:B.delivery_brief_info_content_item,children:[e.jsx("span",{className:B.delivery_brief_info_city,children:"Бухара"}),e.jsx("span",{className:B.delivery_brief_info_text,children:"Гибкая"})]})]})]}),p_=()=>e.jsxs("div",{className:B.delivery_brief,children:[e.jsx("h4",{className:B.delivery_brief_title,children:"Существующие настройки"}),e.jsx("div",{className:B.delivery_brief_wrap,children:e.jsx(d_,{})}),e.jsx("div",{className:B.delivery_brief_btn,children:e.jsx(Ge,{href:"/admin/settings/delivery/settingsDelivery",text:"Добавить еще настройку"})})]}),Qe=({city:o,type:t})=>e.jsxs("div",{className:B.fullInfo_card,children:[e.jsxs("p",{className:B.fullInfo_card_title,children:[o," - ",t]}),e.jsxs("div",{className:B.fullInfo_card_price,children:[e.jsxs("div",{className:B.fullInfo_card_price_desc,children:[e.jsx("p",{className:B.fullInfo_card_price_desc_text,children:"Мин сумма от:"}),e.jsx("p",{className:B.fullInfo_card_price_desc_text,children:"100 000"})]}),e.jsxs("div",{className:B.fullInfo_card_price_desc,children:[e.jsx("p",{className:B.fullInfo_card_price_desc_text,children:"Мин сумма от:"}),e.jsx("p",{className:B.fullInfo_card_price_desc_text,children:"100 000"})]})]})]}),et=({href:o})=>e.jsx(H,{to:o,className:W.btns,children:e.jsx("button",{className:W.btns_back,children:"Назад"})}),u_=()=>e.jsxs("div",{className:B.fullInfo,children:[e.jsxs("div",{className:B.fullInfo_header,children:[e.jsx("span",{className:B.fullInfo_title,children:"Магазин 1"}),e.jsx(H,{to:"/admin/settings/delivery/editDelivery",children:e.jsx(Te,{name:"PencilSquareIcon",width:20,height:20})})]}),e.jsxs("div",{className:B.fullInfo_wrap,children:[e.jsx(Qe,{city:"Ташкент",type:"Фиксированная"}),e.jsx(Qe,{city:"Бухара",type:"Гибкая"}),e.jsx(Qe,{city:"Самарканд",type:"Фиксированная"})]}),e.jsx("div",{className:B.fullInfo_btn,children:e.jsx(et,{href:"/admin/settings/delivery/briefInfo"})})]}),it=({cityName:o,type:t})=>e.jsxs("div",{className:B.editDelivery_settings,children:[e.jsxs("div",{className:B.editDelivery_settings_header,children:[e.jsx($t,{cityName:o}),e.jsxs("span",{children:[t=="fixed"&&"Фиксированная",t=="flexible"&&"Гибкая"]})]}),e.jsx("div",{className:B.editDelivery_settings_content,children:e.jsxs("div",{className:B.editDelivery_settings_content_container,children:[e.jsxs("div",{className:B.editDelivery_settings_content_container_wrap,children:[t=="fixed"&&e.jsx(Pt,{}),t=="flexible"&&e.jsx(Ot,{})]}),e.jsx("div",{className:B.editDelivery_settings_content_container_btn,children:e.jsx(Ee,{})})]})})]}),m_=()=>e.jsxs("div",{className:B.editDelivery,children:[e.jsx("span",{className:B.editDelivery_title,children:"Магазин1"}),e.jsx("div",{className:B.editDelivery_link,children:e.jsx(H,{to:"/admin/settings/delivery/addCityPage",children:e.jsx(Ee,{text:"Добавить еще город"})})}),e.jsxs("div",{className:B.editDelivery_content,children:[e.jsx(it,{cityName:"Ташкент",type:"fixed"}),e.jsx(it,{cityName:"Ташкент",type:"flexible"})]}),e.jsxs("div",{className:B.editDelivery_btn,children:[e.jsx(et,{href:"/admin/settings/delivery/fullInfo"}),e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})]})]}),h_=()=>{const[o,t]=u.useState(!1),[s]=u.useState("Выбирите город"),[a,n]=u.useState(""),[i,p]=u.useState([{id:"1",city:"Ташкент"},{id:"2",city:"Бухара"},{id:"3",city:"Самарканд"}]),r=_=>{n(_)};return e.jsx("div",{className:B.addCity,children:e.jsxs("div",{className:B.addCity_content,children:[e.jsx(It,{openBlock:o,setOpenBlock:t,currentVersion:s,versionList:i,setVersionList:p}),e.jsxs("div",{className:B.addCity_radio,children:[e.jsx(qe,{text:"Фиксированная доставка",id:"fixedDelivery",value:"fixedDelivery",checked:a==="fixedDelivery",onChange:r}),e.jsx(qe,{text:"Гибкая доставка",id:"flexibleDelivery",value:"flexibleDelivery",checked:a==="flexibleDelivery",onChange:r})]}),e.jsx("div",{children:a!==""&&e.jsxs("div",{children:[a==="fixedDelivery"&&e.jsx(Dt,{}),a==="flexibleDelivery"&&e.jsx(Bt,{})]})})]})})},g_=()=>e.jsxs("div",{children:[e.jsx("span",{className:B.addCity_title,children:"Магазин1"}),e.jsx(h_,{}),e.jsx("div",{className:B.addCity_addBtn,children:e.jsx(Ee,{text:"Добавить город"})}),e.jsxs("div",{className:B.addCity_saveBtn,children:[e.jsx(et,{href:"/admin/settings/delivery/editDelivery"}),e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})]})]}),b_=()=>{const t=xe().pathname;return e.jsx("div",{children:e.jsx("div",{className:B.delivery,children:e.jsxs("div",{className:B.delivery_wrap,children:[t==="/admin/settings/delivery"&&e.jsxs("div",{className:B.delivery_settingsAdd,children:[e.jsx("p",{children:"У вас нет  настроенных  доставок "}),e.jsx(H,{to:"/admin/settings/delivery/settingsDelivery",children:"Добавить настройку"})]}),t==="/admin/settings/delivery/settingsDelivery"&&e.jsx(__,{}),t==="/admin/settings/delivery/briefInfo"&&e.jsx(p_,{}),t==="/admin/settings/delivery/fullInfo"&&e.jsx(u_,{}),t==="/admin/settings/delivery/editDelivery"&&e.jsx(m_,{}),t==="/admin/settings/delivery/addCityPage"&&e.jsx(g_,{})]})})})};function x_(){const{addBlockStatus:o,setAddBlockStatus:t,setAddBlockProducts:s}=le();u.useEffect(()=>{s([])},[]);const a=n=>{n.stopPropagation(),t(!o)};return e.jsxs("button",{className:`${c.homePage_addBlock} ${o?c.homePage_addBlock_active:""}`,onClick:n=>a(n),children:[e.jsx("span",{className:c.homePage_addBlock_title,children:"Добавить блок"}),e.jsx(Ht,{name:"PlusIcon"})]})}function f_({setSure:o,setDelModalStatus:t}){return e.jsx("div",{className:c.homePage_delModal,onClick:()=>t(!1),children:e.jsxs("div",{className:c.homePage_delModal_block,onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:"Вы уверены что хотите удалить блок ?"}),e.jsxs("div",{className:c.homePage_delModal_buttons,children:[e.jsx("button",{className:`${c.homePage_delModal_btn} ${c.homePage_delModal_del}`,onClick:()=>o(!0),children:"удалить"}),e.jsx("button",{className:`${c.homePage_delModal_btn} ${c.homePage_delModal_cancel}`,onClick:()=>t(!1),children:"отмена"})]})]})})}function v_({item:o,delModalStatus:t,setDelModalStatus:s}){const{addBlockStatus:a,homePageBlock:n,setHomePageBlock:i,addBlockProducts:p}=le(),[r,_]=u.useState(!1),l=h=>{const x=n.filter(f=>f.id!=h);i([...x]),_(!1)};u.useEffect(()=>{r&&(l(o.id),s(!1))},[r]);const[d,m]=u.useState("");u.useEffect(()=>{m(o.title)},[]);const g=h=>{const x=n.map(f=>f.id==h.id?{id:h.id,title:d,superCategory:h.superCategory,category:h.category,subCategory:h.subCategory,products:h.products}:{...f});i([...x])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.homePage_wrapper,draggable:!t,children:[t&&e.jsx("div",{onDragStart:h=>h.stopPropagation(),onDragOver:h=>h.stopPropagation(),children:e.jsx(f_,{setSure:_,setDelModalStatus:s})}),e.jsxs("div",{className:c.homePage_wrapper_title,children:[e.jsx("input",{type:"text",value:d,onChange:h=>m(h.target.value),onBlur:()=>g(o)}),e.jsx(E,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:`${c.homePage_addBlockItem} ${a?c.homePage_addBlockItem_active:""}`,children:[e.jsx("button",{className:c.homePage_addBlockItem_close,onClick:()=>s(!0),children:e.jsx(E,{name:"XMarkIcon"})}),e.jsxs("p",{className:c.homePage_addBlockItem_categories,children:[e.jsxs("span",{children:[o.superCategory.name.ru," / "]}),e.jsxs("span",{children:[o.category.name.ru," / "]}),e.jsx("span",{children:o.subCategory.name.ru})]}),e.jsx("h2",{className:c.homePage_addBlockItem_super_title,children:"Продукты"}),e.jsx("div",{className:c.homePage_addBlockItem_content,children:o.products.map(h=>{var x,f;return e.jsx("div",{className:c.homePage_addBlockItem_super_item,children:e.jsx("span",{children:(f=(x=h.nomenclature)==null?void 0:x.name)==null?void 0:f.ru})},h.id)})})]})]})})}const j_="_modalCategory_6mlu2_1",k_="_modalCategory_block_6mlu2_10",y_="_modalCategory_block_createTitle_6mlu2_16",w_="_modalCategory_nav_6mlu2_33",C_="_modalCategory_nav_title_6mlu2_40",N_="_modalCategory_content_6mlu2_46",I_="_modalCategory_content_message_6mlu2_53",S_="_modalCategory_content_allActive_6mlu2_61",$_="_modalCategory_content_more_6mlu2_61",P_="_modalCategory_content_link_6mlu2_76",D_="_modalCategory_content_link_product_6mlu2_76",O_="_modalCategory_content_link_active_6mlu2_111",B_="_modalCategory_content_link_product_active_6mlu2_111",M_="_modalCategory_content_item_6mlu2_124",A_="_modalCategory_content_block_6mlu2_146",E_="_modalCategory_content_block_title_6mlu2_150",W_="_settings_6mlu2_157",U_="_settings_title_6mlu2_160",L_="_settings_content_6mlu2_165",R_="_settings_content_top_6mlu2_168",q_="_settings_content_buttons_6mlu2_171",z_="_settings_content_btn_6mlu2_181",F_="_settings_content_btn_cancel_6mlu2_193",T_="_settings_content_btn_save_6mlu2_196",V_="_settings_tools_6mlu2_199",H_="_settings_tools_link_6mlu2_204",X_="_settings_tools_link_active_6mlu2_219",G_="_blink_6mlu2_1",F={modalCategory:j_,modalCategory_block:k_,modalCategory_block_createTitle:y_,modalCategory_nav:w_,modalCategory_nav_title:C_,modalCategory_content:N_,modalCategory_content_message:I_,modalCategory_content_allActive:S_,modalCategory_content_more:$_,modalCategory_content_link:P_,modalCategory_content_link_product:D_,modalCategory_content_link_active:O_,modalCategory_content_link_product_active:B_,modalCategory_content_item:M_,modalCategory_content_block:A_,modalCategory_content_block_title:E_,settings:W_,settings_title:U_,settings_content:L_,settings_content_top:R_,settings_content_buttons:q_,settings_content_btn:z_,settings_content_btn_cancel:F_,settings_content_btn_save:T_,settings_tools:V_,settings_tools_link:H_,settings_tools_link_active:X_,blink:G_};function Z_({superCategory:o,category:t,superId:s,moreSuperStatus:a,setSubId:n,setLocalPicked:i,setSuperId:p,setMessageStatus:r,setSubCategories:_,fetchCategories:l}){const{setCurrentCategory:d}=ve(),[m,g]=u.useState(10),h=(f,y)=>{f.preventDefault(),l("category",1,10,y.id),_([]);const $=t.filter(N=>N.parentId==y.id);d($),i(y),p(y.id),r(!1),n(0)},x=f=>{f.preventDefault();const y=m+10;g(y),l("super",1,y)};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[o.map(f=>e.jsxs("div",{className:`${F.modalCategory_content_link} ${f.id==s?F.modalCategory_content_link_active:""} `,onClick:y=>h(y,f),children:[e.jsx("span",{children:f.name.ru}),e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},f.id)),a&&e.jsx("span",{className:F.modalCategory_content_more,onClick:f=>x(f),children:"Ещё..."})]})]})}function J_({superId:o,categoryId:t,setCategoryId:s,category:a,moreStatus:n,setMoreStatus:i,setSubId:p,setSubCategory:r,fetchCategories:_}){const[l,d]=u.useState(10);u.useEffect(()=>{d(10),i(!0),s(0)},[o]);const m=h=>{h.preventDefault();const x=l+10;d(x),_("category",1,x,o)},g=(h,x)=>{p(0),r(h,x)};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[a==null?void 0:a.map(h=>e.jsxs("div",{className:`${F.modalCategory_content_link} ${h.id==t?F.modalCategory_content_link_active:""} `,onClick:x=>g(x,h),children:[e.jsx("span",{children:h.name.ru}),e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),n&&e.jsx("span",{className:F.modalCategory_content_more,onClick:h=>m(h),children:"Ещё..."})]})]})}function Q_({subId:o,setSubId:t,categoryId:s,moreSubStatus:a,setMoreSubStatus:n,subCategories:i,setSubProductsList:p,fetchCategories:r}){le();const[_]=u.useState(1),[l,d]=u.useState(10);u.useEffect(()=>{n(!0)},[s]);const m=h=>{h.preventDefault();const x=l+10;d(x),r("subCategory",_,x,s)},g=async(h,x)=>{p(h,x),t(x.id)};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[i==null?void 0:i.map(h=>e.jsxs("div",{className:`${F.modalCategory_content_link} ${h.id==o?F.modalCategory_content_link_active:""} `,onClick:x=>g(x,h),children:[e.jsx("span",{children:h.name.ru}),e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),a&&e.jsx("span",{className:F.modalCategory_content_more,onClick:h=>m(h),children:"Ещё..."})]})]})}function Y_({setSettings:o,setCancel:t}){const{setAddBlockStatus:s}=le(),a=()=>{t(),s(!1)};return e.jsxs("div",{className:F.settings_content_buttons,children:[e.jsx("button",{className:`${F.settings_content_btn} ${F.settings_content_btn_cancel}`,onClick:a,children:"Отмена"}),e.jsx(H,{to:"#",className:`${F.settings_content_btn} ${F.settings_content_btn_save}`,onClick:n=>o(n),children:"Сохранить"})]})}function K_({subId:o}){const{addBlockProducts:t,setAddBlockProducts:s}=le(),[a,n]=u.useState(!1),[i,p]=u.useState([]),[r,_]=u.useState([]),[l]=u.useState(1),[d,m]=u.useState(10),[g,h]=u.useState(!0);u.useEffect(()=>{s([]),_([]),n(!1),p([]),o!=0&&O(o,d)},[o]);const x=u.useRef([]),f=u.useRef(null),y=(j,v)=>{if(j){p([...i,v]);const b=r.filter(w=>w.id==v)[0];s([...t,b])}else if(!j&&f.current){const b=i.filter(k=>k!=v);p([...b]);const w=t.filter(k=>k.id!=v);s([...w]),n(!1),f.current.checked=!1}f.current&&j&&i.length+1==r.length&&(n(!0),f.current.checked=!0,s([...r]))},$=j=>{j.preventDefault();const v=d+10;m(v),P(o,v)},N=j=>{if(n(j),j){x.current.forEach(b=>{b&&(b.checked=j)});const v=r.map(b=>b.id);p([...v]),s([...r])}else p([]),x.current.forEach(v=>{v&&(v.checked=j)}),s([])};async function O(j,v){const b=await P(j,v);_([...b])}const P=async(j,v)=>{const b=ge.get("multi-store");try{const w=await T.get(`web-nomenclatures?multiStoreId=${b}&categoryId=${j}&page=${l}&perPage=${v}`),k=await w.data.data,C=await w.data.pagination;return k.length<C.total?_([...k]):k.length==C.total&&(_([...k]),h(!1)),w.data.data}catch(w){console.log("Ошибка при получении продуктов по id",w)}};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[r.length>1&&e.jsxs("label",{className:F.modalCategory_content_allActive,children:[e.jsx("input",{type:"checkbox",onChange:j=>N(j.target.checked),ref:f}),e.jsx("span",{children:a?"Отключить все":"Выбрать все"})]}),r==null?void 0:r.map((j,v)=>{var b,w;return e.jsxs("label",{className:`
              ${F.modalCategory_content_link_product}
              ${a||i.includes(j.id)?F.modalCategory_content_link_active:""}
              `,children:[e.jsx("input",{type:"checkbox",onChange:k=>y(k.target.checked,j.id),ref:k=>{x.current[v]=k}}),e.jsx("span",{children:(w=(b=j==null?void 0:j.nomenclature)==null?void 0:b.name)==null?void 0:w.ru})]},j.id)}),g&&e.jsx("span",{className:F.modalCategory_content_more,onClick:j=>$(j),children:"Ещё..."})]})]})}function ed(){const{TemporaryData:o,currentProduct:t,setCurrentCategory:s,setPickedCategory:a,setCurrentSubCategory:n,setTemporaryData:i,setOpenModalCategory:p,setCurrentProduct:r}=ve(),{homePageBlock:_,setHomePageBlock:l,setAddBlockStatus:d,homePageBlockName:m,setHomePageBlockName:g,setAddBlockStatusItem:h,addBlockProducts:x,setAddBlockProducts:f}=le(),[y,$]=u.useState(0),[N,O]=u.useState(0),[P,j]=u.useState(0),[v,b]=u.useState({}),[w,k]=u.useState(!1),[C,A]=u.useState("Выберите категорию"),[te,V]=u.useState(!0),[G,he]=u.useState(!0),[ye,fe]=u.useState(!0),[X,z]=u.useState([]),[Z,ee]=u.useState([]),[ae,R]=u.useState([]);u.useEffect(()=>{we("super",1,10)},[]);const S=(re,me)=>{re.preventDefault(),we("subCategory",1,10,me.id);const je=ae.filter(ke=>ke.parentId==me.id);n(je),b(me),O(me.id),k(!1)},oe=(re,me)=>{re.preventDefault(),b(me),j(me.id),k(!1)},_e=async re=>{if(re.preventDefault(),Object.keys(v).length===0){k(!0),A("Выберите Суперкотегорию");return}if(Z.length>0&&N===0){k(!0),A("Выберите Категорию");return}if(ae.length>0&&P===0){k(!0),A("Выберите Подкотегорию");return}if(m==""){k(!0),A("Введите название блока");return}if(P){h(!0);const me=X.filter(J=>J.id==y)[0],je=Z.filter(J=>J.id==N)[0],ke=ae.filter(J=>J.id==P)[0],Q={id:ie(),title:m||"Заголовок не добавлен",superCategory:me,category:je,subCategory:ke,products:x};l([Q,..._]);const q=o.find(J=>J.mxikCode==(t==null?void 0:t.mxikCode)),Y=o.findIndex(J=>J.mxikCode==(t==null?void 0:t.mxikCode));q&&(q.crmCategory=v,o.splice(Y,1,q),i([...o]))}ue()},ue=()=>{a(v),p(!1),$(0),O(0),r({}),j(0),b({}),s([]),n([]),f([]),k(!1),A("Выберите категорию"),d(!1),g("")},we=async(re,me,je,ke)=>{try{const Q=re=="super"?`https://api.mcrm.uz/api/categories?&page=${me}&perPage=${je}`:`https://api.mcrm.uz/api/categories?parentId=${ke}&page=${me}&perPage=${je}`,q=await ze.get(Q),Y=q.data.data.map(J=>({...J,label:re==="super"?"Супер категория":re==="category"?"Категория":"Субкатегория"}));if(re==="super"){const J=await q.data.pagination;Y.length<J.total?z([...Y]):Y.length==J.total&&(z([...Y]),V(!1))}if(re==="category"){const J=await q.data.pagination;Y.length<J.total?ee([...Y]):Y.length==J.total&&(ee([...Y]),he(!1))}if(re==="subCategory"){const J=await q.data.pagination;Y.length<J.total?R([...Y]):Y.length==J.total&&(R([...Y]),fe(!1))}}catch(Q){console.error(`Ошибка произошла при получении ${re} категорий`,Q)}},Ce=u.useRef(null);return u.useEffect(()=>{Ce.current&&Ce.current.focus()},[Ce]),e.jsx("div",{className:F.modalCategory,onClick:re=>re.stopPropagation(),children:e.jsxs("div",{className:F.modalCategory_block,children:[e.jsx("p",{className:F.modalCategory_content_message,children:w?C:""}),e.jsxs("div",{className:`${F.modalCategory_block_createTitle}`,children:[e.jsx("input",{ref:Ce,type:"text",value:m,onChange:re=>g(re.target.value),placeholder:"Заголовок  блока"}),e.jsx(E,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:F.modalCategory_content,children:[e.jsx(Z_,{moreSuperStatus:te,superId:y,setSubId:j,superCategory:X,category:Z,setLocalPicked:b,setSuperId:$,setMessageStatus:k,fetchCategories:we,setSubCategories:R}),Z.length>0&&e.jsx(J_,{setSubId:j,setCategoryId:O,setMoreStatus:he,moreStatus:G,superId:y,categoryId:N,category:Z,setSubCategory:S,fetchCategories:we}),ae.length>0&&e.jsx(Q_,{subId:P,setSubId:j,moreSubStatus:ye,categoryId:N,subCategories:ae,setSubProductsList:oe,setMoreSubStatus:fe,fetchCategories:we}),P!=0&&e.jsx(K_,{subId:P}),e.jsx(Y_,{setSettings:_e,setCancel:ue})]})]})})}function td(){const{addBlockStatus:o,homePageBlock:t,setHomePageBlock:s}=le(),[a,n]=u.useState(null),[i,p]=u.useState([]),[r,_]=u.useState(!1);u.useEffect(()=>{const h=i.length>0?i.reduce((f,y)=>y.order>f?y.order:f,-1/0):0,x=t.map((f,y)=>({...f,order:h+y+1}));p([...x])},[t]),u.useEffect(()=>{},[]);function l(h,x){n(x),h.target.style.cursor=r?"default":"grabbing"}function d(h){h.target.style.cursor=r?"default":"grab"}function m(h){h.preventDefault()}function g(h,x){h.preventDefault();const f=i&&i.map(y=>y.id===x.id?{...y,order:(a==null?void 0:a.order)||y.order}:y.id===(a==null?void 0:a.id)?{...y,order:x.order}:y).sort((y,$)=>(y&&y.order)-($&&$.order));f&&(p(f),s(f)),n(null)}return e.jsxs("div",{className:c.homePage,children:[e.jsx(x_,{}),o&&e.jsx(ed,{}),e.jsx("div",{className:c.homePage_blocks,children:i.length>0&&i.map(h=>e.jsx("div",{draggable:!r,onDragStart:x=>l(x,h),onDragLeave:x=>d(x),onDragEnd:x=>d(x),onDragOver:x=>m(x),onDrop:x=>g(x,h),children:e.jsx(v_,{item:h,delModalStatus:r,setDelModalStatus:_})},h.id))})]})}const sd=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"},{id:"7",label:"Главная страница",href:"/admin/settings/homePage"}];function od(){const t=xe().pathname,{setAddBlockStatus:s}=le();return e.jsx("div",{className:c.settings,onClick:()=>s(!1),children:e.jsxs("div",{className:c.settings_content,children:[e.jsx("div",{className:c.settings_content_top,children:e.jsx("ul",{className:c.settings_tools,children:sd.map(a=>e.jsx("li",{children:e.jsx(H,{to:a.href,className:`${c.settings_tools_link} ${t.startsWith(a.href)?c.settings_tools_link_active:""}`,children:a.label})},a.id))})}),t=="/admin/settings/modules"&&e.jsx(Oa,{}),t=="/admin/settings/templates"&&e.jsx(Ba,{}),t=="/admin/settings/categories"&&e.jsx(ir,{}),t.startsWith("/admin/settings/banner")&&e.jsx(Bc,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(Ei,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(b_,{}),t.startsWith("/admin/settings/homePage")&&e.jsx(td,{})]})})}const lt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function nd(){const[o,t]=u.useState(""),[s]=u.useState(1),[a]=u.useState(10),[n,i]=u.useState({status:!1,message:""}),[p,r]=u.useState([]);u.useEffect(()=>{o||(r([]),i({status:!1,message:""}))},[o]);async function _(l){l.preventDefault();const d=ge.get("multi-store");try{const g=await(await T.get(`nomenclatures?multiStoreId=${d}&name=${o}&page=${s}&perPage=${a}`)).data.data;g.length>0?(r([...g]),i({status:!1,message:""})):(r([]),i({status:!0,message:"Совпадений не найдено"}))}catch(m){console.log("Ошибка произошла при поиске продуктов на складе",m)}}return e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("form",{action:"",className:c.addingWrapper_form,onSubmit:l=>_(l),children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:l=>t(l.target.value),value:o}),e.jsx(E,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsx("tr",{className:c.addingWrapper_thead_tr,children:lt.map(l=>e.jsx("th",{className:c.addingWrapper_thead_th,children:l.title},l.id))})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:p==null?void 0:p.map(l=>e.jsxs("tr",{className:c.addingWrapper_tbody_tr,children:[lt.map(d=>{var m;return e.jsxs("td",{className:c.addingWrapper_tbody_td,children:[d.title=="Наименование"?e.jsx("span",{children:(m=l==null?void 0:l.name)==null?void 0:m.ru}):"",d.title=="Штрих-код"?e.jsx("span",{children:l.mxik}):"",d.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},d.id)}),!l.hasWebNomenclature&&e.jsx("td",{className:c.addingWrapper_tbody_td,children:e.jsx(H,{to:`/admin/stock-product/${l.id}`,className:c.addingWrapper_tbody_add,children:"Добавить"})})]},l==null?void 0:l.mxik))})]}),n.status&&e.jsx("span",{className:c.addingWrapper_table_error,children:n.message})]})}const _t=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function ad(){const[o,t]=u.useState(""),[s,a]=u.useState({status:!1,message:""}),[n,i]=u.useState([]),[p]=u.useState(1),[r]=u.useState(10);u.useEffect(()=>{o||(i([]),a({status:!1,message:""}))},[o]);async function _(){const g=ge.get("multi-store");try{console.log(222,"searchText",o);const x=(await T.get(`web-nomenclatures?multiStoreId=${g}&title=${o}&page=${p}&perPage=${r}`)).data.data;console.log(999,"data",x),x.length>0?(i([...x]),a({status:!1,message:""})):(i([]),a({status:!0,message:"Совпадений не найдено"}))}catch(h){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",h)}}async function l(g,h){g.preventDefault();try{const x=await T.patch(`web-nomenclatures/${h}`,{isActive:!1});t(""),i([]),console.log("Продукт успешно отключен с веб сайта",x)}catch(x){console.log("Ошибка произошла при удалении продукта с вебсайта",x)}}async function d(g,h){g.preventDefault();try{const x=await T.patch(`web-nomenclatures/${h}`,{isActive:!0});t(""),i([]),console.log("Продукт успешно включен на веб сайта",x)}catch(x){console.log("Ошибка произошла при удалении продукта с вебсайта",x)}}const m=async g=>{g.preventDefault(),_()};return e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("form",{action:"",className:c.addingWrapper_form,onSubmit:g=>m(g),children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:g=>t(g.target.value),value:o}),e.jsx(E,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsxs("tr",{className:c.addingWrapper_thead_tr,children:[_t.map(g=>e.jsx("th",{className:c.addingWrapper_thead_th,children:g.title},g.id)),e.jsx("th",{className:c.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:n==null?void 0:n.map(g=>e.jsxs("tr",{className:c.addingWrapper_tbody_tr,children:[_t.map(h=>e.jsxs("td",{className:c.addingWrapper_tbody_td,children:[h.title=="Наименование"?e.jsx("span",{children:g.title}):"",h.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},h.id)),e.jsx("td",{className:c.addingWrapper_tbody_td,children:e.jsxs("div",{className:c.addingWrapper_tbody_buttons,children:[g.isActive&&e.jsx(H,{to:"#",className:c.addingWrapper_tbody_del,onClick:h=>l(h,g.id),children:"Отключить"}),!g.isActive&&e.jsx(H,{to:"#",className:c.addingWrapper_tbody_del,onClick:h=>d(h,g.id),children:"Включить"}),e.jsx(H,{to:`/admin/website-product/${g.id}`,className:c.addingWrapper_tbody_add,children:"Изменить"})]})})]},g==null?void 0:g.id))})]}),s.status&&e.jsx("span",{className:c.addingWrapper_table_error,children:s.message})]})}const rd=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function cd(){const t=xe().pathname;return e.jsxs("div",{className:c.products,children:[e.jsx("div",{className:c.products_buttons,children:rd.map(s=>e.jsx(H,{to:s.href,className:`${c.products_btn} ${s.href==t?c.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(nd,{}),t=="/admin/product/adding/website"&&e.jsx(ad,{})]})}const id=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function ld(){const t=xe().pathname;return e.jsxs("div",{className:c.products,children:[e.jsx("div",{className:c.products_buttons,children:id.map(s=>e.jsx(H,{to:s.href,className:`${c.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?c.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(cd,{})]})}const _d="_user_title_1uizv_1",dd="_user_list_1uizv_6",pd="_user_list_link_1uizv_12",ud="_user_list_link_active_1uizv_26",md="_user_form_1uizv_30",hd="_user_form_btn_1uizv_35",gd="_user_form_wrap_1uizv_51",bd="_user_form_input_1uizv_57",xd="_user_form_icon_1uizv_65",fd="_user_table_1uizv_68",vd="_user_table_tbody_1uizv_71",jd="_user_table_tr_1uizv_74",kd="_user_table_th_1uizv_77",yd="_user_table_td_1uizv_85",wd="_user_table_btns_1uizv_89",Cd="_user_table_btn_1uizv_89",Nd="_user_table_btn_blocked_1uizv_107",Id="_modal_1uizv_111",Sd="_modal_active_1uizv_120",$d="_modal_wrap_1uizv_123",Pd="_modal_wrap_header_1uizv_131",Dd="_modal_wrap_stores_1uizv_143",Od="_modal_wrap_stores_text_1uizv_165",Bd="_modal_btns_1uizv_169",Md="_modal_btn_1uizv_169",Ad="_modal_content_1uizv_193",Ed="_modal_content_text_1uizv_197",Wd="_versions_1uizv_206",Ud="_versions_block_1uizv_211",Ld="_versions_block_top_1uizv_216",Rd="_versions_block_top_title_1uizv_226",qd="_versions_block_top_arrow_1uizv_230",zd="_versions_block_top_arrow_active_1uizv_239",Fd="_versions_block_dropdown_1uizv_242",Td="_versions_block_dropdown_item_1uizv_257",Vd="_versions_block_dropdown_open_1uizv_268",Hd="_shop_header_1uizv_275",Xd="_shop_header_title_1uizv_282",M={user_title:_d,user_list:dd,user_list_link:pd,user_list_link_active:ud,user_form:md,user_form_btn:hd,user_form_wrap:gd,user_form_input:bd,user_form_icon:xd,user_table:fd,user_table_tbody:vd,user_table_tr:jd,user_table_th:kd,user_table_td:yd,user_table_btns:wd,user_table_btn:Cd,user_table_btn_blocked:Nd,modal:Id,modal_active:Sd,modal_wrap:$d,modal_wrap_header:Pd,modal_wrap_stores:Dd,modal_wrap_stores_text:Od,modal_btns:Bd,modal_btn:Md,modal_content:Ad,modal_content_text:Ed,versions:Wd,versions_block:Ud,versions_block_top:Ld,versions_block_top_title:Rd,versions_block_top_arrow:qd,versions_block_top_arrow_active:zd,versions_block_dropdown:Fd,versions_block_dropdown_item:Td,versions_block_dropdown_open:Vd,shop_header:Hd,shop_header_title:Xd},tt=({headers:o})=>e.jsx("thead",{className:M.user_table_thead,children:e.jsx("tr",{className:M.user_table_tr,children:o.map(t=>e.jsx("th",{className:M.user_table_th,children:t.title},t.id))})}),st=()=>{const[o,t]=u.useState(""),{setUserSearch:s}=le(),a=n=>{n.preventDefault(),s(o)};return u.useEffect(()=>{o==""&&s("")},[o]),e.jsxs("form",{action:"",className:M.user_form,children:[e.jsxs("div",{className:M.user_form_wrap,children:[e.jsx("input",{type:"text",className:M.user_form_input,placeholder:"Поиск пользователей",onChange:n=>t(n.target.value),value:o}),e.jsx(E,{className:M.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:M.user_form_btn,onClick:n=>a(n),children:"Найти"})]})},ot=({arr:o,showStore:t})=>{const{usersList:s,userSearch:a,openModalAdmin:n,openAppointUser:i,shopListAdmin:p,setOpenAppointUser:r,setOpenModalAdmin:_,setUsersList:l,setEditUserAdmin:d,setShopListDropdownAdmin:m,setCloseBlock:g,setFilteredShopListAdmin:h}=le(),f=xe().pathname,[y,$]=u.useState([]);u.useEffect(()=>{let v=o;f==="/clients"?v=o.filter(b=>b.isUser):f==="/employees"&&(v=o.filter(b=>!b.isUser)),v=v==null?void 0:v.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),$(v)},[a,s,o,f]);const N=v=>{const b=s.map(w=>w.id===v?{...w,isBlocked:!w.isBlocked}:w);l(b)},O=v=>{_(!0),g(!0);const b=s.find(C=>C.id==v),w=[{id:ie(),title:"Магазин 1",order:1},{id:ie(),title:"Магазин 2",order:2},{id:ie(),title:"Магазин 3",order:3}],k=w.filter(C=>!(b!=null&&b.shopList.some(A=>A.title===C.title)));console.log("editUser",b),console.log("shopListAdminArr",w),b&&(m(b.shopList),d(b),h(k))},P=v=>{r(!0),g(!0),m([]),h(p);const b=s.find(w=>w.id==v);b&&d(b)},j=n||i;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:M.user_table_tbody,children:y.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:M.user_table_td,children:v.name}),e.jsx("td",{className:M.user_table_td,children:t?v.shopList.map(b=>e.jsxs("p",{children:[b.title," ",`(${b.position})`]},b.id)):e.jsx("p",{children:v.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:M.user_table_td,children:t?"Админ 1":v.registerDate}),e.jsx("td",{className:M.user_table_btns,children:v!=null&&v.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${M.user_table_btn} ${v.isBlocked?M.user_table_btn_blocked:""}`,onClick:()=>N(v.id),children:v.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:M.user_table_btn,onClick:()=>P(v.id),disabled:j,children:"Назначить"})]}):e.jsx("button",{className:M.user_table_btn,onClick:()=>O(v.id),style:{background:"#B5FFC7"},disabled:j,children:"Изменить"})})]},v.id))})})};function dt({color:o="black",className:t,header:s,isEnabled:a,dropdownItem:n,margin:i,versionList:p,closeBlock:r}){const{shopListAdmin:_,shopListDropdownAdmin:l,filteredShopListAdmin:d,setShopListDropdownAdmin:m,setShopListAdmin:g}=le(),[h,x]=u.useState("Выберете должность"),[f,y]=u.useState("Выберете магазин"),[$,N]=u.useState(!1);u.useEffect(()=>{n!=null&&n.position?x(n.position):x("Выберете должность")},[n==null?void 0:n.position]),u.useEffect(()=>{r||N(!1)},[r]);const O=(b,w)=>{if(n){x(b.title);const k=l.filter(A=>A.title==n.title),C=l.findIndex(A=>A.title==n.title);k[0].position=b.title,l.splice(C,1,k[0]),m(l)}else y(b.title);if(a&&!l.some(k=>k.title==b.title)){x("Выберете должность");const k={...b,originalIndex:w};m([...l,k]),g(d.filter((C,A)=>A!==w))}N(!1)},P=b=>{const w=l.filter(k=>k.id!==b.id);if(m(w),b.originalIndex!==void 0){const k=[..._];k.splice(b.originalIndex,0,b),g(k)}else{const k=[...d,b].sort((C,A)=>C.order!==void 0&&A.order!==void 0?C.order-A.order:0);g(k),console.log("arr",k)}},j=()=>{N(!$)};function v(b,w){return b.order&&w.order&&(b==null?void 0:b.order)>(w==null?void 0:w.order)?1:-1}return e.jsx("div",{className:t??M.versions,style:{marginBottom:i},children:e.jsxs("div",{className:M.versions_block,children:[s&&e.jsxs("div",{className:M.shop_header,children:[e.jsx("p",{className:M.shop_header_title,children:n==null?void 0:n.title}),e.jsx("button",{onClick:()=>n&&P(n),children:e.jsx(E,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:M.versions_block_top,children:[e.jsx("h2",{className:M.versions_block_top_title,style:{color:o},children:n?h:f}),e.jsx("button",{className:M.versions_block_top_btn,onClick:()=>j(),children:e.jsx("div",{className:`${M.versions_block_top_arrow} ${$?M.versions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${M.versions_block_dropdown} ${$?M.versions_block_dropdown_open:""}`,children:p==null?void 0:p.sort(v).map((b,w)=>e.jsx("span",{className:M.versions_block_dropdown_item,onClick:()=>O(b,w),children:b.title},w))})]})})}const nt=()=>{const{currentShopModal:o,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:a,openModalAdmin:n,editUserAdmin:i,shopListAdmin:p,usersList:r,openAppointUser:_,closeBlock:l,filteredShopListAdmin:d,setCurrentShopModal:m,setShopListPositionAdmin:g,setCurrentShopPosition:h,setOpenModalAdmin:x,setShopListAdmin:f,setUsersList:y,setOpenAppointUser:$,setCloseBlock:N,setFilteredShopListAdmin:O}=le();u.useEffect(()=>{},[d]);const P=()=>{const k=r.findIndex(C=>C.id==(i==null?void 0:i.id));i&&t.every(C=>"position"in C)&&(i.shopList=t,r.splice(k,1,i),y(r),f(p),console.log("filteredShopListAdmin",d)),console.log("shopListAdmin",p),b(),t.length==0&&j()},j=()=>{if(i){i.isUser=!0,i.isEmployes=!1,i.shopList=[];const k={id:ie(),title:"",position:"пользователь"};i.shopList=[{...k}]}b()},v=()=>{const k=r.findIndex(C=>C.id==(i==null?void 0:i.id));if(i&&(i.shopList=t,r.splice(k,1,i),i.isUser=!1,i.isEmployes=!0,y(r),$(!1),!(i!=null&&i.shopList.some(C=>"position"in C)))){i.isUser=!0,i.shopList=[];const C={id:ie(),title:"",position:"пользователь"};i.shopList=[{...C}]}},b=()=>{f(p),O([]),x(!1),$(!1),N(!1),console.log("close modal")},w=u.useRef(null);return u.useEffect(()=>{const k=C=>{var A;w.current&&!((A=w==null?void 0:w.current)!=null&&A.contains(C.target))&&b()};return n||_?document.addEventListener("mousedown",k):document.removeEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[n,_]),e.jsx("div",{className:`${M.modal} ${n?M.modal_active:""} ${_?M.modal_active:""}`,children:e.jsxs("div",{ref:w,className:M.modal_wrap,children:[e.jsxs("div",{className:M.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>b(),children:e.jsx(E,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:M.modal_content,children:[e.jsxs("p",{className:M.modal_content_text,children:["Логин: ",i==null?void 0:i.name]}),e.jsxs("p",{className:M.modal_content_text,children:["Статус:",i==null?void 0:i.shopList.map(k=>e.jsx("span",{children:k.position},k.id))]}),e.jsx(dt,{color:"#717171",setVersionList:f,currentVersion:o,setCurrentVersion:m,isEnabled:a,versionList:d||p,closeBlock:l}),e.jsxs("div",{className:M.modal_wrap_stores,children:[e.jsx("p",{className:M.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((k,C)=>e.jsx(dt,{dropdownItem:k,margin:"12px",color:"#717171",versionList:s,setVersionList:g,setCurrentVersion:h,header:!0,closeBlock:l},C))]}),e.jsx("div",{className:M.modal_btns,children:_?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>b(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:M.modal_btn,onClick:()=>v(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>j(),children:"Уволить"}),e.jsx("button",{className:M.modal_btn,onClick:()=>P(),children:"Сохранить"})]})})]})]})})},Gd=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],Zd=()=>{const{usersList:o}=le();return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(tt,{headers:Gd}),e.jsx(ot,{arr:o})]}),e.jsx(nt,{})]})},Jd=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],Qd=()=>{const{usersList:o}=le(),t=o.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(tt,{headers:Jd}),e.jsx(ot,{arr:t})]}),e.jsx(nt,{})]})},Yd=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],Kd=()=>{const{usersList:o}=le(),t=o.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(tt,{headers:Yd}),e.jsx(ot,{arr:t,showStore:!0})]}),e.jsx(nt,{})]})},ep=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],tp=()=>{const t=xe().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M.users,children:e.jsxs("div",{className:M.users_header,children:[e.jsx("h2",{className:M.user_title,children:"Пользователи"}),e.jsx("ul",{className:M.user_list,children:ep.map(s=>e.jsx("li",{children:e.jsx(H,{className:`${M.user_list_link} ${t==s.href?M.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(Zd,{}),t=="/admin/users/clients"&&e.jsx(Qd,{}),t=="/admin/users/employees"&&e.jsx(Kd,{})]})]})},pt=[{id:1,title:"фото"},{id:2,title:"Наименование"},{id:3,title:"Ед.изм"},{id:4,title:"Кол-во"},{id:5,title:"Приходная цена"},{id:6,title:"Продажная цена"},{id:7,title:"НДС 12%"},{id:8,title:"Цена без НДС"},{id:9,title:"QR"}];function sp(){const[o,t]=u.useState(""),[s]=u.useState(1),[a]=u.useState(10),[n,i]=u.useState([]);u.useEffect(()=>{p()},[o]);async function p(){const r=ge.get("multi-store");try{const l=await(await T.get(`nomenclatures?multiStoreId=${r}&page=${s}&perPage=${a}`)).data.data;console.log("data",l),i([...l])}catch(_){console.log("Ошибка произошла при получении всх продуктов со склада",_)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("h2",{className:c.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:c.addingWrapper_form,children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>t(r.target.value),value:o}),e.jsx(E,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsx("tr",{className:c.addingWrapper_thead_tr,children:pt.map(r=>e.jsx("th",{className:c.addingWrapper_thead_th,children:r.title},r.id))})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:n&&(n==null?void 0:n.map(r=>e.jsx("tr",{className:c.addingWrapper_tbody_tr,children:pt.map(_=>{var l,d;return e.jsxs("td",{className:c.addingWrapper_tbody_td,children:[_.title=="Наименование"?e.jsx("span",{children:((l=r==null?void 0:r.name)==null?void 0:l.ru)&&((d=r==null?void 0:r.name)==null?void 0:d.ru)}):"",_.title=="Штрих-код"?e.jsx("span",{children:r==null?void 0:r.barcode}):"",_.title=="Приходная цена"?e.jsx("span",{children:r.oldPrice}):"",_.title=="Продажная цена"?e.jsx("span",{children:r.price}):"",_.title=="НДС 12%"?e.jsx("span",{children:(r.price*1.12).toFixed(0)}):""]},_.id)})},r==null?void 0:r.id)))})]})]})})}const ut=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function op(){const[o,t]=u.useState(""),[s]=u.useState(1),[a]=u.useState(10),[n,i]=u.useState([]);u.useEffect(()=>{p()},[o]);async function p(){const r=ge.get("multi-store");try{const _=await T.get(`web-nomenclatures?multiStoreId=${r}&page=${s}&perPage=${a}`),l=await _.data.data;console.log("res",_),i([...l])}catch(_){console.log("Ошибка произошла при получении всх продуктов со склада",_)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("h2",{className:c.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:c.addingWrapper_form,children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>t(r.target.value),value:o}),e.jsx(E,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsx("tr",{className:c.addingWrapper_thead_tr,children:ut.map(r=>e.jsx("th",{className:c.addingWrapper_thead_th,children:r.title},r.id))})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:n==null?void 0:n.map(r=>e.jsx("tr",{className:c.addingWrapper_tbody_tr,children:ut.map(_=>e.jsx("td",{className:c.addingWrapper_tbody_td,children:_.title=="Наименование"?e.jsx("span",{children:r==null?void 0:r.title}):""},_.id))},r==null?void 0:r.id))})]})]})})}function np(){const t=xe().pathname,{shopsStocks:s}=Ye();return e.jsxs("div",{className:c.layout,children:[e.jsx("ul",{className:c.layout_buttons,children:s.map(a=>e.jsx("li",{children:e.jsx(H,{to:`/admin/shops/shop/${a.url}`,className:`${c.layout_btn} ${t==`/admin/shops/shop/${a.url}`?c.layout_btn_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:c.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(sp,{}),t==="/admin/shops/shop/website"&&e.jsx(op,{})]})]})}function ap(){const{shopsAmount:o,currentShop:t,setCurrentShop:s}=Ye(),n=xe().pathname;return e.jsxs("div",{className:c.layout,children:[e.jsx("h2",{className:c.layout_title,children:"Магазины"}),e.jsx("ul",{className:c.layout_buttons,children:o.map(i=>e.jsx("li",{children:e.jsx(H,{to:"/admin/shops/shop",className:`${c.layout_btn} ${t==i.url?c.layout_btn_active:""}`,onClick:()=>s(i.url),children:i.title})},i.id))}),n.startsWith("/admin/shops/shop")&&e.jsx("div",{className:c.layout_content,children:e.jsx(np,{})})]})}function rp({item:o}){const{setErrorModal:t}=ve(),s=a=>{a.stopPropagation()};return e.jsx("div",{className:c.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:c.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:c.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(E,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:o.message})]})})}function cp({localNewImage:o,setLocalNewImage:t}){const[s,a]=u.useState(null);function n(d,m){return d.order>m.order?1:-1}function i(d,m){a(m)}function p(d){d.target.style.background="white"}function r(d){d.preventDefault(),d.target.style.background="lightgray"}function _(d,m){d.preventDefault(),d.target.style.background="white";const g=o&&o.map(h=>h.id===m.id?{...h,order:(s==null?void 0:s.order)||h.order}:h.id===(s==null?void 0:s.id)?{...h,order:m.order}:h).sort((h,x)=>h.order-x.order);console.log(555,"newImages",g),g&&t(g),a(null)}const l=d=>{const m=o.filter(g=>g.id!==d);t([...m])};return u.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:o&&o.sort(n).map((d,m)=>e.jsxs("div",{className:`${c.productItem_photo} ${m==0?c.productItem_photo_active:""}`,draggable:!0,onDragStart:g=>i(g,d),onDragLeave:g=>p(g),onDragEnd:g=>p(g),onDragOver:g=>r(g),onDrop:g=>_(g,d),children:[e.jsx("div",{className:c.productItem_photo_img,children:e.jsx("img",{src:d.src?`https://api.mcrm.uz/${d.src}`:d.localSrc?d.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:c.productItem_photo_close,onClick:()=>l(d.id),children:e.jsx(E,{width:18,height:18,name:"XMarkIcon"})})]},d.id))})}function Mt({stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:a,setLocalFormData:n,localFormData:i}){const{errorModal:p}=ve(),r=u.useRef(null),_=()=>{r.current!=null&&r.current.click()},l=async d=>{var g,h;const m=(h=(g=d==null?void 0:d.target)==null?void 0:g.files)==null?void 0:h[0];if(m&&["image/jpeg","image/png","image/webp"].includes(m.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",m);const x=new FormData;x.append("files[]",m),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",x),m&&n([...i,m]);const f=s&&(s==null?void 0:s.length)>0?s.reduce(($,N)=>N.order>$?N.order:$,-1/0):1,y=new FileReader;y.onload=$=>{var N;if((N=$.target)!=null&&N.result){const O={id:ie(),order:f?f+1:1,localSrc:URL.createObjectURL(m)},P=[...s,O];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",P),a&&a([...P]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},y.readAsDataURL(m),console.log(6,"отрисовал выбранную картинку files",m),r.current&&(r.current.value="")}};return e.jsxs("div",{className:c.productItem_top,children:[p.status&&e.jsx(rp,{item:p}),e.jsx("h1",{className:c.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:c.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:c.productItem_photos,children:[e.jsx(cp,{stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:a}),e.jsxs("div",{className:`${c.productItem_photo} ${c.productItem_add}`,onClick:_,children:[e.jsx(E,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:c.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:l,ref:r})]})]}),e.jsx("p",{className:c.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function At({localCategory:o,productName:t,productDescription:s,setProductDescription:a,setProductName:n,myBarcode:i,vendorCode:p,setVendorCode:r,myPrice:_}){var y,$,N,O;const{pickedCategory:l,currentProduct:d,setArticleModal:m,setOpenModalCategory:g}=ve();u.useEffect(()=>{(l||o)&&f()},[l,o]);const[h,x]=u.useState(""),f=async()=>{try{const j=(await T.get(`categories/${l.id?l.id:o}`)).data;x(j.name.ru)}catch(P){console.log("Ошибка произошла при получении категонии по id",P)}};return e.jsxs("div",{className:c.productItem_left,children:[e.jsxs("div",{className:c.productItem_left_info,children:[e.jsxs("div",{className:c.productItem_left_item,children:[e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:c.productItem_left_item_top_input,value:p||"",onChange:P=>r(P.target.value)})]}),e.jsx("div",{className:c.productItem_left_item_bottom,children:e.jsx("button",{className:c.productItem_left_item_button,onClick:()=>m(!0),children:"Изменить"})})]}),e.jsxs("div",{className:c.productItem_left_item,children:[e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:h||(($=(y=d==null?void 0:d.category)==null?void 0:y.name)!=null&&$.ru?(O=(N=d==null?void 0:d.category)==null?void 0:N.name)==null?void 0:O.ru:"")})]}),e.jsx("div",{className:c.productItem_left_item_bottom,children:e.jsx("button",{className:c.productItem_left_item_button,onClick:()=>g(!0),children:l!=null&&l.name||d!=null&&d.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:c.productItem_left_item,children:e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:i})]})}),e.jsx("div",{className:c.productItem_left_item,children:e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:_})]})}),e.jsx("div",{className:c.productItem_left_item,children:e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:c.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:c.productItem_left_form,children:[e.jsxs("label",{className:c.productItem_left_form_label,children:[e.jsx("span",{className:c.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:c.productItem_left_form_input,type:"text",value:t||"",onChange:P=>n(P.target.value)})]}),e.jsxs("label",{className:c.productItem_left_form_label,children:[e.jsx("span",{className:c.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:P=>a(P.target.value),value:s||"",className:c.productItem_left_form_textarea}),e.jsx("p",{className:c.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function ip({color:o="black",title:t="",extraOptionsList:s,className:a,openBlock:n,setOpenBlock:i,setExtraOptionsList:p}){const r=u.useRef([]);u.useEffect(()=>{r.current.length>0&&_()},[s]);const _=()=>{s&&s.forEach(d=>{r.current.forEach(m=>{m.name==d.title&&(m.checked=d.isActive)})})},l=(d,m)=>{const g=JSON.parse(JSON.stringify(s));g.forEach(h=>{h.title==m&&(h.isActive=!h.isActive)}),p&&p(g)};return e.jsxs("div",{className:a??L.versionExtraOptions,children:[t&&e.jsx("span",{className:L.versionExtraOptions_title,children:t}),e.jsxs("div",{className:L.versionExtraOptions_block,children:[e.jsxs("div",{className:L.versionExtraOptions_block_top,onClick:()=>i&&i(!n),children:[e.jsx("h2",{className:L.versionExtraOptions_block_top_title,style:{color:o},children:t||"Выберите параметры"}),e.jsx("button",{className:L.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${L.versionExtraOptions_block_top_arrow} ${n?L.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${L.versionExtraOptions_block_dropdown} ${n?L.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((d,m)=>e.jsxs("label",{className:L.versionExtraOptions_block_dropdown_item,children:[d.title,e.jsx("input",{ref:g=>{g&&(r.current[m]=g)},type:"checkbox",name:d.title,"data-type":d.title,onChange:g=>l(g,d.title)})]},d.id))})]})]})}function lp({color:o="black",title:t="",versionList:s,className:a}){const[n,i]=u.useState(!1),[p,r]=u.useState("");u.useEffect(()=>{s==null||s.forEach(d=>{d.isActive&&r(d.title)})},[]);const _=()=>{i(!n)},l=d=>{s==null||s.forEach(m=>m.isActive=!1),s==null||s.forEach(m=>{m.title==d.title&&(m.isActive=!0,r(m.title))}),_()};return e.jsxs("div",{className:a??L.version3,children:[e.jsx("span",{className:L.version3_title,children:t}),e.jsxs("div",{className:L.version3_block,children:[e.jsxs("div",{className:L.version3_block_top,onClick:()=>_(),children:[e.jsx("h2",{className:L.version3_block_top_title,style:{color:o},children:p||"Выбрать"}),e.jsx("button",{className:L.version3_block_top_btn,children:e.jsx("div",{className:`${L.version3_block_top_arrow} ${n?L.version3_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${L.version3_block_dropdown} ${n?L.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(d=>e.jsx("span",{className:L.version3_block_dropdown_item,onClick:()=>l(d),children:s.length>1?d.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},d.id))})]})]})}function _p({extraOptionsStatus:o,localCategory:t,setExtraOptionsStatus:s,extraOptions:a}){const[n,i]=u.useState(!1);return u.useEffect(()=>{},[t]),e.jsxs("div",{className:c.productItem_right_item,children:[e.jsxs("div",{className:c.productItem_right_top,onClick:()=>s(!o),children:[e.jsx("h5",{className:c.productItem_right_title,children:"Доп. параметры"}),e.jsx(Ne,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsxs("div",{className:`${c.productItem_right_bottom_items} ${o?c.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:c.productItem_right_bottom_item,children:e.jsx(ip,{color:"",extraOptionsList:a,openBlock:n,setOpenBlock:i})}),a.map(p=>{if(p.isActive)return e.jsxs("div",{className:c.productItem_right_bottom_item,children:[e.jsx(lp,{color:"",title:p.title,versionList:p.type}),e.jsx("button",{className:c.productItem_right_bottom_del,children:"Удалить"})]},p.id)})]})]})}function mt({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:i,setOpenBlock:p,setCurrentVersion:r,setVersionList:_}){const l=d=>{r&&r(d.title);const m=s.map(x=>({id:x.id,title:x.title,isActive:!1})),g=m.find(x=>x.id==d.id),h=m.findIndex(x=>x.id==d.id);g&&(g.isActive=!0,m.splice(h,1,g),_&&_(m))};return e.jsxs("div",{className:a??L.version3,children:[e.jsx("span",{className:L.version3_title,children:t}),e.jsxs("div",{className:L.version3_block,children:[e.jsxs("div",{className:L.version3_block_top,children:[e.jsx("h2",{className:L.version3_block_top_title,style:{color:o},children:i}),e.jsx("button",{className:L.version3_block_top_btn,onClick:()=>p&&p(!n),children:e.jsx("div",{className:`${L.version3_block_top_arrow} ${n?L.version3_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${L.version3_block_dropdown} ${n?L.version3_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:L.version3_block_dropdown_item,onClick:()=>l(d),children:d.title},d.id))})]})]})}function dp({brieflyProductStatus:o,setBrieflyProductStatus:t}){return e.jsxs("div",{className:c.productItem_right_item,children:[e.jsxs("div",{className:c.productItem_right_top,onClick:()=>t(!o),children:[e.jsx("h5",{className:c.productItem_right_title,children:"Коротко о товаре"}),e.jsx(Ne,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsx("div",{className:`${c.productItem_right_bottom_items} ${o?c.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${c.productItem_right_bottom_item} ${c.productItem_right_bottom_row}`,children:[e.jsx(mt,{color:"",title:"Объем, л"}),e.jsx(mt,{color:"",title:"Кол-во в упаковке"})]})})]})}function Et({currentProduct:o,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:a,setBrieflyProductStatus:n,localCategory:i,extraOptions:p,setExtraOptions:r}){return e.jsxs("div",{className:c.productItem_right,children:[e.jsx("div",{className:c.productItem_right_item,children:e.jsxs("div",{className:c.productItem_right_top,children:[e.jsx("h5",{className:c.productItem_right_title,children:"Коментарии"}),e.jsx(Ne,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(_p,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:i,extraOptions:p,setExtraOptions:r,currentProduct:o}),e.jsx(dp,{brieflyProductStatus:a,setBrieflyProductStatus:n})]})}function Wt({stockName:o,setAdminSettings:t}){return e.jsxs("div",{className:c.settings_content_buttons,children:[e.jsx(H,{to:o=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${c.settings_content_btn} ${c.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${c.settings_content_btn} ${c.settings_content_btn_save}`,onClick:()=>t(),children:o=="website"?"Сохранить":"Добавить"})]})}function pp(){const{setArticleModal:o}=ve();return e.jsxs("div",{className:c.articleModal_block_nav,children:[e.jsx("h2",{className:c.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(E,{name:"XMarkIcon"})})]})}function up({productName:o}){const[t]=u.useState(""),[s]=u.useState("");return e.jsxs("div",{className:c.articleModal_block_info,children:[e.jsxs("div",{className:c.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:o})]}),e.jsxs("div",{className:c.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:c.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[s,"1%"]})]})]})}function Ut({item:o}){return e.jsxs("div",{className:c.articleModal_block_recommended_item,children:[e.jsx("h3",{className:c.articleModal_block_recommended_item_title,children:o.title}),e.jsxs("div",{className:c.articleModal_block_recommended_content,children:[e.jsx("div",{className:c.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:c.articleModal_block_recommended_info,children:[e.jsxs("div",{className:c.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:c.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:c.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:c.articleModal_block_recommended_article,children:o.article})]})]})}const mp=[{id:ie(),title:"Молоко Nestle",article:"#DF262515"}];function hp(){return e.jsxs("div",{className:c.articleModal_block_recommended,children:[e.jsx("h2",{className:c.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:c.articleModal_block_recommended_list,children:mp.map(o=>e.jsx(Ut,{item:o},o.id))})]})}function gp(){return e.jsx("div",{className:c.articleModal_block_search,children:e.jsxs("div",{className:c.articleModal_block_search_box,children:[e.jsxs("div",{className:c.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(E,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:c.articleModal_block_search_btn,children:"Найти"})]})})}const bp=[{id:ie(),title:"Молоко Nestle",article:"#DF262515"},{id:ie(),title:"Молоко Nestle",article:"#DF262515"},{id:ie(),title:"Молоко Nestle",article:"#DF262515"}];function xp(){return e.jsx("div",{className:c.articleModal_block_found,children:bp.map(o=>e.jsx(Ut,{item:o},o.id))})}function Lt({productName:o}){return e.jsx("div",{className:c.articleModal,children:e.jsxs("div",{className:c.articleModal_block,children:[e.jsx(pp,{}),e.jsx(up,{productName:o}),e.jsx(hp,{}),e.jsx(gp,{}),e.jsx(xp,{}),e.jsx("div",{className:c.articleModal_block_buttonBox,children:e.jsx("button",{className:c.articleModal_block_button,children:"Выбрать"})})]})})}function fp(){const o=ht(),t=xe(),{id:s}=gt(),{openModalCategory:a}=ve(),{pickedCategory:n,currentProduct:i,setErrorModal:p,setCurrentProduct:r,setPickedCategory:_,articleModal:l}=ve(),[d,m]=u.useState(""),[g,h]=u.useState(0),[x,f]=u.useState(0),[y,$]=u.useState(Number(s)),[N,O]=u.useState(!1),[P,j]=u.useState([]),[v,b]=u.useState(!1),[w,k]=u.useState(""),[C,A]=u.useState(""),[te,V]=u.useState([]),[G,he]=u.useState([]);async function ye(){try{return await(await T.get(`nomenclatures/${s}`)).data}catch(R){console.log("Ошибка произошла при получении продукта со склада по id",R)}}u.useEffect(()=>{_({})},[t.pathname]),u.useEffect(()=>{fe()},[s,n]);async function fe(){var S;const R=await ye();R&&(m((S=R==null?void 0:R.name)==null?void 0:S.ru),r({...R}),$(R==null?void 0:R.categoryId),h(R==null?void 0:R.barcode),f(R==null?void 0:R.price))}const X=async()=>{if(i){n.id&&(await Z(),$(n.id));const R=await ee(G),S=w||await ae(),oe={nomenclatureId:i.id,title:d,article:S||null,images:R.length>0?[...R]:null,description:C||null,document:"string"};console.log(333333,"newProduct",oe),await z(oe),_({}),j([]),o("/admin/product/adding/stock",{replace:!0})}else p({status:!0,message:'"Выберите категорию"'})};async function z(R){try{await T.post("web-nomenclatures",R)}catch(S){console.log("Ошибка произошла при добавлении web nomenclatures",S)}}async function Z(){try{await T.patch(`nomenclatures/${s}`,{categoryId:n.id}),$(n.id)}catch(R){console.log("Ошибка произошла при изменении котегории на складе",R)}}const ee=async R=>{if(R){const S=new FormData;R.forEach((oe,_e)=>{S.append(`files[${_e}]`,oe)});try{return await(await T.post("media-objects/uploads",S)).data}catch(oe){console.error("Ошибка при добавлении картинок на сервер",oe)}}},ae=async()=>{const R=ge.get("multi-store");try{const S=await T.get(`web-credentials/${R}`);return console.log("fetchArticle res",S),S.data.article}catch(S){console.log("Ошибка при получении артикля",S)}};return e.jsxs("div",{className:c.productItem,children:[a&&e.jsx(bt,{}),e.jsx(Mt,{stockName:"stock",myMxikCode:s,localFormData:G,setLocalFormData:he,localNewImage:te,setLocalNewImage:V}),e.jsxs("div",{className:c.productItem_settings,children:[e.jsx(At,{myPrice:x,setMyPrice:f,myBarcode:g,setMyBarcode:h,localCategory:y,productName:d,productDescription:C,setProductDescription:A,setProductName:m,vendorCode:w,setVendorCode:k}),e.jsx(Et,{extraOptionsStatus:N,setExtraOptionsStatus:O,brieflyProductStatus:v,setBrieflyProductStatus:b,localCategory:y,extraOptions:P,setExtraOptions:j,currentProduct:i})]}),e.jsx(Wt,{stockName:"stock",setAdminSettings:X}),l&&e.jsx(Lt,{productName:d})]})}function vp(){const o=ht(),t=xe(),{id:s}=gt(),{openModalCategory:a}=ve(),{pickedCategory:n,webCurrentProduct:i,setWebCurrentProduct:p,setErrorModal:r,setPickedCategory:_,articleModal:l}=ve(),[d,m]=u.useState(""),[g,h]=u.useState(0),[x,f]=u.useState(0),[y,$]=u.useState(0),[N,O]=u.useState(Number(s)),[P,j]=u.useState(!1),[v,b]=u.useState([]),[w,k]=u.useState(!1),[C,A]=u.useState(""),[te,V]=u.useState(""),[G,he]=u.useState([]),[ye,fe]=u.useState([]);async function X(){try{return await(await T.get(`web-nomenclatures/${s}`)).data}catch(S){console.log("Ошибка произошла при получении продукта с сайта по id",S)}}u.useEffect(()=>{_({})},[t.pathname]),u.useEffect(()=>{z()},[s]);async function z(){var oe,_e,ue,we,Ce,re,me;const S=await X();if(S){f((oe=S==null?void 0:S.nomenclature)==null?void 0:oe.price),h((_e=S==null?void 0:S.nomenclature)==null?void 0:_e.barcode),$((ue=S==null?void 0:S.nomenclature)==null?void 0:ue.id),A(S==null?void 0:S.article),m(S!=null&&S.title?S==null?void 0:S.title:(Ce=(we=S==null?void 0:S.nomenclature)==null?void 0:we.name)==null?void 0:Ce.ru),p({...S}),O((me=(re=S==null?void 0:S.nomenclature)==null?void 0:re.category)==null?void 0:me.id);let je=1;const ke=S.images?S.images.map(Q=>({id:ie(),order:je++,src:Q})):[];he(ke),je=1,V(S.description?S.description:"")}}const Z=async()=>{if(i||n.label){n.id&&await ae();const S=await R(ye);console.log(15,"получил ответ от функции fetchPhotos() images",S),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const oe=G.filter(ue=>ue.src).map(ue=>{if(ue.src)return ue.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",oe);const _e={nomenclatureId:i.id,title:d,article:C,images:S.length>0||oe.length>0?[...S]:null,description:te,document:"string"};console.log(18,"создал новый объект продукта newProduct",_e),console.log(18,"localNewImage",G),ee(_e),_({}),b([]),o("/admin/product/adding/website",{replace:!0})}else r({status:!0,message:'"Выберите категорию"'})};async function ee(S){try{await T.patch(`web-nomenclatures/${s}`,S)}catch(oe){console.log("Ошибка произошла при добавлении web nomenclatures",oe)}}async function ae(){try{await T.patch(`nomenclatures/${y}`,{categoryId:n.id}),O(n.id)}catch(S){console.log("Ошибка произошла при изменении котегории на сайте",S)}}const R=async S=>{if(S){const oe=new FormData;S.forEach((_e,ue)=>{oe.append(`files[${ue}]`,_e)});try{return await(await T.post("media-objects/uploads",oe)).data}catch(_e){console.error("Ошибка при добавлении картинок на сервер",_e)}}};return e.jsxs("div",{className:c.productItem,children:[a&&e.jsx(bt,{}),e.jsx(Mt,{stockName:"website",myMxikCode:s,localNewImage:G,setLocalNewImage:he,localFormData:ye,setLocalFormData:fe}),e.jsxs("div",{className:c.productItem_settings,children:[e.jsx(At,{myPrice:x,setMyPrice:f,myBarcode:g,setMyBarcode:h,localCategory:N,productName:d,productDescription:te,setProductDescription:V,setProductName:m,vendorCode:C,setVendorCode:A}),e.jsx(Et,{extraOptionsStatus:P,setExtraOptionsStatus:j,brieflyProductStatus:w,setBrieflyProductStatus:k,localCategory:N,extraOptions:v,setExtraOptions:b,currentProduct:i})]}),e.jsx(Wt,{stockName:"website",setAdminSettings:Z}),l&&e.jsx(Lt,{productName:d})]})}function Op(){const{user:o}=Tt(),{setCurrentShop:t}=Ye(),a=xe().pathname,{setTemporaryData:n,setCheckedProducts:i}=ve();u.useEffect(()=>{n([]),i([])},[]),u.useEffect(()=>{a.startsWith("/admin/shops")||t("0")},[a]);const p=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(E,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(E,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(E,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(E,{name:"BuildingStorefrontIcon"}),isActive:!1}],[r,_]=u.useState(p),l=d=>{const m=r.map(h=>({id:h.id,label:h.label,href:h.href,icon:h.icon,isActive:!1})),g=m.find(h=>h.id==d);g&&(g.isActive=!0),_(m)};return e.jsxs(e.Fragment,{children:[e.jsx(Vt,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:c.wrapper,children:[e.jsx("h1",{className:c.wrapper_title,children:o==null?void 0:o.username}),e.jsxs("div",{className:c.content,children:[e.jsx("div",{className:c.content_left,children:e.jsx("ul",{className:c.tools,children:r.map(d=>e.jsx("li",{children:e.jsxs(H,{to:d.href,className:`${c.tools_link} ${a.startsWith(d.href)?c.tools_link_active:""}`,onClick:()=>l(d.id),children:[d.icon,d.label]})},d.id))})}),a.startsWith("/admin")&&e.jsxs("div",{className:c.content_right,children:[a.startsWith("/admin/settings")&&e.jsx(od,{}),a.startsWith("/admin/users")&&e.jsx(tp,{}),a.startsWith("/admin/shops")&&e.jsx(ap,{}),a.startsWith("/admin/product")&&e.jsx(ld,{}),a.startsWith("/admin/stock-product")&&e.jsx(fp,{}),a.startsWith("/admin/website-product")&&e.jsx(vp,{})]})]})]})})]})}export{Op as default};
