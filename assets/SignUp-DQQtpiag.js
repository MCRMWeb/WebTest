import{r as b,u as j,j as e,L as k}from"./index-BKWzXJuX.js";import{u as w,C as a,e as N}from"./errorMessage-y4x-KknL.js";import{a as v}from"./auth-B2QAljBL.js";import{C as y}from"./CustomBtn-BpSq5VC9.js";import{u as C}from"./userStore-BQ_slQsy.js";import"./CustomIcon-CoemkrYJ.js";import"./XMarkIcon-Bbx2RA7i.js";const L="_enter_182ka_1",S="_enter_title_182ka_14",q="_enter_form_182ka_17",E="_enter_info_182ka_27",U="_enter_info_error_182ka_33",M="_enter_info_text_182ka_37",R="_enter_info_link_182ka_40",D="_enter_button_182ka_46",F="_enter_button_icon_182ka_68",r={enter:L,enter_title:S,enter_form:q,enter_info:E,enter_info_error:U,enter_info_text:M,enter_info_link:R,enter_button:D,enter_button_icon:F},J=()=>{const[_,i]=b.useState(""),l=v(),{setUser:m}=C(),c=j(),{register:n,handleSubmit:u,reset:d,watch:f,formState:{errors:o,isValid:g}}=w({mode:"onChange"}),x=f("password"),h=async t=>{try{const s={email:t.email,username:t.username,password:t.password};console.log(s);const p=await(await l.mutateAsync(s)).data;m(p.user),i(""),c("/")}catch(s){console.log("ошибка при регистрации",s),i(""),i(N(s))}d()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:r.enter,children:[e.jsx("h1",{className:r.enter_title,children:"Регистрация"}),e.jsxs("form",{className:r.enter_form,onSubmit:u(h),children:[e.jsx(a,{label:"Ваше username",type:"text",holder:"Username",errors:o.username,register:n("username",{required:"Поле обязательно для заполнения",minLength:{value:3,message:"Минимум 3 символа"}})}),e.jsx(a,{label:"Ваше email",type:"email",holder:"Email",errors:o.email,register:n("email",{required:"Поле обязательно для заполнения"})}),e.jsx(a,{label:"Ваше пароль",type:"text",holder:"Пароль",errors:o.password,register:n("password",{required:"Поле обязательно для заполнения",minLength:{value:8,message:"Минимум 8 символов"}})}),e.jsx(a,{label:"Подтвердите пароль",type:"text",holder:"Пароль",errors:o.password2,register:n("password2",{required:"Поле обязательно для заполнения",validate:t=>t===x||"Пароли не совпадают",minLength:{value:8,message:"Минимум 8 символов"}})}),e.jsx(y,{text:"Зарегистрироваться",width:240,height:50,disabled:!g,mg:"auto",icon:"UserPlusIcon",background:"rgb(137, 250, 135)",className:r.enter_button,iconClassName:r.enter_button_icon})]}),e.jsxs("div",{className:r.enter_info,children:[_&&e.jsx("h3",{className:"enter__info-error text-[red] text-center",children:_}),e.jsx("p",{className:r.enter_info_text,children:"Есть аккаунт?"}),e.jsx(k,{to:"/signin",className:r.enter_info_link,children:"Войти"})]})]})})};export{J as default};
