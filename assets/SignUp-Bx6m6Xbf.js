import{r as b,u as v,j as e,L as j}from"./index-BEYp5e6j.js";import{u as w,C as a,e as N}from"./errorMessage-CFlvIoN9.js";import{a as y}from"./auth-Bztc2hpL.js";import{C as k}from"./CustomBtn-nKRMhg7h.js";import{u as C}from"./userStore-CKswpZ5m.js";import"./CustomIcon-DBPEx1X1.js";import"./XMarkIcon-Czeq7vum.js";const L="_enter_1lv2t_1",S="_enter_title_1lv2t_14",q="_enter_form_1lv2t_17",E="_enter_info_1lv2t_27",U="_enter_info_error_1lv2t_33",M="_enter_info_text_1lv2t_39",R="_enter_info_link_1lv2t_42",D="_enter_button_1lv2t_48",F="_enter_button_icon_1lv2t_70",t={enter:L,enter_title:S,enter_form:q,enter_info:E,enter_info_error:U,enter_info_text:M,enter_info_link:R,enter_button:D,enter_button_icon:F},J=()=>{const[_,i]=b.useState(""),l=y(),{setUser:m}=C(),c=v(),{register:n,handleSubmit:u,reset:d,watch:f,formState:{errors:o,isValid:g}}=w({mode:"onChange"}),x=f("password"),h=async r=>{try{const s={email:r.email,username:r.username,password:r.password};console.log(s);const p=await(await l.mutateAsync(s)).data;m(p.user),i(""),c("/")}catch(s){console.log("ошибка при регистрации",s),i(""),i(N(s))}d()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.enter,children:[e.jsx("h1",{className:t.enter_title,children:"Регистрация"}),e.jsxs("form",{className:t.enter_form,onSubmit:u(h),children:[e.jsx(a,{label:"Ваше username",type:"text",holder:"Username",errors:o.username,register:n("username",{required:"Поле обязательно для заполнения",minLength:{value:3,message:"Минимум 3 символа"}})}),e.jsx(a,{label:"Ваше email",type:"email",holder:"Email",errors:o.email,register:n("email",{required:"Поле обязательно для заполнения"})}),e.jsx(a,{label:"Ваше пароль",type:"text",holder:"Пароль",errors:o.password,register:n("password",{required:"Поле обязательно для заполнения",minLength:{value:8,message:"Минимум 8 символов"}})}),e.jsx(a,{label:"Подтвердите пароль",type:"text",holder:"Пароль",errors:o.password2,register:n("password2",{required:"Поле обязательно для заполнения",validate:r=>r===x||"Пароли не совпадают",minLength:{value:8,message:"Минимум 8 символов"}})}),e.jsx(k,{text:"Зарегистрироваться",width:240,height:50,disabled:!g,mg:"auto",icon:"UserPlusIcon",background:"rgb(137, 250, 135)",className:t.enter_button,iconClassName:t.enter_button_icon})]}),e.jsxs("div",{className:t.enter_info,children:[_&&e.jsx("h3",{className:t.enter_info_error,children:_}),e.jsx("p",{className:t.enter_info_text,children:"Есть аккаунт?"}),e.jsx(j,{to:"/signin",className:t.enter_info_link,children:"Войти"})]})]})})};export{J as default};
