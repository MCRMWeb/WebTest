import{j as e,w as ce,r as m,x as Te,L as X,v as se,q as we,o as ie,y as ae,e as ne,u as Pe,z as Dt,A as Ot,B as Ft,C as dt}from"./index-Bm-9hJfj.js";import{u as At}from"./userStore-CvCQc4pi.js";import{C as U}from"./CustomIcon-n_hjQ8nL.js";import{s as Ve}from"./shop1Store-DL9t_9Br.js";import{a as qe,c as Ze,H as Bt}from"./Header-DgJE2j1-.js";import{a as ge,s as Q,M as pt}from"./Modal-CbLi_EHd.js";import{b as pe}from"./bannerStore-CHQtPHzf.js";import{F as Lt,a as Mt,b as Wt,c as Et,d as Ut,e as Rt,f as zt,g as Tt,h as Vt,i as qt,j as Kt,k as Ht,l as Xt,m as Gt,n as Zt,o as Jt,p as Qt,q as Yt,r as es,s as ts,t as ss,u as os,v as ns,w as as,x as rs,y as is,z as cs,A as ls,B as _s,C as ds,D as ps,E as us,G as ms}from"./XMarkIcon-BQR-iCYa.js";const hs="_wrapper_4575d_1",gs="_wrapper_title_4575d_4",vs="_content_4575d_10",bs="_content_left_4575d_16",xs="_content_right_4575d_19",fs="_tools_4575d_45",ks="_tools_link_4575d_50",ys="_tools_link_active_4575d_63",js="_settings_4575d_86",ws="_settings_title_4575d_89",Cs="_settings_content_4575d_94",Ns="_settings_content_top_4575d_97",Ss="_settings_content_buttons_4575d_100",Is="_settings_content_btn_4575d_110",$s="_settings_content_btn_cancel_4575d_122",Ps="_settings_content_btn_save_4575d_125",Ds="_settings_tools_4575d_128",Os="_settings_tools_link_4575d_133",Fs="_settings_tools_link_active_4575d_148",As="_wrapperModules_4575d_153",Bs="_item_4575d_160",Ls="_item_top_4575d_165",Ms="_item_top_title_4575d_176",Ws="_item_top_arrow_4575d_180",Es="_item_top_arrow_active_4575d_188",Us="_item_block_4575d_191",Rs="_item_block_item_4575d_202",zs="_item_block_open_4575d_205",Ts="_item_onOff_4575d_211",Vs="_item_delivery_4575d_211",qs="_versions_block_4575d_217",Ks="_versions_block_top_4575d_222",Hs="_versions_block_top_title_4575d_232",Xs="_versions_block_top_arrow_4575d_237",Gs="_versions_block_top_arrow_active_4575d_246",Zs="_versions_block_dropdown_4575d_249",Js="_versions_block_dropdown_item_4575d_260",Qs="_versions_block_dropdown_open_4575d_271",Ys="_versions_block_onOff_4575d_277",eo="_versions_block_delivery_4575d_277",to="_categoriesDropDown_title_4575d_283",so="_categoriesDropDown_item_4575d_286",oo="_categoriesDropDown_item_top_4575d_292",no="_categoriesDropDown_item_top_title_4575d_303",ao="_categoriesDropDown_item_top_arrow_4575d_307",ro="_categoriesDropDown_item_top_arrow_active_4575d_314",io="_categoriesDropDown_item_block_4575d_317",co="_categoriesDropDown_item_block_line_4575d_326",lo="_categoriesDropDown_item_block_active_4575d_338",_o="_categoriesDropDown_item_block_open_4575d_341",po="_categoriesDropDown_item_onOff_4575d_346",uo="_categoriesDropDown_item_delivery_4575d_346",mo="_products_buttons_4575d_352",ho="_products_btn_4575d_358",go="_products_btn_active_4575d_369",vo="_productItem_title_4575d_374",bo="_productItem_basePhoto_4575d_379",xo="_productItem_photos_4575d_385",fo="_productItem_photos_desc_4575d_391",ko="_productItem_photo_4575d_385",yo="_productItem_photo_img_4575d_406",jo="_productItem_photo_close_4575d_417",wo="_productItem_photo_active_4575d_429",Co="_productItem_add_4575d_433",No="_productItem_add_text_4575d_441",So="_productItem_settings_4575d_446",Io="_productItem_left_info_4575d_450",$o="_productItem_left_item_4575d_458",Po="_productItem_left_item_top_4575d_462",Do="_productItem_left_item_top_input_4575d_483",Oo="_productItem_left_item_bottom_4575d_489",Fo="_productItem_left_form_4575d_502",Ao="_productItem_left_form_label_4575d_509",Bo="_productItem_left_form_title_4575d_513",Lo="_productItem_left_form_input_4575d_519",Mo="_productItem_left_form_textarea_4575d_527",Wo="_productItem_left_form_size_4575d_535",Eo="_productItem_right_4575d_543",Uo="_productItem_right_item_4575d_550",Ro="_productItem_right_top_4575d_555",zo="_productItem_right_title_4575d_562",To="_productItem_right_bottom_items_4575d_568",Vo="_productItem_right_bottom_items_active_4575d_577",qo="_productItem_right_bottom_item_4575d_568",Ko="_productItem_right_bottom_row_4575d_603",Ho="_productItem_right_bottom_del_4575d_608",Xo="_banner_nav_list_4575d_619",Go="_banner_nav_link_4575d_625",Zo="_banner_nav_link_active_4575d_640",Jo="_addingWrapper_title_4575d_645",Qo="_addingWrapper_form_4575d_650",Yo="_addingWrapper_form_btn_4575d_655",en="_addingWrapper_search_4575d_672",tn="_addingWrapper_search_input_4575d_678",sn="_addingWrapper_search_icon_4575d_686",on="_addingWrapper_table_4575d_689",nn="_addingWrapper_table_error_4575d_692",an="_addingWrapper_thead_tr_4575d_696",rn="_addingWrapper_thead_th_4575d_700",cn="_addingWrapper_tbody_tr_4575d_708",ln="_addingWrapper_tbody_td_4575d_711",_n="_addingWrapper_tbody_buttons_4575d_725",dn="_addingWrapper_tbody_add_4575d_730",pn="_addingWrapper_tbody_del_4575d_737",un="_errorWrapper_4575d_745",mn="_errorWrapper_block_4575d_754",hn="_errorWrapper_block_close_4575d_764",gn="_layout_title_4575d_775",vn="_layout_buttons_4575d_780",bn="_layout_btn_4575d_786",xn="_layout_btn_active_4575d_800",fn="_editBlock_4575d_805",kn="_articleModal_4575d_817",yn="_articleModal_block_4575d_826",jn="_articleModal_block_nav_4575d_833",wn="_articleModal_block_title_4575d_840",Cn="_articleModal_block_info_4575d_845",Nn="_articleModal_block_info_item_4575d_848",Sn="_articleModal_block_recommended_4575d_863",In="_articleModal_block_recommended_title_4575d_866",$n="_articleModal_block_recommended_item_4575d_872",Pn="_articleModal_block_recommended_item_title_4575d_876",Dn="_articleModal_block_recommended_content_4575d_882",On="_articleModal_block_recommended_img_4575d_887",Fn="_articleModal_block_recommended_info_4575d_897",An="_articleModal_block_recommended_desc_4575d_902",Bn="_articleModal_block_recommended_article_4575d_916",Ln="_articleModal_block_search_4575d_921",Mn="_articleModal_block_search_box_4575d_924",Wn="_articleModal_block_search_input_4575d_929",En="_articleModal_block_search_btn_4575d_941",Un="_articleModal_block_found_4575d_951",Rn="_articleModal_block_buttonBox_4575d_957",zn="_articleModal_block_button_4575d_957",Tn="_homePage_wrapper_title_4575d_974",Vn="_homePage_blocks_4575d_984",qn="_homePage_addBlock_4575d_990",Kn="_homePage_addBlock_title_4575d_1007",Hn="_homePage_addBlock_active_4575d_1010",Xn="_homePage_addBlockItem_4575d_1014",Gn="_homePage_addBlockItem_close_4575d_1022",Zn="_homePage_addBlockItem_super_4575d_1028",Jn="_homePage_addBlockItem_super_title_4575d_1032",Qn="_homePage_addBlockItem_super_block_4575d_1037",Yn="_homePage_addBlockItem_super_item_4575d_1062",ea="_homePage_addBlockItem_content_4575d_1072",ta="_homePage_addBlockItem_categories_4575d_1076",d={wrapper:hs,wrapper_title:gs,content:vs,content_left:bs,content_right:xs,tools:fs,tools_link:ks,tools_link_active:ys,settings:js,settings_title:ws,settings_content:Cs,settings_content_top:Ns,settings_content_buttons:Ss,settings_content_btn:Is,settings_content_btn_cancel:$s,settings_content_btn_save:Ps,settings_tools:Ds,settings_tools_link:Os,settings_tools_link_active:Fs,wrapperModules:As,item:Bs,item_top:Ls,item_top_title:Ms,item_top_arrow:Ws,item_top_arrow_active:Es,item_block:Us,item_block_item:Rs,item_block_open:zs,item_onOff:Ts,item_delivery:Vs,versions_block:qs,versions_block_top:Ks,versions_block_top_title:Hs,versions_block_top_arrow:Xs,versions_block_top_arrow_active:Gs,versions_block_dropdown:Zs,versions_block_dropdown_item:Js,versions_block_dropdown_open:Qs,versions_block_onOff:Ys,versions_block_delivery:eo,categoriesDropDown_title:to,categoriesDropDown_item:so,categoriesDropDown_item_top:oo,categoriesDropDown_item_top_title:no,categoriesDropDown_item_top_arrow:ao,categoriesDropDown_item_top_arrow_active:ro,categoriesDropDown_item_block:io,categoriesDropDown_item_block_line:co,categoriesDropDown_item_block_active:lo,categoriesDropDown_item_block_open:_o,categoriesDropDown_item_onOff:po,categoriesDropDown_item_delivery:uo,products_buttons:mo,products_btn:ho,products_btn_active:go,productItem_title:vo,productItem_basePhoto:bo,productItem_photos:xo,productItem_photos_desc:fo,productItem_photo:ko,productItem_photo_img:yo,productItem_photo_close:jo,productItem_photo_active:wo,productItem_add:Co,productItem_add_text:No,productItem_settings:So,productItem_left_info:Io,productItem_left_item:$o,productItem_left_item_top:Po,productItem_left_item_top_input:Do,productItem_left_item_bottom:Oo,productItem_left_form:Fo,productItem_left_form_label:Ao,productItem_left_form_title:Bo,productItem_left_form_input:Lo,productItem_left_form_textarea:Mo,productItem_left_form_size:Wo,productItem_right:Eo,productItem_right_item:Uo,productItem_right_top:Ro,productItem_right_title:zo,productItem_right_bottom_items:To,productItem_right_bottom_items_active:Vo,productItem_right_bottom_item:qo,productItem_right_bottom_row:Ko,productItem_right_bottom_del:Ho,banner_nav_list:Xo,banner_nav_link:Go,banner_nav_link_active:Zo,addingWrapper_title:Jo,addingWrapper_form:Qo,addingWrapper_form_btn:Yo,addingWrapper_search:en,addingWrapper_search_input:tn,addingWrapper_search_icon:sn,addingWrapper_table:on,addingWrapper_table_error:nn,addingWrapper_thead_tr:an,addingWrapper_thead_th:rn,addingWrapper_tbody_tr:cn,addingWrapper_tbody_td:ln,addingWrapper_tbody_buttons:_n,addingWrapper_tbody_add:dn,addingWrapper_tbody_del:pn,errorWrapper:un,errorWrapper_block:mn,errorWrapper_block_close:hn,layout_title:gn,layout_buttons:vn,layout_btn:bn,layout_btn_active:xn,editBlock:fn,articleModal:kn,articleModal_block:yn,articleModal_block_nav:jn,articleModal_block_title:wn,articleModal_block_info:Cn,articleModal_block_info_item:Nn,articleModal_block_recommended:Sn,articleModal_block_recommended_title:In,articleModal_block_recommended_item:$n,articleModal_block_recommended_item_title:Pn,articleModal_block_recommended_content:Dn,articleModal_block_recommended_img:On,articleModal_block_recommended_info:Fn,articleModal_block_recommended_desc:An,articleModal_block_recommended_article:Bn,articleModal_block_search:Ln,articleModal_block_search_box:Mn,articleModal_block_search_input:Wn,articleModal_block_search_btn:En,articleModal_block_found:Un,articleModal_block_buttonBox:Rn,articleModal_block_button:zn,homePage_wrapper_title:Tn,homePage_blocks:Vn,homePage_addBlock:qn,homePage_addBlock_title:Kn,homePage_addBlock_active:Hn,homePage_addBlockItem:Xn,homePage_addBlockItem_close:Gn,homePage_addBlockItem_super:Zn,homePage_addBlockItem_super_title:Jn,homePage_addBlockItem_super_block:Qn,homePage_addBlockItem_super_item:Yn,homePage_addBlockItem_content:ea,homePage_addBlockItem_categories:ta};function Ie({width:s=78,color:t="white",backgroundOn:o="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:_=1.1,status:l=!1}){const i={width:`${s}px`,height:`${s/2-s/20}px`,background:l?o:a,borderRadius:`${s/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},r={background:`${t}`,height:`${s/2-s/20}px`,width:`${s/2-s/20}px`,border:`${s/25}px solid ${l?o:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${_}) translateX(${l?"110%":"0"})`};return e.jsx("div",{style:i,children:e.jsx("div",{style:r})})}const sa="_versions_1cgvq_1",oa="_versions_block_1cgvq_6",na="_versions_block_top_1cgvq_11",aa="_versions_block_top_title_1cgvq_21",ra="_versions_block_top_arrow_1cgvq_25",ia="_versions_block_top_arrow_active_1cgvq_34",ca="_versions_block_dropdown_1cgvq_37",la="_versions_block_dropdown_item_1cgvq_49",_a="_versions_block_dropdown_open_1cgvq_60",da="_versions_block_onOff_1cgvq_66",pa="_versions_block_delivery_1cgvq_66",ua="_versions2_1cgvq_72",ma="_versions2_block_1cgvq_77",ha="_versions2_block_top_1cgvq_82",ga="_versions2_block_top_title_1cgvq_92",va="_versions2_block_top_arrow_1cgvq_96",ba="_versions2_block_top_arrow_active_1cgvq_105",xa="_versions2_block_dropdown_1cgvq_108",fa="_versions2_block_dropdown_item_1cgvq_119",ka="_versions2_block_dropdown_open_1cgvq_130",ya="_versions2_block_onOff_1cgvq_136",ja="_versions2_block_delivery_1cgvq_136",wa="_version3_1cgvq_142",Ca="_version3_title_1cgvq_147",Na="_version3_block_1cgvq_153",Sa="_version3_block_top_1cgvq_158",Ia="_version3_block_top_title_1cgvq_169",$a="_version3_block_top_arrow_1cgvq_173",Pa="_version3_block_top_arrow_active_1cgvq_183",Da="_version3_block_dropdown_1cgvq_186",Oa="_version3_block_dropdown_item_1cgvq_197",Fa="_version3_block_dropdown_open_1cgvq_213",Aa="_version3_block_onOff_1cgvq_237",Ba="_version3_block_delivery_1cgvq_237",La="_versionExtraOptions_1cgvq_243",Ma="_versionExtraOptions_title_1cgvq_248",Wa="_versionExtraOptions_block_1cgvq_254",Ea="_versionExtraOptions_block_top_1cgvq_259",Ua="_versionExtraOptions_block_top_title_1cgvq_270",Ra="_versionExtraOptions_block_top_arrow_1cgvq_275",za="_versionExtraOptions_block_top_arrow_active_1cgvq_285",Ta="_versionExtraOptions_block_dropdown_1cgvq_288",Va="_versionExtraOptions_block_dropdown_item_1cgvq_299",qa="_versionExtraOptions_block_dropdown_open_1cgvq_316",Ka="_versionExtraOptions_block_onOff_1cgvq_340",Ha="_versionExtraOptions_block_delivery_1cgvq_340",z={versions:sa,versions_block:oa,versions_block_top:na,versions_block_top_title:aa,versions_block_top_arrow:ra,versions_block_top_arrow_active:ia,versions_block_dropdown:ca,versions_block_dropdown_item:la,versions_block_dropdown_open:_a,versions_block_onOff:da,versions_block_delivery:pa,versions2:ua,versions2_block:ma,versions2_block_top:ha,versions2_block_top_title:ga,versions2_block_top_arrow:va,versions2_block_top_arrow_active:ba,versions2_block_dropdown:xa,versions2_block_dropdown_item:fa,versions2_block_dropdown_open:ka,versions2_block_onOff:ya,versions2_block_delivery:ja,version3:wa,version3_title:Ca,version3_block:Na,version3_block_top:Sa,version3_block_top_title:Ia,version3_block_top_arrow:$a,version3_block_top_arrow_active:Pa,version3_block_dropdown:Da,version3_block_dropdown_item:Oa,version3_block_dropdown_open:Fa,version3_block_onOff:Aa,version3_block_delivery:Ba,versionExtraOptions:La,versionExtraOptions_title:Ma,versionExtraOptions_block:Wa,versionExtraOptions_block_top:Ea,versionExtraOptions_block_top_title:Ua,versionExtraOptions_block_top_arrow:Ra,versionExtraOptions_block_top_arrow_active:za,versionExtraOptions_block_dropdown:Ta,versionExtraOptions_block_dropdown_item:Va,versionExtraOptions_block_dropdown_open:qa,versionExtraOptions_block_onOff:Ka,versionExtraOptions_block_delivery:Ha};function st({color:s="black",title:t="",versionList:o=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:_,setOpenBlock:l,setCurrentVersion:i,setVersionList:r}){const c=p=>{i(p.title);const u=o.map(v=>({id:v.id,title:v.title,isActive:!1})),h=u.find(v=>v.id==p.id),g=u.findIndex(v=>v.id==p.id);h&&(h.isActive=!0,u.splice(g,1,h),r(u))};return e.jsxs("div",{className:a??z.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:z.versions_block,children:[e.jsxs("div",{className:z.versions_block_top,children:[e.jsx("h2",{className:z.versions_block_top_title,style:{color:s},children:_}),e.jsx("button",{className:z.versions_block_top_btn,onClick:()=>l(!n),children:e.jsx("div",{className:`${z.versions_block_top_arrow} ${n?z.versions_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.versions_block_dropdown} ${n?z.versions_block_dropdown_open:""}`,children:o.map(p=>e.jsx("span",{className:z.versions_block_dropdown_item,onClick:()=>c(p),children:p.title},p.id))})]})]})}function Xa(){const{modulesCashRegisterStatus:s,deliveryStatus:t,cashRegisterVersionList:o,cashRegisterCurrentVersion:a,openBlockCashRegister:n,openBlockCashRegisterVersion:_,openBlockCart:l,cartVersionList:i,modulesCartStatus:r,cartCurrentVersion:c,openBlockCartVersion:p,setCartVersionList:u,setCartCurrentVersion:h,setModulesCartStatus:g,setOpenBlockCart:v,setOpenBlockCartVersion:I,setDeliveryStatus:D,setOpenBlockCashRegister:O,setCashRegisterVersionList:C,setModulesCashRegisterStatus:N,setCashRegisterCurrentVersion:f,setOpenBlockCashRegisterVersion:y}=ce(),x=()=>{v(!l)},b=()=>{O(!n)};return e.jsxs("div",{className:d.wrapperModules,children:[e.jsxs("div",{className:d.item,children:[e.jsxs("div",{className:d.item_top,onClick:()=>x(),children:[e.jsx("h2",{className:d.item_top_title,children:"Корзина"}),e.jsx("button",{className:d.item_top_btn,onClick:()=>x(),children:e.jsx("div",{className:`${d.item_top_arrow} ${l?d.item_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${d.item_block} ${l?d.item_block_open:""}`,children:[e.jsxs("div",{className:d.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:d.item_shell,onClick:()=>g(!r),children:e.jsx(Ie,{status:r,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(st,{color:"rgb(137, 250, 135)",openBlock:p,setOpenBlock:I,title:"Выберите версию",versionList:i,currentVersion:c,setCurrentVersion:h,setVersionList:u}),e.jsxs("div",{className:d.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:d.item_shell,onClick:()=>D(!t),children:e.jsx(Ie,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:d.item,children:[e.jsxs("div",{className:d.item_top,onClick:()=>b(),children:[e.jsx("h2",{className:d.item_top_title,children:"Кacca"}),e.jsx("button",{className:d.item_top_btn,onClick:()=>b(),children:e.jsx("div",{className:`${d.item_top_arrow} ${n?d.item_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${d.item_block} ${n?d.item_block_open:""}`,children:[e.jsxs("div",{className:d.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:d.item_shell,onClick:()=>N(!s),children:e.jsx(Ie,{status:s,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(st,{color:"rgb(137, 250, 135)",openBlock:_,setOpenBlock:y,title:"Выберите версию",versionList:o,currentVersion:a,setCurrentVersion:f,setVersionList:C})]})]})]})}function Ga(){const{templates:s,setTemplates:t}=ce(),[o,a]=m.useState([...s]);m.useEffect(()=>{a([...s])},[s]);const n=i=>{const r=o.map(c=>c.id===i?{...c,open:!c.open}:c);a(r)},_=(i,r)=>{const c=o.map(p=>p.id===i?{...p,isActive:!0,templateThemes:p.templateThemes.map(u=>u.id===r?{...u,isActive:!0}:{...u,isActive:!1})}:{...p,isActive:!1,templateThemes:p.templateThemes.map(u=>({...u,isActive:!1}))});a(c)};function l(){t(o)}return e.jsxs("div",{className:d.wrapperModules,children:[o.map(i=>e.jsxs("div",{className:d.item,children:[e.jsxs("div",{className:d.item_top,onClick:()=>n(i.id),children:[e.jsx("h2",{className:d.item_top_title,children:i.title}),e.jsx("button",{className:d.item_top_btn,onClick:()=>n(i.id),children:e.jsx("div",{className:`${d.item_top_arrow} ${i.open?d.item_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${d.item_block} ${i.open?d.item_block_open:""}`,children:i.templateThemes.map(r=>e.jsxs("div",{className:d.item_onOff,children:[e.jsx("span",{children:r.title}),e.jsx("div",{className:d.item_shell,onClick:()=>_(i.id,r.id),children:e.jsx(Ie,{status:r.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},r.id))})]},i.id)),e.jsxs("div",{className:d.settings_content_buttons,children:[e.jsx("button",{className:`${d.settings_content_btn} ${d.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${d.settings_content_btn} ${d.settings_content_btn_save}`,onClick:()=>l(),children:"Сохранить"})]})]})}function Za({title:s,setOpenModal:t}){const{currentCategory:o}=ce(),[a,n]=m.useState(""),{selectedSuperCategory:_,selectedCategory:l}=qe();m.useEffect(()=>{o=="Котегории"&&_&&i(_),o=="Подкотегории"&&l&&i(l)},[o,_,l]);const i=async c=>{try{const u=await(await Te.get(`https://api.mcrm.uz/api/categories/${c}`)).data;n(u.name.ru)}catch(p){console.error("Ошибка произошла при получении названия варианта категории",p)}},r=()=>{t&&t(!0)};return e.jsxs("div",{className:d.editBlock,onClick:r,children:[a||s,e.jsx(U,{name:"PencilIcon"})]})}const Ja="_modalCategory_xzv82_1",Qa="_modalCategory_block_xzv82_10",Ya="_modalCategory_nav_xzv82_16",er="_modalCategory_nav_title_xzv82_23",tr="_modalCategory_content_xzv82_29",sr="_modalCategory_content_message_xzv82_36",or="_modalCategory_content_link_xzv82_44",nr="_modalCategory_content_link_active_xzv82_72",ar="_modalCategory_content_item_xzv82_82",rr="_modalCategory_content_block_xzv82_104",ir="_modalCategory_content_block_title_xzv82_108",cr="_settings_xzv82_115",lr="_settings_title_xzv82_118",_r="_settings_content_xzv82_123",dr="_settings_content_top_xzv82_126",pr="_settings_content_buttons_xzv82_129",ur="_settings_content_btn_xzv82_139",mr="_settings_content_btn_cancel_xzv82_151",hr="_settings_content_btn_save_xzv82_154",gr="_settings_tools_xzv82_157",vr="_settings_tools_link_xzv82_162",br="_settings_tools_link_active_xzv82_177",oe={modalCategory:Ja,modalCategory_block:Qa,modalCategory_nav:Ya,modalCategory_nav_title:er,modalCategory_content:tr,modalCategory_content_message:sr,modalCategory_content_link:or,modalCategory_content_link_active:nr,modalCategory_content_item:ar,modalCategory_content_block:rr,modalCategory_content_block_title:ir,settings:cr,settings_title:lr,settings_content:_r,settings_content_top:dr,settings_content_buttons:pr,settings_content_btn:ur,settings_content_btn_cancel:mr,settings_content_btn_save:hr,settings_tools:gr,settings_tools_link:vr,settings_tools_link_active:br};function xr({setCancel:s}){return e.jsxs("div",{className:oe.modalCategory_nav,children:[e.jsx("h2",{className:oe.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:oe.modalCategory_nav_close,onClick:s,children:e.jsx(U,{width:24,height:24,name:"XMarkIcon"})})]})}function fr({superCategory:s,category:t,setMessageStatus:o,fetchCategories:a}){const{currentCategory:n}=ce(),{selectedSuperCategory:_,setSelectedSuperCategory:l}=qe(),{setCurrentCategory:i}=ge(),[r,c]=m.useState(10),p=(h,g)=>{if(h.preventDefault(),n==="Подкотегории"){a("category",1,10,g.id);const v=t.filter(I=>I.parentId==g.id);i(v),l(g.id),o(!1)}l(g.id)},u=h=>{h.preventDefault();const g=r+10;c(g),a("super",1,g)};return e.jsxs("div",{className:oe.modalCategory_content_block,children:[e.jsx("h2",{className:oe.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:oe.modalCategory_content_item,children:[s.map(h=>e.jsxs(X,{to:"#",className:`${oe.modalCategory_content_link} ${h.id==_?oe.modalCategory_content_link_active:""} `,onClick:g=>p(g,h),children:[h.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),e.jsx(X,{to:"#",className:oe.modalCategory_content_link,onClick:h=>u(h),children:"Ещё..."})]})]})}function kr({categoryId:s,category:t,setCategoryId:o,setSubCategory:a,fetchCategories:n}){const{selectedSuperCategory:_}=qe(),[l,i]=m.useState(10),r=p=>{p.preventDefault();const u=l+10;i(u),n("category",1,u,_)},c=(p,u)=>{a(p,u),o(u.id)};return t.length>0&&e.jsxs("div",{className:oe.modalCategory_content_block,children:[e.jsx("h2",{className:oe.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:oe.modalCategory_content_item,children:[t==null?void 0:t.map(p=>e.jsxs(X,{to:"#",className:`${oe.modalCategory_content_link} ${p.id==s?oe.modalCategory_content_link_active:""} `,onClick:u=>c(u,p),children:[p.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},p.id)),e.jsx(X,{to:"#",className:oe.modalCategory_content_link,onClick:p=>r(p),children:"Ещё..."})]})]})}function yr({setSettings:s,setCancel:t}){return e.jsxs("div",{className:oe.settings_content_buttons,children:[e.jsx("button",{className:`${oe.settings_content_btn} ${oe.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(X,{to:"#",className:`${oe.settings_content_btn} ${oe.settings_content_btn_save}`,onClick:s,children:"Сохранить"})]})}function jr({setOpenModal:s}){const{currentCategory:t}=ce(),{selectedSuperCategory:o,setSelectedSuperCategory:a,selectedCategory:n,setSelectedCategory:_}=qe(),[l,i]=m.useState(0),[r,c]=m.useState(!1),[p,u]=m.useState("Выберите категорию"),[h,g]=m.useState([]),[v,I]=m.useState([]);m.useEffect(()=>{N("super",1,10),n&&i(n)},[]);const D=(y,x)=>{y.preventDefault(),N("subCategory",1,10,x.id),c(!1)},O=()=>{t=="Котегории"?a(o):t=="Подкотегории"&&_(l),C()},C=()=>{c(!1),u("Выберите категорию"),s(!1)},N=async(y,x,b,S)=>{try{const $=y=="super"?`https://api.mcrm.uz/api/categories?&page=${x}&perPage=${b}`:`https://api.mcrm.uz/api/categories?parentId=${S}&page=${x}&perPage=${b}`,L=(await Te.get($)).data.data.map(E=>({...E,label:y==="super"?"Супер категория":y==="category"?"Категория":"Субкатегория"}));y==="super"&&g([...L]),y==="category"&&I([...L])}catch($){console.error(`Ошибка произошла при получении ${y} категорий`,$)}},f=()=>{s(!1)};return e.jsx("div",{className:oe.modalCategory,onClick:f,children:e.jsxs("div",{className:oe.modalCategory_block,onClick:y=>y.stopPropagation(),children:[e.jsx(xr,{setCancel:C}),e.jsx("p",{className:oe.modalCategory_content_message,children:r?p:""}),e.jsxs("div",{className:oe.modalCategory_content,children:[e.jsx(fr,{superCategory:h,category:v,setMessageStatus:c,fetchCategories:N}),t==="Подкотегории"&&e.jsx(kr,{categoryId:l,category:v,setCategoryId:i,setSubCategory:D,fetchCategories:N}),e.jsx(yr,{setSettings:O,setCancel:C})]})]})})}function wr(){const[s,t]=m.useState(!1),[o,a]=m.useState(!1),{currentCategory:n,categoriesStatus:_,categories:l,setCategoriesStatus:i,setCurrentCategory:r}=ce();m.useEffect(()=>{t(n==="Котегории"||n==="Подкотегории")},[n]);const c=p=>{r(p.title),p.title==="Котегории"||p.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:d.categoriesDropDown,children:[e.jsx("h2",{className:d.categoriesDropDown_title,children:"Настройки каталога"}),o&&e.jsx(jr,{setOpenModal:a}),e.jsxs("div",{className:d.categoriesDropDown_item,children:[e.jsxs("div",{className:d.categoriesDropDown_item_top,onClick:()=>i(!_),children:[e.jsx("h2",{className:d.categoriesDropDown_item_top_title,children:n}),e.jsx("button",{className:d.categoriesDropDown_item_top_btn,onClick:()=>i(!_),children:e.jsx("div",{className:`${d.categoriesDropDown_item_top_arrow} ${_?d.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${d.categoriesDropDown_item_block} ${_?d.categoriesDropDown_item_block_open:""}`,children:l.map(p=>e.jsx("div",{className:`${d.categoriesDropDown_item_block_line} ${p.title==n?d.categoriesDropDown_item_block_active:""}`,onClick:()=>c(p),children:p.title},p.id))})]}),s&&e.jsx(Za,{title:"Выберите вариант",setOpenModal:a})]})}const Cr="_banner_1eodh_1",Nr="_banner_title_1eodh_5",Sr="_products_banner_1eodh_10",Ir="_products_banner_wrap_1eodh_13",$r="_products_banner_wrap_btn_1eodh_19",Pr="_products_banner_wrap_filter_1eodh_30",Dr="_products_banner_wrap_filter_text_1eodh_40",Or="_products_banner_form_1eodh_48",Fr="_products_banner_form_wrap_1eodh_53",Ar="_products_banner_form_wrap_btn_1eodh_59",Br="_products_banner_form_wrap_input_1eodh_75",Lr="_products_banner_form_wrap_icon_1eodh_83",Mr="_table_1eodh_87",Wr="_table_tbody_1eodh_92",Er="_table_tbody_tr_1eodh_97",Ur="_table_tbody_tr_active_1eodh_100",Rr="_table_tbody_img_1eodh_103",zr="_table_tr_1eodh_108",Tr="_table_th_1eodh_111",Vr="_table_td_1eodh_122",qr="_table_td_edit_1eodh_130",Kr="_table_btn_1eodh_136",Hr="_versions_1eodh_144",Xr="_versions_block_1eodh_149",Gr="_versions_block_top_1eodh_154",Zr="_versions_block_top_title_1eodh_164",Jr="_versions_block_top_arrow_1eodh_168",Qr="_versions_block_top_arrow_active_1eodh_177",Yr="_versions_block_dropdown_1eodh_180",ei="_versions_block_dropdown_item_1eodh_195",ti="_versions_block_dropdown_open_1eodh_206",si="_add_banner_1eodh_213",oi="_add_banner_header_1eodh_221",ni="_add_banner_header_title_1eodh_225",ai="_add_banner_content_1eodh_229",ri="_add_banner_content_product_1eodh_232",ii="_add_banner_content_link_1eodh_254",ci="_add_banner_content_info_1eodh_262",li="_add_banner_content_info_text_1eodh_266",_i="_add_banner_content_download_1eodh_272",di="_add_banner_content_download_link_1eodh_281",pi="_add_banner_content_btns_1eodh_293",ui="_add_banner_content_btn_1eodh_293",mi="_category_wrap_1eodh_311",hi="_modalCategory_1eodh_315",gi="_modalCategory_block_1eodh_323",vi="_modalCategory_nav_1eodh_328",bi="_modalCategory_nav_title_1eodh_335",xi="_modalCategory_content_1eodh_341",fi="_modalCategory_content_message_1eodh_348",ki="_modalCategory_content_link_1eodh_356",yi="_modalCategory_content_link_active_1eodh_384",ji="_modalCategory_content_item_1eodh_394",wi="_modalCategory_content_block_1eodh_416",Ci="_modalCategory_content_block_title_1eodh_420",Ni="_add_link_1eodh_427",Si="_add_link_title_1eodh_430",Ii="_add_link_input_1eodh_434",$i="_modal_btn_1eodh_443",F={banner:Cr,banner_title:Nr,products_banner:Sr,products_banner_wrap:Ir,products_banner_wrap_btn:$r,products_banner_wrap_filter:Pr,products_banner_wrap_filter_text:Dr,products_banner_form:Or,products_banner_form_wrap:Fr,products_banner_form_wrap_btn:Ar,products_banner_form_wrap_input:Br,products_banner_form_wrap_icon:Lr,table:Mr,table_tbody:Wr,table_tbody_tr:Er,table_tbody_tr_active:Ur,table_tbody_img:Rr,table_tr:zr,table_th:Tr,table_td:Vr,table_td_edit:qr,table_btn:Kr,versions:Hr,versions_block:Xr,versions_block_top:Gr,versions_block_top_title:Zr,versions_block_top_arrow:Jr,versions_block_top_arrow_active:Qr,versions_block_dropdown:Yr,versions_block_dropdown_item:ei,versions_block_dropdown_open:ti,add_banner:si,add_banner_header:oi,add_banner_header_title:ni,add_banner_content:ai,add_banner_content_product:ri,add_banner_content_link:ii,add_banner_content_info:ci,add_banner_content_info_text:li,add_banner_content_download:_i,add_banner_content_download_link:di,add_banner_content_btns:pi,add_banner_content_btn:ui,category_wrap:mi,modalCategory:hi,modalCategory_block:gi,modalCategory_nav:vi,modalCategory_nav_title:bi,modalCategory_content:xi,modalCategory_content_message:fi,modalCategory_content_link:ki,modalCategory_content_link_active:yi,modalCategory_content_item:ji,modalCategory_content_block:wi,modalCategory_content_block_title:Ci,add_link:Ni,add_link_title:Si,add_link_input:Ii,modal_btn:$i};function ut({color:s="black",title:t="",versionList:o=[],className:a,openBlock:n,setOpenBlock:_,setVersionList:l}){const[i,r]=m.useState(o[0].title),{setChangeCategoryStyles:c}=pe(),p=u=>{const h=o.map(g=>({...g,isOpen:g.id===u.id}));u.title=="Категория"&&c(!0),r(u.title),l(h),_(!1)};return e.jsxs("div",{className:a??F.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:F.versions_block,children:[e.jsxs("div",{className:F.versions_block_top,children:[e.jsx("h2",{className:F.versions_block_top_title,style:{color:s},children:i}),e.jsx("button",{className:F.versions_block_top_btn,onClick:()=>_(!n),children:e.jsx("div",{className:`${F.versions_block_top_arrow} ${n?F.versions_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${F.versions_block_dropdown} ${n?F.versions_block_dropdown_open:""}`,children:o.map(u=>e.jsx("span",{className:F.versions_block_dropdown_item,onClick:()=>p(u),children:u.title},u.id))})]})]})}function Ge({width:s=78,color:t="white",backgroundOn:o="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:_=1.1,status:l=!1,disabled:i=!1}){const r={width:`${s}px`,height:`${s/2-s/20}px`,background:l?o:a,borderRadius:`${s/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer",opacity:i?1:.3},c={background:`${t}`,height:`${s/2-s/20}px`,width:`${s/2-s/20}px`,border:`${s/25}px solid ${l?o:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${_}) translateX(${l?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:c})})}const We=({arr:s=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:o,isActive:a=!1,isEdit:n=!1,isCategory:_,isLinks:l,setPickedProduct:i,setPickedProductActive:r})=>{const{bannersArr:c,selectedProductEdit:p,imageUrlEditBanner:u,bannersArrProduct:h,bannersArrLink:g,setBannersArrLink:v,setSelectedProductEdit:I,setImageUrlEditBanner:D,setCurrentProductOpen:O,clearPickedProductsArr:C,setBannersArrProduct:N,setBannersArr:f,setBannersArrCategory:y}=pe(),[x,b]=m.useState("");m.useState(new Set);const S=j=>c.some(W=>W.title===j&&W.isBannerActive),$=(j,W)=>{if(o==="byId"&&(i==null||i(j)),n&&W){const V={id:se(),bannerUrl:u,title:W.title,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};V.title!=null&&!S(V.title)?(N(h.map(A=>A.id===p?V:A)),f(c.map(A=>A.id===p?V:A)),O(!1)):console.warn("Объект с таким brandName уже существует.")}b(j)},P=(j,W)=>{o==="productId"&&(r==null||r(j),$==null||$(j),b(j),C(),W.id&&I(W.id),W.bannerUrl&&D(W.bannerUrl))},L=(j,W,V)=>{if(j.stopPropagation(),V.isBannerActive)a&&(N(t.map(A=>A.id===W?{...A,toggleSwitcher:!A.toggleSwitcher}:A)),f(c.map(A=>A.id===W?{...A,toggleSwitcher:!A.toggleSwitcher}:A))),_&&(y(t.map(A=>A.id===W?{...A,toggleSwitcher:!A.toggleSwitcher}:A)),f(c.map(A=>A.id===W?{...A,toggleSwitcher:!A.toggleSwitcher}:A))),l&&(v(t.map(A=>A.id===W?{...A,toggleSwitcher:!A.toggleSwitcher}:A)),f(c.map(A=>A.id===W?{...A,toggleSwitcher:!A.toggleSwitcher}:A)));else return},E=j=>j.id!==void 0,T=(j,W)=>{j.stopPropagation(),N(t.map(V=>V.id===W.id?{...V,isBannerActive:!1,title:"-"}:V)),f(c.map(V=>V.id===W.id?{...V,isBannerActive:!1,title:"-"}:V))};return e.jsxs("table",{className:F.table,children:[e.jsx("thead",{className:F.table_thead,children:e.jsx("tr",{className:F.table_tr,children:s.map(j=>e.jsx("th",{className:F.table_th,children:j.title},j.id))})}),e.jsx("tbody",{className:F.table_tbody,children:t==null?void 0:t.map(j=>{var W;return e.jsxs("tr",{className:`${F.table_tbody_tr} ${!n&&x==j.id?F.table_tbody_tr_active:""}`,style:{cursor:a||_||l?"pointer":"default"},onClick:()=>P(j.id,j),children:[e.jsxs("td",{className:F.table_td,children:[o==="byId"&&(j==null?void 0:j.title),n?j.title:"",a&&e.jsx("img",{className:F.table_tbody_img,src:j.bannerUrl??"",alt:"Banner"}),_&&e.jsx("img",{className:F.table_tbody_img,src:j.bannerUrl??"",alt:"Banner"}),l&&e.jsx("img",{className:F.table_tbody_img,src:j.bannerUrl??"",alt:"Banner"})]}),e.jsxs("td",{className:F.table_td,children:[_?j.categoryTitle:"",a?j.title:(W=j.nomenclature)==null?void 0:W.price,l&&j.title]}),e.jsx("td",{className:F.table_td,children:a?"":j.crmAmount}),e.jsx("td",{className:F.table_td,children:_?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:V=>{const A=j;A.id&&L(V,A.id,j)},children:e.jsx(Ge,{width:62,status:E(j)&&j.toggleSwitcher&&j.isBannerActive,disabled:E(j)&&j.isBannerActive})}):a?e.jsxs("div",{className:F.table_td_edit,children:[j.brandName!=="-"&&e.jsx("button",{className:F.table_btn,style:{width:"156px",background:"#FFB5B5"},onClick:V=>T(V,j),children:"Открепить продукт"}),e.jsx("div",{onClick:V=>{const A=j;A.id&&L(V,A.id,j)},children:e.jsx(Ge,{width:62,status:E(j)&&j.toggleSwitcher&&j.isBannerActive,disabled:E(j)&&j.isBannerActive})})]}):l?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:V=>{const A=j;A.id&&L(V,A.id,j)},children:e.jsx(Ge,{width:62,status:E(j)&&j.toggleSwitcher&&j.isBannerActive,disabled:E(j)&&j.isBannerActive})}):e.jsx("button",{className:F.table_btn,onClick:()=>$(j.id,j),children:n?"Заменить":"Выбрать"})})]},(E(j),j.id))})})]})};function Pi({setCancel:s}){return e.jsxs("div",{className:Q.modalCategory_nav,children:[e.jsx("h2",{className:Q.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:Q.modalCategory_nav_close,onClick:s,children:e.jsx(U,{width:24,height:24,name:"XMarkIcon"})})]})}function Di({superCategory:s,category:t,superId:o,setLocalPicked:a,setSuperId:n,setMessageStatus:_,setSubCategories:l,fetchCategories:i,setSuperCategoryObj:r}){const{changeCategoryStyles:c,categoriesArr:p,setCategoriesArr:u,setActiveCategory:h,setActiveCategoryTitle:g}=pe(),{setCurrentCategory:v}=ge(),[I,D]=m.useState(10),O=(N,f)=>{N.preventDefault(),i("category",1,10,f.id),l([]);const y=t.filter(x=>x.parentId==f.id);if(v(y),a(f),n(f.id),_(!1),c&&f.label&&(h(f.label),g(f.name.ru)),c){const x=p.filter(b=>b.label!==f.label);x.push(f),u(x)}r==null||r(f)},C=()=>{const N=I+10;D(N),i("super",1,N),console.log("addPage",N)};return e.jsxs("div",{className:Q.modalCategory_content_block,children:[e.jsx("h2",{className:Q.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:Q.modalCategory_content_item,children:[s.map(N=>e.jsxs(X,{to:"#",className:`${Q.modalCategory_content_link} ${N.id==o?Q.modalCategory_content_link_active:""} `,onClick:f=>O(f,N),children:[N.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},N.id)),e.jsx(X,{to:"#",className:Q.modalCategory_content_link,onClick:()=>C(),children:"Ещё..."})]})]})}function Oi({superId:s,categoryId:t,category:o,setSubCategory:a,fetchCategories:n}){const[_,l]=m.useState(10),i=()=>{const c=_+10;l(c),n("category",1,c,s),console.log("addPage",c,s)},r=(c,p)=>{a(c,p)};return o.length>0&&e.jsxs("div",{className:Q.modalCategory_content_block,children:[e.jsx("h2",{className:Q.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:Q.modalCategory_content_item,children:[o==null?void 0:o.map(c=>e.jsxs(X,{to:"#",className:`${Q.modalCategory_content_link} ${c.id==t?Q.modalCategory_content_link_active:""} `,onClick:p=>r(p,c),children:[c.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},c.id)),e.jsx(X,{to:"#",className:Q.modalCategory_content_link,onClick:()=>i(),children:"Ещё..."})]})]})}function Fi({subId:s,categoryId:t,subCategories:o,setSubProductsList:a,fetchCategories:n}){const[_,l]=m.useState(10),i=()=>{const r=_+10;l(r),n("subCategory",1,r,t),console.log("addPage",r)};return o.length>0&&e.jsxs("div",{className:Q.modalCategory_content_block,children:[e.jsx("h2",{className:Q.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:Q.modalCategory_content_item,children:[o==null?void 0:o.map(r=>e.jsxs(X,{to:"#",className:`${Q.modalCategory_content_link} ${r.id==s?Q.modalCategory_content_link_active:""} `,onClick:c=>a(c,r),children:[r.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},r.id)),e.jsx(X,{to:"#",className:Q.modalCategory_content_link,onClick:()=>i(),children:"Ещё..."})]})]})}function Ai({setSettings:s,setCancel:t}){return e.jsxs("div",{className:Q.settings_content_buttons,children:[e.jsx("button",{className:`${Q.settings_content_btn} ${Q.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${Q.settings_content_btn} ${Q.settings_content_btn_save}`,onClick:s,children:"Сохранить"})]})}function Ke({isProduct:s,isCategory:t=!1}){const{setOpenModalCategory:o,setPickedCategory:a,setCurrentCategory:n,setCurrentSubCategory:_}=ge(),{changeCategoryStyles:l,categoriesArr:i,pickedProducts:r,setCategoriesArr:c,setPickedProducts:p,setActiveCategory:u,setActiveCategoryTitle:h,setOpenModalCategoryBanner:g}=pe(),v=l?F:Q;Ve();const[I,D]=m.useState(0),[O,C]=m.useState(0),[N,f]=m.useState(0),[y,x]=m.useState({}),[b,S]=m.useState(!1),[$,P]=m.useState("Выберите категорию"),[L,E]=m.useState([]),[T,j]=m.useState([]),[W,V]=m.useState([]),[A,ke]=m.useState(null),[ve,be]=m.useState(null),[ue,Y]=m.useState(null);m.useEffect(()=>{console.log("pickedProducts",r)},[r]),m.useEffect(()=>{Ce("super",1,10)},[]);const[k]=m.useState(1),[w]=m.useState(10);m.useState([]);const K=(re,J)=>{re.preventDefault(),Ce("subCategory",1,10,J.id);const me=W.filter(ye=>ye.parentId==J.id);if(_(me),x(J),C(J.id),S(!1),l&&J.label&&(u(J.label),h(J.name.ru)),l){const ye=i.filter(Be=>Be.label!==J.label);ye.push(J),c(ye)}be(J)},G=(re,J)=>{if(re.preventDefault(),x(J),f(J.id),S(!1),l&&J.label&&(u(J.label),h(J.name.ru)),l){const me=i.filter(ye=>ye.name.ru!==J.name.ru);me.push(J),console.log("newCategories",me),c(me)}Y(J)};async function te(re){const J=we.get("multi-store");try{const me=await ie.get(`web-nomenclatures?multiStoreId=${J}&categoryId=${re}&page=${k}&perPage=${w}`);p(me.data.data)}catch(me){console.log("error",me)}}const xe=()=>{if(Object.keys(y).length===0){S(!0),P("Выберите Суперкотегорию");return}if(T.length>0&&O===0){S(!0),P("Выберите Категорию");return}if(W.length>0&&N===0){S(!0),P("Выберите Подкотегорию");return}console.log(y),te(y.id);const re=[];A&&re.push(A),ve&&re.push(ve),ue&&re.push(ue),c(re),le()},le=()=>{a(y),o(!1),D(0),C(0),f(0),x({}),n([]),_([]),S(!1),P("Выберите категорию"),g(!1)},Ce=async(re,J,me,ye)=>{try{const Be=re=="super"?`https://api.mcrm.uz/api/categories?&page=${J}&perPage=${me}`:`https://api.mcrm.uz/api/categories?parentId=${ye}&page=${J}&perPage=${me}`,Xe=(await Te.get(Be)).data.data.map(Pt=>({...Pt,label:re==="super"?"Супер категория":re==="category"?"Категория":"Субкатегория"}));re==="super"&&E([...Xe]),re==="category"&&j([...Xe]),re==="subCategory"&&V([...Xe])}catch(Be){console.error(`Ошибка произошла при получении ${re} категорий`,Be)}};return e.jsx("div",{className:v.modalCategory,children:e.jsxs("div",{className:v.modalCategory_block,children:[!l&&e.jsx(Pi,{setCancel:le}),e.jsx("p",{className:v.modalCategory_content_message,children:b?$:""}),e.jsxs("div",{className:v.modalCategory_content,children:[e.jsx(Di,{superId:I,superCategory:L,category:T,setLocalPicked:x,setSuperId:D,setMessageStatus:S,fetchCategories:Ce,setSubCategories:V,setSuperCategoryObj:ke}),e.jsx(Oi,{superId:I,categoryId:O,category:T,setSubCategory:K,fetchCategories:Ce}),e.jsx(Fi,{subId:N,categoryId:O,subCategories:W,setSubProductsList:G,fetchCategories:Ce}),!t&&e.jsx(Ai,{setSettings:xe,setCancel:le})]})]})})}const Fe=({title:s,currentProductEdit:t,isEdit:o,isCategory:a,isLinks:n,linkTextEdit:_,deleteBanner:l,isProduct:i})=>{const{currentProductTable:r,changeCategoryStyles:c,categoriesArr:p,bannersArr:u,linksPageBannerText:h,openLinksPage:g,openProductsPage:v,activeCategory:I,activeCategoryTitle:D,bannersArrProduct:O,bannersArrCategory:C,bannersArrLink:N,setBannersArrLink:f,setCurrentProductOpen:y,clearCategoriesArr:x,addBannerToArr:b,setLinksPageBannerText:S,setBannersArrProduct:$,setBannersArr:P,setBannersArrCategory:L}=pe(),[E,T]=m.useState(null),[j,W]=m.useState(null),[V,A]=m.useState(""),ke=k=>{if(k.target.files&&k.target.files[0]){const w=k.target.files[0];console.log("file",w),W(w);const K=new FileReader;K.onloadend=()=>{const G=K.result;T(G)},K.readAsDataURL(w)}},ve=()=>{document.getElementById("upload").click()},be=()=>{if(!j)return;const k=()=>{switch(I){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}};if(j&&r&&v){const w={id:se(),bannerUrl:E||"",title:r.title,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(te=>te.title===w.title)||b(w),y(!1),T(null),W(null);const G=document.getElementById("upload");G&&(G.value="")}if(c&&g==!1){const w=k(),K={id:se(),bannerUrl:E||"",categoryLabel:w,categoryTitle:D,isCategoryBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(xe=>xe.categoryTitle===K.categoryTitle)||b(K),T(null),W(null);const te=document.getElementById("upload");te&&(te.value="")}if(g&&h){const w={id:se(),bannerUrl:E||"",title:h,isLinkBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(te=>te.title===w.title)||(b(w),console.log("bannersArr",u)),T(null),W(null),S("");const G=document.getElementById("upload");G&&(G.value="")}},ue=()=>{E===null?(console.log("bannersArrProduct",O),console.log("bannersArr",u),o&&(a&&(A((()=>{switch(I){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}})()),L(C.map(w=>w.id===(r==null?void 0:r.id)?{...w,categoryTitle:D,activeCategoryEdit:V}:w))),n&&(f(N.map(k=>k.id===(t==null?void 0:t.id)?{...k,title:_}:k)),P(u.map(k=>k.id===(t==null?void 0:t.id)?{...k,title:_}:k))),y(!1))):o&&(i&&($(O.map(k=>k.id===(t==null?void 0:t.id)?{...k,bannerUrl:E}:k)),P(u.map(k=>k.id===(t==null?void 0:t.id)?{...k,bannerUrl:E}:k))),a&&(L(C.map(k=>k.id===(t==null?void 0:t.id)?{...k,bannerUrl:E,categoryTitle:D}:k)),P(u.map(k=>k.id===(t==null?void 0:t.id)?{...k,bannerUrl:E,categoryTitle:D}:k))),n&&(f(N.map(k=>k.id===(t==null?void 0:t.id)?{...k,bannerUrl:E,title:_}:k)),P(u.map(k=>k.id===(t==null?void 0:t.id)?{...k,bannerUrl:E,title:_}:k))),y(!1))},Y=()=>{l==null||l(t==null?void 0:t.id),y(!1)};return e.jsxs("div",{className:F.add_banner,children:[e.jsx("div",{className:F.add_banner_header,children:e.jsx("h3",{className:F.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:F.add_banner_content,children:[c?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:F.add_banner_content_product,children:[s,":",a&&e.jsxs("span",{children:[" ",t==null?void 0:t.categoryTitle]}),n&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),p==null?void 0:p.map(k=>e.jsx("span",{className:F.add_banner_content_product,children:k.name.ru},k.name.ru))]}):e.jsx("p",{className:F.add_banner_content_product,children:g?`${s}: ${h}`:`${s}: ${r==null?void 0:r.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:ke}),e.jsx("label",{htmlFor:"upload",className:F.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:F.add_banner_content_info,children:e.jsx("p",{className:F.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),o?e.jsx("div",{className:F.add_banner_content_download,children:e.jsx("img",{src:E||(t==null?void 0:t.bannerUrl),alt:"",style:{width:"555px",height:"229px",objectFit:"cover"}})}):e.jsx("div",{className:F.add_banner_content_download,children:E?e.jsx("img",{src:E,alt:"Uploaded",className:F.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:F.add_banner_content_download_link,onClick:()=>ve(),children:[e.jsx(U,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),o?e.jsxs("div",{className:F.add_banner_content_btns,children:[e.jsx("button",{className:F.add_banner_content_btn,onClick:Y,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:F.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>ue(),children:"Изменить"})]}):e.jsxs("div",{className:F.add_banner_content_btns,children:[e.jsx("button",{className:F.add_banner_content_btn,onClick:()=>y(!1),children:"Отмена"}),e.jsx("button",{className:F.add_banner_content_btn,onClick:()=>be(),children:"Сохранить"})]})]})]})};function mt({inputText:s,setInputText:t,filteredUsers:o,isProductEdit:a}){const{categoriesArr:n,filteredSubCategory:_,filteredCategory:l,filteredSuperCategory:i,setCurrentProductOpen:r,setChangeCategoryStyles:c,setOpenModalCategoryBanner:p,clearCategoriesArr:u,setFilteredSubCategory:h,setFilteredCategory:g,setFilteredSuperCategory:v}=pe(),I=()=>{a&&r(!1),c(!1),p(!0),u()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:F.products_banner_wrap,children:[e.jsx("button",{className:F.products_banner_wrap_btn,onClick:I,children:e.jsx(U,{name:"FunnelIcon",width:20})}),(n==null?void 0:n.length)!==0&&e.jsx("div",{className:F.products_banner_wrap_filter,children:n==null?void 0:n.map(D=>e.jsx("span",{className:F.products_banner_wrap_filter_text,children:D.name.ru},D.id))}),e.jsxs("form",{action:"",className:F.products_banner_form,onSubmit:D=>o==null?void 0:o(D),children:[e.jsxs("div",{className:F.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:F.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:s,onChange:D=>t==null?void 0:t(D.target.value)}),e.jsx(U,{className:F.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:F.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const Bi=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],Li=()=>{const{openModalCategoryBanner:s,currentProductOpen:t,searchTextBanner:o,pickedProducts:a,webProductsArr:n,setCurrentProductTable:_,clearCategoriesArr:l,setSearchTextBanner:i,clearPickedProductsArr:r,setOpenLinksPage:c,setOpenProductsPage:p,setCurrentProductOpen:u,setOpenModalCategoryBanner:h}=pe(),[g,v]=m.useState(""),I=f=>{f.preventDefault(),i(g),l()},D=f=>{const y=n.find(x=>x.id===f);y&&(console.log("currentProduct",y),_(y),u(!0))},[O,C]=m.useState([]);m.useEffect(()=>{let f=n;f=f==null?void 0:f.filter(y=>{var x;return(x=y.title)==null?void 0:x.toLowerCase().includes(o.toLowerCase())}),C(f)},[o,n]);const N=o?O:a;return m.useEffect(()=>{g===""&&(i(""),r(),u(!1)),s&&v("")},[g,s]),m.useEffect(()=>{u(!1),c(!1),p(!0),h(!1),l()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(mt,{inputText:g,setInputText:v,filteredUsers:I}),e.jsx(We,{arrToUse:N,arr:Bi,setPickedProduct:D,selectionMode:"byId"})]}),s&&e.jsx(Ke,{isProduct:!0}),t&&e.jsx(Fe,{title:"Товар"})]})},Mi=()=>{const{categoriesArr:s,setOpenLinksPage:t,setChangeCategoryStyles:o,setOpenProductsPage:a}=pe();return m.useEffect(()=>{t(!1),o(!0),a(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:F.category_wrap,children:e.jsx(Ke,{isCategory:!0})}),e.jsx(Fe,{title:"Каталог",categories:s})]})},Wi=()=>{const{linksPageBannerText:s,setLinksPageBannerText:t,setOpenLinksPage:o,setChangeCategoryStyles:a,setOpenProductsPage:n}=pe();return m.useEffect(()=>{o(!0),a(!1),t(""),n(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F.add_link,children:[e.jsx("h3",{className:F.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:F.add_link_input,type:"text",value:s,onChange:_=>t(_.target.value)})]}),e.jsx(Fe,{title:"Страница"})]})};function Ei(){const{bannerDropdownOptions:s,openBannerDropdown:t,setBannerDropdownOptions:o,setOpenBannerDropdown:a,resetDropdownToDefault:n}=pe(),_=()=>{const l=s.find(i=>i.isOpen);if(!l)return null;switch(l.title){case"Продукт":return e.jsx(Li,{});case"Категория":return e.jsx(Mi,{});case"Страница":return e.jsx(Wi,{});default:return null}};return m.useEffect(()=>{n()},[]),e.jsxs("div",{className:F.banner,children:[e.jsx("h3",{className:F.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(ut,{openBlock:t,setOpenBlock:a,versionList:s,setVersionList:o}),e.jsx("div",{className:F.banner_content,children:_()})]})}const Ui=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ri=()=>{const{pickedProducts:s,currentProductOpen:t,openModalCategoryBanner:o,bannersArr:a,searchTextBanner:n,currentProductTable:_,bannersArrProduct:l,webProductsArr:i,clearPickedProductsArr:r,clearCategoriesArr:c,setCurrentProductOpen:p,setCurrentProductTable:u,setSearchTextBanner:h,setOpenLinksPage:g,setOpenProductsPage:v,setOpenModalCategoryBanner:I,setBannersArrProduct:D,setBannersArr:O}=pe(),[C,N]=m.useState(""),[f,y]=m.useState([]),x=P=>{P.preventDefault(),h(C),c()},b=P=>{const L=l.find(E=>E.id===P);L&&(u(L),p(!0))};m.useEffect(()=>{let P=i;P=P==null?void 0:P.filter(L=>{var E;return(E=L.title)==null?void 0:E.toLowerCase().includes(n.toLowerCase())}),y(P)},[n,i]);const S=P=>{D(l.filter(L=>L.id!=P)),O(a.filter(L=>L.id!==P))},$=n?f:s;return m.useEffect(()=>{p(!1),g(!1),v(!0),I(!1),c()},[p,g,v,I,c]),m.useEffect(()=>{C===""&&(h(""),r())},[C]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arrToUse:l,arr:Ui,setPickedProductActive:b,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(mt,{filteredUsers:x,setInputText:N}),e.jsx(We,{arrToUse:$,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Fe,{title:"Продукт",currentProductEdit:_,isEdit:!0,isProduct:!0,deleteBanner:S})]})]}),o&&e.jsx(Ke,{})]})},zi=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ti=()=>{const{bannersArr:s,bannersArrCategory:t,currentProductTable:o,currentProductOpen:a,setCurrentProductOpen:n,setBannersArr:_,setCurrentProductTable:l,setBannersArrCategory:i}=pe(),r=p=>{const u=t.find(h=>h.id===p);u&&(l(u),n(!0),console.log("currentProductTable",o))},c=p=>{i(t.filter(u=>u.id!=p)),_(s.filter(u=>u.id!==p))};return m.useEffect(()=>{n(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arr:zi,arrToUse:t,selectionMode:"productId",isCategory:!0,setPickedProductActive:r}),a&&e.jsx(Ke,{isCategory:!0}),a&&e.jsx(Fe,{title:"Каталог",currentProductEdit:o,isEdit:!0,isCategory:!0,deleteBanner:c})]})},Vi=({setLinkText:s,currentProductEdit:t})=>{pe();const[o,a]=m.useState(t.brandName||""),n=_=>{a(_),s(_)};return m.useEffect(()=>{a(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:F.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:F.add_link_input,type:"text",onChange:_=>n(_.target.value),value:o})]})},qi=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ki=()=>{const{bannersArr:s,bannersArrLink:t,currentProductOpen:o,currentProductTable:a,setBannersArr:n,setBannersArrLink:_,setCurrentProductTable:l,setCurrentProductOpen:i}=pe(),[r,c]=m.useState(""),p=h=>{const g=t.find(v=>v.id===h);g&&(l(g),console.log("currentProductTable",a),i(!0))},u=h=>{_(t.filter(g=>g.id!=h)),n(s.filter(g=>g.id!==h))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arr:qi,arrToUse:t,selectionMode:"productId",setPickedProductActive:p,isLinks:!0}),o&&e.jsxs(e.Fragment,{children:[e.jsx(Vi,{setLinkText:c,currentProductEdit:a}),e.jsx(Fe,{title:"Страница",currentProductEdit:a,deleteBanner:u,isLinks:!0,isEdit:!0,linkTextEdit:r})]})]})};function Hi(){const{bannerDropdownOptions:s,openBannerDropdown:t,bannersArr:o,bannersArrProduct:a,bannersArrCategory:n,bannersArrLink:_,setBannerDropdownOptions:l,setOpenBannerDropdown:i,resetDropdownToDefault:r,setBannersArrProduct:c,setBannersArrCategory:p,setBannersArrLink:u}=pe();m.useEffect(()=>{c(o.filter(g=>g.isProductBanner===!0)),p(o.filter(g=>g.isCategoryBanner===!0)),u(o.filter(g=>g.isLinkBanner===!0))},[]);const h=()=>{const g=s.find(v=>v.isOpen);if(!g)return null;switch(g.title){case"Продукт":return e.jsx(Ri,{});case"Категория":return e.jsx(Ti,{});case"Страница":return e.jsx(Ki,{});default:return null}};return m.useEffect(()=>{r()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:F.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(ut,{openBlock:t,setOpenBlock:i,versionList:s,setVersionList:l})]}),e.jsx("div",{className:F.banner_content,children:h()})]})}const Xi=[{id:1,title:"Новый",href:"/admin/settings/banner"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner"}];function Gi(){const[s]=m.useState(1),[t]=m.useState(10),a=ae().pathname,{setCurrentProductOpen:n,setWebProductsArr:_}=pe();m.useEffect(()=>{n(!1)},[]);async function l(){const i=we.get("multi-store");try{const r=await ie.get(`web-nomenclatures?multiStoreId=${i}&page=${s}&perPage=${t}`);_(r.data.data)}catch(r){console.log("error",r)}}return m.useEffect(()=>{l()},[]),e.jsx("div",{className:d.banner,children:e.jsxs("div",{className:d.banner_nav,children:[e.jsx("ul",{className:d.banner_nav_list,children:Xi.map(i=>e.jsx("li",{children:e.jsx(X,{to:i.href,className:`${d.banner_nav_link} ${i.href==a?d.banner_nav_link_active:""}`,children:i.title})},i.id))}),a.startsWith("/admin/settings/banner")&&e.jsxs("div",{className:d.settings_content_base,children:[a=="/admin/settings/banner"&&e.jsx(Ei,{}),a=="/admin/settings/banner/activeBanner"&&e.jsx(Hi,{})]})]})})}const Zi="_contacts_mxkpi_1",Ji="_contacts_content_mxkpi_4",Qi="_contacts_nav_mxkpi_7",Yi="_contacts_nav_list_mxkpi_10",ec="_contacts_nav_link_mxkpi_15",tc="_contacts_nav_link_active_mxkpi_30",sc="_contacts_btn_mxkpi_34",oc="_socials_mxkpi_55",nc="_socials_title_mxkpi_60",ac="_socials_content_mxkpi_65",rc="_socials_content_wrap_mxkpi_70",ic="_socials_content_wrap_input_mxkpi_75",cc="_aboutUs_mxkpi_84",lc="_aboutUs_add_image_mxkpi_87",_c="_aboutUs_content_mxkpi_90",dc="_aboutUs_image_wrap_mxkpi_95",pc="_aboutUs_download_mxkpi_104",uc="_aboutUs_text_mxkpi_112",mc="_aboutUs_inputs_mxkpi_120",hc="_aboutUs_inputs_wrap_mxkpi_126",gc="_aboutUs_inputs_wrap_title_mxkpi_130",vc="_aboutUs_inputs_wrap_input_mxkpi_136",bc="_aboutUs_inputs_wrap_textarea_mxkpi_144",xc="_aboutUs_btn_mxkpi_152",fc="_aboutUs_week_info_mxkpi_172",kc="_aboutUs_week_info_text_mxkpi_178",yc="_aboutUs_week_content_mxkpi_183",jc="_aboutUs_week_wrap_mxkpi_189",wc="_aboutUs_week_wrap_colored_mxkpi_193",Cc="_aboutUs_week_wrap_colored_active_mxkpi_203",Nc="_aboutUs_week_wrap_colored_last_mxkpi_206",Sc="_aboutUs_week_wrap_day_mxkpi_209",Ic="_aboutUs_week_wrap_schedule_mxkpi_215",$c="_aboutUs_week_wrap_input_mxkpi_221",Pc="_custom_checkbox_mxkpi_241",Dc="_custom_checkbox_input_mxkpi_247",Oc="_custom_checkbox_box_mxkpi_252",Fc="_custom_checkbox_box_icon_mxkpi_261",R={contacts:Zi,contacts_content:Ji,contacts_nav:Qi,contacts_nav_list:Yi,contacts_nav_link:ec,contacts_nav_link_active:tc,contacts_btn:sc,socials:oc,socials_title:nc,socials_content:ac,socials_content_wrap:rc,socials_content_wrap_input:ic,aboutUs:cc,aboutUs_add_image:lc,aboutUs_content:_c,aboutUs_image_wrap:dc,aboutUs_download:pc,aboutUs_text:uc,aboutUs_inputs:mc,aboutUs_inputs_wrap:hc,aboutUs_inputs_wrap_title:gc,aboutUs_inputs_wrap_input:vc,aboutUs_inputs_wrap_textarea:bc,aboutUs_btn:xc,aboutUs_week_info:fc,aboutUs_week_info_text:kc,aboutUs_week_content:yc,aboutUs_week_wrap:jc,aboutUs_week_wrap_colored:wc,aboutUs_week_wrap_colored_active:Cc,aboutUs_week_wrap_colored_last:Nc,aboutUs_week_wrap_day:Sc,aboutUs_week_wrap_schedule:Ic,aboutUs_week_wrap_input:$c,custom_checkbox:Pc,custom_checkbox_input:Dc,custom_checkbox_box:Oc,custom_checkbox_box_icon:Fc},Ac=({temporaryImageUrl:s,setTemporaryImageUrl:t})=>{Ze();const[o,a]=m.useState(null),[n,_]=m.useState(null);m.useEffect(()=>{const r=localStorage.getItem("savedLogoImageUrl");r&&(a(r),t(r))},[t]);const l=r=>{if(r.target.files&&r.target.files[0]){const c=r.target.files[0];_(c);const p=new FileReader;p.onloadend=()=>{const u=p.result;a(u),t(u),localStorage.setItem("savedLogoImageUrl",u)},p.readAsDataURL(c)}},i=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:R.aboutUs_add_image,children:[e.jsx("div",{className:R.aboutUs_image_wrap,children:o||s?e.jsx("img",{src:s||o,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>i(),children:e.jsx(U,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:l}),e.jsx("label",{htmlFor:"upload",className:R.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:R.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function $e(){return $e=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},$e.apply(this,arguments)}const ht=(s,t)=>{const o={};for(const a in s)t.indexOf(a)===-1&&(o[a]=s[a]);return o},gt=ne.createContext(null),He=ne.createContext(null),Bc=s=>t=>ne.createElement(He.Consumer,null,o=>ne.createElement(s,$e({parent:o},t))),Lc=(s=[])=>{const[t,o]=m.useState(!1),a=m.useRef(s),n=(()=>{const l=m.useContext(gt);if(l===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return l})(),_=n.getApi();return m.useEffect(()=>{n.load().then(()=>Promise.all(a.current.map(n.loadModule))).then(()=>o(!0))},[]),t&&_?_:null},Mc=()=>{},Wc=["onLoad","onError","modules","apiLoader"];function vt(s,t=!1,o=[]){return a=>{const{width:n,height:_,modules:l=[],onLoad:i=Mc}=a,r=Lc(o.concat(l)),c=!t||!!r,p=ht(a,Wc);return m.useEffect(()=>r?i(r):void 0,[r]),c?ne.createElement(s,$e({ymaps:r},p)):ne.createElement("div",{style:{width:n,height:_}})}}const Ec=typeof window<"u",ot={lang:"ru_RU",load:"",ns:"",mode:"release"},Uc=s=>{const{version:t="2.1",enterprise:o=!1,query:a={lang:"ru_RU",load:"",ns:""},preload:n=!1,children:_}=s,l=m.useRef((i=>{const{query:r=ot}=i,c=Date.now().toString(32),p=r.ns||"",u="__yandex-maps-api-onload__$$"+c,h="__yandex-maps-api-onerror__$$"+c,g=Ec?window:{},v={};let I;const D=()=>p?g[p]:I,O=()=>{delete g[u],delete g[h]};return{load:()=>{if(D())return Promise.resolve(I);if(v[p])return v[p];const C={onload:u,onerror:h,...ot,...r},N=Object.keys(C).map(y=>`${y}=${C[y]}`).join("&"),f=[`https://${i.enterprise?"enterprise.":""}api-maps.yandex.ru`,i.version,"?"+N].join("/");return v[p]=new Promise((y,x)=>{g[u]=b=>{O(),b.ready(()=>{I=b,y(b)})},g[h]=b=>{O(),x(b)},(b=>new Promise((S,$)=>{const P=document.createElement("script");P.type="text/javascript",P.onload=S,P.onerror=$,P.src=b,P.async=!0,document.head.appendChild(P)}))(f).catch(g[h])}),v[p]},getApi:D,loadModule:C=>new Promise((N,f)=>{I.modules.require(C).done(y=>{y.forEach(x=>{((b,S,$,P=!1)=>{const L=typeof S=="string"?S.split("."):S.slice();let E,T=b;for(;L.length>1;)E=L.shift(),T[E]||(T[E]={}),T=T[E];const j=L[0];T[j]=P===!0&&T[j]||$})(I,C,x,!0)}),N(I)},f)})}})({version:t,enterprise:o,query:a,preload:n}));return m.useEffect(()=>{n&&l.current.load()},[l.current]),ne.createElement(gt.Provider,{value:l.current},_)},nt=/^on(?=[A-Z])/;function ee(s){return Object.keys(s).reduce((t,o)=>{if(nt.test(o)){const a=o.replace(nt,"").toLowerCase();t._events[a]=s[o]}else t[o]=s[o];return t},{_events:{}})}function De(s,t,o){typeof o=="function"&&s.events.add(t,o)}function Oe(s,t,o){typeof o=="function"&&s.events.remove(t,o)}function Ae(s,t,o){Object.keys(Object.assign({},t,o)).forEach(a=>{t[a]!==o[a]&&(Oe(s,a,t[a]),De(s,a,o[a]))})}const bt=s=>"default"+s.charAt(0).toUpperCase()+s.slice(1);function _e(s,t){return s[t]!==void 0||s[bt(t)]===void 0}function B(s,t,o){return(_e(s,t)?s[t]:s[bt(t)])||o}function de(s,t,o=null){if(s!==t){if(s&&("current"in s?s.current=null:typeof s=="function"&&s(null)),!t)return;"current"in t?t.current=o:typeof t=="function"&&t(o)}}function xt(s){const{width:t,height:o,style:a,className:n}=s;return a!==void 0||n!==void 0?Object.assign({},a&&{style:a},n&&{className:n}):{style:{width:t,height:o}}}class Rc extends ne.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,o){const{onError:a=()=>{}}=this.props;a(t),this.setState({error:t,errorInfo:o})}render(){return this.state.error?null:this.props.children}}const ft=s=>({onError:t,...o})=>ne.createElement(Rc,{onError:t},ne.createElement(s,o));class Le extends ne.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Le.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Le.updateObject(this.instance,t,this.props)}componentWillUnmount(){Le.unmountObject(this.instance,this.props)}render(){const t=xt(this.props),o=ee(this.props),a=ht(o,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return ne.createElement(He.Provider,{value:this.state.instance},ne.createElement("div",$e({ref:this._getRef},t,a),this.props.children))}static mountObject(t,o,a){const{instanceRef:n,_events:_}=ee(a),l=new o(t,B(a,"state"),B(a,"options"));return Object.keys(_).forEach(i=>De(l,i,_[i])),de(null,n,l),l}static updateObject(t,o,a){const{_events:n,instanceRef:_}=ee(a),{_events:l,instanceRef:i}=ee(o);if(_e(a,"state")){const r=B(o,"state",{}),c=B(a,"state",{});r.type!==c.type&&t.setType(c.type),r.behaviors!==c.behaviors&&(r.behaviors&&t.behaviors.disable(r.behaviors),c.behaviors&&t.behaviors.enable(c.behaviors)),c.zoom&&r.zoom!==c.zoom&&t.setZoom(c.zoom),c.center&&r.center!==c.center&&t.setCenter(c.center),c.bounds&&r.bounds!==c.bounds&&t.setBounds(c.bounds)}if(_e(a,"options")){const r=B(o,"options"),c=B(a,"options",{});r!==c&&t.options.set(c)}B(o,"width")===B(a,"width")&&B(o,"height")===B(a,"height")||t.container.fitToViewport(),Ae(t,l,n),de(i,_,t)}static unmountObject(t,o){const{instanceRef:a,_events:n}=ee(o);t!==null&&(Object.keys(n).forEach(_=>Oe(t,_,n[_])),t.destroy(),de(a))}}const kt=ft(vt(Le,!0,["Map"]));kt.defaultProps={width:320,height:240};class Ee extends ne.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&Ee.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&Ee.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,Ee.unmountObject(this.state.instance,this.props)}render(){const t=xt(this.props);return ne.createElement("div",$e({ref:this._getRef},t))}static mountObject(t,o,a){const{instanceRef:n,_events:_}=ee(a),l=B(a,"point"),i=B(a,"locateOptions"),r=B(a,"options");return new Promise((c,p)=>{o.locate(l,i).done(u=>{if(u.length>0){const h=new o.Player(t,u[0],r);de(null,n,h),Object.keys(_).forEach(g=>De(h,g,_[g])),c(h)}},p)})}static updateObject(t,o,a){const{_events:n,instanceRef:_}=ee(a),{_events:l,instanceRef:i}=ee(o);if(_e(a,"options")){const r=B(o,"options"),c=B(a,"options");r!==c&&t.options.set(c)}if(_e(a,"point")){const r=B(a,"point"),c=B(o,"point"),p=B(a,"locateOptions");r!==c&&t.moveTo(r,p)}Ae(t,l,n),de(i,_,t)}static unmountObject(t,o){const{instanceRef:a,_events:n}=ee(o);t!==null&&(Object.keys(n).forEach(_=>Oe(t,_,n[_])),de(a))}}class Me extends ne.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Me.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Me.updateControl(this.instance,t,this.props)}componentWillUnmount(){Me.unmountControl(this.instance,this.props)}render(){return ne.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,o){const{instanceRef:a,parent:n,lazy:_,_events:l}=ee(o),i=new t({data:B(o,"data"),options:B(o,"options"),state:B(o,"state"),mapTypes:B(o,"mapTypes"),lazy:_});if(Object.keys(l).forEach(r=>De(i,r,l[r])),n&&n.controls&&typeof n.controls.add=="function")n.controls.add(i);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${o.name}`);n.add(i)}return de(null,a,i),i}static updateControl(t,o,a){const{_events:n,instanceRef:_}=ee(a),{_events:l,instanceRef:i}=ee(o);if(_e(a,"options")){const r=B(o,"options"),c=B(a,"options");r!==c&&t.options.set(c)}if(_e(a,"data")){const r=B(o,"data"),c=B(a,"data");r!==c&&t.data.set(c)}if(_e(a,"state")){const r=B(o,"state"),c=B(a,"state");r!==c&&t.state.set(c)}if(_e(a,"mapTypes")){const r=B(o,"mapTypes"),c=B(a,"mapTypes");r!==c&&(t.removeAllMapTypes(),c.forEach(p=>t.addMapType(p)))}Ae(t,l,n),de(i,_,t)}static unmountControl(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o);t!==null&&(Object.keys(_).forEach(l=>Oe(t,l,_[l])),n.controls&&typeof n.controls.remove=="function"?n.controls.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),de(a))}}var zc=ft(Bc(vt(s=>ne.createElement(Me,$e({},s,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ue extends ne.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ue.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ue.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ue.unmountObject(this.instance,this.props)}render(){return ne.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o),l=new t(B(o,"options"));if(Object.keys(_).forEach(i=>De(l,i,_[i])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(l);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount Clusterer");n.add(l)}return de(null,a,l),l}static updateObject(t,o,a){const{_events:n,instanceRef:_}=ee(a),{_events:l,instanceRef:i}=ee(o);if(_e(a,"options")){const r=B(o,"options"),c=B(a,"options");r!==c&&t.options.set(c)}Ae(t,l,n),de(i,_,t)}static unmountObject(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o);t!==null&&(Object.keys(_).forEach(l=>Oe(t,l,_[l])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),de(a))}}class Re extends ne.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Re.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Re.updateObject(this.instance,t,this.props)}componentWillUnmount(){Re.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o),l=B(o,"options",{}),i=B(o,"features",{}),r=B(o,"filter",null),c=B(o,"objects",{}),p=B(o,"clusters",{}),u=new t(l);if(u.add(i||[]),u.setFilter(r),u.objects.options.set(c),u.clusters.options.set(p),Object.keys(_).forEach(h=>De(u,h,_[h])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(u);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount ObjectManager");n.add(u)}return de(null,a,u),u}static updateObject(t,o,a){const{_events:n,instanceRef:_}=ee(a),{_events:l,instanceRef:i}=ee(o);if(_e(a,"options")){const r=B(o,"options"),c=B(a,"options");r!==c&&t.options.set(c)}if(_e(a,"objects")){const r=B(o,"objects"),c=B(a,"objects");r!==c&&t.objects.options.set(c)}if(_e(a,"clusters")){const r=B(o,"clusters"),c=B(a,"clusters");r!==c&&t.clusters.options.set(c)}if(_e(a,"filter")){const r=B(o,"filter"),c=B(a,"filter");r!==c&&t.setFilter(c)}if(_e(a,"features")){const r=B(o,"features"),c=B(a,"features");r!==c&&(t.remove(r),t.add(c))}Ae(t,l,n),de(i,_,t)}static unmountObject(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o);t!==null&&(Object.keys(_).forEach(l=>Oe(t,l,_[l])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),de(a))}}class ze extends ne.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:o,dangerZone:a}=this.props,n=ze.mountObject(a&&typeof a.modifyConstructor=="function"?a.modifyConstructor(o[t]):o[t],this.props);this.instance=n,this.setState({instance:n})}componentDidUpdate(t){this.instance!==null&&ze.updateObject(this.instance,t,this.props)}componentWillUnmount(){ze.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o),l=new t(B(o,"geometry"),B(o,"properties"),B(o,"options"));if(Object.keys(_).forEach(i=>De(l,i,_[i])),n&&n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(l);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${o.name}`);n.add(l)}return de(null,a,l),l}static updateObject(t,o,a){const{_events:n,instanceRef:_}=ee(a),{_events:l,instanceRef:i}=ee(o);if(_e(a,"geometry")){const r=B(o,"geometry",{}),c=B(a,"geometry",{});Array.isArray(c)&&c!==r?Array.isArray(c[0])&&typeof c[1]=="number"?(t.geometry.setCoordinates(c[0]),t.geometry.setRadius(c[1])):t.geometry.setCoordinates(c):typeof c=="object"&&(c.coordinates!==r.coordinates&&t.geometry.setCoordinates(c.coordinates),c.radius!==r.radius&&t.geometry.setRadius(c.radius))}if(_e(a,"properties")){const r=B(o,"properties"),c=B(a,"properties");r!==c&&t.properties.set(c)}if(_e(a,"options")){const r=B(o,"options"),c=B(a,"options");r!==c&&t.options.set(c)}Ae(t,l,n),de(i,_,t)}static unmountObject(t,o){const{instanceRef:a,parent:n,_events:_}=ee(o);t!==null&&(Object.keys(_).forEach(l=>Oe(t,l,_[l])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),de(a))}}const Tc=()=>{const s=m.useRef(null);return e.jsx(Uc,{children:e.jsx("div",{children:e.jsx(kt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{s.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(zc,{options:{position:{bottom:20,right:20}}})})})})},Vc=({temporarySocialPlatforms:s,setTemporarySocialPlatforms:t})=>{const o=(a,n)=>{t(_=>_.map(l=>l.id===n?{...l,text:a}:l))};return e.jsxs("div",{className:R.aboutUs_inputs,children:[s.map(a=>e.jsx("div",{className:R.aboutUs_inputs_wrap,children:a.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:R.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("textarea",{className:R.aboutUs_inputs_wrap_textarea,onChange:n=>o(n.target.value,a.id),value:a.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:R.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("input",{className:R.aboutUs_inputs_wrap_input,type:a.type==="isPhone"?"number":a.type==="isEmail"?"email":"text",onChange:n=>o(n.target.value,a.id),value:a.text})]})},a.id)),e.jsx(Tc,{})]})},qc=({id:s,checked:t,onChange:o})=>{const a=n=>{o(s,n.target.checked)};return e.jsxs("label",{className:R.custom_checkbox,children:[e.jsx("input",{className:R.custom_checkbox_input,type:"checkbox",checked:t,onChange:a}),e.jsx("span",{className:R.custom_checkbox_box,children:e.jsx(U,{name:"CheckIcon",width:18,height:18,className:R.custom_checkbox_box_icon})})]})},Kc=({temporaryContactsSchedule:s,setTemporaryContactsSchedule:t})=>{const o=i=>{const r=i.replace(/\D/g,"");return r.length<=2?r:`${r.slice(0,2)}:${r.slice(2,4)}`},a=(i,r,c,p)=>{if(!p.isActive)return;const u=o(c);t(h=>h.map(g=>g.id===i?{...g,workHours:{...g.workHours,[r]:u}}:g))},n=(i,r)=>{t(c=>c.map(p=>p.id===i?{...p,isActive:r,workHours:r?p.workHours:{start:"",end:""}}:p))},_=m.useRef({}),l=m.useRef({});return m.useEffect(()=>{s.forEach(i=>{var r;i.isActive&&_.current[i.id]&&!l.current[i.id]&&((r=_.current[i.id])==null||r.focus(),l.current[i.id]=!0)})},[s]),e.jsxs("div",{className:R.aboutUs_week,children:[e.jsxs("div",{className:R.aboutUs_week_info,children:[e.jsx("span",{className:R.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:R.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:R.aboutUs_week_content,children:s.map((i,r)=>{const c=r===s.length-1,p=c&&i.isActive?R.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:R.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${R.aboutUs_week_wrap_colored} 
                  ${i.isActive?R.aboutUs_week_wrap_colored_active:""} 
                  ${c?R.aboutUs_week_wrap_colored_last:""} 
                  ${p}
                `,children:[e.jsx("span",{className:R.aboutUs_week_wrap_day,children:i.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:R.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:u=>_.current[i.id]=u,className:R.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>a(i.id,"start",u.target.value,i),value:i.workHours.start}),e.jsx("span",{className:R.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:R.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>a(i.id,"end",u.target.value,i),value:i.workHours.end})]})]}),e.jsx(qc,{id:i.id,checked:i.isActive,onChange:n})]},i.id)})})]})},Hc=()=>{const{contactsFormInputsArr:s,setContactsFormInputsArr:t,contactsSchedule:o,setContactsSchedule:a,setImageUrlLogo:n}=Ze(),[_,l]=m.useState(s),[i,r]=m.useState(""),[c,p]=m.useState(o),u=()=>{t(_),n(i);const h=c.map(g=>g.workHours&&g.workHours.start===""&&g.workHours.end===""?{...g,isActive:!1}:g);a(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:R.aboutUs,children:[e.jsx(Ac,{temporaryImageUrl:i,setTemporaryImageUrl:r}),e.jsxs("div",{className:R.aboutUs_content,children:[e.jsx(Vc,{temporarySocialPlatforms:_,setTemporarySocialPlatforms:l}),e.jsx(Kc,{temporaryContactsSchedule:c,setTemporaryContactsSchedule:p})]})]}),e.jsx("button",{className:R.aboutUs_btn,onClick:u,children:"Сохранить"})]})};function Xc({width:s=78,color:t="white",backgroundOn:o="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:_=1.1,status:l=!1,disabled:i=!1}){const r={width:`${s}px`,height:`${s/2-s/20}px`,background:l?o:a,borderRadius:`${s/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},c={background:`${t}`,height:`${s/2-s/20}px`,width:`${s/2-s/20}px`,border:`${s/25}px solid ${l?o:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${_}) translateX(${l?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:c})})}const Gc=({temporarySocialPlatforms:s,setTemporarySocialPlatforms:t})=>{const o=(n,_)=>{t(l=>l.map(i=>i.id===n?{...i,url:_,isActive:_===""?!1:i.isActive}:i))},a=(n,_)=>{n.url!==""&&t(l=>l.map(i=>i.id===_?{...i,isActive:!i.isActive,url:n.isActive?"":n.url}:i))};return e.jsx(e.Fragment,{children:s.map(n=>e.jsxs("div",{className:R.socials_content_wrap,children:[e.jsx("img",{src:n.icon,alt:n.alt}),e.jsx("input",{type:"text",className:R.socials_content_wrap_input,value:n.url||"",onChange:_=>o(n.id,_.target.value)}),e.jsx("div",{onClick:()=>a(n,n.id),children:e.jsx(Xc,{status:n.isActive})})]},n.id))})},Zc=()=>{const{socialPlatforms:s,setSocialPlatforms:t,setActiveSocials:o}=Ze(),[a,n]=m.useState(s);async function _(){const i=we.get("multi-store"),r=await ie.get(`web-credentials/${i}`);if(r){const c=Object.entries(r.data.social).filter(([u,h])=>h.isActive).map(([u,h])=>({name:u,...h})),p=s.filter(u=>c.some(h=>h.name===u.name)).map(u=>{const h=c.find(g=>g.name===u.name);return{...u,...h,isActive:!0}});o(p)}}async function l(){t(a);const i=we.get("multi-store"),r=a.reduce((c,p)=>(c[p.name]={url:p.url,isActive:p.isActive},c),{});try{const c=await ie.patch(`web-credentials/${i}`,{social:r});_()}catch(c){console.log("error",c)}}return e.jsxs("div",{className:R.socials,children:[e.jsx("h3",{className:R.socials_title,children:"Соц-сети"}),e.jsx("div",{className:R.socials_content,children:e.jsx(Gc,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:n})}),e.jsx("button",{className:R.contacts_btn,onClick:l,children:"Сохранить"})]})},Jc=[{id:se(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:se(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function Qc(){const t=ae().pathname;return e.jsx("div",{className:R.contacts,children:e.jsxs("div",{className:R.contacts_content,children:[e.jsx("div",{className:R.contacts_nav,children:e.jsx("ul",{className:R.contacts_nav_list,children:Jc.map(o=>e.jsx(X,{to:o.href,className:`${R.contacts_nav_link} ${o.href==t?R.contacts_nav_link_active:""}`,children:o.title},o.id))})}),t==="/admin/settings/contacts"&&e.jsx(Zc,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Hc,{})]})})}const Yc="_radioLabel_1w8t1_1",el="_radioLabel_selected_1w8t1_7",tl="_radioLabel_radio_1w8t1_7",sl="_radioLabel_input_1w8t1_15",ol="_radioLabel_text_1w8t1_28",nl="_storeBtn_1w8t1_34",al="_storeBtn_active_1w8t1_48",rl="_deliveryInput_text_1w8t1_53",il="_deliveryInput_wrap_1w8t1_58",cl="_deliveryInput_wrap_input_1w8t1_66",ll="_version3_1w8t1_74",_l="_version3_title_1w8t1_79",dl="_version3_block_1w8t1_85",pl="_version3_block_top_1w8t1_90",ul="_version3_block_top_title_1w8t1_102",ml="_version3_block_top_arrow_1w8t1_106",hl="_version3_block_top_arrow_active_1w8t1_119",gl="_version3_block_dropdown_1w8t1_122",vl="_version3_block_dropdown_item_1w8t1_133",bl="_version3_block_dropdown_open_1w8t1_149",xl="_version3_block_onOff_1w8t1_173",fl="_version3_block_delivery_1w8t1_173",kl="_version3_pickedWrap_1w8t1_178",yl="_version3_pickedWrap_item_1w8t1_189",jl="_kilometerPricing_1w8t1_205",wl="_kilometerPricing_wrap_1w8t1_210",Cl="_kilometerPricing_wrap_input_1w8t1_219",Nl="_textarea_1w8t1_225",Sl="_textarea_title_1w8t1_230",Il="_textarea_text_1w8t1_236",$l="_textarea_count_1w8t1_243",q={radioLabel:Yc,radioLabel_selected:el,radioLabel_radio:tl,radioLabel_input:sl,radioLabel_text:ol,storeBtn:nl,storeBtn_active:al,deliveryInput_text:rl,deliveryInput_wrap:il,deliveryInput_wrap_input:cl,version3:ll,version3_title:_l,version3_block:dl,version3_block_top:pl,version3_block_top_title:ul,version3_block_top_arrow:ml,version3_block_top_arrow_active:hl,version3_block_dropdown:gl,version3_block_dropdown_item:vl,version3_block_dropdown_open:bl,version3_block_onOff:xl,version3_block_delivery:fl,version3_pickedWrap:kl,version3_pickedWrap_item:yl,kilometerPricing:jl,kilometerPricing_wrap:wl,kilometerPricing_wrap_input:Cl,textarea:Nl,textarea_title:Sl,textarea_text:Il,textarea_count:$l},je=({id:s,value:t,checked:o,onChange:a,label:n})=>e.jsxs("label",{className:`${q.radioLabel} ${o?q.radioLabel_selected:""}`,children:[e.jsx("input",{type:"radio",id:s,value:t,checked:o,onChange:a,className:q.radioLabel_input}),e.jsx("span",{className:q.radioLabel_radio}),e.jsx("span",{className:q.radioLabel_text,children:n})]}),Je=(s,t)=>{const o=Pe();return ae(),{handleChange:m.useCallback(n=>{const _=n.target.value;s(_);const l=t[_];l&&o(l)},[o,t,s])}},Pl="_delivery_vkjtc_1",Dl="_delivery_title_vkjtc_5",Ol="_delivery_main_vkjtc_10",Fl="_delivery_btn_vkjtc_16",Al="_deliveryOrg_vkjtc_28",Bl="_deliveryOrg_radios_vkjtc_31",Ll="_deliveryOrg_children_vkjtc_37",Ml="_deliveryOrg_children_wrap_vkjtc_40",Wl="_storeDelivery_vkjtc_46",El="_storeDelivery_stores_vkjtc_49",Ul="_storeDelivery_radios_vkjtc_55",Z={delivery:Pl,delivery_title:Dl,delivery_main:Ol,delivery_btn:Fl,deliveryOrg:Al,deliveryOrg_radios:Bl,deliveryOrg_children:Ll,deliveryOrg_children_wrap:Ml,storeDelivery:Wl,storeDelivery_stores:El,storeDelivery_radios:Ul},fe=({text:s,placeholder:t,value:o,setValue:a})=>e.jsxs("div",{className:q.deliveryInput,children:[e.jsx("p",{className:q.deliveryInput_text,children:s}),e.jsxs("div",{className:q.deliveryInput_wrap,children:[e.jsx("input",{className:q.deliveryInput_wrap_input,type:"number",placeholder:t,value:o,onChange:n=>a(n.target.value)}),e.jsx("span",{className:q.deliveryInput_wrap_input_text,children:"UZS"})]})]}),he=Dt()(Ot(Ft(s=>({deliveryStoresArr:[{id:se(),name:"Магазин1",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:se(),name:"Магазин2",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:se(),name:"Магазин3",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}],setDeliveryStoresArr:t=>s({deliveryStoresArr:t}),isActiveStoreId:"",setIsActiveStoreId:t=>s({isActiveStoreId:t}),citiesDelivery:[{id:se(),city:"Ташкент"},{id:se(),city:"Бухара"},{id:se(),city:"Самарканд"}],setCitiesDelivery:t=>s({citiesDelivery:t}),selectedOption:"",setSelectedOption:t=>s({selectedOption:t}),selectedOrganizationOption:"",setSelectedOrganizationOption:t=>s({selectedOrganizationOption:t}),selectedStoreOption:"",setSelectedStoreOption:t=>s({selectedStoreOption:t}),saveLocation:"",setSaveLocation:t=>s({saveLocation:t}),savePathStore:"",setSavePathStore:t=>s({savePathStore:t}),saveLocationStore:[],setSaveLocationStore:t=>s({saveLocationStore:t}),pickedCitiesFreeDelivery:[],setPickedCitiesFreeDelivery:t=>s({pickedCitiesFreeDelivery:t}),inputSumFree:"",setInputSumFree:t=>s({inputSumFree:t}),pickedCitiesFixedDelivery:[],setPickedCitiesFixedDelivery:t=>s({pickedCitiesFixedDelivery:t}),inputSumFixed:"",setInputSumFixed:t=>s({inputSumFixed:t}),inputFixedPrice:"",setInputFixedPrice:t=>s({inputFixedPrice:t}),pickedCitiesFlexibleDelivery:[],setPickedCitiesFlexibleDelivery:t=>s({pickedCitiesFlexibleDelivery:t}),inputSumFlexible:"",setInputSumFlexible:t=>s({inputSumFlexible:t}),inputFirstKm:"",setInputFirstKm:t=>s({inputFirstKm:t}),inputLastKm:"",setInputLastKm:t=>s({inputLastKm:t}),inputExtraKm:"",setInputExtraKm:t=>s({inputExtraKm:t}),pickedCitiesOwnDelivery:[],setPickedCitiesOwnDelivery:t=>s({pickedCitiesOwnDelivery:t}),inputSumOwn:"",setInputSumOwn:t=>s({inputSumOwn:t}),textareaVal:"",setTextareaVal:t=>s({textareaVal:t}),openCountriesDropdown:!1,setOpenCountriesDropdown:t=>s({openCountriesDropdown:t})}),{name:"delivery-store",partialize:s=>({...s})})));function Ne({citiesArrDelivery:s,setCitiesArrDelivery:t,pickedCities:o,setPickedCities:a}){const{openCountriesDropdown:n,setOpenCountriesDropdown:_}=he(),l=r=>{o.some(c=>c.id===r.id)||a([...o,r]),_(!1)},i=(r,c)=>{c.stopPropagation(),a(o.filter(p=>p.id!==r.id))};return e.jsxs("div",{className:q.version3,children:[e.jsx("span",{className:q.version3_title,children:"Города"}),e.jsxs("div",{className:q.version3_block,children:[e.jsxs("div",{className:`${o.length>0?q.version3_pickedWrap:q.version3_block_top}`,onClick:()=>_(!n),children:[o.length>0?o.map(r=>e.jsxs("div",{className:q.version3_pickedWrap_item,children:[e.jsx("h2",{className:q.version3_block_top_title,children:r.city}),e.jsx("button",{onClick:c=>i(r,c),children:e.jsx(U,{name:"XMarkIcon",width:15})})]},r.id)):e.jsx("h2",{className:q.version3_block_top_title,children:"Выберите город"}),e.jsx("button",{className:q.version3_block_top_btn,onClick:()=>_(!n),children:e.jsx("div",{className:`${q.version3_block_top_arrow} ${n&&s.length>0?q.version3_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${q.version3_block_dropdown} ${n&&s.length>0?q.version3_block_dropdown_open:""}`,children:s==null?void 0:s.map(r=>e.jsx("span",{className:q.version3_block_dropdown_item,onClick:()=>l(r),children:r.city},r.id))})]})]})}const Se=()=>{const{setPickedCitiesFreeDelivery:s,setInputSumFree:t,setPickedCitiesFixedDelivery:o,setInputSumFixed:a,setInputFixedPrice:n,setPickedCitiesFlexibleDelivery:_,setInputSumFlexible:l,setInputFirstKm:i,setInputLastKm:r,setInputExtraKm:c,setPickedCitiesOwnDelivery:p,setInputSumOwn:u,setTextareaVal:h}=he();return{resetOrg:v=>{v!=="free"&&(s([]),t("")),v!=="fixed"&&(o([]),a(""),n("")),v!=="flexible"&&(_([]),l(""),i(""),r(""),c("")),v!=="own"&&(p([]),u(""),h("")),v==="all"&&(s([]),t(""),o([]),a(""),n(""),_([]),l(""),i(""),r(""),c(""),p([]),u(""),h(""))}}},Rl=()=>{const{setInputSumFree:s,citiesDelivery:t,setCitiesDelivery:o,pickedCitiesFreeDelivery:a,inputSumFree:n,setPickedCitiesFreeDelivery:_,deliveryStoresArr:l,setDeliveryStoresArr:i,setOpenCountriesDropdown:r,setSaveLocation:c,setSaveLocationStore:p}=he(),u=ae(),[h,g]=m.useState(a),[v,I]=m.useState(n);m.useEffect(()=>{r(!1)},[]);const{resetOrg:D}=Se(),O=()=>{D("free");const C=h,N=v;_(C),s(N);const f=[{cities:C,minPrice:N}],y=l.map(x=>({...x,location:"storeFreeDelivery",deliveryFree:f,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}));console.log("deliveryStoresArr",l),i(y),c(u.pathname),p([]),r(!1)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:v,setValue:I}),e.jsx(Ne,{citiesArrDelivery:t,setCitiesArrDelivery:o,pickedCities:h,setPickedCities:g}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>O(),children:"Сохранить"})]})},zl=()=>{const{resetOrg:s}=Se(),{inputSumFixed:t,setInputSumFixed:o,inputFixedPrice:a,setInputFixedPrice:n,citiesDelivery:_,setCitiesDelivery:l,pickedCitiesFixedDelivery:i,setPickedCitiesFixedDelivery:r,deliveryStoresArr:c,setDeliveryStoresArr:p,setOpenCountriesDropdown:u,setSaveLocation:h,setSaveLocationStore:g}=he(),[v,I]=m.useState(i),[D,O]=m.useState(t),[C,N]=m.useState(a);m.useEffect(()=>{u(!1)},[]);const f=()=>{s("fixed");const y=v,x=D,b=C;r(y),o(x),n(b);const S=[{cities:y,minPrice:x,fixedPrice:b}],$=c.map(P=>({...P,location:"storeFixedPriceDelivery",deliveryFree:[],deliveryFixed:S,deliveryFlexible:[],deliveryOwn:[]}));p($),h(location.pathname),g([]),console.log("deliveryStoresArr",c),u(!1)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:D,setValue:O}),e.jsx(fe,{text:"Цена за доставку",placeholder:"0",value:C,setValue:N}),e.jsx(Ne,{citiesArrDelivery:_,setCitiesArrDelivery:l,pickedCities:v,setPickedCities:I}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>f(),children:"Сохранить"})]})},yt=({valueFirst:s,setValueFirst:t,valueLast:o,setValueLast:a})=>e.jsxs("div",{className:q.kilometerPricing,children:[e.jsx("span",{className:q.deliveryInput_text,children:"Первые"}),e.jsxs("div",{className:q.kilometerPricing_wrap,children:[e.jsx("input",{className:q.kilometerPricing_wrap_input,type:"number",value:s,placeholder:"0",onChange:n=>t(n.target.value)}),e.jsx("span",{children:"KM"})]}),e.jsx("span",{className:q.deliveryInput_text,children:"по"}),e.jsxs("div",{className:q.kilometerPricing_wrap,children:[e.jsx("input",{className:q.kilometerPricing_wrap_input,type:"number",value:o,placeholder:"0",onChange:n=>a(n.target.value)}),e.jsx("span",{children:"KM"})]})]}),Tl=()=>{const{deliveryStoresArr:s,citiesDelivery:t,setCitiesDelivery:o,setDeliveryStoresArr:a,pickedCitiesFlexibleDelivery:n,setPickedCitiesFlexibleDelivery:_,inputSumFlexible:l,setInputSumFlexible:i,inputFirstKm:r,setInputFirstKm:c,inputLastKm:p,setInputLastKm:u,inputExtraKm:h,setInputExtraKm:g,setOpenCountriesDropdown:v,setSaveLocation:I,setSaveLocationStore:D}=he(),[O,C]=m.useState(n),[N,f]=m.useState(l),[y,x]=m.useState(r),[b,S]=m.useState(p),[$,P]=m.useState(h),{resetOrg:L}=Se(),E=()=>{L("flexible");const T=O,j=N,W=y,V=b,A=$;_(T),i(j),c(W),u(V),g(A);const ke=[{cities:T,minPrice:j,pricingPerKm:{firstKm:W,lastKm:V},extraPricing:A}],ve=s.map(be=>({...be,location:"storeFlexibleDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:ke,deliveryOwn:[]}));a(ve),I(location.pathname),D([]),v(!1)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:N,setValue:f}),e.jsx(yt,{valueFirst:y,setValueFirst:x,valueLast:b,setValueLast:S}),e.jsx(fe,{text:"За каждый следующий км",placeholder:"0",value:$,setValue:P}),e.jsx(Ne,{citiesArrDelivery:t,setCitiesArrDelivery:o,pickedCities:O,setPickedCities:C}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>E(),children:"Сохранить"})]})},jt=({value:s,setValue:t})=>{const[a,n]=m.useState(400),_=l=>{const i=l.target.value;t(i),i.length<=400&&n(400-i.length)};return e.jsxs("div",{className:q.textarea,children:[e.jsx("span",{className:q.textarea_title,children:"Текст для пояснения"}),e.jsx("textarea",{className:q.textarea_text,maxLength:400,onChange:_,value:s}),e.jsxs("span",{className:q.textarea_count,children:[a,"/",400]})]})},Vl=()=>{const{deliveryStoresArr:s,citiesDelivery:t,setCitiesDelivery:o,setDeliveryStoresArr:a,pickedCitiesOwnDelivery:n,setPickedCitiesOwnDelivery:_,inputSumOwn:l,setInputSumOwn:i,textareaVal:r,setTextareaVal:c,setSaveLocation:p,setSaveLocationStore:u}=he(),[h,g]=m.useState(n),[v,I]=m.useState(l),[D,O]=m.useState(r),{resetOrg:C}=Se(),N=()=>{C("own");const f=h,y=v,x=D;_(f),i(y),c(x);const b=[{cities:f,minPrice:y,description:x}],S=s.map($=>({...$,location:"storeOwnVersionDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:b}));a(S),p(location.pathname),u([])};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:v,setValue:I}),e.jsx(jt,{value:D,setValue:O}),e.jsx(Ne,{citiesArrDelivery:t,setCitiesArrDelivery:o,pickedCities:h,setPickedCities:g}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>N(),children:"Сохранить"})]})},ql=()=>{const{selectedOrganizationOption:s,saveLocation:t,setSelectedOrganizationOption:o}=he(),a=ae(),n=Pe(),_={freeDelivery:"/admin/settings/delivery/forOrganization/freeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forOrganization/fixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forOrganization/flexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forOrganization/ownVersionDelivery"};m.useEffect(()=>{t?n(t):o("")},[t,n]),m.useEffect(()=>{const i=a.pathname,r=Object.keys(_).find(c=>_[c]===i);r&&o(r)},[a.pathname,o]);const{handleChange:l}=Je(o,_);return e.jsxs("div",{className:Z.deliveryOrg,children:[e.jsx("h4",{className:Z.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:Z.deliveryOrg_radios,children:[e.jsx(je,{id:"freeDelivery",value:"freeDelivery",checked:s==="freeDelivery",onChange:l,label:"Бесплатная доставка"}),e.jsx(je,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:s==="fixedPriceDelivery",onChange:l,label:"Фиксированная цена"}),e.jsx(je,{id:"flexibleDelivery",value:"flexibleDelivery",checked:s==="flexibleDelivery",onChange:l,label:"Гибкая доставка"}),e.jsx(je,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:s==="ownVersionDelivery",onChange:l,label:"Свой вариант"})]}),e.jsxs("div",{className:Z.deliveryOrg_children,children:[a.pathname.startsWith("/admin/settings/delivery/forOrganization/freeDelivery")&&e.jsx(Rl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/fixedPriceDelivery")&&e.jsx(zl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/flexibleDelivery")&&e.jsx(Tl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/ownVersionDelivery")&&e.jsx(Vl,{})]})]})},Kl=({text:s,isActive:t,onClick:o,href:a})=>e.jsx(X,{className:`${q.storeBtn} ${t?q.storeBtn_active:""}`,onClick:o,to:`settings/delivery/forStore/${a}/settingsSave`,children:s}),Hl=()=>{const{isActiveStoreId:s,deliveryStoresArr:t,setDeliveryStoresArr:o,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=he(),c=ae(),[p,u]=m.useState([]),[h,g]=m.useState("");m.useEffect(()=>{var O,C;const D=t.find(N=>N.id===s);D&&D.deliveryFree?(u(((O=D.deliveryFree[0])==null?void 0:O.cities)||[]),g(((C=D.deliveryFree[0])==null?void 0:C.minPrice)||"")):(u([]),g(""))},[s]);const{resetOrg:v}=Se(),I=()=>{v("all");const C=[{cities:p,minPrice:h}],N=t.map(x=>x.id===s?{...x,deliveryFree:C,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}:x);o(N);const f=[..._],y=f.findIndex(x=>x.id===s);y>=0?f[y].location=c.pathname:f.push({id:s,location:c.pathname}),l(f),console.log("saveLocationStore",_),i(""),r(c.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:g}),e.jsx(Ne,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>I(),children:"Сохранить"})]})},Xl=()=>{const{isActiveStoreId:s,deliveryStoresArr:t,setDeliveryStoresArr:o,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=he(),c=ae(),[p,u]=m.useState([]),[h,g]=m.useState(""),[v,I]=m.useState("");m.useEffect(()=>{var N,f,y;const C=t.find(x=>x.id===s);C&&C.deliveryFixed?(u(((N=C.deliveryFixed[0])==null?void 0:N.cities)||[]),g(((f=C.deliveryFixed[0])==null?void 0:f.minPrice)||""),I(((y=C.deliveryFixed[0])==null?void 0:y.fixedPrice)||"")):(u([]),g(""),I(""))},[s]);const{resetOrg:D}=Se(),O=()=>{D("all");const y=[{cities:p,minPrice:h,fixedPrice:v}],x=t.map($=>$.id===s?{...$,deliveryFixed:y,deliveryFree:[],deliveryFlexible:[],deliveryOwn:[]}:$);o(x);const b=[..._],S=b.findIndex($=>$.id===s);S>=0?b[S].location=c.pathname:b.push({id:s,location:c.pathname}),l(b),i(""),r(c.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:g}),e.jsx(fe,{text:"Цена за доставку",placeholder:"0",value:v,setValue:I}),e.jsx(Ne,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>O(),children:"Сохранить"})]})},Gl=()=>{const{isActiveStoreId:s,deliveryStoresArr:t,setDeliveryStoresArr:o,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=he(),c=ae(),[p,u]=m.useState([]),[h,g]=m.useState(""),[v,I]=m.useState(""),[D,O]=m.useState(""),[C,N]=m.useState("");m.useEffect(()=>{var b,S,$,P,L,E,T;const x=t.find(j=>j.id===s);x&&x.deliveryFlexible?(u(((b=x.deliveryFlexible[0])==null?void 0:b.cities)||[]),g(((S=x.deliveryFlexible[0])==null?void 0:S.minPrice)||""),I(((P=($=x.deliveryFlexible[0])==null?void 0:$.pricingPerKm)==null?void 0:P.firstKm)||""),O(((E=(L=x.deliveryFlexible[0])==null?void 0:L.pricingPerKm)==null?void 0:E.lastKm)||""),N(((T=x.deliveryFlexible[0])==null?void 0:T.extraPricing)||"")):(u([]),g(""),I(""),O(""),N(""))},[s]);const{resetOrg:f}=Se(),y=()=>{f("all");const L=[{cities:p,minPrice:h,pricingPerKm:{firstKm:v,lastKm:D},extraPricing:C}],E=t.map(W=>W.id===s?{...W,deliveryFlexible:L,deliveryFree:[],deliveryFixed:[],deliveryOwn:[]}:W);o(E);const T=[..._],j=T.findIndex(W=>W.id===s);j>=0?T[j].location=c.pathname:T.push({id:s,location:c.pathname}),l(T),i(""),r(c.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:g}),e.jsx(yt,{valueFirst:v,setValueFirst:I,valueLast:D,setValueLast:O}),e.jsx(fe,{text:"За каждый следующий км",placeholder:"0",value:C,setValue:N}),e.jsx(Ne,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>y(),children:"Сохранить"})]})},Zl=()=>{const{isActiveStoreId:s,deliveryStoresArr:t,setDeliveryStoresArr:o,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=he(),c=ae(),[p,u]=m.useState([]),[h,g]=m.useState(""),[v,I]=m.useState("");m.useEffect(()=>{var N,f,y;const C=t.find(x=>x.id===s);C&&C.deliveryOwn?(u(((N=C.deliveryOwn[0])==null?void 0:N.cities)||[]),g(((f=C.deliveryOwn[0])==null?void 0:f.minPrice)||""),I(((y=C.deliveryOwn[0])==null?void 0:y.description)||"")):(u([]),g(""),I(""))},[s]);const{resetOrg:D}=Se(),O=()=>{D("all");const y=[{cities:p,minPrice:h,description:v}],x=t.map($=>$.id===s?{...$,deliveryOwn:y,deliveryFree:[],deliveryFixed:[],deliveryFlexible:[]}:$);o(x);const b=[..._],S=b.findIndex($=>$.id===s);S>=0?b[S].location=c.pathname:b.push({id:s,location:c.pathname}),l(b),i(""),r(c.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(fe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:g}),e.jsx(jt,{value:v,setValue:I}),e.jsx(Ne,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>O(),children:"Сохранить"})]})},Jl=()=>{const{deliveryStoresArr:s,selectedStoreOption:t,isActiveStoreId:o,saveLocationStore:a,setSelectedStoreOption:n}=he(),_=ae(),l=Pe(),i={storeFreeDelivery:`/admin/settings/delivery/forStore/${o}/settingsSave/storeFreeDelivery`,storeFixedPriceDelivery:`/admin/settings/delivery/forStore/${o}/settingsSave/storeFixedPriceDelivery`,storeFlexibleDelivery:`/admin/settings/delivery/forStore/${o}/settingsSave/storeFlexibleDelivery`,storeOwnVersionDelivery:`/admin/settings/delivery/forStore/${o}/settingsSave/storeOwnVersionDelivery`},{handleChange:r}=Je(n,i);return m.useEffect(()=>{const c=a.find(h=>h.id===o),p=Object.keys(i).find(h=>i[h]===(c==null?void 0:c.location)),u=s[0].location;console.log("option",p),a.length>0&&c?(l(c.location),n(p)):(l(`/admin/settings/delivery/forStore/${o}/settingsSave/${u||""}`),n(u))},[o,a]),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h4",{className:Z.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:Z.storeDelivery_radios,children:[e.jsx(je,{id:"storeFreeDelivery",value:"storeFreeDelivery",checked:t==="storeFreeDelivery",onChange:r,label:"Бесплатная доставка"}),e.jsx(je,{id:"storeFixedPriceDelivery",value:"storeFixedPriceDelivery",checked:t==="storeFixedPriceDelivery",onChange:r,label:"Фиксированная цена"}),e.jsx(je,{id:"storeFlexibleDelivery",value:"storeFlexibleDelivery",checked:t==="storeFlexibleDelivery",onChange:r,label:"Гибкая доставка"}),e.jsx(je,{id:"storeOwnVersionDelivery",value:"storeOwnVersionDelivery",checked:t==="storeOwnVersionDelivery",onChange:r,label:"Свой вариант"})]})]}),e.jsxs("div",{className:Z.deliveryOrg_children,children:[_.pathname.startsWith(`/admin/settings/delivery/forStore/${o}/settingsSave/storeFreeDelivery`)&&e.jsx(Hl,{}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${o}/settingsSave/storeFixedPriceDelivery`)&&e.jsx(Xl,{}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${o}/settingsSave/storeFlexibleDelivery`)&&e.jsx(Gl,{}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${o}/settingsSave/storeOwnVersionDelivery`)&&e.jsx(Zl,{})]})]})},Ql=()=>{const{deliveryStoresArr:s,isActiveStoreId:t,setIsActiveStoreId:o,savePathStore:a}=he(),n=i=>{o(i)};m.useEffect(()=>{a&&l(a)},[]);const _=ae(),l=Pe();return e.jsxs("div",{className:Z.storeDelivery,children:[e.jsx("h4",{className:Z.delivery_title,children:"Выберите магазин "}),e.jsx("div",{className:Z.storeDelivery_stores,children:s.map(i=>e.jsx(Kl,{text:i.name,isActive:i.id===t,onClick:()=>n(i.id),href:i.id},i.id))}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${t}/settingsSave`)&&e.jsx(Jl,{})]})},Yl=()=>{const{selectedOption:s,setSelectedOption:t,saveLocationStore:o,savePathStore:a,saveLocation:n}=he(),_=ae(),l=Pe(),i={forOrganization:"/admin/settings/delivery/forOrganization",forStore:"/admin/settings/delivery/forStore"};m.useEffect(()=>{n!==""?(l(n),t("forOrganization")):o.some(c=>c.location)&&(l(a),t(o[0].location),t("forStore"))},[]);const{handleChange:r}=Je(t,i);return e.jsxs("div",{className:Z.delivery,children:[e.jsx("h3",{className:Z.delivery_title,children:"Выберите версию настройки доставки"}),e.jsxs("div",{className:Z.delivery_main,children:[e.jsx(je,{id:"forOrganization",value:"forOrganization",checked:s==="forOrganization",onChange:r,label:"Для организации"}),e.jsx(je,{id:"forStore",value:"forStore",checked:s==="forStore",onChange:r,label:"Для каждого магазина"})]}),_.pathname.startsWith("/admin/settings/delivery/forOrganization")&&e.jsx(ql,{}),_.pathname.startsWith("/admin/settings/delivery/forStore")&&e.jsx(Ql,{})]})};function e_({name:s="HandRaisedIcon",width:t=30,height:o=30,color:a="black",background:n="transparent",transition:_=500,className:l,onClick:i}){const r={width:`${t}px`,height:`${o||t}px`,color:a,transition:`${_}ms`,background:n};return e.jsxs(e.Fragment,{children:[s=="HandRaisedIcon"&&e.jsx(Lt,{className:l,style:r,onClick:i}),s=="UserIcon"&&e.jsx(Mt,{className:l,style:r,onClick:i}),s=="HeartIcon"&&e.jsx(Wt,{className:l,style:r,onClick:i}),s=="AdjustmentsHorizontalIcon"&&e.jsx(Et,{className:l,style:r,onClick:i}),s=="BanknotesIcon"&&e.jsx(Ut,{className:l,style:r,onClick:i}),s=="ShoppingBagIcon"&&e.jsx(Rt,{className:l,style:r,onClick:i}),s=="CogIcon"&&e.jsx(zt,{className:l,style:r,onClick:i}),s=="ShoppingCartIcon"&&e.jsx(Tt,{className:l,style:r,onClick:i}),s=="UsersIcon"&&e.jsx(Vt,{className:l,style:r,onClick:i}),s=="ChevronDownIcon"&&e.jsx(qt,{className:l,style:r,onClick:i}),s=="Cog8ToothIcon"&&e.jsx(Kt,{className:l,style:r,onClick:i}),s=="EyeIcon"&&e.jsx(Ht,{className:l,style:r,onClick:i}),s=="EyeSlashIcon"&&e.jsx(Xt,{className:l,style:r,onClick:i}),s=="IdentificationIcon"&&e.jsx(Gt,{className:l,style:r,onClick:i}),s=="WrenchScrewdriverIcon"&&e.jsx(Zt,{className:l,style:r,onClick:i}),s=="XMarkIcon"&&e.jsx(Jt,{className:l,style:r,onClick:i}),s=="PhoneXMarkIcon"&&e.jsx(Qt,{className:l,style:r,onClick:i}),s=="Bars3Icon"&&e.jsx(Yt,{className:l,style:r,onClick:i}),s=="AdjustmentsVerticalIcon"&&e.jsx(es,{className:l,style:r,onClick:i}),s=="TrashIcon"&&e.jsx(ts,{className:l,style:r,onClick:i}),s=="BackspaceIcon"&&e.jsx(ss,{className:l,style:r,onClick:i}),s=="QueueListIcon"&&e.jsx(os,{className:l,style:r,onClick:i}),s=="ChevronRightIcon"&&e.jsx(ns,{className:l,style:r,onClick:i}),s=="MagnifyingGlassIcon"&&e.jsx(as,{className:l,style:r,onClick:i}),s=="ArrowLeftStartOnRectangleIcon"&&e.jsx(rs,{className:l,style:r,onClick:i}),s=="BuildingStorefrontIcon"&&e.jsx(is,{className:l,style:r,onClick:i}),s=="BuildingLibraryIcon"&&e.jsx(cs,{className:l,style:r,onClick:i}),s=="ArrowLeftEndOnRectangleIcon"&&e.jsx(ls,{className:l,style:r,onClick:i}),s=="UserPlusIcon"&&e.jsx(_s,{className:l,style:r,onClick:i}),s=="PlusIcon"&&e.jsx(ds,{className:l,style:r,onClick:i}),s=="FolderOpenIcon"&&e.jsx(ps,{className:l,style:r,onClick:i}),s=="FunnelIcon"&&e.jsx(us,{className:l,style:r,onClick:i}),s=="PhotoIcon"&&e.jsx(ms,{className:l,style:r,onClick:i})]})}function t_(){const{addBlockStatus:s,setAddBlockStatus:t,setAddBlockProducts:o}=ce();m.useEffect(()=>{o([])},[]);const a=n=>{n.stopPropagation(),t(!s)};return e.jsxs("button",{className:`${d.homePage_addBlock} ${s?d.homePage_addBlock_active:""}`,onClick:n=>a(n),children:[e.jsx("span",{className:d.homePage_addBlock_title,children:"Добавить блок"}),e.jsx(e_,{name:"PlusIcon"})]})}function s_({item:s}){const{addBlockStatus:t,homePageBlock:o,setHomePageBlock:a,addBlockProducts:n}=ce(),_=()=>{const c=o.filter(p=>p.id!=s.id);a([...c])};console.log("item",s),console.log("addBlockProducts",n);const[l,i]=m.useState("");m.useEffect(()=>{i(s.title)},[]);const r=c=>{console.log(111);const p=o.map(u=>u.id==c.id?{id:c.id,title:l,superCategory:c.superCategory,category:c.category,subCategory:c.subCategory,products:c.products}:{...u});a([...p]),console.log("newHomePageBlock",p)};return e.jsxs("div",{className:d.homePage_wrapper,children:[e.jsxs("div",{className:d.homePage_wrapper_title,children:[e.jsx("input",{type:"text",value:l,onChange:c=>i(c.target.value)}),e.jsx("button",{onClick:()=>r(s),children:e.jsx(U,{name:"PencilIcon",width:20,height:20})})]}),e.jsxs("div",{className:`${d.homePage_addBlockItem} ${t?d.homePage_addBlockItem_active:""}`,children:[e.jsx("button",{className:d.homePage_addBlockItem_close,onClick:_,children:e.jsx(U,{name:"XMarkIcon"})}),e.jsxs("p",{className:d.homePage_addBlockItem_categories,children:[e.jsxs("span",{children:[s.superCategory.name.ru," / "]}),e.jsxs("span",{children:[s.category.name.ru," / "]}),e.jsx("span",{children:s.subCategory.name.ru})]}),e.jsx("h2",{className:d.homePage_addBlockItem_super_title,children:"Продукты"}),e.jsx("div",{className:d.homePage_addBlockItem_content,children:s.products.map(c=>{var p,u;return e.jsx("div",{className:d.homePage_addBlockItem_super_item,children:e.jsx("span",{children:(u=(p=c.nomenclature)==null?void 0:p.name)==null?void 0:u.ru})},c.id)})})]})]})}const o_="_modalCategory_1ohox_1",n_="_modalCategory_block_1ohox_10",a_="_modalCategory_block_createTitle_1ohox_16",r_="_modalCategory_nav_1ohox_26",i_="_modalCategory_nav_title_1ohox_33",c_="_modalCategory_content_1ohox_39",l_="_modalCategory_content_message_1ohox_46",__="_modalCategory_content_link_1ohox_54",d_="_modalCategory_content_link_active_1ohox_82",p_="_modalCategory_content_item_1ohox_92",u_="_modalCategory_content_block_1ohox_114",m_="_modalCategory_content_block_title_1ohox_118",h_="_settings_1ohox_125",g_="_settings_title_1ohox_128",v_="_settings_content_1ohox_133",b_="_settings_content_top_1ohox_136",x_="_settings_content_buttons_1ohox_139",f_="_settings_content_btn_1ohox_149",k_="_settings_content_btn_cancel_1ohox_161",y_="_settings_content_btn_save_1ohox_164",j_="_settings_tools_1ohox_167",w_="_settings_tools_link_1ohox_172",C_="_settings_tools_link_active_1ohox_187",H={modalCategory:o_,modalCategory_block:n_,modalCategory_block_createTitle:a_,modalCategory_nav:r_,modalCategory_nav_title:i_,modalCategory_content:c_,modalCategory_content_message:l_,modalCategory_content_link:__,modalCategory_content_link_active:d_,modalCategory_content_item:p_,modalCategory_content_block:u_,modalCategory_content_block_title:m_,settings:h_,settings_title:g_,settings_content:v_,settings_content_top:b_,settings_content_buttons:x_,settings_content_btn:f_,settings_content_btn_cancel:k_,settings_content_btn_save:y_,settings_tools:j_,settings_tools_link:w_,settings_tools_link_active:C_};function N_({superCategory:s,category:t,superId:o,setLocalPicked:a,setSuperId:n,setMessageStatus:_,setSubCategories:l,fetchCategories:i}){const{setCurrentCategory:r}=ge(),[c,p]=m.useState(10),u=(g,v)=>{g.preventDefault(),i("category",1,10,v.id),l([]);const I=t.filter(D=>D.parentId==v.id);r(I),a(v),n(v.id),_(!1)},h=g=>{g.preventDefault();const v=c+10;p(v),i("super",1,v),console.log("addPage",v)};return e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[s.map(g=>e.jsxs(X,{to:"#",className:`${H.modalCategory_content_link} ${g.id==o?H.modalCategory_content_link_active:""} `,onClick:v=>u(v,g),children:[g.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},g.id)),e.jsx(X,{to:"#",className:H.modalCategory_content_link,onClick:g=>h(g),children:"Ещё..."})]})]})}function S_({superId:s,categoryId:t,category:o,setSubCategory:a,fetchCategories:n}){const[_,l]=m.useState(10),i=c=>{c.preventDefault();const p=_+10;l(p),n("category",1,p,s),console.log("addPage",p,s)},r=(c,p)=>{a(c,p)};return o.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[o==null?void 0:o.map(c=>e.jsxs(X,{to:"#",className:`${H.modalCategory_content_link} ${c.id==t?H.modalCategory_content_link_active:""} `,onClick:p=>r(p,c),children:[c.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},c.id)),e.jsx(X,{to:"#",className:H.modalCategory_content_link,onClick:c=>i(c),children:"Ещё..."})]})]})}function I_({subId:s,categoryId:t,subCategories:o,setSubProductsList:a,fetchCategories:n}){const{setAddBlockProducts:_}=ce(),[l]=m.useState(1),[i,r]=m.useState(10),c=h=>{h.preventDefault();const g=i+10;r(g),n("subCategory",1,g,t),console.log("addPage",g)},p=async(h,g)=>{a(h,g);const v=await u(g.id);_(v)},u=async h=>{const g=we.get("multi-store");try{const v=await ie.get(`web-nomenclatures?multiStoreId=${g}&categoryId=${h}&page=${l}&perPage=${i}`);return console.log(555,"res.data.data",v.data.data),v.data.data}catch(v){console.log("Ошибка при получении продуктов по id",v)}};return o.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[o==null?void 0:o.map(h=>e.jsxs(X,{to:"#",className:`${H.modalCategory_content_link} ${h.id==s?H.modalCategory_content_link_active:""} `,onClick:g=>p(g,h),children:[h.name.ru,e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),e.jsx(X,{to:"#",className:H.modalCategory_content_link,onClick:h=>c(h),children:"Ещё..."})]})]})}function $_({setSettings:s,setCancel:t}){const{setAddBlockStatus:o}=ce(),a=()=>{t(),o(!1)};return e.jsxs("div",{className:H.settings_content_buttons,children:[e.jsx("button",{className:`${H.settings_content_btn} ${H.settings_content_btn_cancel}`,onClick:a,children:"Отмена"}),e.jsx(X,{to:"#",className:`${H.settings_content_btn} ${H.settings_content_btn_save}`,onClick:n=>s(n),children:"Сохранить"})]})}function P_(){const{addBlockProducts:s}=ce(),[t,o]=m.useState(!1),[a,n]=m.useState(!1),_=m.useRef([]);m.useEffect(()=>{_.current.forEach(r=>{r&&(r.checked=a)})},[a]),console.log(222,"addBlockProducts",s);const l=r=>{o(r),console.log("linkActive",t)},i=r=>{n(r),o(r),console.log("linkActive",t),console.log("linkActive",a)};return s.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[e.jsxs("label",{className:`
              ${H.modalCategory_content_link}
              ${t?H.modalCategory_content_link_active:""}
              `,children:[e.jsx("input",{type:"checkbox",onChange:r=>i(r.target.checked)}),e.jsx("span",{children:a?"Отключить все":"Выбрать все"}),e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]}),s==null?void 0:s.map((r,c)=>{var p,u;return e.jsxs("label",{className:`
              ${H.modalCategory_content_link}
              ${t?H.modalCategory_content_link_active:""}
              `,children:[e.jsx("input",{type:"checkbox",onChange:h=>l(h.target.checked),ref:h=>{_.current[c]=h}}),e.jsx("span",{children:(u=(p=r==null?void 0:r.nomenclature)==null?void 0:p.name)==null?void 0:u.ru}),e.jsx(U,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},r.id)})]})]})}function D_(){const{TemporaryData:s,currentProduct:t,setCurrentCategory:o,setPickedCategory:a,setCurrentSubCategory:n,setTemporaryData:_,setOpenModalCategory:l,setCurrentProduct:i}=ge(),{homePageBlock:r,setHomePageBlock:c,setAddBlockStatus:p,homePageBlockName:u,setHomePageBlockName:h,setAddBlockStatusItem:g,addBlockProducts:v}=ce(),[I,D]=m.useState(0),[O,C]=m.useState(0),[N,f]=m.useState(0),[y,x]=m.useState({}),[b,S]=m.useState(!1),[$,P]=m.useState("Выберите категорию"),[L,E]=m.useState([]),[T,j]=m.useState([]),[W,V]=m.useState([]);m.useEffect(()=>{ue("super",1,10)},[]);const A=(Y,k)=>{Y.preventDefault(),ue("subCategory",1,10,k.id);const w=W.filter(K=>K.parentId==k.id);n(w),x(k),C(k.id),S(!1)},ke=(Y,k)=>{Y.preventDefault(),x(k),f(k.id),S(!1)},ve=async Y=>{if(Y.preventDefault(),Object.keys(y).length===0){S(!0),P("Выберите Суперкотегорию");return}if(T.length>0&&O===0){S(!0),P("Выберите Категорию");return}if(W.length>0&&N===0){S(!0),P("Выберите Подкотегорию");return}if(u==""){S(!0),P("Введите название блока");return}if(console.log("TemporaryData",s),N){console.log(1,"superCategory",L),console.log(1,"category",T),console.log(1,"subCategories",W),console.log(1,"superId",I),console.log(2,"categoryId",O),console.log(3,"subId",N),console.log(4,"localPicked",y),g(!0);const k=L.filter(le=>le.id==I)[0],w=T.filter(le=>le.id==O)[0],K=W.filter(le=>le.id==N)[0],G={id:se(),title:u||"Заголовок не добавлен",superCategory:k,category:w,subCategory:K,products:v};c([G,...r]);const te=s.find(le=>le.mxikCode==(t==null?void 0:t.mxikCode)),xe=s.findIndex(le=>le.mxikCode==(t==null?void 0:t.mxikCode));te&&(te.crmCategory=y,s.splice(xe,1,te),_([...s]))}be()},be=()=>{a(y),l(!1),D(0),C(0),i({}),f(0),x({}),o([]),n([]),S(!1),P("Выберите категорию"),p(!1),h("")},ue=async(Y,k,w,K)=>{try{const G=Y=="super"?`https://api.mcrm.uz/api/categories?&page=${k}&perPage=${w}`:`https://api.mcrm.uz/api/categories?parentId=${K}&page=${k}&perPage=${w}`,xe=(await Te.get(G)).data.data.map(le=>({...le,label:Y==="super"?"Супер категория":Y==="category"?"Категория":"Субкатегория"}));Y==="super"&&E([...xe]),Y==="category"&&j([...xe]),Y==="subCategory"&&V([...xe])}catch(G){console.error(`Ошибка произошла при получении ${Y} категорий`,G)}};return e.jsx("div",{className:H.modalCategory,onClick:Y=>Y.stopPropagation(),children:e.jsxs("div",{className:H.modalCategory_block,children:[e.jsx("p",{className:H.modalCategory_content_message,children:b?$:""}),e.jsxs("div",{className:H.modalCategory_block_createTitle,children:[e.jsx("input",{type:"text",value:u,onChange:Y=>h(Y.target.value),placeholder:"Заголовок  блока "}),e.jsx(U,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:H.modalCategory_content,children:[e.jsx(N_,{superId:I,superCategory:L,category:T,setLocalPicked:x,setSuperId:D,setMessageStatus:S,fetchCategories:ue,setSubCategories:V}),e.jsx(S_,{superId:I,categoryId:O,category:T,setSubCategory:A,fetchCategories:ue}),e.jsx(I_,{subId:N,categoryId:O,subCategories:W,setSubProductsList:ke,fetchCategories:ue}),e.jsx(P_,{}),e.jsx($_,{setSettings:ve,setCancel:be})]})]})})}function O_(){const{addBlockStatus:s,homePageBlock:t}=ce();return e.jsxs("div",{className:d.homePage,children:[e.jsx(t_,{}),s&&e.jsx(D_,{}),e.jsx("div",{className:d.homePage_blocks,children:t.length>0&&t.map(o=>e.jsx("div",{children:e.jsx(s_,{item:o})},o.id))})]})}const F_=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"},{id:"7",label:"Главная страница",href:"/admin/settings/homePage"}];function A_(){const t=ae().pathname,{setAddBlockStatus:o}=ce();return e.jsx("div",{className:d.settings,onClick:()=>o(!1),children:e.jsxs("div",{className:d.settings_content,children:[e.jsx("div",{className:d.settings_content_top,children:e.jsx("ul",{className:d.settings_tools,children:F_.map(a=>e.jsx("li",{children:e.jsx(X,{to:a.href,className:`${d.settings_tools_link} ${t.startsWith(a.href)?d.settings_tools_link_active:""}`,children:a.label})},a.id))})}),t=="/admin/settings/modules"&&e.jsx(Xa,{}),t=="/admin/settings/templates"&&e.jsx(Ga,{}),t=="/admin/settings/categories"&&e.jsx(wr,{}),t.startsWith("/admin/settings/banner")&&e.jsx(Gi,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(Qc,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(Yl,{}),t.startsWith("/admin/settings/homePage")&&e.jsx(O_,{})]})})}const at=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function B_(){const[s,t]=m.useState(""),[o]=m.useState(1),[a]=m.useState(10),[n,_]=m.useState({status:!1,message:""}),[l,i]=m.useState([]);m.useEffect(()=>{s||(i([]),_({status:!1,message:""}))},[s]);async function r(c){c.preventDefault();const p=we.get("multi-store");try{const h=await(await ie.get(`nomenclatures?multiStoreId=${p}&name=${s}&page=${o}&perPage=${a}`)).data.data;h.length>0?(i([...h]),_({status:!1,message:""})):(i([]),_({status:!0,message:"Совпадений не найдено"}))}catch(u){console.log("Ошибка произошла при поиске продуктов на складе",u)}}return e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("form",{action:"",className:d.addingWrapper_form,onSubmit:c=>r(c),children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:c=>t(c.target.value),value:s}),e.jsx(U,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsx("tr",{className:d.addingWrapper_thead_tr,children:at.map(c=>e.jsx("th",{className:d.addingWrapper_thead_th,children:c.title},c.id))})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:l==null?void 0:l.map(c=>e.jsxs("tr",{className:d.addingWrapper_tbody_tr,children:[at.map(p=>{var u;return e.jsxs("td",{className:d.addingWrapper_tbody_td,children:[p.title=="Наименование"?e.jsx("span",{children:(u=c==null?void 0:c.name)==null?void 0:u.ru}):"",p.title=="Штрих-код"?e.jsx("span",{children:c.mxik}):"",p.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},p.id)}),!c.hasWebNomenclature&&e.jsx("td",{className:d.addingWrapper_tbody_td,children:e.jsx(X,{to:`/admin/stock-product/${c.id}`,className:d.addingWrapper_tbody_add,children:"Добавить"})})]},c==null?void 0:c.mxik))})]}),n.status&&e.jsx("span",{className:d.addingWrapper_table_error,children:n.message})]})}const rt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function L_(){const[s,t]=m.useState(""),[o,a]=m.useState({status:!1,message:""}),[n,_]=m.useState([]),[l]=m.useState(1),[i]=m.useState(10);m.useEffect(()=>{s||(_([]),a({status:!1,message:""}))},[s]);async function r(){const h=we.get("multi-store");try{console.log(222,"searchText",s);const v=(await ie.get(`web-nomenclatures?multiStoreId=${h}&title=${s}&page=${l}&perPage=${i}`)).data.data;console.log(999,"data",v),v.length>0?(_([...v]),a({status:!1,message:""})):(_([]),a({status:!0,message:"Совпадений не найдено"}))}catch(g){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",g)}}async function c(h,g){h.preventDefault();try{const v=await ie.patch(`web-nomenclatures/${g}`,{isActive:!1});t(""),_([]),console.log("Продукт успешно отключен с веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}async function p(h,g){h.preventDefault();try{const v=await ie.patch(`web-nomenclatures/${g}`,{isActive:!0});t(""),_([]),console.log("Продукт успешно включен на веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}const u=async h=>{h.preventDefault(),r()};return e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("form",{action:"",className:d.addingWrapper_form,onSubmit:h=>u(h),children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:h=>t(h.target.value),value:s}),e.jsx(U,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsxs("tr",{className:d.addingWrapper_thead_tr,children:[rt.map(h=>e.jsx("th",{className:d.addingWrapper_thead_th,children:h.title},h.id)),e.jsx("th",{className:d.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:n==null?void 0:n.map(h=>e.jsxs("tr",{className:d.addingWrapper_tbody_tr,children:[rt.map(g=>e.jsxs("td",{className:d.addingWrapper_tbody_td,children:[g.title=="Наименование"?e.jsx("span",{children:h.title}):"",g.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},g.id)),e.jsx("td",{className:d.addingWrapper_tbody_td,children:e.jsxs("div",{className:d.addingWrapper_tbody_buttons,children:[h.isActive&&e.jsx(X,{to:"#",className:d.addingWrapper_tbody_del,onClick:g=>c(g,h.id),children:"Отключить"}),!h.isActive&&e.jsx(X,{to:"#",className:d.addingWrapper_tbody_del,onClick:g=>p(g,h.id),children:"Включить"}),e.jsx(X,{to:`/admin/website-product/${h.id}`,className:d.addingWrapper_tbody_add,children:"Изменить"})]})})]},h==null?void 0:h.id))})]}),o.status&&e.jsx("span",{className:d.addingWrapper_table_error,children:o.message})]})}const M_=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function W_(){const t=ae().pathname;return e.jsxs("div",{className:d.products,children:[e.jsx("div",{className:d.products_buttons,children:M_.map(o=>e.jsx(X,{to:o.href,className:`${d.products_btn} ${o.href==t?d.products_btn_active:""}`,children:o.title},o.id))}),t=="/admin/product/adding/stock"&&e.jsx(B_,{}),t=="/admin/product/adding/website"&&e.jsx(L_,{})]})}const E_=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function U_(){const t=ae().pathname;return e.jsxs("div",{className:d.products,children:[e.jsx("div",{className:d.products_buttons,children:E_.map(o=>e.jsx(X,{to:o.href,className:`${d.products_btn} ${t.startsWith(`${o.href}`)||t.startsWith("/admin/product-item")?d.products_btn_active:""}`,children:o.title},o.id))}),t.startsWith("/admin/product/adding")&&e.jsx(W_,{})]})}const R_="_user_title_1uizv_1",z_="_user_list_1uizv_6",T_="_user_list_link_1uizv_12",V_="_user_list_link_active_1uizv_26",q_="_user_form_1uizv_30",K_="_user_form_btn_1uizv_35",H_="_user_form_wrap_1uizv_51",X_="_user_form_input_1uizv_57",G_="_user_form_icon_1uizv_65",Z_="_user_table_1uizv_68",J_="_user_table_tbody_1uizv_71",Q_="_user_table_tr_1uizv_74",Y_="_user_table_th_1uizv_77",ed="_user_table_td_1uizv_85",td="_user_table_btns_1uizv_89",sd="_user_table_btn_1uizv_89",od="_user_table_btn_blocked_1uizv_107",nd="_modal_1uizv_111",ad="_modal_active_1uizv_120",rd="_modal_wrap_1uizv_123",id="_modal_wrap_header_1uizv_131",cd="_modal_wrap_stores_1uizv_143",ld="_modal_wrap_stores_text_1uizv_165",_d="_modal_btns_1uizv_169",dd="_modal_btn_1uizv_169",pd="_modal_content_1uizv_193",ud="_modal_content_text_1uizv_197",md="_versions_1uizv_206",hd="_versions_block_1uizv_211",gd="_versions_block_top_1uizv_216",vd="_versions_block_top_title_1uizv_226",bd="_versions_block_top_arrow_1uizv_230",xd="_versions_block_top_arrow_active_1uizv_239",fd="_versions_block_dropdown_1uizv_242",kd="_versions_block_dropdown_item_1uizv_257",yd="_versions_block_dropdown_open_1uizv_268",jd="_shop_header_1uizv_275",wd="_shop_header_title_1uizv_282",M={user_title:R_,user_list:z_,user_list_link:T_,user_list_link_active:V_,user_form:q_,user_form_btn:K_,user_form_wrap:H_,user_form_input:X_,user_form_icon:G_,user_table:Z_,user_table_tbody:J_,user_table_tr:Q_,user_table_th:Y_,user_table_td:ed,user_table_btns:td,user_table_btn:sd,user_table_btn_blocked:od,modal:nd,modal_active:ad,modal_wrap:rd,modal_wrap_header:id,modal_wrap_stores:cd,modal_wrap_stores_text:ld,modal_btns:_d,modal_btn:dd,modal_content:pd,modal_content_text:ud,versions:md,versions_block:hd,versions_block_top:gd,versions_block_top_title:vd,versions_block_top_arrow:bd,versions_block_top_arrow_active:xd,versions_block_dropdown:fd,versions_block_dropdown_item:kd,versions_block_dropdown_open:yd,shop_header:jd,shop_header_title:wd},Qe=({headers:s})=>e.jsx("thead",{className:M.user_table_thead,children:e.jsx("tr",{className:M.user_table_tr,children:s.map(t=>e.jsx("th",{className:M.user_table_th,children:t.title},t.id))})}),Ye=()=>{const[s,t]=m.useState(""),{setUserSearch:o}=ce(),a=n=>{n.preventDefault(),o(s)};return m.useEffect(()=>{s==""&&o("")},[s]),e.jsxs("form",{action:"",className:M.user_form,children:[e.jsxs("div",{className:M.user_form_wrap,children:[e.jsx("input",{type:"text",className:M.user_form_input,placeholder:"Поиск пользователей",onChange:n=>t(n.target.value),value:s}),e.jsx(U,{className:M.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:M.user_form_btn,onClick:n=>a(n),children:"Найти"})]})},et=({arr:s,showStore:t})=>{const{usersList:o,userSearch:a,openModalAdmin:n,openAppointUser:_,shopListAdmin:l,setOpenAppointUser:i,setOpenModalAdmin:r,setUsersList:c,setEditUserAdmin:p,setShopListDropdownAdmin:u,setCloseBlock:h,setFilteredShopListAdmin:g}=ce(),I=ae().pathname,[D,O]=m.useState([]);m.useEffect(()=>{let x=s;I==="/clients"?x=s.filter(b=>b.isUser):I==="/employees"&&(x=s.filter(b=>!b.isUser)),x=x==null?void 0:x.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),O(x)},[a,o,s,I]);const C=x=>{const b=o.map(S=>S.id===x?{...S,isBlocked:!S.isBlocked}:S);c(b)},N=x=>{r(!0),h(!0);const b=o.find(P=>P.id==x),S=[{id:se(),title:"Магазин 1",order:1},{id:se(),title:"Магазин 2",order:2},{id:se(),title:"Магазин 3",order:3}],$=S.filter(P=>!(b!=null&&b.shopList.some(L=>L.title===P.title)));console.log("editUser",b),console.log("shopListAdminArr",S),b&&(u(b.shopList),p(b),g($))},f=x=>{i(!0),h(!0),u([]),g(l);const b=o.find(S=>S.id==x);b&&p(b)},y=n||_;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:M.user_table_tbody,children:D.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:M.user_table_td,children:x.name}),e.jsx("td",{className:M.user_table_td,children:t?x.shopList.map(b=>e.jsxs("p",{children:[b.title," ",`(${b.position})`]},b.id)):e.jsx("p",{children:x.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:M.user_table_td,children:t?"Админ 1":x.registerDate}),e.jsx("td",{className:M.user_table_btns,children:x!=null&&x.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${M.user_table_btn} ${x.isBlocked?M.user_table_btn_blocked:""}`,onClick:()=>C(x.id),children:x.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:M.user_table_btn,onClick:()=>f(x.id),disabled:y,children:"Назначить"})]}):e.jsx("button",{className:M.user_table_btn,onClick:()=>N(x.id),style:{background:"#B5FFC7"},disabled:y,children:"Изменить"})})]},x.id))})})};function it({color:s="black",className:t,header:o,isEnabled:a,dropdownItem:n,margin:_,versionList:l,closeBlock:i}){const{shopListAdmin:r,shopListDropdownAdmin:c,filteredShopListAdmin:p,setShopListDropdownAdmin:u,setShopListAdmin:h}=ce(),[g,v]=m.useState("Выберете должность"),[I,D]=m.useState("Выберете магазин"),[O,C]=m.useState(!1);m.useEffect(()=>{n!=null&&n.position?v(n.position):v("Выберете должность")},[n==null?void 0:n.position]),m.useEffect(()=>{i||C(!1)},[i]);const N=(b,S)=>{if(n){v(b.title);const $=c.filter(L=>L.title==n.title),P=c.findIndex(L=>L.title==n.title);$[0].position=b.title,c.splice(P,1,$[0]),u(c)}else D(b.title);if(a&&!c.some($=>$.title==b.title)){v("Выберете должность");const $={...b,originalIndex:S};u([...c,$]),h(p.filter((P,L)=>L!==S))}C(!1)},f=b=>{const S=c.filter($=>$.id!==b.id);if(u(S),b.originalIndex!==void 0){const $=[...r];$.splice(b.originalIndex,0,b),h($)}else{const $=[...p,b].sort((P,L)=>P.order!==void 0&&L.order!==void 0?P.order-L.order:0);h($),console.log("arr",$)}},y=()=>{C(!O)};function x(b,S){return b.order&&S.order&&(b==null?void 0:b.order)>(S==null?void 0:S.order)?1:-1}return e.jsx("div",{className:t??M.versions,style:{marginBottom:_},children:e.jsxs("div",{className:M.versions_block,children:[o&&e.jsxs("div",{className:M.shop_header,children:[e.jsx("p",{className:M.shop_header_title,children:n==null?void 0:n.title}),e.jsx("button",{onClick:()=>n&&f(n),children:e.jsx(U,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:M.versions_block_top,children:[e.jsx("h2",{className:M.versions_block_top_title,style:{color:s},children:n?g:I}),e.jsx("button",{className:M.versions_block_top_btn,onClick:()=>y(),children:e.jsx("div",{className:`${M.versions_block_top_arrow} ${O?M.versions_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${M.versions_block_dropdown} ${O?M.versions_block_dropdown_open:""}`,children:l==null?void 0:l.sort(x).map((b,S)=>e.jsx("span",{className:M.versions_block_dropdown_item,onClick:()=>N(b,S),children:b.title},S))})]})})}const tt=()=>{const{currentShopModal:s,shopListDropdownAdmin:t,shopListPositionAdmin:o,isEnabled:a,openModalAdmin:n,editUserAdmin:_,shopListAdmin:l,usersList:i,openAppointUser:r,closeBlock:c,filteredShopListAdmin:p,setCurrentShopModal:u,setShopListPositionAdmin:h,setCurrentShopPosition:g,setOpenModalAdmin:v,setShopListAdmin:I,setUsersList:D,setOpenAppointUser:O,setCloseBlock:C,setFilteredShopListAdmin:N}=ce();m.useEffect(()=>{},[p]);const f=()=>{const $=i.findIndex(P=>P.id==(_==null?void 0:_.id));_&&t.every(P=>"position"in P)&&(_.shopList=t,i.splice($,1,_),D(i),I(l),console.log("filteredShopListAdmin",p)),console.log("shopListAdmin",l),b(),t.length==0&&y()},y=()=>{if(_){_.isUser=!0,_.isEmployes=!1,_.shopList=[];const $={id:se(),title:"",position:"пользователь"};_.shopList=[{...$}]}b()},x=()=>{const $=i.findIndex(P=>P.id==(_==null?void 0:_.id));if(_&&(_.shopList=t,i.splice($,1,_),_.isUser=!1,_.isEmployes=!0,D(i),O(!1),!(_!=null&&_.shopList.some(P=>"position"in P)))){_.isUser=!0,_.shopList=[];const P={id:se(),title:"",position:"пользователь"};_.shopList=[{...P}]}},b=()=>{I(l),N([]),v(!1),O(!1),C(!1),console.log("close modal")},S=m.useRef(null);return m.useEffect(()=>{const $=P=>{var L;S.current&&!((L=S==null?void 0:S.current)!=null&&L.contains(P.target))&&b()};return n||r?document.addEventListener("mousedown",$):document.removeEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[n,r]),e.jsx("div",{className:`${M.modal} ${n?M.modal_active:""} ${r?M.modal_active:""}`,children:e.jsxs("div",{ref:S,className:M.modal_wrap,children:[e.jsxs("div",{className:M.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>b(),children:e.jsx(U,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:M.modal_content,children:[e.jsxs("p",{className:M.modal_content_text,children:["Логин: ",_==null?void 0:_.name]}),e.jsxs("p",{className:M.modal_content_text,children:["Статус:",_==null?void 0:_.shopList.map($=>e.jsx("span",{children:$.position},$.id))]}),e.jsx(it,{color:"#717171",setVersionList:I,currentVersion:s,setCurrentVersion:u,isEnabled:a,versionList:p||l,closeBlock:c}),e.jsxs("div",{className:M.modal_wrap_stores,children:[e.jsx("p",{className:M.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map(($,P)=>e.jsx(it,{dropdownItem:$,margin:"12px",color:"#717171",versionList:o,setVersionList:h,setCurrentVersion:g,header:!0,closeBlock:c},P))]}),e.jsx("div",{className:M.modal_btns,children:r?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>b(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:M.modal_btn,onClick:()=>x(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>y(),children:"Уволить"}),e.jsx("button",{className:M.modal_btn,onClick:()=>f(),children:"Сохранить"})]})})]})]})})},Cd=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],Nd=()=>{const{usersList:s}=ce();return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(Qe,{headers:Cd}),e.jsx(et,{arr:s})]}),e.jsx(tt,{})]})},Sd=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],Id=()=>{const{usersList:s}=ce(),t=s.filter(o=>o.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(Qe,{headers:Sd}),e.jsx(et,{arr:t})]}),e.jsx(tt,{})]})},$d=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],Pd=()=>{const{usersList:s}=ce(),t=s.filter(o=>o.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(Qe,{headers:$d}),e.jsx(et,{arr:t,showStore:!0})]}),e.jsx(tt,{})]})},Dd=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],Od=()=>{const t=ae().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M.users,children:e.jsxs("div",{className:M.users_header,children:[e.jsx("h2",{className:M.user_title,children:"Пользователи"}),e.jsx("ul",{className:M.user_list,children:Dd.map(o=>e.jsx("li",{children:e.jsx(X,{className:`${M.user_list_link} ${t==o.href?M.user_list_link_active:""}`,to:o.href,children:o.title})},o.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(Nd,{}),t=="/admin/users/clients"&&e.jsx(Id,{}),t=="/admin/users/employees"&&e.jsx(Pd,{})]})]})},ct=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function Fd(){const[s,t]=m.useState(""),[o]=m.useState(1),[a]=m.useState(10),[n,_]=m.useState([]);m.useEffect(()=>{l()},[s]);async function l(){const i=we.get("multi-store");try{const r=await ie.get(`nomenclatures?multiStoreId=${i}&page=${o}&perPage=${a}`),c=await r.data.data;console.log("res",r),_([...c])}catch(r){console.log("Ошибка произошла при получении всх продуктов со склада",r)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("h2",{className:d.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:d.addingWrapper_form,children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:s}),e.jsx(U,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsx("tr",{className:d.addingWrapper_thead_tr,children:ct.map(i=>e.jsx("th",{className:d.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:n&&(n==null?void 0:n.map(i=>e.jsx("tr",{className:d.addingWrapper_tbody_tr,children:ct.map(r=>{var c,p;return e.jsxs("td",{className:d.addingWrapper_tbody_td,children:[r.title=="Наименование"?e.jsx("span",{children:((c=i==null?void 0:i.name)==null?void 0:c.ru)&&((p=i==null?void 0:i.name)==null?void 0:p.ru)}):"",r.title=="Штрих-код"?e.jsx("span",{children:i==null?void 0:i.barcode}):""]},r.id)})},i==null?void 0:i.id)))})]})]})})}const lt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function Ad(){const[s,t]=m.useState(""),[o]=m.useState(1),[a]=m.useState(10),[n,_]=m.useState([]);m.useEffect(()=>{l()},[s]);async function l(){const i=we.get("multi-store");try{const r=await ie.get(`web-nomenclatures?multiStoreId=${i}&page=${o}&perPage=${a}`),c=await r.data.data;console.log("res",r),_([...c])}catch(r){console.log("Ошибка произошла при получении всх продуктов со склада",r)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("h2",{className:d.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:d.addingWrapper_form,children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:s}),e.jsx(U,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsx("tr",{className:d.addingWrapper_thead_tr,children:lt.map(i=>e.jsx("th",{className:d.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:n==null?void 0:n.map(i=>e.jsx("tr",{className:d.addingWrapper_tbody_tr,children:lt.map(r=>e.jsx("td",{className:d.addingWrapper_tbody_td,children:r.title=="Наименование"?e.jsx("span",{children:i==null?void 0:i.title}):""},r.id))},i==null?void 0:i.id))})]})]})})}function Bd(){const t=ae().pathname,{shopsStocks:o}=Ve();return e.jsxs("div",{className:d.layout,children:[e.jsx("ul",{className:d.layout_buttons,children:o.map(a=>e.jsx("li",{children:e.jsx(X,{to:`/admin/shops/shop/${a.url}`,className:`${d.layout_btn} ${t==`/admin/shops/shop/${a.url}`?d.layout_btn_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:d.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(Fd,{}),t==="/admin/shops/shop/website"&&e.jsx(Ad,{})]})]})}function Ld(){const{shopsAmount:s,currentShop:t,setCurrentShop:o}=Ve(),n=ae().pathname;return e.jsxs("div",{className:d.layout,children:[e.jsx("h2",{className:d.layout_title,children:"Магазины"}),e.jsx("ul",{className:d.layout_buttons,children:s.map(_=>e.jsx("li",{children:e.jsx(X,{to:"/admin/shops/shop",className:`${d.layout_btn} ${t==_.url?d.layout_btn_active:""}`,onClick:()=>o(_.url),children:_.title})},_.id))}),n.startsWith("/admin/shops/shop")&&e.jsx("div",{className:d.layout_content,children:e.jsx(Bd,{})})]})}function Md({item:s}){const{setErrorModal:t}=ge(),o=a=>{a.stopPropagation()};return e.jsx("div",{className:d.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:d.errorWrapper_block,onClick:o,children:[e.jsx("button",{className:d.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(U,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:s.message})]})})}function Wd({localNewImage:s,setLocalNewImage:t}){const[o,a]=m.useState(null);function n(p,u){return p.order>u.order?1:-1}function _(p,u){a(u)}function l(p){p.target.style.background="white"}function i(p){p.preventDefault(),p.target.style.background="lightgray"}function r(p,u){p.preventDefault(),p.target.style.background="white";const h=s&&s.map(g=>g.id===u.id?{...g,order:(o==null?void 0:o.order)||g.order}:g.id===(o==null?void 0:o.id)?{...g,order:u.order}:g).sort((g,v)=>g.order-v.order);console.log(555,"newImages",h),h&&t(h),a(null)}const c=p=>{const u=s.filter(h=>h.id!==p);t([...u])};return m.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:s&&s.sort(n).map((p,u)=>e.jsxs("div",{className:`${d.productItem_photo} ${u==0?d.productItem_photo_active:""}`,draggable:!0,onDragStart:h=>_(h,p),onDragLeave:h=>l(h),onDragEnd:h=>l(h),onDragOver:h=>i(h),onDrop:h=>r(h,p),children:[e.jsx("div",{className:d.productItem_photo_img,children:e.jsx("img",{src:p.src?`https://api.mcrm.uz/${p.src}`:p.localSrc?p.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:d.productItem_photo_close,onClick:()=>c(p.id),children:e.jsx(U,{width:18,height:18,name:"XMarkIcon"})})]},p.id))})}function wt({stockName:s,myMxikCode:t,localNewImage:o,setLocalNewImage:a,setLocalFormData:n,localFormData:_}){const{errorModal:l}=ge(),i=m.useRef(null),r=()=>{i.current!=null&&i.current.click()},c=async p=>{var h,g;const u=(g=(h=p==null?void 0:p.target)==null?void 0:h.files)==null?void 0:g[0];if(u&&["image/jpeg","image/png","image/webp"].includes(u.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",u);const v=new FormData;v.append("files[]",u),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",v),u&&n([..._,u]);const I=o&&(o==null?void 0:o.length)>0?o.reduce((O,C)=>C.order>O?C.order:O,-1/0):1,D=new FileReader;D.onload=O=>{var C;if((C=O.target)!=null&&C.result){const N={id:se(),order:I?I+1:1,localSrc:URL.createObjectURL(u)},f=[...o,N];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",f),a&&a([...f]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},D.readAsDataURL(u),console.log(6,"отрисовал выбранную картинку files",u),i.current&&(i.current.value="")}};return e.jsxs("div",{className:d.productItem_top,children:[l.status&&e.jsx(Md,{item:l}),e.jsx("h1",{className:d.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:d.productItem_basePhoto,children:o&&o.length>0?"Главное фото":""}),e.jsxs("div",{className:d.productItem_photos,children:[e.jsx(Wd,{stockName:s,myMxikCode:t,localNewImage:o,setLocalNewImage:a}),e.jsxs("div",{className:`${d.productItem_photo} ${d.productItem_add}`,onClick:r,children:[e.jsx(U,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:d.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:c,ref:i})]})]}),e.jsx("p",{className:d.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function Ct({localCategory:s,productName:t,productDescription:o,setProductDescription:a,setProductName:n,myBarcode:_,vendorCode:l,setVendorCode:i,myPrice:r}){var D,O,C,N;const{pickedCategory:c,currentProduct:p,setArticleModal:u,setOpenModalCategory:h}=ge();m.useEffect(()=>{(c||s)&&I()},[c,s]);const[g,v]=m.useState(""),I=async()=>{try{const y=(await ie.get(`categories/${c.id?c.id:s}`)).data;v(y.name.ru)}catch(f){console.log("Ошибка произошла при получении категонии по id",f)}};return e.jsxs("div",{className:d.productItem_left,children:[e.jsxs("div",{className:d.productItem_left_info,children:[e.jsxs("div",{className:d.productItem_left_item,children:[e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:d.productItem_left_item_top_input,value:l||"",onChange:f=>i(f.target.value)})]}),e.jsx("div",{className:d.productItem_left_item_bottom,children:e.jsx("button",{className:d.productItem_left_item_button,onClick:()=>u(!0),children:"Изменить"})})]}),e.jsxs("div",{className:d.productItem_left_item,children:[e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:g||((O=(D=p==null?void 0:p.category)==null?void 0:D.name)!=null&&O.ru?(N=(C=p==null?void 0:p.category)==null?void 0:C.name)==null?void 0:N.ru:"")})]}),e.jsx("div",{className:d.productItem_left_item_bottom,children:e.jsx("button",{className:d.productItem_left_item_button,onClick:()=>h(!0),children:c!=null&&c.name||p!=null&&p.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:d.productItem_left_item,children:e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:_})]})}),e.jsx("div",{className:d.productItem_left_item,children:e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:r})]})}),e.jsx("div",{className:d.productItem_left_item,children:e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:d.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:d.productItem_left_form,children:[e.jsxs("label",{className:d.productItem_left_form_label,children:[e.jsx("span",{className:d.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:d.productItem_left_form_input,type:"text",value:t||"",onChange:f=>n(f.target.value)})]}),e.jsxs("label",{className:d.productItem_left_form_label,children:[e.jsx("span",{className:d.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:f=>a(f.target.value),value:o||"",className:d.productItem_left_form_textarea}),e.jsx("p",{className:d.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function Ed({color:s="black",title:t="",extraOptionsList:o,className:a,openBlock:n,setOpenBlock:_,setExtraOptionsList:l}){const i=m.useRef([]);m.useEffect(()=>{i.current.length>0&&r()},[o]);const r=()=>{o&&o.forEach(p=>{i.current.forEach(u=>{u.name==p.title&&(u.checked=p.isActive)})})},c=(p,u)=>{const h=JSON.parse(JSON.stringify(o));h.forEach(g=>{g.title==u&&(g.isActive=!g.isActive)}),l&&l(h)};return e.jsxs("div",{className:a??z.versionExtraOptions,children:[t&&e.jsx("span",{className:z.versionExtraOptions_title,children:t}),e.jsxs("div",{className:z.versionExtraOptions_block,children:[e.jsxs("div",{className:z.versionExtraOptions_block_top,onClick:()=>_&&_(!n),children:[e.jsx("h2",{className:z.versionExtraOptions_block_top_title,style:{color:s},children:t||"Выберите параметры"}),e.jsx("button",{className:z.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${z.versionExtraOptions_block_top_arrow} ${n?z.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.versionExtraOptions_block_dropdown} ${n?z.versionExtraOptions_block_dropdown_open:""}`,children:o&&o.map((p,u)=>e.jsxs("label",{className:z.versionExtraOptions_block_dropdown_item,children:[p.title,e.jsx("input",{ref:h=>{h&&(i.current[u]=h)},type:"checkbox",name:p.title,"data-type":p.title,onChange:h=>c(h,p.title)})]},p.id))})]})]})}function Ud({color:s="black",title:t="",versionList:o,className:a}){const[n,_]=m.useState(!1),[l,i]=m.useState("");m.useEffect(()=>{o==null||o.forEach(p=>{p.isActive&&i(p.title)})},[]);const r=()=>{_(!n)},c=p=>{o==null||o.forEach(u=>u.isActive=!1),o==null||o.forEach(u=>{u.title==p.title&&(u.isActive=!0,i(u.title))}),r()};return e.jsxs("div",{className:a??z.version3,children:[e.jsx("span",{className:z.version3_title,children:t}),e.jsxs("div",{className:z.version3_block,children:[e.jsxs("div",{className:z.version3_block_top,onClick:()=>r(),children:[e.jsx("h2",{className:z.version3_block_top_title,style:{color:s},children:l||"Выбрать"}),e.jsx("button",{className:z.version3_block_top_btn,children:e.jsx("div",{className:`${z.version3_block_top_arrow} ${n?z.version3_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.version3_block_dropdown} ${n?z.version3_block_dropdown_open:""}`,style:{height:`${o&&o.length==1?"50px":""}`},children:o&&o.map(p=>e.jsx("span",{className:z.version3_block_dropdown_item,onClick:()=>c(p),children:o.length>1?p.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},p.id))})]})]})}function Rd({extraOptionsStatus:s,localCategory:t,setExtraOptionsStatus:o,extraOptions:a}){const[n,_]=m.useState(!1);return m.useEffect(()=>{},[t]),e.jsxs("div",{className:d.productItem_right_item,children:[e.jsxs("div",{className:d.productItem_right_top,onClick:()=>o(!s),children:[e.jsx("h5",{className:d.productItem_right_title,children:"Доп. параметры"}),e.jsx(Ie,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:s})]}),e.jsxs("div",{className:`${d.productItem_right_bottom_items} ${s?d.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:d.productItem_right_bottom_item,children:e.jsx(Ed,{color:"",extraOptionsList:a,openBlock:n,setOpenBlock:_})}),a.map(l=>{if(l.isActive)return e.jsxs("div",{className:d.productItem_right_bottom_item,children:[e.jsx(Ud,{color:"",title:l.title,versionList:l.type}),e.jsx("button",{className:d.productItem_right_bottom_del,children:"Удалить"})]},l.id)})]})]})}function _t({color:s="black",title:t="",versionList:o=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:_,setOpenBlock:l,setCurrentVersion:i,setVersionList:r}){const c=p=>{i&&i(p.title);const u=o.map(v=>({id:v.id,title:v.title,isActive:!1})),h=u.find(v=>v.id==p.id),g=u.findIndex(v=>v.id==p.id);h&&(h.isActive=!0,u.splice(g,1,h),r&&r(u))};return e.jsxs("div",{className:a??z.version3,children:[e.jsx("span",{className:z.version3_title,children:t}),e.jsxs("div",{className:z.version3_block,children:[e.jsxs("div",{className:z.version3_block_top,children:[e.jsx("h2",{className:z.version3_block_top_title,style:{color:s},children:_}),e.jsx("button",{className:z.version3_block_top_btn,onClick:()=>l&&l(!n),children:e.jsx("div",{className:`${z.version3_block_top_arrow} ${n?z.version3_block_top_arrow_active:""}`,children:e.jsx(U,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.version3_block_dropdown} ${n?z.version3_block_dropdown_open:""}`,children:o.map(p=>e.jsx("span",{className:z.version3_block_dropdown_item,onClick:()=>c(p),children:p.title},p.id))})]})]})}function zd({brieflyProductStatus:s,setBrieflyProductStatus:t}){return e.jsxs("div",{className:d.productItem_right_item,children:[e.jsxs("div",{className:d.productItem_right_top,onClick:()=>t(!s),children:[e.jsx("h5",{className:d.productItem_right_title,children:"Коротко о товаре"}),e.jsx(Ie,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:s})]}),e.jsx("div",{className:`${d.productItem_right_bottom_items} ${s?d.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${d.productItem_right_bottom_item} ${d.productItem_right_bottom_row}`,children:[e.jsx(_t,{color:"",title:"Объем, л"}),e.jsx(_t,{color:"",title:"Кол-во в упаковке"})]})})]})}function Nt({currentProduct:s,extraOptionsStatus:t,setExtraOptionsStatus:o,brieflyProductStatus:a,setBrieflyProductStatus:n,localCategory:_,extraOptions:l,setExtraOptions:i}){return e.jsxs("div",{className:d.productItem_right,children:[e.jsx("div",{className:d.productItem_right_item,children:e.jsxs("div",{className:d.productItem_right_top,children:[e.jsx("h5",{className:d.productItem_right_title,children:"Коментарии"}),e.jsx(Ie,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(Rd,{extraOptionsStatus:t,setExtraOptionsStatus:o,localCategory:_,extraOptions:l,setExtraOptions:i,currentProduct:s}),e.jsx(zd,{brieflyProductStatus:a,setBrieflyProductStatus:n})]})}function St({stockName:s,setAdminSettings:t}){return e.jsxs("div",{className:d.settings_content_buttons,children:[e.jsx(X,{to:s=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${d.settings_content_btn} ${d.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${d.settings_content_btn} ${d.settings_content_btn_save}`,onClick:()=>t(),children:s=="website"?"Сохранить":"Добавить"})]})}function Td(){const{setArticleModal:s}=ge();return e.jsxs("div",{className:d.articleModal_block_nav,children:[e.jsx("h2",{className:d.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>s(!1),children:e.jsx(U,{name:"XMarkIcon"})})]})}function Vd({productName:s}){const[t]=m.useState(""),[o]=m.useState("");return e.jsxs("div",{className:d.articleModal_block_info,children:[e.jsxs("div",{className:d.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:s})]}),e.jsxs("div",{className:d.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:d.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[o,"1%"]})]})]})}function It({item:s}){return e.jsxs("div",{className:d.articleModal_block_recommended_item,children:[e.jsx("h3",{className:d.articleModal_block_recommended_item_title,children:s.title}),e.jsxs("div",{className:d.articleModal_block_recommended_content,children:[e.jsx("div",{className:d.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:d.articleModal_block_recommended_info,children:[e.jsxs("div",{className:d.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:d.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:d.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:d.articleModal_block_recommended_article,children:s.article})]})]})}const qd=[{id:se(),title:"Молоко Nestle",article:"#DF262515"}];function Kd(){return e.jsxs("div",{className:d.articleModal_block_recommended,children:[e.jsx("h2",{className:d.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:d.articleModal_block_recommended_list,children:qd.map(s=>e.jsx(It,{item:s},s.id))})]})}function Hd(){return e.jsx("div",{className:d.articleModal_block_search,children:e.jsxs("div",{className:d.articleModal_block_search_box,children:[e.jsxs("div",{className:d.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(U,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:d.articleModal_block_search_btn,children:"Найти"})]})})}const Xd=[{id:se(),title:"Молоко Nestle",article:"#DF262515"},{id:se(),title:"Молоко Nestle",article:"#DF262515"},{id:se(),title:"Молоко Nestle",article:"#DF262515"}];function Gd(){return e.jsx("div",{className:d.articleModal_block_found,children:Xd.map(s=>e.jsx(It,{item:s},s.id))})}function $t({productName:s}){return e.jsx("div",{className:d.articleModal,children:e.jsxs("div",{className:d.articleModal_block,children:[e.jsx(Td,{}),e.jsx(Vd,{productName:s}),e.jsx(Kd,{}),e.jsx(Hd,{}),e.jsx(Gd,{}),e.jsx("div",{className:d.articleModal_block_buttonBox,children:e.jsx("button",{className:d.articleModal_block_button,children:"Выбрать"})})]})})}function Zd(){const s=Pe(),t=ae(),{id:o}=dt(),{openModalCategory:a}=ge(),{pickedCategory:n,currentProduct:_,setErrorModal:l,setCurrentProduct:i,setPickedCategory:r,articleModal:c}=ge(),[p,u]=m.useState(""),[h,g]=m.useState(0),[v,I]=m.useState(0),[D,O]=m.useState(Number(o)),[C,N]=m.useState(!1),[f,y]=m.useState([]),[x,b]=m.useState(!1),[S,$]=m.useState(""),[P,L]=m.useState(""),[E,T]=m.useState([]),[j,W]=m.useState([]);async function V(){try{return await(await ie.get(`nomenclatures/${o}`)).data}catch(k){console.log("Ошибка произошла при получении продукта со склада по id",k)}}m.useEffect(()=>{r({})},[t.pathname]),m.useEffect(()=>{A()},[o,n]);async function A(){var w;const k=await V();k&&(u((w=k==null?void 0:k.name)==null?void 0:w.ru),i({...k}),O(k==null?void 0:k.categoryId),g(k==null?void 0:k.barcode),I(k==null?void 0:k.price))}const ke=async()=>{if(_){n.id&&(await be(),O(n.id));const k=await ue(j),w=S||await Y(),K={nomenclatureId:_.id,title:p,article:w||null,images:k.length>0?[...k]:null,description:P||null,document:"string"};console.log(333333,"newProduct",K),await ve(K),r({}),y([]),s("/admin/product/adding/stock",{replace:!0})}else l({status:!0,message:'"Выберите категорию"'})};async function ve(k){try{await ie.post("web-nomenclatures",k)}catch(w){console.log("Ошибка произошла при добавлении web nomenclatures",w)}}async function be(){try{await ie.patch(`nomenclatures/${o}`,{categoryId:n.id}),O(n.id)}catch(k){console.log("Ошибка произошла при изменении котегории на складе",k)}}const ue=async k=>{if(k){const w=new FormData;k.forEach((K,G)=>{w.append(`files[${G}]`,K)});try{return await(await ie.post("media-objects/uploads",w)).data}catch(K){console.error("Ошибка при добавлении картинок на сервер",K)}}},Y=async()=>{const k=we.get("multi-store");try{const w=await ie.get(`web-credentials/${k}`);return console.log("fetchArticle res",w),w.data.article}catch(w){console.log("Ошибка при получении артикля",w)}};return e.jsxs("div",{className:d.productItem,children:[a&&e.jsx(pt,{}),e.jsx(wt,{stockName:"stock",myMxikCode:o,localFormData:j,setLocalFormData:W,localNewImage:E,setLocalNewImage:T}),e.jsxs("div",{className:d.productItem_settings,children:[e.jsx(Ct,{myPrice:v,setMyPrice:I,myBarcode:h,setMyBarcode:g,localCategory:D,productName:p,productDescription:P,setProductDescription:L,setProductName:u,vendorCode:S,setVendorCode:$}),e.jsx(Nt,{extraOptionsStatus:C,setExtraOptionsStatus:N,brieflyProductStatus:x,setBrieflyProductStatus:b,localCategory:D,extraOptions:f,setExtraOptions:y,currentProduct:_})]}),e.jsx(St,{stockName:"stock",setAdminSettings:ke}),c&&e.jsx($t,{productName:p})]})}function Jd(){const s=Pe(),t=ae(),{id:o}=dt(),{openModalCategory:a}=ge(),{pickedCategory:n,webCurrentProduct:_,setWebCurrentProduct:l,setErrorModal:i,setPickedCategory:r,articleModal:c}=ge(),[p,u]=m.useState(""),[h,g]=m.useState(0),[v,I]=m.useState(0),[D,O]=m.useState(0),[C,N]=m.useState(Number(o)),[f,y]=m.useState(!1),[x,b]=m.useState([]),[S,$]=m.useState(!1),[P,L]=m.useState(""),[E,T]=m.useState(""),[j,W]=m.useState([]),[V,A]=m.useState([]);async function ke(){try{return await(await ie.get(`web-nomenclatures/${o}`)).data}catch(w){console.log("Ошибка произошла при получении продукта с сайта по id",w)}}m.useEffect(()=>{r({})},[t.pathname]),m.useEffect(()=>{ve()},[o]);async function ve(){var K,G,te,xe,le,Ce,re;const w=await ke();if(w){I((K=w==null?void 0:w.nomenclature)==null?void 0:K.price),g((G=w==null?void 0:w.nomenclature)==null?void 0:G.barcode),O((te=w==null?void 0:w.nomenclature)==null?void 0:te.id),L(w==null?void 0:w.article),u(w!=null&&w.title?w==null?void 0:w.title:(le=(xe=w==null?void 0:w.nomenclature)==null?void 0:xe.name)==null?void 0:le.ru),l({...w}),N((re=(Ce=w==null?void 0:w.nomenclature)==null?void 0:Ce.category)==null?void 0:re.id);let J=1;const me=w.images?w.images.map(ye=>({id:se(),order:J++,src:ye})):[];W(me),J=1,T(w.description?w.description:"")}}const be=async()=>{if(_||n.label){n.id&&await Y();const w=await k(V);console.log(15,"получил ответ от функции fetchPhotos() images",w),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const K=j.filter(te=>te.src).map(te=>{if(te.src)return te.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",K);const G={nomenclatureId:_.id,title:p,article:P,images:w.length>0||K.length>0?[...w]:null,description:E,document:"string"};console.log(18,"создал новый объект продукта newProduct",G),console.log(18,"localNewImage",j),ue(G),r({}),b([]),s("/admin/product/adding/website",{replace:!0})}else i({status:!0,message:'"Выберите категорию"'})};async function ue(w){try{await ie.patch(`web-nomenclatures/${o}`,w)}catch(K){console.log("Ошибка произошла при добавлении web nomenclatures",K)}}async function Y(){try{await ie.patch(`nomenclatures/${D}`,{categoryId:n.id}),N(n.id)}catch(w){console.log("Ошибка произошла при изменении котегории на сайте",w)}}const k=async w=>{if(w){const K=new FormData;w.forEach((G,te)=>{K.append(`files[${te}]`,G)});try{return await(await ie.post("media-objects/uploads",K)).data}catch(G){console.error("Ошибка при добавлении картинок на сервер",G)}}};return e.jsxs("div",{className:d.productItem,children:[a&&e.jsx(pt,{}),e.jsx(wt,{stockName:"website",myMxikCode:o,localNewImage:j,setLocalNewImage:W,localFormData:V,setLocalFormData:A}),e.jsxs("div",{className:d.productItem_settings,children:[e.jsx(Ct,{myPrice:v,setMyPrice:I,myBarcode:h,setMyBarcode:g,localCategory:C,productName:p,productDescription:E,setProductDescription:T,setProductName:u,vendorCode:P,setVendorCode:L}),e.jsx(Nt,{extraOptionsStatus:f,setExtraOptionsStatus:y,brieflyProductStatus:S,setBrieflyProductStatus:$,localCategory:C,extraOptions:x,setExtraOptions:b,currentProduct:_})]}),e.jsx(St,{stockName:"website",setAdminSettings:be}),c&&e.jsx($t,{productName:p})]})}function ip(){const{user:s}=At(),{setCurrentShop:t}=Ve(),a=ae().pathname;m.useEffect(()=>{a.startsWith("/admin/shops")||t("0")},[a]);const n=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(U,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(U,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(U,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(U,{name:"BuildingStorefrontIcon"}),isActive:!1}],[_,l]=m.useState(n),i=r=>{const c=_.map(u=>({id:u.id,label:u.label,href:u.href,icon:u.icon,isActive:!1})),p=c.find(u=>u.id==r);p&&(p.isActive=!0),l(c)};return e.jsxs(e.Fragment,{children:[e.jsx(Bt,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:d.wrapper,children:[e.jsx("h1",{className:d.wrapper_title,children:s==null?void 0:s.username}),e.jsxs("div",{className:d.content,children:[e.jsx("div",{className:d.content_left,children:e.jsx("ul",{className:d.tools,children:_.map(r=>e.jsx("li",{children:e.jsxs(X,{to:r.href,className:`${d.tools_link} ${a.startsWith(r.href)?d.tools_link_active:""}`,onClick:()=>i(r.id),children:[r.icon,r.label]})},r.id))})}),a.startsWith("/admin")&&e.jsxs("div",{className:d.content_right,children:[a.startsWith("/admin/settings")&&e.jsx(A_,{}),a.startsWith("/admin/users")&&e.jsx(Od,{}),a.startsWith("/admin/shops")&&e.jsx(Ld,{}),a.startsWith("/admin/product")&&e.jsx(U_,{}),a.startsWith("/admin/stock-product")&&e.jsx(Zd,{}),a.startsWith("/admin/website-product")&&e.jsx(Jd,{})]})]})]})})]})}export{ip as default};
