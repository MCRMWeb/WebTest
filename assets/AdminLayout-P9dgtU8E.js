import{j as t,f as T,r as x,g as V,d as pt,L as z,v as H,a as jt}from"./index-7WS4nBfv.js";import{C as D}from"./CustomIcon-By7wfQXi.js";import{s as F}from"./shop1Store-_i_uTScA.js";import{p as J,s as wt,c as Nt,a as Ct,H as It}from"./Header-BTrGzZg-.js";import{a as K}from"./addProductStore-g6chdQY1.js";import"./XMarkIcon-BdOORnjM.js";const yt="_wrapper_1biqw_1",Dt="_wrapper_title_1biqw_4",Wt="_content_1biqw_10",qt="_content_left_1biqw_16",$t="_content_right_1biqw_19",St="_tools_1biqw_45",Lt="_tools_link_1biqw_50",Ot="_tools_link_active_1biqw_63",At="_settings_1biqw_86",Pt="_settings_title_1biqw_89",zt="_settings_content_1biqw_94",Mt="_settings_content_top_1biqw_97",Et="_settings_content_buttons_1biqw_100",Tt="_settings_content_btn_1biqw_110",Bt="_settings_content_btn_cancel_1biqw_121",Vt="_settings_content_btn_save_1biqw_124",Ft="_settings_tools_1biqw_127",Rt="_settings_tools_link_1biqw_132",Ut="_settings_tools_link_active_1biqw_147",Ht="_wrapperModules_1biqw_152",Xt="_item_1biqw_159",Gt="_item_top_1biqw_164",Jt="_item_top_title_1biqw_175",Kt="_item_top_arrow_1biqw_179",Qt="_item_top_arrow_active_1biqw_187",Yt="_item_block_1biqw_190",Zt="_item_block_item_1biqw_201",te="_item_block_open_1biqw_204",ee="_item_onOff_1biqw_210",se="_item_delivery_1biqw_210",oe="_versions_block_1biqw_216",ne="_versions_block_top_1biqw_221",ie="_versions_block_top_title_1biqw_231",re="_versions_block_top_arrow_1biqw_236",_e="_versions_block_top_arrow_active_1biqw_245",ae="_versions_block_dropdown_1biqw_248",ce="_versions_block_dropdown_item_1biqw_259",le="_versions_block_dropdown_open_1biqw_270",de="_versions_block_onOff_1biqw_276",pe="_versions_block_delivery_1biqw_276",me="_categoriesDropDown_title_1biqw_282",he="_categoriesDropDown_item_1biqw_285",be="_categoriesDropDown_item_top_1biqw_290",ue="_categoriesDropDown_item_top_title_1biqw_301",ge="_categoriesDropDown_item_top_arrow_1biqw_305",ve="_categoriesDropDown_item_top_arrow_active_1biqw_312",xe="_categoriesDropDown_item_block_1biqw_315",ke="_categoriesDropDown_item_block_line_1biqw_324",fe="_categoriesDropDown_item_block_active_1biqw_336",je="_categoriesDropDown_item_block_open_1biqw_339",we="_categoriesDropDown_item_onOff_1biqw_344",Ne="_categoriesDropDown_item_delivery_1biqw_344",Ce="_products_buttons_1biqw_350",Ie="_products_btn_1biqw_356",ye="_products_btn_active_1biqw_367",De="_productItem_title_1biqw_372",We="_productItem_basePhoto_1biqw_377",qe="_productItem_photos_1biqw_383",$e="_productItem_photos_desc_1biqw_389",Se="_productItem_photo_1biqw_383",Le="_productItem_photo_img_1biqw_404",Oe="_productItem_photo_close_1biqw_415",Ae="_productItem_photo_active_1biqw_427",Pe="_productItem_add_1biqw_431",ze="_productItem_add_text_1biqw_439",Me="_productItem_settings_1biqw_444",Ee="_productItem_left_info_1biqw_448",Te="_productItem_left_item_1biqw_456",Be="_productItem_left_item_top_1biqw_460",Ve="_productItem_left_item_bottom_1biqw_481",Fe="_productItem_left_form_1biqw_494",Re="_productItem_left_form_label_1biqw_501",Ue="_productItem_left_form_title_1biqw_505",He="_productItem_left_form_input_1biqw_511",Xe="_productItem_left_form_textarea_1biqw_519",Ge="_productItem_left_form_size_1biqw_527",Je="_productItem_right_1biqw_535",Ke="_productItem_right_item_1biqw_542",Qe="_productItem_right_top_1biqw_547",Ye="_productItem_right_title_1biqw_554",Ze="_productItem_right_bottom_item_1biqw_560",ts="_productItem_right_bottom_row_1biqw_565",es="_productItem_right_bottom_del_1biqw_570",ss="_banner_nav_list_1biqw_579",os="_banner_nav_link_1biqw_585",ns="_banner_nav_link_active_1biqw_600",is="_addingWrapper_title_1biqw_605",rs="_addingWrapper_form_1biqw_610",_s="_addingWrapper_form_btn_1biqw_615",as="_addingWrapper_search_1biqw_631",cs="_addingWrapper_search_input_1biqw_637",ls="_addingWrapper_search_icon_1biqw_645",ds="_addingWrapper_table_1biqw_648",ps="_addingWrapper_thead_tr_1biqw_651",ms="_addingWrapper_thead_th_1biqw_654",hs="_addingWrapper_tbody_tr_1biqw_661",bs="_addingWrapper_tbody_td_1biqw_664",us="_addingWrapper_tbody_add_1biqw_677",gs="_modalCategory_1biqw_684",vs="_modalCategory_block_1biqw_693",xs="_modalCategory_nav_1biqw_699",ks="_modalCategory_nav_title_1biqw_706",fs="_modalCategory_content_1biqw_712",js="_modalCategory_content_message_1biqw_719",ws="_modalCategory_content_link_1biqw_727",Ns="_modalCategory_content_link_active_1biqw_755",Cs="_modalCategory_content_item_1biqw_765",Is="_modalCategory_content_block_1biqw_787",ys="_modalCategory_content_block_title_1biqw_791",Ds="_errorWrapper_1biqw_798",Ws="_errorWrapper_block_1biqw_807",qs="_errorWrapper_block_close_1biqw_817",$s="_layout_title_1biqw_828",Ss="_layout_buttons_1biqw_833",Ls="_layout_btn_1biqw_839",Os="_layout_btn_active_1biqw_853",e={wrapper:yt,wrapper_title:Dt,content:Wt,content_left:qt,content_right:$t,tools:St,tools_link:Lt,tools_link_active:Ot,settings:At,settings_title:Pt,settings_content:zt,settings_content_top:Mt,settings_content_buttons:Et,settings_content_btn:Tt,settings_content_btn_cancel:Bt,settings_content_btn_save:Vt,settings_tools:Ft,settings_tools_link:Rt,settings_tools_link_active:Ut,wrapperModules:Ht,item:Xt,item_top:Gt,item_top_title:Jt,item_top_arrow:Kt,item_top_arrow_active:Qt,item_block:Yt,item_block_item:Zt,item_block_open:te,item_onOff:ee,item_delivery:se,versions_block:oe,versions_block_top:ne,versions_block_top_title:ie,versions_block_top_arrow:re,versions_block_top_arrow_active:_e,versions_block_dropdown:ae,versions_block_dropdown_item:ce,versions_block_dropdown_open:le,versions_block_onOff:de,versions_block_delivery:pe,categoriesDropDown_title:me,categoriesDropDown_item:he,categoriesDropDown_item_top:be,categoriesDropDown_item_top_title:ue,categoriesDropDown_item_top_arrow:ge,categoriesDropDown_item_top_arrow_active:ve,categoriesDropDown_item_block:xe,categoriesDropDown_item_block_line:ke,categoriesDropDown_item_block_active:fe,categoriesDropDown_item_block_open:je,categoriesDropDown_item_onOff:we,categoriesDropDown_item_delivery:Ne,products_buttons:Ce,products_btn:Ie,products_btn_active:ye,productItem_title:De,productItem_basePhoto:We,productItem_photos:qe,productItem_photos_desc:$e,productItem_photo:Se,productItem_photo_img:Le,productItem_photo_close:Oe,productItem_photo_active:Ae,productItem_add:Pe,productItem_add_text:ze,productItem_settings:Me,productItem_left_info:Ee,productItem_left_item:Te,productItem_left_item_top:Be,productItem_left_item_bottom:Ve,productItem_left_form:Fe,productItem_left_form_label:Re,productItem_left_form_title:Ue,productItem_left_form_input:He,productItem_left_form_textarea:Xe,productItem_left_form_size:Ge,productItem_right:Je,productItem_right_item:Ke,productItem_right_top:Qe,productItem_right_title:Ye,productItem_right_bottom_item:Ze,productItem_right_bottom_row:ts,productItem_right_bottom_del:es,banner_nav_list:ss,banner_nav_link:os,banner_nav_link_active:ns,addingWrapper_title:is,addingWrapper_form:rs,addingWrapper_form_btn:_s,addingWrapper_search:as,addingWrapper_search_input:cs,addingWrapper_search_icon:ls,addingWrapper_table:ds,addingWrapper_thead_tr:ps,addingWrapper_thead_th:ms,addingWrapper_tbody_tr:hs,addingWrapper_tbody_td:bs,addingWrapper_tbody_add:us,modalCategory:gs,modalCategory_block:vs,modalCategory_nav:xs,modalCategory_nav_title:ks,modalCategory_content:fs,modalCategory_content_message:js,modalCategory_content_link:ws,modalCategory_content_link_active:Ns,modalCategory_content_item:Cs,modalCategory_content_block:Is,modalCategory_content_block_title:ys,errorWrapper:Ds,errorWrapper_block:Ws,errorWrapper_block_close:qs,layout_title:$s,layout_buttons:Ss,layout_btn:Ls,layout_btn_active:Os};function U({width:i=78,color:o="white",backgroundOn:_="rgba(137, 250, 135, 1)",backgroundOff:n="rgba(193, 193, 193, 1)",speed:a=500,scale:s=1.1,status:r=!1}){const c={width:`${i}px`,height:`${i/2-i/20}px`,background:r?_:n,borderRadius:`${i/2}px`,display:"flex",alignItems:"center",transition:`${a}ms`,cursor:"pointer"},m={background:`${o}`,height:`${i/2-i/20}px`,width:`${i/2-i/20}px`,border:`${i/25}px solid ${r?_:n}`,borderRadius:"50%",transition:`${a}ms`,transform:`scale(${s}) translateX(${r?"110%":"0"})`};return t.jsx("div",{style:c,children:t.jsx("div",{style:m})})}const As="_versions_1wna8_1",Ps="_versions_block_1wna8_6",zs="_versions_block_top_1wna8_11",Ms="_versions_block_top_title_1wna8_21",Es="_versions_block_top_arrow_1wna8_25",Ts="_versions_block_top_arrow_active_1wna8_34",Bs="_versions_block_dropdown_1wna8_37",Vs="_versions_block_dropdown_item_1wna8_49",Fs="_versions_block_dropdown_open_1wna8_60",Rs="_versions_block_onOff_1wna8_66",Us="_versions_block_delivery_1wna8_66",Hs="_versions2_1wna8_72",Xs="_versions2_block_1wna8_77",Gs="_versions2_block_top_1wna8_82",Js="_versions2_block_top_title_1wna8_92",Ks="_versions2_block_top_arrow_1wna8_96",Qs="_versions2_block_top_arrow_active_1wna8_105",Ys="_versions2_block_dropdown_1wna8_108",Zs="_versions2_block_dropdown_item_1wna8_119",to="_versions2_block_dropdown_open_1wna8_130",eo="_versions2_block_onOff_1wna8_136",so="_versions2_block_delivery_1wna8_136",oo="_version3_1wna8_142",no="_version3_title_1wna8_147",io="_version3_block_1wna8_153",ro="_version3_block_top_1wna8_158",_o="_version3_block_top_title_1wna8_168",ao="_version3_block_top_arrow_1wna8_172",co="_version3_block_top_arrow_active_1wna8_181",lo="_version3_block_dropdown_1wna8_184",po="_version3_block_dropdown_item_1wna8_195",mo="_version3_block_dropdown_open_1wna8_206",ho="_version3_block_onOff_1wna8_212",bo="_version3_block_delivery_1wna8_212",B={versions:As,versions_block:Ps,versions_block_top:zs,versions_block_top_title:Ms,versions_block_top_arrow:Es,versions_block_top_arrow_active:Ts,versions_block_dropdown:Bs,versions_block_dropdown_item:Vs,versions_block_dropdown_open:Fs,versions_block_onOff:Rs,versions_block_delivery:Us,versions2:Hs,versions2_block:Xs,versions2_block_top:Gs,versions2_block_top_title:Js,versions2_block_top_arrow:Ks,versions2_block_top_arrow_active:Qs,versions2_block_dropdown:Ys,versions2_block_dropdown_item:Zs,versions2_block_dropdown_open:to,versions2_block_onOff:eo,versions2_block_delivery:so,version3:oo,version3_title:no,version3_block:io,version3_block_top:ro,version3_block_top_title:_o,version3_block_top_arrow:ao,version3_block_top_arrow_active:co,version3_block_dropdown:lo,version3_block_dropdown_item:po,version3_block_dropdown_open:mo,version3_block_onOff:ho,version3_block_delivery:bo};function rt({color:i="black",title:o="",versionList:_=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:n,openBlock:a,currentVersion:s,setOpenBlock:r,setCurrentVersion:c,setVersionList:m}){const w=h=>{c(h.title);const g=_.map(N=>({id:N.id,title:N.title,isActive:!1})),y=g.find(N=>N.id==h.id),I=g.findIndex(N=>N.id==h.id);y&&(y.isActive=!0,g.splice(I,1,y),m(g))};return t.jsxs("div",{className:n??B.versions,children:[t.jsx("span",{children:o}),t.jsxs("div",{className:B.versions_block,children:[t.jsxs("div",{className:B.versions_block_top,children:[t.jsx("h2",{className:B.versions_block_top_title,style:{color:i},children:s}),t.jsx("button",{className:B.versions_block_top_btn,onClick:()=>r(!a),children:t.jsx("div",{className:`${B.versions_block_top_arrow} ${a?B.versions_block_top_arrow_active:""}`,children:t.jsx(D,{name:"ChevronDownIcon",width:15})})})]}),t.jsx("div",{className:`${B.versions_block_dropdown} ${a?B.versions_block_dropdown_open:""}`,children:_.map(h=>t.jsx("span",{className:B.versions_block_dropdown_item,onClick:()=>w(h),children:h.title},h.id))})]})]})}function uo(){const{modulesCashRegisterStatus:i,deliveryStatus:o,cashRegisterVersionList:_,cashRegisterCurrentVersion:n,openBlockCashRegister:a,openBlockCashRegisterVersion:s,openBlockCart:r,cartVersionList:c,modulesCartStatus:m,cartCurrentVersion:w,openBlockCartVersion:h,setCartVersionList:g,setCartCurrentVersion:y,setModulesCartStatus:I,setOpenBlockCart:N,setOpenBlockCartVersion:W,setDeliveryStatus:q,setOpenBlockCashRegister:A,setCashRegisterVersionList:$,setModulesCashRegisterStatus:M,setCashRegisterCurrentVersion:E,setOpenBlockCashRegisterVersion:O}=T(),u=()=>{N(!r)},d=()=>{A(!a)};return t.jsxs("div",{className:e.wrapperModules,children:[t.jsxs("div",{className:e.item,children:[t.jsxs("div",{className:e.item_top,onClick:()=>u(),children:[t.jsx("h2",{className:e.item_top_title,children:"Корзина"}),t.jsx("button",{className:e.item_top_btn,onClick:()=>u(),children:t.jsx("div",{className:`${e.item_top_arrow} ${r?e.item_top_arrow_active:""}`,children:t.jsx(D,{name:"ChevronDownIcon",width:15})})})]}),t.jsxs("div",{className:`${e.item_block} ${r?e.item_block_open:""}`,children:[t.jsxs("div",{className:e.item_onOff,children:[t.jsx("span",{children:"Выкл / Вкл"}),t.jsx("div",{className:e.item_shell,onClick:()=>I(!m),children:t.jsx(U,{status:m,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),t.jsx(rt,{color:"rgb(137, 250, 135)",openBlock:h,setOpenBlock:W,title:"Выберите версию",versionList:c,currentVersion:w,setCurrentVersion:y,setVersionList:g}),t.jsxs("div",{className:e.item_delivery,children:[t.jsx("span",{children:"Доставка"}),t.jsx("div",{className:e.item_shell,onClick:()=>q(!o),children:t.jsx(U,{status:o,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),t.jsxs("div",{className:e.item,children:[t.jsxs("div",{className:e.item_top,onClick:()=>d(),children:[t.jsx("h2",{className:e.item_top_title,children:"Кacca"}),t.jsx("button",{className:e.item_top_btn,onClick:()=>d(),children:t.jsx("div",{className:`${e.item_top_arrow} ${a?e.item_top_arrow_active:""}`,children:t.jsx(D,{name:"ChevronDownIcon",width:15})})})]}),t.jsxs("div",{className:`${e.item_block} ${a?e.item_block_open:""}`,children:[t.jsxs("div",{className:e.item_onOff,children:[t.jsx("span",{children:"Выкл / Вкл"}),t.jsx("div",{className:e.item_shell,onClick:()=>M(!i),children:t.jsx(U,{status:i,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),t.jsx(rt,{color:"rgb(137, 250, 135)",openBlock:s,setOpenBlock:O,title:"Выберите версию",versionList:_,currentVersion:n,setCurrentVersion:E,setVersionList:$})]})]})]})}function go(){const{templates:i,setTemplates:o}=T(),[_,n]=x.useState([...i]);x.useEffect(()=>{n([...i])},[i]);const a=c=>{const m=_.map(w=>w.id===c?{...w,open:!w.open}:w);n(m)},s=(c,m)=>{const w=_.map(h=>h.id===c?{...h,isActive:!0,templateThemes:h.templateThemes.map(g=>g.id===m?{...g,isActive:!0}:{...g,isActive:!1})}:{...h,isActive:!1,templateThemes:h.templateThemes.map(g=>({...g,isActive:!1}))});n(w)};function r(){o(_)}return t.jsxs("div",{className:e.wrapperModules,children:[_.map(c=>t.jsxs("div",{className:e.item,children:[t.jsxs("div",{className:e.item_top,onClick:()=>a(c.id),children:[t.jsx("h2",{className:e.item_top_title,children:c.title}),t.jsx("button",{className:e.item_top_btn,onClick:()=>a(c.id),children:t.jsx("div",{className:`${e.item_top_arrow} ${c.open?e.item_top_arrow_active:""}`,children:t.jsx(D,{name:"ChevronDownIcon",width:15})})})]}),t.jsx("div",{className:`${e.item_block} ${c.open?e.item_block_open:""}`,children:c.templateThemes.map(m=>t.jsxs("div",{className:e.item_onOff,children:[t.jsx("span",{children:m.title}),t.jsx("div",{className:e.item_shell,onClick:()=>s(c.id,m.id),children:t.jsx(U,{status:m.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},m.id))})]},c.id)),t.jsxs("div",{className:e.settings_content_buttons,children:[t.jsx("button",{className:`${e.settings_content_btn} ${e.settings_content_btn_cancel}`,children:"Отмена"}),t.jsx("button",{className:`${e.settings_content_btn} ${e.settings_content_btn_save}`,onClick:()=>r(),children:"Сохранить"})]})]})}function vo(){const{currentCategory:i,categoriesStatus:o,categories:_,setCategoriesStatus:n,setCurrentCategory:a}=T();return t.jsxs("div",{className:e.categoriesDropDown,children:[t.jsx("h2",{className:e.categoriesDropDown_title,children:"Настройки каталога"}),t.jsxs("div",{className:e.categoriesDropDown_item,children:[t.jsxs("div",{className:e.categoriesDropDown_item_top,onClick:()=>n(!o),children:[t.jsx("h2",{className:e.categoriesDropDown_item_top_title,children:i}),t.jsx("button",{className:e.categoriesDropDown_item_top_btn,onClick:()=>n(!o),children:t.jsx("div",{className:`${e.categoriesDropDown_item_top_arrow} ${o?e.categoriesDropDown_item_top_arrow_active:""}`,children:t.jsx(D,{name:"ChevronDownIcon",width:15})})})]}),t.jsx("div",{className:`${e.categoriesDropDown_item_block} ${o?e.categoriesDropDown_item_block_open:""}`,children:_.map(s=>t.jsx("div",{className:`${e.categoriesDropDown_item_block_line} ${s.title==i?e.categoriesDropDown_item_block_active:""}`,onClick:()=>a(s.title),children:s.title},s.id))})]})]})}function xo(){return t.jsx("div",{children:"Contacts"})}const ko=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Контакты",href:"/admin/settings/contacts"}];function fo(){const o=V().pathname;return console.log("pathname settings",o),pt(),T(),t.jsx("div",{className:e.settings,children:t.jsxs("div",{className:e.settings_content,children:[t.jsx("div",{className:e.settings_content_top,children:t.jsx("ul",{className:e.settings_tools,children:ko.map(_=>t.jsx("li",{children:t.jsx(z,{to:_.href,className:`${e.settings_tools_link} ${o.startsWith(_.href)?e.settings_tools_link_active:""}`,children:_.label})},_.id))})}),o=="/admin/settings/modules"&&t.jsx(uo,{}),o=="/admin/settings/templates"&&t.jsx(go,{}),o=="/admin/settings/categories"&&t.jsx(vo,{}),o=="/admin/settings/contacts"&&t.jsx(xo,{})]})})}const _t=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function jo(){const{shop1Products:i}=F(),{setProductItem:o}=J(),[_,n]=x.useState(""),[a,s]=x.useState([]);return x.useEffect(()=>{const r=_?i.filter(c=>{var m;return(m=c.crmNameProduct)==null?void 0:m.toLowerCase().trim().includes(_.toLowerCase().trim())}):[];s(r)},[_]),t.jsxs("div",{className:e.addingWrapper,children:[t.jsxs("form",{action:"",className:e.addingWrapper_form,children:[t.jsxs("div",{className:e.addingWrapper_search,children:[t.jsx("input",{type:"text",className:e.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>n(r.target.value),value:_}),t.jsx(D,{className:e.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),t.jsx("button",{className:e.addingWrapper_form_btn,children:"Найти"})]}),t.jsxs("table",{className:e.addingWrapper_table,children:[t.jsx("thead",{className:e.addingWrapper_thead,children:t.jsx("tr",{className:e.addingWrapper_thead_tr,children:_t.map(r=>t.jsx("th",{className:e.addingWrapper_thead_th,children:r.title},r.id))})}),t.jsx("tbody",{className:e.addingWrapper_tbody,children:a==null?void 0:a.map(r=>t.jsxs("tr",{className:e.addingWrapper_tbody_tr,children:[_t.map(c=>t.jsxs("td",{className:e.addingWrapper_tbody_td,children:[c.title=="Наименование"?t.jsx("span",{children:r.crmNameProduct}):"",c.title=="Штрих-код"?t.jsx("span",{children:r.mxikCode}):"",c.title=="Статус"?t.jsx("span",{children:"Статус"}):""]},c.id)),t.jsx("td",{className:e.addingWrapper_tbody_td,children:t.jsx(z,{to:"/admin/item-product",className:e.addingWrapper_tbody_add,onClick:()=>o(`stock-${r.mxikCode}`),children:"Добавить"})})]},r==null?void 0:r.mxikCode))})]})]})}const at=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function wo(){const{websiteProducts:i}=F(),{setProductItem:o}=J(),[_,n]=x.useState(""),[a,s]=x.useState([]);return x.useEffect(()=>{const r=_?i.filter(c=>{var m;return(m=c.crmNameProduct)==null?void 0:m.toLowerCase().trim().includes(_.toLowerCase().trim())}):[];s(r)},[_]),t.jsxs("div",{className:e.addingWrapper,children:[t.jsxs("form",{action:"",className:e.addingWrapper_form,children:[t.jsxs("div",{className:e.addingWrapper_search,children:[t.jsx("input",{type:"text",className:e.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>n(r.target.value),value:_}),t.jsx(D,{className:e.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),t.jsx("button",{className:e.addingWrapper_form_btn,children:"Найти"})]}),t.jsxs("table",{className:e.addingWrapper_table,children:[t.jsx("thead",{className:e.addingWrapper_thead,children:t.jsx("tr",{className:e.addingWrapper_thead_tr,children:at.map(r=>t.jsx("th",{className:e.addingWrapper_thead_th,children:r.title},r.id))})}),t.jsx("tbody",{className:e.addingWrapper_tbody,children:a==null?void 0:a.map(r=>t.jsxs("tr",{className:e.addingWrapper_tbody_tr,children:[at.map(c=>t.jsxs("td",{className:e.addingWrapper_tbody_td,children:[c.title=="Наименование"?t.jsx("span",{children:r.crmNameProduct}):"",c.title=="Штрих-код"?t.jsx("span",{children:r.mxikCode}):"",c.title=="Статус"?t.jsx("span",{children:"Статус"}):""]},c.id)),t.jsx("td",{className:e.addingWrapper_tbody_td,children:t.jsx(z,{to:"/admin/item-product",className:e.addingWrapper_tbody_add,onClick:()=>o(`website-${r.mxikCode}`),children:"Добавить"})})]},r==null?void 0:r.mxikCode))})]})]})}const No=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function Co(){const o=V().pathname;return t.jsxs("div",{className:e.products,children:[t.jsx("div",{className:e.products_buttons,children:No.map(_=>t.jsx(z,{to:_.href,className:`${e.products_btn} ${_.href==o?e.products_btn_active:""}`,children:_.title},_.id))}),o=="/admin/product/adding/stock"&&t.jsx(jo,{}),o=="/admin/product/adding/website"&&t.jsx(wo,{})]})}const Io=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function yo(){const o=V().pathname;return t.jsxs("div",{className:e.products,children:[t.jsx("div",{className:e.products_buttons,children:Io.map(_=>t.jsx(z,{to:_.href,className:`${e.products_btn} ${o.startsWith(`${_.href}`)||o.startsWith("/admin/product-item")?e.products_btn_active:""}`,children:_.title},_.id))}),o.startsWith("/admin/product/adding")&&t.jsx(Co,{})]})}const Do="_user_title_1uizv_1",Wo="_user_list_1uizv_6",qo="_user_list_link_1uizv_12",$o="_user_list_link_active_1uizv_26",So="_user_form_1uizv_30",Lo="_user_form_btn_1uizv_35",Oo="_user_form_wrap_1uizv_51",Ao="_user_form_input_1uizv_57",Po="_user_form_icon_1uizv_65",zo="_user_table_1uizv_68",Mo="_user_table_tbody_1uizv_71",Eo="_user_table_tr_1uizv_74",To="_user_table_th_1uizv_77",Bo="_user_table_td_1uizv_85",Vo="_user_table_btns_1uizv_89",Fo="_user_table_btn_1uizv_89",Ro="_user_table_btn_blocked_1uizv_107",Uo="_modal_1uizv_111",Ho="_modal_active_1uizv_120",Xo="_modal_wrap_1uizv_123",Go="_modal_wrap_header_1uizv_131",Jo="_modal_wrap_stores_1uizv_143",Ko="_modal_wrap_stores_text_1uizv_165",Qo="_modal_btns_1uizv_169",Yo="_modal_btn_1uizv_169",Zo="_modal_content_1uizv_193",tn="_modal_content_text_1uizv_197",en="_versions_1uizv_206",sn="_versions_block_1uizv_211",on="_versions_block_top_1uizv_216",nn="_versions_block_top_title_1uizv_226",rn="_versions_block_top_arrow_1uizv_230",_n="_versions_block_top_arrow_active_1uizv_239",an="_versions_block_dropdown_1uizv_242",cn="_versions_block_dropdown_item_1uizv_257",ln="_versions_block_dropdown_open_1uizv_268",dn="_shop_header_1uizv_275",pn="_shop_header_title_1uizv_282",p={user_title:Do,user_list:Wo,user_list_link:qo,user_list_link_active:$o,user_form:So,user_form_btn:Lo,user_form_wrap:Oo,user_form_input:Ao,user_form_icon:Po,user_table:zo,user_table_tbody:Mo,user_table_tr:Eo,user_table_th:To,user_table_td:Bo,user_table_btns:Vo,user_table_btn:Fo,user_table_btn_blocked:Ro,modal:Uo,modal_active:Ho,modal_wrap:Xo,modal_wrap_header:Go,modal_wrap_stores:Jo,modal_wrap_stores_text:Ko,modal_btns:Qo,modal_btn:Yo,modal_content:Zo,modal_content_text:tn,versions:en,versions_block:sn,versions_block_top:on,versions_block_top_title:nn,versions_block_top_arrow:rn,versions_block_top_arrow_active:_n,versions_block_dropdown:an,versions_block_dropdown_item:cn,versions_block_dropdown_open:ln,shop_header:dn,shop_header_title:pn},Q=({headers:i})=>t.jsx("thead",{className:p.user_table_thead,children:t.jsx("tr",{className:p.user_table_tr,children:i.map(o=>t.jsx("th",{className:p.user_table_th,children:o.title},o.id))})}),Y=()=>{const[i,o]=x.useState(""),{setUserSearch:_}=T(),n=a=>{a.preventDefault(),_(i)};return x.useEffect(()=>{i==""&&_("")},[i]),t.jsxs("form",{action:"",className:p.user_form,children:[t.jsxs("div",{className:p.user_form_wrap,children:[t.jsx("input",{type:"text",className:p.user_form_input,placeholder:"Поиск пользователей",onChange:a=>o(a.target.value),value:i}),t.jsx(D,{className:p.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),t.jsx("button",{className:p.user_form_btn,onClick:a=>n(a),children:"Найти"})]})},Z=({arr:i,showStore:o})=>{const{usersList:_,userSearch:n,openModalAdmin:a,openAppointUser:s,shopListAdmin:r,setOpenAppointUser:c,setOpenModalAdmin:m,setUsersList:w,setEditUserAdmin:h,setShopListDropdownAdmin:g,setCloseBlock:y,setFilteredShopListAdmin:I}=T(),W=V().pathname,[q,A]=x.useState([]);x.useEffect(()=>{let u=i;W==="/clients"?u=i.filter(d=>d.isUser):W==="/employees"&&(u=i.filter(d=>!d.isUser)),u=u==null?void 0:u.filter(d=>d.name.toLowerCase().includes(n.toLowerCase())),A(u)},[n,_,i,W]);const $=u=>{const d=_.map(l=>l.id===u?{...l,isBlocked:!l.isBlocked}:l);w(d)},M=u=>{m(!0),y(!0);const d=_.find(C=>C.id==u),l=[{id:H(),title:"Магазин 1",order:1},{id:H(),title:"Магазин 2",order:2},{id:H(),title:"Магазин 3",order:3}],b=l.filter(C=>!(d!=null&&d.shopList.some(S=>S.title===C.title)));console.log("editUser",d),console.log("shopListAdminArr",l),d&&(g(d.shopList),h(d),I(b))},E=u=>{c(!0),y(!0),g([]),I(r);const d=_.find(l=>l.id==u);d&&h(d)},O=a||s;return t.jsx(t.Fragment,{children:t.jsx("tbody",{className:p.user_table_tbody,children:q.map(u=>t.jsxs("tr",{children:[t.jsx("td",{className:p.user_table_td,children:u.name}),t.jsx("td",{className:p.user_table_td,children:o?u.shopList.map(d=>t.jsxs("p",{children:[d.title," ",`(${d.position})`]},d.id)):t.jsx("p",{children:u.isEmployes?"сотрудник":"пользователь"})}),t.jsx("td",{className:p.user_table_td,children:o?"Админ 1":u.registerDate}),t.jsx("td",{className:p.user_table_btns,children:u!=null&&u.isUser?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:`${p.user_table_btn} ${u.isBlocked?p.user_table_btn_blocked:""}`,onClick:()=>$(u.id),children:u.isBlocked?"Разблокировать":"Заблокировать"}),t.jsx("button",{className:p.user_table_btn,onClick:()=>E(u.id),disabled:O,children:"Назначить"})]}):t.jsx("button",{className:p.user_table_btn,onClick:()=>M(u.id),style:{background:"#B5FFC7"},disabled:O,children:"Изменить"})})]},u.id))})})};function ct({color:i="black",className:o,header:_,isEnabled:n,dropdownItem:a,margin:s,versionList:r,closeBlock:c}){const{shopListAdmin:m,shopListDropdownAdmin:w,filteredShopListAdmin:h,setShopListDropdownAdmin:g,setShopListAdmin:y}=T(),[I,N]=x.useState("Выберете должность"),[W,q]=x.useState("Выберете магазин"),[A,$]=x.useState(!1);x.useEffect(()=>{a!=null&&a.position?N(a.position):N("Выберете должность")},[a==null?void 0:a.position]),x.useEffect(()=>{c||$(!1)},[c]);const M=(d,l)=>{if(a){N(d.title);const b=w.filter(S=>S.title==a.title),C=w.findIndex(S=>S.title==a.title);b[0].position=d.title,w.splice(C,1,b[0]),g(w)}else q(d.title);if(n&&!w.some(b=>b.title==d.title)){N("Выберете должность");const b={...d,originalIndex:l};g([...w,b]),y(h.filter((C,S)=>S!==l))}$(!1)},E=d=>{const l=w.filter(b=>b.id!==d.id);if(g(l),d.originalIndex!==void 0){const b=[...m];b.splice(d.originalIndex,0,d),y(b)}else{const b=[...h,d].sort((C,S)=>C.order-S.order);y(b),console.log("arr",b)}},O=()=>{$(!A)};function u(d,l){return d.order>l.order?1:-1}return t.jsx("div",{className:o??p.versions,style:{marginBottom:s},children:t.jsxs("div",{className:p.versions_block,children:[_&&t.jsxs("div",{className:p.shop_header,children:[t.jsx("p",{className:p.shop_header_title,children:a==null?void 0:a.title}),t.jsx("button",{onClick:()=>a&&E(a),children:t.jsx(D,{name:"XMarkIcon",width:16})})]}),t.jsxs("div",{className:p.versions_block_top,children:[t.jsx("h2",{className:p.versions_block_top_title,style:{color:i},children:a?I:W}),t.jsx("button",{className:p.versions_block_top_btn,onClick:()=>O(),children:t.jsx("div",{className:`${p.versions_block_top_arrow} ${A?p.versions_block_top_arrow_active:""}`,children:t.jsx(D,{name:"ChevronDownIcon",width:15})})})]}),t.jsx("div",{className:`${p.versions_block_dropdown} ${A?p.versions_block_dropdown_open:""}`,children:r==null?void 0:r.sort(u).map((d,l)=>t.jsx("span",{className:p.versions_block_dropdown_item,onClick:()=>M(d,l),children:d.title},l))})]})})}const tt=()=>{const{currentShopModal:i,shopListDropdownAdmin:o,shopListPositionAdmin:_,isEnabled:n,openModalAdmin:a,editUserAdmin:s,shopListAdmin:r,usersList:c,openAppointUser:m,closeBlock:w,filteredShopListAdmin:h,setCurrentShopModal:g,setShopListPositionAdmin:y,setCurrentShopPosition:I,setOpenModalAdmin:N,setShopListAdmin:W,setUsersList:q,setOpenAppointUser:A,setCloseBlock:$,setFilteredShopListAdmin:M}=T();x.useEffect(()=>{},[h]);const E=()=>{const b=c.findIndex(C=>C.id==(s==null?void 0:s.id));s&&o.every(C=>"position"in C)&&(s.shopList=o,c.splice(b,1,s),q(c),W(r),console.log("filteredShopListAdmin",h)),console.log("shopListAdmin",r),d(),o.length==0&&O()},O=()=>{if(s){s.isUser=!0,s.isEmployes=!1,s.shopList=[];const b={id:H(),title:"",position:"пользователь"};s.shopList=[{...b}]}d()},u=()=>{const b=c.findIndex(C=>C.id==(s==null?void 0:s.id));if(s&&(s.shopList=o,c.splice(b,1,s),s.isUser=!1,s.isEmployes=!0,q(c),A(!1),!(s!=null&&s.shopList.some(C=>"position"in C)))){s.isUser=!0,s.shopList=[];const C={id:H(),title:"",position:"пользователь"};s.shopList=[{...C}]}},d=()=>{W(r),M([]),N(!1),A(!1),$(!1),console.log("close modal")},l=x.useRef(null);return x.useEffect(()=>{const b=C=>{var S;l.current&&!((S=l==null?void 0:l.current)!=null&&S.contains(C.target))&&d()};return a||m?document.addEventListener("mousedown",b):document.removeEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[a,m]),t.jsx("div",{className:`${p.modal} ${a?p.modal_active:""} ${m?p.modal_active:""}`,children:t.jsxs("div",{ref:l,className:p.modal_wrap,children:[t.jsxs("div",{className:p.modal_wrap_header,children:[t.jsx("h3",{children:"Редактирование должность"}),t.jsx("button",{onClick:()=>d(),children:t.jsx(D,{name:"XMarkIcon",width:24})})]}),t.jsxs("div",{className:p.modal_content,children:[t.jsxs("p",{className:p.modal_content_text,children:["Логин: ",s==null?void 0:s.name]}),t.jsxs("p",{className:p.modal_content_text,children:["Статус:",s==null?void 0:s.shopList.map(b=>t.jsx("span",{children:b.position},b.id))]}),t.jsx(ct,{color:"#717171",setVersionList:W,currentVersion:i,setCurrentVersion:g,isEnabled:n,versionList:h||r,closeBlock:w}),t.jsxs("div",{className:p.modal_wrap_stores,children:[t.jsx("p",{className:p.modal_wrap_stores_text,children:"Выбрано магазинов: "}),o==null?void 0:o.map((b,C)=>t.jsx(ct,{dropdownItem:b,margin:"12px",color:"#717171",versionList:_,setVersionList:y,setCurrentVersion:I,header:!0,closeBlock:w},C))]}),t.jsx("div",{className:p.modal_btns,children:m?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:p.modal_btn,onClick:()=>d(),style:{background:"#fff"},children:"Отмена"}),t.jsx("button",{className:p.modal_btn,onClick:()=>u(),children:"Сохранить"})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:p.modal_btn,onClick:()=>O(),children:"Уволить"}),t.jsx("button",{className:p.modal_btn,onClick:()=>E(),children:"Сохранить"})]})})]})]})})},mn=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],hn=()=>{const{usersList:i}=T();return t.jsxs(t.Fragment,{children:[t.jsx(Y,{}),t.jsxs("table",{className:p.user_table,children:[t.jsx(Q,{headers:mn}),t.jsx(Z,{arr:i})]}),t.jsx(tt,{})]})},bn=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],un=()=>{const{usersList:i}=T(),o=i.filter(_=>_.isUser==!0);return t.jsxs(t.Fragment,{children:[t.jsx(Y,{}),t.jsxs("table",{className:p.user_table,children:[t.jsx(Q,{headers:bn}),t.jsx(Z,{arr:o})]}),t.jsx(tt,{})]})},gn=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],vn=()=>{const{usersList:i}=T(),o=i.filter(_=>_.isUser!==!0);return t.jsxs(t.Fragment,{children:[t.jsx(Y,{}),t.jsxs("table",{className:p.user_table,children:[t.jsx(Q,{headers:gn}),t.jsx(Z,{arr:o,showStore:!0})]}),t.jsx(tt,{})]})},xn=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],kn=()=>{const o=V().pathname;return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:p.users,children:t.jsxs("div",{className:p.users_header,children:[t.jsx("h2",{className:p.user_title,children:"Пользователи"}),t.jsx("ul",{className:p.user_list,children:xn.map(_=>t.jsx("li",{children:t.jsx(z,{className:`${p.user_list_link} ${o==_.href?p.user_list_link_active:""}`,to:_.href,children:_.title})},_.id))})]})}),t.jsxs("div",{children:[o=="/admin/users/all"&&t.jsx(hn,{}),o=="/admin/users/clients"&&t.jsx(un,{}),o=="/admin/users/employees"&&t.jsx(vn,{})]})]})},lt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function fn(){const{shop1Products:i}=F(),[o,_]=x.useState(""),[n,a]=x.useState([]);return x.useEffect(()=>{const s=o?i.filter(r=>{var c;return(c=r.crmNameProduct)==null?void 0:c.toLowerCase().trim().includes(o.toLowerCase().trim())}):i;a(s)},[o]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:e.addingWrapper,children:[t.jsxs("h2",{className:e.addingWrapper_title,children:["Всего товара: ",n.length]}),t.jsxs("form",{action:"",className:e.addingWrapper_form,children:[t.jsxs("div",{className:e.addingWrapper_search,children:[t.jsx("input",{type:"text",className:e.addingWrapper_search_input,placeholder:"Поиск товара",onChange:s=>_(s.target.value),value:o}),t.jsx(D,{className:e.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),t.jsx("button",{className:e.addingWrapper_form_btn,children:"Найти"})]}),t.jsxs("table",{className:e.addingWrapper_table,children:[t.jsx("thead",{className:e.addingWrapper_thead,children:t.jsx("tr",{className:e.addingWrapper_thead_tr,children:lt.map(s=>t.jsx("th",{className:e.addingWrapper_thead_th,children:s.title},s.id))})}),t.jsx("tbody",{className:e.addingWrapper_tbody,children:n==null?void 0:n.map(s=>t.jsx("tr",{className:e.addingWrapper_tbody_tr,children:lt.map(r=>{var c,m;return t.jsxs("td",{className:e.addingWrapper_tbody_td,children:[r.title=="Наименование"?t.jsx("span",{children:s.crmNameProduct}):"",r.title=="Штрих-код"?t.jsx("span",{children:s.mxikCode}):"",r.title=="Фото"?t.jsx("span",{children:((c=s==null?void 0:s.crmImages)==null?void 0:c[0])&&t.jsx("img",{src:(m=s==null?void 0:s.crmImages)!=null&&m[0]?s.crmImages[0].src:"/add.webp",width:50,height:50,alt:"img"})}):""]},r.id)})},s==null?void 0:s.mxikCode))})]})]})})}const dt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function jn(){const{websiteProducts:i}=F(),[o,_]=x.useState(""),[n,a]=x.useState([]);return x.useEffect(()=>{const s=o?i.filter(r=>{var c;return(c=r.crmNameProduct)==null?void 0:c.toLowerCase().trim().includes(o.toLowerCase().trim())}):i;a(s)},[o]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:e.addingWrapper,children:[t.jsxs("h2",{className:e.addingWrapper_title,children:["Всего товара: ",n.length]}),t.jsxs("form",{action:"",className:e.addingWrapper_form,children:[t.jsxs("div",{className:e.addingWrapper_search,children:[t.jsx("input",{type:"text",className:e.addingWrapper_search_input,placeholder:"Поиск товара",onChange:s=>_(s.target.value),value:o}),t.jsx(D,{className:e.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),t.jsx("button",{className:e.addingWrapper_form_btn,children:"Найти"})]}),t.jsxs("table",{className:e.addingWrapper_table,children:[t.jsx("thead",{className:e.addingWrapper_thead,children:t.jsx("tr",{className:e.addingWrapper_thead_tr,children:dt.map(s=>t.jsx("th",{className:e.addingWrapper_thead_th,children:s.title},s.id))})}),t.jsx("tbody",{className:e.addingWrapper_tbody,children:n==null?void 0:n.map(s=>t.jsx("tr",{className:e.addingWrapper_tbody_tr,children:dt.map(r=>t.jsxs("td",{className:e.addingWrapper_tbody_td,children:[r.title=="Наименование"?t.jsx("span",{children:s.crmNameProduct}):"",r.title=="Штрих-код"?t.jsx("span",{children:s.mxikCode}):"",r.title=="Фото"?t.jsx("span",{children:t.jsx("img",{src:s.crmImages[0].src,width:50,height:50,alt:"img"})}):""]},r.id))},s==null?void 0:s.mxikCode))})]})]})})}function wn(){const o=V().pathname,{shopsStocks:_}=F();return t.jsxs("div",{className:e.layout,children:[t.jsx("ul",{className:e.layout_buttons,children:_.map(n=>t.jsx("li",{children:t.jsx(z,{to:`/admin/shops/shop/${n.url}`,className:`${e.layout_btn} ${o==`/admin/shops/shop/${n.url}`?e.layout_btn_active:""}`,children:n.title})},n.id))}),t.jsxs("div",{className:e.layout_content,children:[o==="/admin/shops/shop/stock"&&t.jsx(fn,{}),o==="/admin/shops/shop/website"&&t.jsx(jn,{})]})]})}function Nn(){const{shopsAmount:i,currentShop:o,setCurrentShop:_}=F(),a=V().pathname;return t.jsxs("div",{className:e.layout,children:[t.jsx("h2",{className:e.layout_title,children:"Магазины"}),t.jsx("ul",{className:e.layout_buttons,children:i.map(s=>t.jsx("li",{children:t.jsx(z,{to:"/admin/shops/shop",className:`${e.layout_btn} ${o==s.url?e.layout_btn_active:""}`,onClick:()=>_(s.url),children:s.title})},s.id))}),a.startsWith("/admin/shops/shop")&&t.jsx("div",{className:e.layout_content,children:t.jsx(wn,{})})]})}function Cn(){const{currentCategory:i,currentSubCategory:o,currentProduct:_,setOpenModalCategory:n,setPickedCategory:a,setCurrentCategory:s,setCurrentSubCategory:r}=K(),[c,m]=x.useState(0),[w,h]=x.useState(0),[g,y]=x.useState(0),[I,N]=x.useState({}),[W,q]=x.useState(!1),[A,$]=x.useState("Выберите категорию"),M=(l,b)=>{l.preventDefault();const C=Nt.filter(S=>S.parentId==b.id);s(C),N(b),m(b.id),q(!1)},E=(l,b)=>{l.preventDefault();const C=Ct.filter(S=>S.parentId==b.id);r(C),N(b),h(b.id),q(!1)},O=(l,b)=>{l.preventDefault(),N(b),y(b.id),q(!1)},u=()=>{Object.keys(I).length>0&&i.length==0&&o.length==0?(console.log("seperCategory localPicked",I),_.crmCategoryParentId=I,a(I),n(!1),q(!1),$(""),m(0),h(0),y(0),N({}),s([]),r([])):Object.keys(I).length>0&&i.length>0&&w!=0&&o.length==0?(a(I),n(!1),q(!1),$(""),m(0),h(0),y(0),N({}),s([]),r([])):Object.keys(I).length>0&&i.length>0&&w!=0&&o.length>0&&g!=0?(a(I),n(!1),q(!1),$(""),m(0),h(0),y(0),N({}),s([]),r([])):(q(!0),Object.keys(I).length==0?$("Выберите Суперкотегорию"):i.length>0&&w==0?$("Выберите Категорию"):o.length>0&&g==0&&$("Выберите Подкотегорию"))},d=()=>{n(!1),m(0),h(0),y(0),N({}),s([]),r([]),q(!1)};return t.jsx("div",{className:e.modalCategory,children:t.jsxs("div",{className:e.modalCategory_block,children:[t.jsxs("div",{className:e.modalCategory_nav,children:[t.jsx("h2",{className:e.modalCategory_nav_title,children:"Котегория"}),t.jsx("button",{className:e.modalCategory_nav_close,onClick:d,children:t.jsx(D,{width:24,height:24,name:"XMarkIcon"})})]}),t.jsx("p",{className:e.modalCategory_content_message,children:W?A:""}),t.jsxs("div",{className:e.modalCategory_content,children:[t.jsxs("div",{className:e.modalCategory_content_block,children:[t.jsx("h2",{className:e.modalCategory_content_block_title,children:"Суперкотегория"}),t.jsx("div",{className:e.modalCategory_content_item,children:wt.map(l=>t.jsxs(z,{to:"",className:`${e.modalCategory_content_link} ${l.id==c?e.modalCategory_content_link_active:""} `,onClick:b=>M(b,l),children:[l.title,t.jsx(D,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id))})]}),i.length>0&&t.jsxs("div",{className:e.modalCategory_content_block,children:[t.jsx("h2",{className:e.modalCategory_content_block_title,children:"Котегория"}),t.jsx("div",{className:e.modalCategory_content_item,children:i==null?void 0:i.map(l=>t.jsxs(z,{to:"",className:`${e.modalCategory_content_link} ${l.id==w?e.modalCategory_content_link_active:""} `,onClick:b=>E(b,l),children:[l.title,t.jsx(D,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id))})]}),o.length>0&&t.jsxs("div",{className:e.modalCategory_content_block,children:[t.jsx("h2",{className:e.modalCategory_content_block_title,children:"Подкотегория"}),t.jsx("div",{className:e.modalCategory_content_item,children:o==null?void 0:o.map(l=>t.jsxs(z,{to:"",className:`${e.modalCategory_content_link} ${l.id==g?e.modalCategory_content_link_active:""} `,onClick:b=>O(b,l),children:[l.title,t.jsx(D,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id))})]}),t.jsxs("div",{className:e.settings_content_buttons,children:[t.jsx("button",{className:`${e.settings_content_btn} ${e.settings_content_btn_cancel}`,onClick:d,children:"Отмена"}),t.jsx("button",{className:`${e.settings_content_btn} ${e.settings_content_btn_save}`,onClick:u,children:"Сохранить"})]})]})]})})}function In({item:i}){const{setErrorModal:o}=K(),_=n=>{n.stopPropagation()};return t.jsx("div",{className:e.errorWrapper,onClick:()=>o({status:!1,message:""}),children:t.jsxs("div",{className:e.errorWrapper_block,onClick:_,children:[t.jsx("button",{className:e.errorWrapper_block_close,onClick:()=>o({status:!1,message:""}),children:t.jsx(D,{name:"XMarkIcon",width:25,height:25})}),t.jsx("span",{children:i.message})]})})}function yn(){var st;const i=jt(),{pickedCategory:o,openModalCategory:_,currentProduct:n,errorModal:a,setErrorModal:s,setCurrentProduct:r,setOpenModalCategory:c,setPickedCategory:m,setImagesSrc:w}=K(),{websiteProducts:h,shop1Products:g,setShop1Products:y,setWebsiteProducts:I}=F(),{productItem:N}=J(),[W,q]=x.useState(null),[A,$]=x.useState(""),[M,E]=x.useState(""),O=x.useRef(null),[u,d]=x.useState(""),[l,b]=x.useState(""),[C,S]=x.useState([]);x.useEffect(()=>{m({});const f=N.split("-");if(b(f[1]),d(f[0]),f[0]=="stock"){S([...g]);const v=g.find(L=>L.mxikCode==f[1]);v&&($(v!=null&&v.crmNameProduct?v==null?void 0:v.crmNameProduct:""),r(v))}else if(f[0]=="website"){S([...h]);const v=h.find(L=>L.mxikCode==f[1]);v&&($(v!=null&&v.crmNameProduct?v==null?void 0:v.crmNameProduct:""),r(v))}},[]),x.useEffect(()=>{const j=N.split("-");if(j[0]=="stock"){const f=g.find(v=>v.mxikCode==j[1]);f&&r(f)}else if(j[0]=="website"){const f=h.find(v=>v.mxikCode==j[1]);f&&r(f)}},[h,g,l]);function mt(j,f){q(f)}function et(j){j.target.style.background="white"}function ht(j){j.preventDefault(),j.target.style.background="lightgray"}function bt(j,f){j.preventDefault(),j.target.style.background="white";const v=u=="stock"?g.find(k=>k.mxikCode==l):h.find(k=>k.mxikCode==l);if(!v)return;const L=v.crmImages.map(k=>k.id===f.id?{...k,order:(W==null?void 0:W.order)||k.order}:k.id===(W==null?void 0:W.id)?{...k,order:f.order}:k).sort((k,G)=>k.order-G.order),R={...v,crmImages:L};console.log("currentProduct",v),u=="stock"?(y(g.map(k=>k.mxikCode===R.mxikCode?R:k)),w(L)):(I(h.map(k=>k.mxikCode===R.mxikCode?R:k)),w(L)),console.log("newImages",L),q(null)}function ut(j,f){return j.order>f.order?1:-1}const gt=j=>{const f=n.crmImages.filter(L=>L.id!==j);n.crmImages=f;const v=u=="stock"?g.findIndex(L=>L.mxikCode==n.mxikCode):h.findIndex(L=>L.mxikCode==n.mxikCode);console.log("productIndex",v),u=="stock"?(g.splice(v,1,n),y(g)):(h.splice(v,1,n),I(h))},vt=()=>{O.current!=null&&O.current.click()},xt=j=>{var v,L,R;const f=(L=(v=j==null?void 0:j.target)==null?void 0:v.files)==null?void 0:L[0];if(f&&(f==null?void 0:f.type)==="image/jpeg"||(f==null?void 0:f.type)==="image/png"||(f==null?void 0:f.type)==="image/webp"){const k=u=="stock"?g.find(P=>P.mxikCode==l):h.find(P=>P.mxikCode==l),G=u=="stock"?g.findIndex(P=>P.mxikCode==l):h.findIndex(P=>P.mxikCode==l),ot=k!=null&&k.crmImages&&((R=k==null?void 0:k.crmImages)==null?void 0:R.length)>0?k==null?void 0:k.crmImages.reduce((P,X)=>X.order>P?X.order:P,-1/0):1;if(k){const P=new FileReader;P.onload=X=>{var nt;if((nt=X.target)!=null&&nt.result){const it={id:H(),order:ot?ot+1:1,src:X.target.result.toString()},ft=k!=null&&k.crmImages?[...k==null?void 0:k.crmImages,it]:[it];k.crmImages=ft,u=="stock"?(g.splice(G,1,k),y(g)):(h.splice(G,1,k),I(h))}},P.readAsDataURL(f)}}},kt=()=>{if(n&&o.label){n.crmCategoryParentId=o;const j=h.filter(f=>f.mxikCode!=n.mxikCode);I([...j,n]),u=="stock"&&i("/admin/product/adding/stock"),u=="website"&&i("/admin/product/adding/website")}else s({status:!0,message:'"Выберите категорию"'})};return t.jsxs("div",{className:e.productItem,children:[a.status&&t.jsx(In,{item:a}),_&&t.jsx(Cn,{}),t.jsx("h1",{className:e.productItem_title,children:"Добавление объявления"}),((st=n==null?void 0:n.crmImages)==null?void 0:st.length)>0&&t.jsx("h4",{className:e.productItem_basePhoto,children:"Главное фото"}),t.jsxs("div",{className:e.productItem_photos,children:[(n==null?void 0:n.crmImages)&&(n==null?void 0:n.crmImages.sort(ut).map((j,f)=>t.jsxs("div",{className:`${e.productItem_photo} ${f==0?e.productItem_photo_active:""}`,draggable:!0,onDragStart:v=>mt(v,j),onDragLeave:v=>et(v),onDragEnd:v=>et(v),onDragOver:v=>ht(v),onDrop:v=>bt(v,j),children:[t.jsx("div",{className:e.productItem_photo_img,children:t.jsx("img",{src:j.src!=="/add.webp"?j.src:"",width:100,height:140,alt:"img"})}),t.jsx("div",{className:e.productItem_photo_close,onClick:()=>gt(j.id),children:t.jsx(D,{width:18,height:18,name:"XMarkIcon"})})]},j.id))),t.jsxs("div",{className:`${e.productItem_photo} ${e.productItem_add}`,onClick:vt,children:[t.jsx(D,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),t.jsx("span",{className:e.productItem_add_text,children:"Добавить еще"}),t.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:xt,ref:O})]})]}),t.jsx("p",{className:e.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"}),t.jsxs("div",{className:e.productItem_settings,children:[t.jsxs("div",{className:e.productItem_left,children:[t.jsxs("div",{className:e.productItem_left_info,children:[t.jsxs("div",{className:e.productItem_left_item,children:[t.jsxs("div",{className:e.productItem_left_item_top,children:[t.jsx("span",{children:"Артикул"}),t.jsx("span",{children:"#DF156651"})]}),t.jsxs("div",{className:e.productItem_left_item_bottom,children:[t.jsx("button",{className:e.productItem_left_item_button,children:"Изменить"}),t.jsx("button",{className:e.productItem_left_item_button,children:"Генерировать"})]})]}),t.jsxs("div",{className:e.productItem_left_item,children:[t.jsxs("div",{className:e.productItem_left_item_top,children:[t.jsx("span",{children:"Категория:"}),t.jsx("span",{children:o.title?o.title:""})]}),t.jsx("div",{className:e.productItem_left_item_bottom,children:t.jsx("button",{className:e.productItem_left_item_button,onClick:()=>c(!0),children:n!=null&&n.crmSubCategory?"Изменить":"Выбрать"})})]}),t.jsx("div",{className:e.productItem_left_item,children:t.jsxs("div",{className:e.productItem_left_item_top,children:[t.jsx("span",{children:"Штрих-код"}),t.jsx("span",{children:l})]})}),t.jsx("div",{className:e.productItem_left_item,children:t.jsxs("div",{className:e.productItem_left_item_top,children:[t.jsx("span",{children:"Кол-во"}),t.jsx("span",{children:n==null?void 0:n.crmAmount})]})}),t.jsx("div",{className:e.productItem_left_item,children:t.jsxs("div",{className:e.productItem_left_item_top,children:[t.jsx("span",{children:"Цена:"}),t.jsx("span",{children:n==null?void 0:n.crmSellingPrice})]})}),t.jsx("div",{className:e.productItem_left_item,children:t.jsxs("div",{className:e.productItem_left_item_top,children:[t.jsx("span",{children:"PDF:"}),t.jsx("button",{className:e.productItem_left_item_button,children:"Загрузить"})]})})]}),t.jsxs("form",{className:e.productItem_left_form,children:[t.jsxs("label",{className:e.productItem_left_form_label,children:[t.jsx("span",{className:e.productItem_left_form_title,children:"Заголовок"}),t.jsx("input",{className:e.productItem_left_form_input,type:"text",value:A,onChange:j=>$(j.target.value)})]}),t.jsxs("label",{className:e.productItem_left_form_label,children:[t.jsx("span",{className:e.productItem_left_form_title,children:"Описание товара"}),t.jsx("textarea",{onChange:j=>E(j.target.value),value:M,className:e.productItem_left_form_textarea}),t.jsx("p",{className:e.productItem_left_form_size,children:t.jsx("span",{children:"200/200"})})]})]})]}),t.jsxs("div",{className:e.productItem_right,children:[t.jsx("div",{className:e.productItem_right_item,children:t.jsxs("div",{className:e.productItem_right_top,children:[t.jsx("h5",{className:e.productItem_right_title,children:"Коментарии"}),t.jsx(U,{backgroundOn:"rgb(137, 250, 135)"})]})}),t.jsxs("div",{className:e.productItem_right_item,children:[t.jsxs("div",{className:e.productItem_right_top,children:[t.jsx("h5",{className:e.productItem_right_title,children:"Доп. параметры"}),t.jsx(U,{backgroundOn:"rgb(137, 250, 135)"})]}),t.jsx("div",{className:e.productItem_right_bottom_item}),t.jsx("div",{className:e.productItem_right_bottom_item,children:t.jsx("button",{className:e.productItem_right_bottom_del,children:"Удалить"})}),t.jsx("div",{className:e.productItem_right_bottom_item,children:t.jsx("button",{className:e.productItem_right_bottom_del,children:"Удалить"})})]}),t.jsxs("div",{className:e.productItem_right_item,children:[t.jsxs("div",{className:e.productItem_right_top,children:[t.jsx("h5",{className:e.productItem_right_title,children:"Коротко о товаре"}),t.jsx(U,{backgroundOn:"rgb(137, 250, 135)"})]}),t.jsx("div",{className:`${e.productItem_right_bottom_item} ${e.productItem_right_bottom_row}`})]})]})]}),t.jsxs("div",{className:e.settings_content_buttons,children:[t.jsx(z,{to:u=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${e.settings_content_btn} ${e.settings_content_btn_cancel}`,children:"Отмена"}),t.jsx("button",{className:`${e.settings_content_btn} ${e.settings_content_btn_save}`,onClick:()=>kt(),children:"Сохранить"})]})]})}function On(){const{user:i}=pt(),{setCurrentShop:o}=F(),n=V().pathname;x.useEffect(()=>{n.startsWith("/admin/shops")||o("0")},[n]);const a=[{id:"1",label:"Настройки",href:"/admin/settings",icon:t.jsx(D,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:t.jsx(D,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:t.jsx(D,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:t.jsx(D,{name:"BuildingStorefrontIcon"}),isActive:!1}],[s,r]=x.useState(a),c=m=>{const w=s.map(g=>({id:g.id,label:g.label,href:g.href,icon:g.icon,isActive:!1})),h=w.find(g=>g.id==m);h&&(h.isActive=!0),r(w)};return t.jsxs(t.Fragment,{children:[t.jsx(It,{}),t.jsx("div",{className:"container",children:t.jsxs("div",{className:e.wrapper,children:[t.jsx("h1",{className:e.wrapper_title,children:i==null?void 0:i.username}),t.jsxs("div",{className:e.content,children:[t.jsx("div",{className:e.content_left,children:t.jsx("ul",{className:e.tools,children:s.map(m=>t.jsx("li",{children:t.jsxs(z,{to:m.href,className:`${e.tools_link} ${n.startsWith(m.href)?e.tools_link_active:""}`,onClick:()=>c(m.id),children:[m.icon,m.label]})},m.id))})}),n.startsWith("/admin")&&t.jsxs("div",{className:e.content_right,children:[n.startsWith("/admin/settings")&&t.jsx(fo,{}),n.startsWith("/admin/users")&&t.jsx(kn,{}),n.startsWith("/admin/shops")&&t.jsx(Nn,{}),n.startsWith("/admin/product")&&t.jsx(yo,{}),n.startsWith("/admin/item-product")&&t.jsx(yn,{})]})]})]})})]})}export{On as default};
