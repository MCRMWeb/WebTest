import{z as T,A as E,B as F,j as t,x as o,y as M,v as H,r as i,L as w,w as $,o as R}from"./index-BEYp5e6j.js";import{C as z}from"./CustomIcon-DBPEx1X1.js";import{u as B}from"./userStore-CKswpZ5m.js";const U="_btn_lrckp_1",G={btn:U},L=T()(E(F(s=>({superCategoriesList:[{id:1,title:"Продукты питания"},{id:2,title:"Бытовая химия"},{id:3,title:"Одежда и Обувь"},{id:4,title:"Мебель"},{id:5,title:"Электроника"}],pickedProduct:"",setPickedProduct:a=>s({pickedProduct:a}),catalogNavListStatus:!1,setCatalogNavListStatus:a=>s({catalogNavListStatus:a}),superCategoriesStore:[],setSuperCategoriesStore:a=>s({superCategoriesStore:a}),categories:[],setCategories:a=>s({categories:a}),buttonsActive:0,setButtonsActive:a=>s({buttonsActive:a}),currentSubCategory:0,setCurrentSubCategory:a=>s({currentSubCategory:a}),selectedSuperCategory:0,setSelectedSuperCategory:a=>s({selectedSuperCategory:a}),selectedCategory:0,setSelectedCategory:a=>s({selectedCategory:a}),selectedSubCategory:0,setSelectedSubCategory:a=>s({selectedSubCategory:a}),pickedCategoryName:"",setPickedCategoryName:a=>s({pickedCategoryName:a})}),{name:"catalog-storage",partialize:s=>({...s,catalogNavListStatus:void 0})})));function O(){const{catalogNavListStatus:s,setCatalogNavListStatus:a}=L(),r=l=>{l.preventDefault(),a(!s)};return t.jsxs("button",{className:G.btn,onClick:l=>r(l),children:[t.jsx(z,{name:"QueueListIcon",color:"black",width:25}),t.jsx("span",{children:"Каталог"})]})}const W="_search_1axpt_1",Y="_search_block_1axpt_7",D="_search_input_1axpt_15",Q="_search_btn_1axpt_22",q={search:W,search_block:Y,search_input:D,search_btn:Q};function J(){return t.jsxs("form",{action:"",className:q.search,children:[t.jsx(O,{}),t.jsxs("div",{className:q.search_block,children:[t.jsx("input",{type:"text",className:q.search_input,placeholder:"Искать товары и категории"}),t.jsx("button",{className:q.search_btn,children:t.jsx(z,{name:"MagnifyingGlassIcon",width:25})})]})]})}const K="_nav_1f8ae_1",V="_nav_container_1f8ae_12",X="_nav_list_1f8ae_17",Z="_nav_link_1f8ae_21",tt="_nav_link_icon_1f8ae_47",et="_nav_link_active_1f8ae_51",at="_nav_link_favoritesAmount_1f8ae_62",A={nav:K,nav_container:V,nav_list:X,nav_link:Z,nav_link_icon:tt,nav_link_active:et,nav_link_favoritesAmount:at},st=T()(E(F(s=>({catalogProducts:[],favoriteActive:[],productItem:"",setProductItem:a=>s({productItem:a}),setCatalogProducts:a=>s({catalogProducts:a}),setFavoriteActive:a=>s({favoriteActive:a})}),{name:"product-storage"}))),it=st,ot=T()(E(F(s=>({socialPlatforms:[{id:o(),name:"Telegram",icon:"/socialIcons/tg.svg",alt:"Telegram Icon",isSwitchActive:!1,link:""},{id:o(),name:"Instagram",icon:"/socialIcons/instagram.svg",alt:"Instagram Icon",isSwitchActive:!1,link:""},{id:o(),name:"Facebook",icon:"/socialIcons/fb.svg",alt:"Facebook Icon",isSwitchActive:!1,link:""},{id:o(),name:"TikTok",icon:"/socialIcons/tik-tok.svg",alt:"TikTok Icon",isSwitchActive:!1,link:""},{id:o(),name:"YouTube",icon:"/socialIcons/you-tube.svg",alt:"YouTube Icon",isSwitchActive:!1,link:""}],setSocialPlatforms:a=>s({socialPlatforms:a}),contactsFormInputsArr:[{id:o(),title:"Адресс:",text:"",type:"isAddress"},{id:o(),title:"Телефон:",text:"",type:"isPhone"},{id:o(),title:"Телефон Доп:",text:"",type:"isPhone"},{id:o(),title:"Эдектронная почта:",text:"",type:"isEmail"},{id:o(),title:"Кратко о нас:",text:"",type:"isTextarea"},{id:o(),title:"Выберете адрес:",text:"",type:"isAddressMap"}],setContactsFormInputsArr:a=>s({contactsFormInputsArr:a}),imageUrlLogo:"",setImageUrlLogo:a=>s({imageUrlLogo:a}),contactsSchedule:[{id:o(),day:"Пн",workHours:{start:"",end:""},isActive:!1},{id:o(),day:"Вт",workHours:{start:"",end:""},isActive:!1},{id:o(),day:"Ср",workHours:{start:"",end:""},isActive:!1},{id:o(),day:"Чт",workHours:{start:"",end:""},isActive:!1},{id:o(),day:"Пн",workHours:{start:"",end:""},isActive:!1},{id:o(),day:"Сб",workHours:{start:"",end:""},isActive:!1},{id:o(),day:"Вс",workHours:{start:"",end:""},isActive:!1}],setContactsSchedule:a=>s({contactsSchedule:a})}),{name:"contacts-store",partialize:s=>({...s})})));function ct(){const a=M().pathname,{isAuth:r,user:l}=B(),{setCatalogNavListStatus:g}=L(),{favoriteActive:u}=it(),{modulesCartStatus:m,modulesCashRegisterStatus:_,navLinksState:p,setNavLinksState:d}=H(),{socialPlatforms:C,imageUrlLogo:b}=ot(),[S,h]=i.useState(p),[P,v]=i.useState([]),j=()=>{g(!1)};i.useEffect(()=>{n();const e=p.filter(y=>y.isActive===!0);h(e)},[m,_,p]);function n(){p.forEach(e=>{e.label==="Cart"?e.isActive=m:e.label==="Cash Register"&&(e.isActive=_)}),d(p)}i.useEffect(()=>{v(C.filter(e=>e.isSwitchActive===!0))},[C]);const f=["/addingProducts","/cash-register"].some(e=>a.startsWith(e));return t.jsx(t.Fragment,{children:!f&&t.jsx("nav",{className:A.nav,children:t.jsxs("div",{className:`container ${A.nav_container}`,children:[t.jsx(w,{to:"/",onClick:j,children:b?t.jsx("img",{src:b,alt:"",style:{width:"60px",height:"60px",objectFit:"contain"}}):t.jsx("span",{children:"LOGO"})}),r&&t.jsx(J,{}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:P.map(e=>t.jsx("a",{href:e.link,target:"_blank",children:t.jsx("img",{src:e.icon,alt:""})},e.id))}),r&&t.jsx("ul",{className:A.nav_list,children:S==null?void 0:S.map(e=>(e==null?void 0:e.isActive)===!0&&t.jsx("li",{children:t.jsxs(w,{onClick:j,className:`${A.nav_link} ${a.startsWith(e.href)?A.nav_link_active:""}`,to:e.href,children:[t.jsx(z,{name:e.icon,width:22,className:A.nav_link_icon}),t.jsxs("span",{children:[l&&e.label=="Profile"?l==null?void 0:l.username:e.label,l&&e.label=="Favorites"&&u.length>0&&t.jsx("span",{className:A.nav_link_favoritesAmount,style:{width:u.length>99?"30px":"",height:u.length>99?"30px":""},children:u.length})]})]})},e.id))})]})})})}const nt="_wrapper_hqujz_1",rt="_wrapper_active_hqujz_17",lt="_block_hqujz_22",gt="_list_hqujz_26",ut="_list_li_hqujz_53",_t="_active_hqujz_81",dt="_list_li_active_hqujz_88",ht="_link_hqujz_103",pt="_link_icon_hqujz_114",vt="_categories_hqujz_119",ft="_categories_title_hqujz_144",mt="_categories_title_icon_hqujz_153",xt="_categories_list_hqujz_157",kt="_categories_link_hqujz_167",St="_subCategories_list_hqujz_179",jt="_subCategories_link_hqujz_204",Ct="_catalogPage_hqujz_214",yt="_catalogPage_title_hqujz_217",bt="_catalogPage_title_icon_hqujz_225",c={wrapper:nt,wrapper_active:rt,block:lt,list:gt,list_li:ut,active:_t,list_li_active:dt,link:ht,link_icon:pt,categories:vt,categories_title:ft,categories_title_icon:mt,categories_list:xt,categories_link:kt,subCategories_list:St,subCategories_link:jt,catalogPage:Ct,catalogPage_title:yt,catalogPage_title_icon:bt};function Nt({categoryId:s}){const{currentCategory:a}=H(),[r,l]=i.useState(1),[g,u]=i.useState(10),[m,_]=i.useState(!0),[p,d]=i.useState([]);i.useEffect(()=>{b(),C(r,g)},[s]);async function C(h,P){if(a==="Суперклассы")try{try{const v=await $.get(`https://api.mcrm.uz/api/categories?${s&&"parentId="+s+"&"}page=${h}&perPage=${P}`),j=await v.data.data,n=await v.data.pagination;j.length<n.total?d([...j]):j.length==n.total&&(d([...j]),_(!1))}catch(v){console.log("Ошибка произошла при получении Котегории",v)}}catch(v){console.log("Ошибка произошла при получении Суперклассов",v)}}function b(){l(1),u(10),d([]),_(!0)}const S=()=>{const h=g+10;u(h),C(r,h)};return t.jsx("div",{className:c.subCategories,children:t.jsxs("ul",{className:c.subCategories_list,children:[p==null?void 0:p.map(h=>t.jsx("li",{children:t.jsx(w,{to:`/category/${h.id}`,className:c.subCategories_link,children:h.name.ru})},h.id)),m&&t.jsx("li",{children:t.jsx(w,{className:c.subCategories_link,to:"#",onClick:S,children:"Ещё..."})})]})})}function wt(){const{catalogNavListStatus:s,setCatalogNavListStatus:a,buttonsActive:r,pickedCategoryName:l}=L(),{currentCategory:g}=H(),[u,m]=i.useState([]),[_,p]=i.useState(1),[d,C]=i.useState(10),[b,S]=i.useState(!0);i.useEffect(()=>{P(),h(_,d)},[g,s,r]);async function h(n,I){if(g==="Суперклассы")try{try{const f=await $.get(`https://api.mcrm.uz/api/categories?${r&&"parentId="+r+"&"}page=${n}&perPage=${I}`),e=await f.data.data,y=await f.data.pagination;e.length<y.total?m([...e]):e.length==y.total&&(m([...e]),S(!1))}catch(f){console.log("Ошибка произошла при получении Котегории",f)}}catch(f){console.log("Ошибка произошла при получении Суперклассов",f)}if(g==="Котегории")try{const f=await $.get(`https://api.mcrm.uz/api/categories?${r&&"parentId="+r+"&"}page=${n}&perPage=${I}`),e=await f.data.data,y=await f.data.pagination;e.length<y.total?m([...e]):e.length==y.total&&(m([...e]),S(!1))}catch(f){console.log("Ошибка произошла при получении Подкотегории",f)}g==="Подкотегории"&&(m([]),S(!0))}function P(){p(1),C(10),m([]),S(!0)}const v=()=>{const n=d+10;C(n),h(_,n)};function j(){g==="Котегории"&&a(!1)}return t.jsxs("div",{className:c.categories,children:[t.jsxs("h2",{className:c.categories_title,children:[t.jsx("span",{children:l}),t.jsx(z,{name:"ChevronRightIcon"})]}),t.jsx("ul",{className:c.categories_list,children:u==null?void 0:u.map(n=>t.jsxs("li",{children:[t.jsx(w,{to:g==="Котегории"?`/category/${n.id}`:"#",className:c.categories_link,onClick:j,children:n.name.ru}),g=="Суперклассы"&&t.jsx(Nt,{categoryId:n.id})]},n.id))}),u.length>0&&b&&t.jsx(w,{to:"#",className:c.categories_link,onClick:()=>v(),children:"Ещё..."})]})}function Pt(){const{catalogNavListStatus:s,setCatalogNavListStatus:a,buttonsActive:r,setButtonsActive:l,selectedSuperCategory:g,selectedCategory:u,setPickedCategoryName:m}=L(),{currentCategory:_}=H(),[p,d]=i.useState([]),[C,b]=i.useState(1),[S,h]=i.useState(10),[P,v]=i.useState(!0);i.useEffect(()=>{n(),j(C,S)},[_,g,u,s]);async function j(e,y){if(_==="Суперклассы")try{const x=await $.get(`https://api.mcrm.uz/api/categories?page=${e}&perPage=${y}`),k=await x.data.data,N=await x.data.pagination;k.length<N.total?d([...k]):k.length==N.total&&(d([...k]),v(!1))}catch(x){console.log("Ошибка произошла при получении Суперклассов",x)}if(_==="Котегории")try{const x=await $.get(`https://api.mcrm.uz/api/categories?${g&&"parentId="+g+"&"}page=${e}&perPage=${y}`),k=await x.data.data,N=await x.data.pagination;k.length<N.total?d([...k]):k.length==N.total&&(d([...k]),v(!1))}catch(x){console.log("Ошибка произошла при получении Котегории",x)}if(_==="Подкотегории")try{const x=await $.get(`https://api.mcrm.uz/api/categories?${u&&"parentId="+u+"&"}page=${e}&perPage=${y}`),k=await x.data.data,N=await x.data.pagination;k.length<N.total?d([...k]):k.length==N.total&&(d([...k]),v(!1))}catch(x){console.log("Ошибка произошла при получении Подкотегории",x)}}function n(){b(1),h(10),d([]),v(!0),m(""),l(0)}const I=()=>{const e=S+10;h(e),j(C,e)},f=e=>{m(e.name.ru),l(e.id),_==="Подкотегории"&&a(!1)};return t.jsxs("div",{className:c.block,children:[t.jsxs("ul",{className:c.list,children:[p==null?void 0:p.map(e=>t.jsxs("li",{className:`${c.list_li} ${r==e.id?c.list_li_active:""}`,onClick:()=>f(e),children:[t.jsx(w,{to:_==="Подкотегории"?`/category/${e.id}`:"#",className:c.link,children:e.name.ru}),t.jsx(z,{name:"ChevronRightIcon"})]},e.id)),P&&t.jsx("li",{className:c.list_li,onClick:()=>I(),children:t.jsx(w,{to:"#",className:c.link,children:"Ещё..."})})]}),r!=0&&_!="Подкотегории"&&t.jsx(wt,{})]})}function At(){const{catalogNavListStatus:s}=L();return R.get("access_token")?t.jsx("div",{className:`${c.wrapper} ${s?c.wrapper_active:""}`,children:t.jsx("div",{className:"container",children:t.jsx(Pt,{})})}):(console.log("Пользователь не авторизован"),null)}const $t=()=>t.jsxs("header",{className:"header",children:[t.jsx(ct,{}),t.jsx(At,{})]}),qt=$t;export{qt as H,L as a,ot as c,it as p,c as s};
