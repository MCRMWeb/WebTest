import{z as le,A as re,B as _e,y as d,r as v,j as t,L as z,e as L,x as ce}from"./index-Bzswjygo.js";import{C as F}from"./CustomIcon-BlbrQxcu.js";import{u as me}from"./userStore-CqOUphJe.js";import{s as be}from"./shop1Store-D6tUNZ5T.js";import"./XMarkIcon-m4t9u1dD.js";const fe=le()(re(_e(s=>({openMenu:!1,openDebt:!1,monetaryDebt:!1,searchProduct:"",amountChose:1,selectedProducts:[],amountsObj:[],totalAmountsObj:{},openPay:!1,remainder:0,paymentColorList:[{id:d(),name:"Наличка",amount:"100 000 000",color:"rgb(204, 143, 143)",isActive:!0},{id:d(),name:"Терминал",amount:"100 000 000",color:"rgb(204, 143, 143)",isActive:!0},{id:d(),name:"Перечисление",amount:"100 000 000",color:"rgb(204, 143, 143)",isActive:!0},{id:d(),name:"Электронные кошельки",amount:"100 000 000",color:"rgb(204, 143, 143)",isActive:!0}],setPaymentColorList:e=>s({paymentColorList:e}),currentColor:"rgb(204, 143, 143)",setCurrentColor:e=>s({currentColor:e}),currentColorBlock:"1",setCurrentColorBlock:e=>s({currentColorBlock:e}),totalAmountDue:0,error:{status:!1,text:""},leftMenu:[{id:d(),title:"Выдача денег из кассы"},{id:d(),title:"Развестной товар"},{id:d(),title:"Возврат по чеку"},{id:d(),title:"Сумма в кассе"},{id:d(),title:"Онлайн касса"},{id:d(),title:"Открыть смену"},{id:d(),title:"Товар без штрих кода"},{id:d(),title:"Внессение денег в кассу"},{id:d(),title:"Продажа за мену"},{id:d(),title:"Открыть денеж. ящик"},{id:d(),title:"Закрыть смену"},{id:d(),title:"Промеж. итог (X-отчет)"}],setLeftMenu:e=>s({leftMenu:e}),leftMenuActive:[],setLeftMenuActive:e=>s({leftMenuActive:e}),payNumberList:[{id:d(),value:"1"},{id:d(),value:"2"},{id:d(),value:"3"},{id:d(),value:"4"},{id:d(),value:"5"},{id:d(),value:"6"},{id:d(),value:"7"},{id:d(),value:"8"},{id:d(),value:"9"},{id:d(),value:"0"},{id:d(),value:"00"},{id:d(),value:"000"},{id:d(),value:","},{id:d(),value:"<"}],payNumberOpen:!1,setPayNumberOpen:e=>s({payNumberOpen:e}),headerSum:[{id:d(),title:"Наименование",amount:0},{id:d(),title:"Скидки",amount:0},{id:d(),title:"Наценка",amount:0},{id:d(),title:"К оплате",amount:0}],menuBtns:[{id:d(),title:"Левое меню"},{id:d(),title:"Список товаров"},{id:d(),title:"Поиск товара в ручном режиме"},{id:d(),title:"Вид кассы"}],settingsParams:[{id:d(),title:"Фото",checked:!1},{id:d(),title:"Наименование",checked:!1},{id:d(),title:"Штрихкод",checked:!1},{id:d(),title:"Цена",checked:!1},{id:d(),title:"Количество",checked:!1},{id:d(),title:"Ед.измерения",checked:!1},{id:d(),title:"Продажная цена",checked:!1},{id:d(),title:"Реализация",checked:!1},{id:d(),title:"Цена без НДС",checked:!1},{id:d(),title:"QR Код",checked:!1},{id:d(),title:"НДС включатель",checked:!1},{id:d(),title:"ИКПУ",checked:!1},{id:d(),title:"Сумма",checked:!1}],setSettingsParams:e=>s({settingsParams:e}),settingsSearchParams:[{id:d(),title:"Фото",checked:!1},{id:d(),title:"Наименование",checked:!1},{id:d(),title:"Штрихкод",checked:!1},{id:d(),title:"ИКПУ",checked:!1},{id:d(),title:"Количество",checked:!1},{id:d(),title:"Цена",checked:!1}],setSettingsSearchParams:e=>s({settingsSearchParams:e}),kassaMethodsDynamicItem:[{name:"Наличка",value:""},{name:"Перечисление",value:""},{name:"Электронные кошельки",value:""}],totalAmounts:{},setTotalAmounts:e=>s({totalAmounts:e}),setKassaMethodsDynamicItem:e=>s({kassaMethodsDynamicItem:e}),setOpenDebt:e=>s({openDebt:e}),setMonetaryDebt:e=>s({monetaryDebt:e}),setTotalAmountDue:e=>s({totalAmountDue:e}),setError:e=>s({error:e}),setRemainder:e=>s({remainder:e}),setOpenPay:e=>s({openPay:e}),updateTotalAmountsObj:e=>s({totalAmountsObj:e}),setTotalAmountsObj:e=>s({totalAmountsObj:e}),setAmountsObj:e=>s({amountsObj:e}),setSelectedProducts:e=>s(n=>({selectedProducts:[...n.selectedProducts,e]})),delSelectedProducts:e=>s({selectedProducts:e}),setAmountChose:e=>s({amountChose:e}),setSearchProduct:e=>s({searchProduct:e}),setOpenMenu:e=>s({openMenu:e})}),{name:"cash-register-storage",partialize:s=>({...s,selectedProducts:void 0,searchProduct:void 0,totalAmountsObj:void 0,amountChose:void 0,kassaMethodsDynamicItem:void 0,monetaryDebt:void 0,openDebt:void 0,openMenu:void 0,payNumberOpen:void 0,setPayNumberOpen:void 0})}))),S=fe;function he(s,e){const{headerSum:n}=S();let o=0;for(const a in s)o+=s[a];return n==null?void 0:n.map(a=>{let r=0;return a.title=="К оплате"?r=e&&e.length>0?o:0:a.title=="Наименование"&&(r=e==null?void 0:e.length),{id:a.id,title:a.title,amount:r}})}const pe="_wrapper_container_19yws_1",ve="_left_19yws_7",ge="_right_19yws_11",ye="_container_19yws_15",xe="_tableBase_19yws_19",Be="_tableBase_kassa_19yws_25",je="_tableBase_headerSum_19yws_38",we="_tableBase_headerSum_block_19yws_42",ke="_tableBase_headerSum_item_19yws_47",Ne="_tableBase_calculate_19yws_52",Ce="_tableBase_calculate_box_19yws_59",Ie="_tableBase_calculate_show_19yws_63",Pe="_tableBase_calculate_show_yellow_19yws_69",Se="_tableBase_calculate_show_green_19yws_72",Le="_tableBase_calculate_btn_19yws_75",Ae="_tableBase_calculate_btn_yellow_19yws_79",De="_tableBase_calculate_btn_green_19yws_82",Me="_tableBase_calculate_debt_19yws_85",Oe="_tableBase_methods_19yws_93",Ee="_tableBase_methods_item_top_19yws_100",Te="_tableBase_methods_item_input_19yws_106",$e="_tableBase_methods_yourPay_title_19yws_111",We="_tableBase_methods_yourPay_clear_19yws_114",Re="_tableBase_numberList_19yws_122",He="_tableBase_numberList_block_19yws_133",Fe="_tableBase_numberList_close_19yws_136",Ke="_tableBase_numberList_items_19yws_148",ze="_tableBase_numberList_item_19yws_148",Ve="_tableBase_numberList_btn_19yws_164",Ue="_tableBase_nav_19yws_172",Ge="_tableBase_nav_block_19yws_178",qe="_tableBase_nav_list_19yws_181",Xe="_tableBase_nav_link_19yws_185",Ye="_tableBase_nav_error_19yws_193",Je="_tableBase_nav_form_19yws_197",Qe="_tableBase_nav_input_19yws_203",Ze="_tableBase_nav_box_19yws_208",et="_tableBase_nav_amount_19yws_213",tt="_tableBase_dark_19yws_219",st="_tableBase_table_19yws_228",at="_tableBase_table_head_19yws_235",nt="_tableBase_table_head_tr_19yws_239",ot="_tableBase_table_head_th_19yws_243",lt="_tableBase_table_body_tr_19yws_250",rt="_tableBase_table_body_tr_selected_19yws_259",_t="_tableBase_table_body_td_19yws_267",ct="_tableBase_table_body_img_19yws_273",it="_tableBase_table_amount_19yws_276",ut="_tableBase_table_amount_btn_19yws_284",dt="_tableBase_table_amount_minus_19yws_292",mt="_tableBase_table_amount_plus_19yws_295",bt="_tableBase_table_amount_input_19yws_298",ft="_tableBase_table_del_19yws_303",ht="_tableBase_menu_close_19yws_313",pt="_tableBase_menu_list_19yws_321",vt="_tableBase_menu_link_19yws_325",gt="_tableBase_menu_linkActive_19yws_330",yt="_tableBase_menuList_19yws_333",xt="_tableBase_menuList_list_19yws_367",Bt="_tableBase_menuList_link_19yws_373",jt="_tableBase_menuList_more_19yws_377",wt="_tableBase_menuList_open_19yws_380",kt="_nav_19yws_384",Nt="_nav_linkBtn_19yws_387",Ct="_nav_settingsIcon_19yws_392",It="_form_19yws_397",Pt="_form_input_19yws_407",St="_form_btn_19yws_413",Lt="_form_list_19yws_427",At="_form_check_19yws_432",Dt="_form_check_text_19yws_437",Mt="_formWrapper_19yws_441",Ot="_formWrapper_btn_19yws_446",Et="_found_19yws_458",Tt="_table_19yws_19",$t="_table_head_19yws_487",Wt="_table_head_row_19yws_490",Rt="_table_head_col_19yws_495",Ht="_table_body_row_19yws_498",Ft="_table_body_col_19yws_502",Kt="_table_body_img_19yws_506",zt="_table_body_icon_19yws_509",Vt="_table_body_name_19yws_513",Ut="_table_body_amount_19yws_539",Gt="_ikpuWrapper_19yws_547",qt="_ikpuWrapper_ikpuModalBlock_19yws_555",Xt="_ikpuWrapper_content_19yws_565",Yt="_ikpuWrapper_buttons_19yws_570",Jt="_ikpuWrapper_save_19yws_576",Qt="_ikpuWrapper_delete_19yws_588",Zt="_ikpuWrapper_cancel_19yws_594",es="_left_content_19yws_604",ts="_left_content_item_19yws_609",ss="_right_block_19yws_622",as="_right_top_19yws_627",ns="_right_top_img_19yws_633",os="_right_bottom_19yws_636",ls="_right_bottom_item_19yws_641",rs="_right_bottom_img_19yws_644",_s="_foundProducts_19yws_648",cs="_foundProducts_modal_19yws_656",is="_foundProducts_top_19yws_672",us="_foundProducts_title_19yws_682",ds="_foundProducts_close_19yws_685",ms="_foundProducts_list_19yws_694",bs="_foundProducts_item_19yws_698",fs="_foundProducts_item_photo_19yws_705",hs="_foundProducts_item_list_19yws_715",ps="_foundProducts_item_title_19yws_727",vs="_foundProducts_item_desc_19yws_730",gs="_foundProducts_item_btn_19yws_734",ys="_errorModal_19yws_739",xs="_errorModal_block_19yws_747",Bs="_img_19yws_761",js="_debt_19yws_765",ws="_debt_form_19yws_770",ks="_debt_form_label_19yws_775",Ns="_debt_input_19yws_782",Cs="_debt_content_19yws_788",Is="_debt_item_19yws_805",Ps="_debt_item_nav_19yws_808",Ss="_debt_item_nav_debt_19yws_818",Ls="_debt_item_nav_deposit_19yws_821",As="_userWrapper_19yws_824",Ds="_userInfo_19yws_824",Ms="_debt_item_nav_box_19yws_830",Os="_debt_item_nav_btn_19yws_836",Es="_debt_item_nav_icon_19yws_841",Ts="_debt_back_19yws_844",$s="_active_19yws_856",Ws="_notActive_19yws_861",Rs="_userInfo_date_19yws_889",Hs="_userInfo_time_19yws_893",Fs="_userInfo_cashier_title_19yws_897",Ks="_userInfo_top_19yws_901",zs="_userInfo_cashier_19yws_897",Vs="_userInfo_cashier_desc_19yws_915",Us="_userInfo_goods_19yws_918",Gs="_userInfo_goods_title_19yws_923",qs="_userInfo_goods_box_19yws_927",Xs="_userInfo_goods_item_19yws_932",Ys="_userInfo_goods_name_19yws_937",Js="_userInfo_goods_amount_19yws_946",Qs="_userInfo_amountToBePaid_19yws_949",Zs="_userInfo_amountToBePaid_title_19yws_954",ea="_userInfo_amountToBePaid_value_19yws_958",ta="_userInfo_paid_19yws_961",sa="_userInfo_paid_title_19yws_966",aa="_userInfo_paid_box_19yws_970",na="_userInfo_paid_item_19yws_976",oa="_userInfo_paid_item_title_19yws_982",la="_userInfo_paid_item_amount_19yws_986",ra="_userInfo_remainder_19yws_989",_a="_userInfo_remainder_title_19yws_994",ca="_userInfo_remainder_value_19yws_998",_={wrapper_container:pe,left:ve,right:ge,container:ye,tableBase:xe,tableBase_kassa:Be,tableBase_headerSum:je,tableBase_headerSum_block:we,tableBase_headerSum_item:ke,tableBase_calculate:Ne,tableBase_calculate_box:Ce,tableBase_calculate_show:Ie,tableBase_calculate_show_yellow:Pe,tableBase_calculate_show_green:Se,tableBase_calculate_btn:Le,tableBase_calculate_btn_yellow:Ae,tableBase_calculate_btn_green:De,tableBase_calculate_debt:Me,tableBase_methods:Oe,tableBase_methods_item_top:Ee,tableBase_methods_item_input:Te,tableBase_methods_yourPay_title:$e,tableBase_methods_yourPay_clear:We,tableBase_numberList:Re,tableBase_numberList_block:He,tableBase_numberList_close:Fe,tableBase_numberList_items:Ke,tableBase_numberList_item:ze,tableBase_numberList_btn:Ve,tableBase_nav:Ue,tableBase_nav_block:Ge,tableBase_nav_list:qe,tableBase_nav_link:Xe,tableBase_nav_error:Ye,tableBase_nav_form:Je,tableBase_nav_input:Qe,tableBase_nav_box:Ze,tableBase_nav_amount:et,tableBase_dark:tt,tableBase_table:st,tableBase_table_head:at,tableBase_table_head_tr:nt,tableBase_table_head_th:ot,tableBase_table_body_tr:lt,tableBase_table_body_tr_selected:rt,tableBase_table_body_td:_t,tableBase_table_body_img:ct,tableBase_table_amount:it,tableBase_table_amount_btn:ut,tableBase_table_amount_minus:dt,tableBase_table_amount_plus:mt,tableBase_table_amount_input:bt,tableBase_table_del:ft,tableBase_menu_close:ht,tableBase_menu_list:pt,tableBase_menu_link:vt,tableBase_menu_linkActive:gt,tableBase_menuList:yt,tableBase_menuList_list:xt,tableBase_menuList_link:Bt,tableBase_menuList_more:jt,tableBase_menuList_open:wt,nav:kt,nav_linkBtn:Nt,nav_settingsIcon:Ct,form:It,form_input:Pt,form_btn:St,form_list:Lt,form_check:At,form_check_text:Dt,formWrapper:Mt,formWrapper_btn:Ot,found:Et,table:Tt,table_head:$t,table_head_row:Wt,table_head_col:Rt,table_body_row:Ht,table_body_col:Ft,table_body_img:Kt,table_body_icon:zt,table_body_name:Vt,table_body_amount:Ut,ikpuWrapper:Gt,ikpuWrapper_ikpuModalBlock:qt,ikpuWrapper_content:Xt,ikpuWrapper_buttons:Yt,ikpuWrapper_save:Jt,ikpuWrapper_delete:Qt,ikpuWrapper_cancel:Zt,left_content:es,left_content_item:ts,right_block:ss,right_top:as,right_top_img:ns,right_bottom:os,right_bottom_item:ls,right_bottom_img:rs,foundProducts:_s,foundProducts_modal:cs,foundProducts_top:is,foundProducts_title:us,foundProducts_close:ds,foundProducts_list:ms,foundProducts_item:bs,foundProducts_item_photo:fs,foundProducts_item_list:hs,foundProducts_item_title:ps,foundProducts_item_desc:vs,foundProducts_item_btn:gs,errorModal:ys,errorModal_block:xs,img:Bs,debt:js,debt_form:ws,debt_form_label:ks,debt_input:Ns,debt_content:Cs,debt_item:Is,debt_item_nav:Ps,debt_item_nav_debt:Ss,debt_item_nav_deposit:Ls,userWrapper:As,userInfo:Ds,debt_item_nav_box:Ms,debt_item_nav_btn:Os,debt_item_nav_icon:Es,debt_back:Ts,active:$s,notActive:Ws,userInfo_date:Rs,userInfo_time:Hs,userInfo_cashier_title:Fs,userInfo_top:Ks,userInfo_cashier:zs,userInfo_cashier_desc:Vs,userInfo_goods:Us,userInfo_goods_title:Gs,userInfo_goods_box:qs,userInfo_goods_item:Xs,userInfo_goods_name:Ys,userInfo_goods_amount:Js,userInfo_amountToBePaid:Qs,userInfo_amountToBePaid_title:Zs,userInfo_amountToBePaid_value:ea,userInfo_paid:ta,userInfo_paid_title:sa,userInfo_paid_box:aa,userInfo_paid_item:na,userInfo_paid_item_title:oa,userInfo_paid_item_amount:la,userInfo_remainder:ra,userInfo_remainder_title:_a,userInfo_remainder_value:ca};function ia(){const{totalAmountsObj:s,selectedProducts:e,totalAmountDue:n,setTotalAmountDue:o}=S(),l=he(s,e);let a=0;for(const r in s)a+=s[r];return v.useEffect(()=>{o(a)},[a,n]),t.jsx("div",{className:_.tableBase_headerSum,children:t.jsx("div",{className:_.tableBase_headerSum_block,children:l==null?void 0:l.map(r=>t.jsxs("div",{className:_.tableBase_headerSum_item,children:[t.jsx("span",{children:r.title}),t.jsx("span",{children:r.amount})]},r.id))})})}function ua({clickedBtn:s}){const{payNumberList:e,payNumberOpen:n,setPayNumberOpen:o}=S(),l=a=>{a.stopPropagation()};return t.jsxs("div",{className:`${_.tableBase_numberList} ${n===!0?_.tableBase_numberList_block:""}`,onClick:a=>l(a),children:[t.jsx("span",{onClick:()=>o(!1),className:_.tableBase_numberList_close,children:t.jsx(F,{name:"XMarkIcon",width:20,color:"white"})}),t.jsx("div",{className:_.tableBase_numberList_items,children:e==null?void 0:e.map((a,r)=>t.jsx("div",{onClick:()=>s(a.value),className:_.tableBase_numberList_item,children:r<=e.length-2?a.value:t.jsx(F,{name:"BackspaceIcon",width:25})},a.id))}),t.jsx("button",{className:_.tableBase_numberList_btn,children:"ПРИМЕНИТЬ"})]})}function da(){const{payNumberOpen:s,setPayNumberOpen:e,totalAmountDue:n,totalAmountsObj:o,selectedProducts:l,paymentColorList:a,kassaMethodsDynamicItem:r,setOpenPay:c,setRemainder:m,setKassaMethodsDynamicItem:p}=S(),[i,y]=v.useState(0),[h,N]=v.useState(""),B=v.useRef({}),[P,x]=v.useState(""),[w,I]=v.useState(""),[k,C]=v.useState(0),[O,D]=v.useState(0);v.useEffect(()=>{l.length===0&&(m(0),Object.values(B.current).forEach(b=>{b&&(b.value="")}),C(0),x(""))},[l,o,m]),v.useEffect(()=>{},[w,i]),v.useEffect(()=>{c(s)},[s,c]);const g=()=>{let b=0;for(const j in o)b+=o[j];let u=-b,E=0;Object.values(B.current).forEach(j=>{const W=Number(j==null?void 0:j.value)||0;u+=W,E+=W,m(u),C(E)}),D(u)},A=b=>{b.preventDefault(),Object.values(B.current).forEach(u=>{u&&(u.value="")}),C(0),x("")},R=b=>{if(h){if(b==="<"){const u=P.slice(0,-1);x(u),$(u,h),B.current[h]&&(B.current[h].value=u)}else{const u=P+b;x(u),$(u,h),B.current[h]&&(B.current[h].value=u)}B.current[h]&&B.current[h].focus(),g()}},H=b=>{N(b),B.current[b]&&x(B.current[b].value||""),e(!0)},M=(b,u)=>{const E=b.target.value;x(E),$(E,u),I(E),g()},$=(b,u)=>{const E=r.findIndex(j=>j.name===u);if(E!==-1){const j={...r[E],value:b},W=[...r];W[E]=j,p(W)}},K=b=>{let u=0;const E=b.currentTarget.getAttribute("for");Object.values(B.current).forEach(j=>{u+=Number(j==null?void 0:j.value)||0}),Object.values(B.current).forEach(j=>{(j==null?void 0:j.getAttribute("id"))===E&&(u!==0&&u!==n&&u<n?(u=(j==null?void 0:j.value)==="0"?n-u:Number(j==null?void 0:j.value)+(n-u),j.value=String(u)):(u>=n||u===0)&&(Object.values(B.current).forEach(G=>{G&&(G.value="")}),u=n,j&&(j.value=String(u))))}),x(String(u)),g()};return t.jsxs("form",{action:"",className:_.tableBase_methods,children:[t.jsx(ua,{clickedBtn:R,btnValue:i,setBtnValue:y}),a==null?void 0:a.map(b=>(b==null?void 0:b.isActive)&&t.jsxs("div",{className:_.tableBase_methods_item,children:[t.jsxs("div",{className:_.tableBase_methods_item_top,style:{background:`${b.color}`},children:[t.jsx("span",{children:b==null?void 0:b.name}),t.jsx("label",{onClick:u=>K(u),htmlFor:b==null?void 0:b.name,children:"Все"})]}),t.jsx("input",{onFocus:()=>H(b==null?void 0:b.name),onClick:()=>H(b==null?void 0:b.name),onChange:u=>M(u,b==null?void 0:b.name),ref:u=>B.current[b==null?void 0:b.name]=u,id:b==null?void 0:b.name,type:"number",className:_.tableBase_methods_item_input,placeholder:"Сумма"})]},b.id)),t.jsxs("div",{className:_.tableBase_methods_yourPay,children:[t.jsxs("h3",{className:_.tableBase_methods_yourPay_title,children:["Ваша сумма: ",k]}),t.jsx("button",{onClick:b=>A(b),className:_.tableBase_methods_yourPay_clear,children:"Очистить"})]})]})}const q=le()(re(_e(s=>({listOfDebtors:[],createNewDebt:!1,currentSearchName:"",currentSearchPhoneNumber:"",errorMessage:{status:!1,text:""},filteredListOfDebtors:[],selectedUserId:"",openCheckStatus:!1,backgroundDebt:"#fff2ee",backgroundDeposit:"#effbde",setBackgroundDebt:e=>s({backgroundDebt:e}),setBackgroundDeposit:e=>s({backgroundDeposit:e}),setOpenCheckStatus:e=>s({openCheckStatus:e}),setSelectedUserId:e=>s({selectedUserId:e}),setFilteredListOfDebtors:e=>s({filteredListOfDebtors:e}),setErrorMessage:e=>s({errorMessage:e}),setCurrentSearchPhoneNumber:e=>s({currentSearchPhoneNumber:e}),setCurrentSearchName:e=>s({currentSearchName:e}),setCreateNewDebt:e=>s({createNewDebt:e}),setListOfDebtors:e=>s({listOfDebtors:e})}),{name:"debtors-storage",partialize:s=>({...s,createNewDebt:void 0,currentSearchName:void 0,currentSearchPhoneNumber:void 0})})));function ie(){const{kassaMethodsDynamicItem:s,selectedProducts:e,totalAmountDue:n,monetaryDebt:o,amountsObj:l,remainder:a,openDebt:r,setOpenDebt:c,setAmountsObj:m,setMonetaryDebt:p,setSearchProduct:i,setTotalAmountDue:y,setTotalAmountsObj:h,delSelectedProducts:N,setKassaMethodsDynamicItem:B}=S(),{listOfDebtors:P,createNewDebt:x,currentSearchName:w,currentSearchPhoneNumber:I,selectedUserId:k,backgroundDebt:C,backgroundDeposit:O,setErrorMessage:D,setCurrentSearchPhoneNumber:g,setCurrentSearchName:A,setCreateNewDebt:R,setListOfDebtors:H}=q(),{user:M}=me(),$=()=>e.map(u=>({mxikCode:u.mxikCode,name:u.crmNameProduct??u.subPositionName})),K=b=>{if((o&&a<0||a>0)&&c(!0),b.currentTarget.innerHTML=="ЗАПИСАТЬ"&&x&&w&&I){if((w==null?void 0:w.length)>0&&(I==null?void 0:I.length)>0)if(P.some(u=>(u==null?void 0:u.phoneNumber)==I))D({status:!0,text:"Клиент с таким номером уже есть"});else{D({status:!1,text:""});const u={id:d(),name:w,phoneNumber:I,transaction:a,debt:a<0,deposit:a>0,infoList:[{id:d(),date:new Date().toLocaleDateString(),hours:new Date().getHours(),minutes:new Date().getMinutes(),cashiersName:M==null?void 0:M.username,type:null,listOfGoods:$(),payment:s,amountToBePaid:n,remainder:a,amountProducts:l,transactionStatus:a<0?"долг":"депозит",background:a<0?C:O}]};H([...P,u]),i(""),h({}),m([]),g(""),B([{name:"Наличка",value:""},{name:"Перечисление",value:""},{name:"Электронные кошельки",value:""}]),A(""),R(!1),N([]),p(!1),y(0),c(!1)}}else if(b.currentTarget.innerHTML=="ЗАПИСАТЬ"&&!x&&k){const u=P.find(j=>j.id==k),E=P.findIndex(j=>j.id==k);if(u){(a>0||a<0)&&(u.transaction+=a);const j={id:u.id,name:u.name,phoneNumber:u.phoneNumber,transaction:u.transaction,debt:u.transaction<0,deposit:!(u.transaction<0),infoList:[...u.infoList,{id:d(),date:new Date().toLocaleDateString(),hours:new Date().getHours(),minutes:new Date().getMinutes(),cashiersName:M==null?void 0:M.username,type:null,listOfGoods:$(),payment:s,amountToBePaid:n,remainder:a,amountProducts:l,transactionStatus:a<0?"долг":"депозит",background:a<0?C:O}]};P.splice(E,1,j),H(P),i(""),h({}),m([]),g(""),B([{name:"Наличка",value:""},{name:"Перечисление",value:""},{name:"Электронные кошельки",value:""}]),A(""),R(!1),N([]),p(!1),y(0),c(!1)}}};return t.jsxs("div",{className:_.tableBase_calculate,children:[a<0&&!r&&t.jsx("h4",{className:_.tableBase_calculate_title,children:"Касса уходит в минус"}),a==0&&t.jsx("h4",{className:_.tableBase_calculate_title,children:"Остаток"}),a>0&&t.jsx("h4",{className:_.tableBase_calculate_title,children:"Сдача"}),t.jsxs("div",{className:_.tableBase_calculate_box,children:[t.jsx("div",{className:`${_.tableBase_calculate_show} 
          ${a>0?_.tableBase_calculate_show_yellow:""} 
          ${a==0?_.tableBase_calculate_show_green:""}`,children:a>0?"+ "+a:a}),t.jsx("button",{onClick:b=>K(b),className:`${_.tableBase_calculate_btn} 
          ${a>0?_.tableBase_calculate_btn_yellow:""} 
          ${a==0?_.tableBase_calculate_btn_green:""}`,children:r&&o?"ЗАПИСАТЬ":"РАСЧИТАТЬ"})]}),!r&&t.jsxs("label",{className:_.tableBase_calculate_debt,children:[t.jsx("input",{type:"checkbox",onClick:()=>p(!o)}),t.jsx("span",{children:a<0?"Записать платеж в долг":"Записать платеж в депозит"})]})]})}function ma(){const{createNewDebt:s,currentSearchName:e,currentSearchPhoneNumber:n,setCurrentSearchPhoneNumber:o,setCurrentSearchName:l,setCreateNewDebt:a}=q();return t.jsxs("form",{action:"",className:_.debt_form,children:[t.jsxs("label",{className:_.debt_form_label,children:[t.jsx("input",{type:"checkbox",onClick:()=>a(!s)}),t.jsx("span",{children:"Создать нового"})]}),t.jsx("label",{children:t.jsx("input",{className:_.debt_input,type:"text",placeholder:"Имя",value:e,onChange:r=>l(r.currentTarget.value)})}),t.jsx("label",{children:t.jsx("input",{className:_.debt_input,type:"number",placeholder:"Номер телефона",value:n,onChange:r=>o(r.currentTarget.value)})})]})}function ba({item:s}){return t.jsx(t.Fragment,{children:t.jsx("div",{className:_.userWrapper,children:s.infoList.map(e=>t.jsxs("div",{className:_.userInfo,style:{background:e.background},children:[t.jsxs("div",{className:_.userInfo_top,children:[t.jsx("span",{className:_.userInfo_date,children:e.date}),t.jsx("span",{className:_.userInfo_time,children:`${e.hours}:${e.minutes}`})]}),t.jsxs("div",{className:_.userInfo_content,children:[t.jsxs("div",{className:_.userInfo_cashier,children:[t.jsx("span",{className:_.userInfo_cashier_title,children:"Кассир:"}),t.jsx("span",{className:_.userInfo_cashier_desc,children:e.cashiersName})]}),t.jsxs("div",{className:_.userInfo_goods,children:[t.jsx("span",{className:_.userInfo_goods_title,children:"Перечень товаров:"}),t.jsx("div",{className:_.userInfo_goods_box,children:e.listOfGoods&&(e==null?void 0:e.amountProducts.map((n,o)=>t.jsxs("div",{className:_.userInfo_goods_item,children:[t.jsx("span",{className:_.userInfo_goods_name,children:n.name}),t.jsxs("span",{className:_.userInfo_goods_amount,children:[n.amount," шт."]})]},o)))}),t.jsxs("div",{className:_.userInfo_amountToBePaid,children:[t.jsx("span",{className:_.userInfo_amountToBePaid_title,children:"Сумма к оплате"}),t.jsxs("span",{className:_.userInfo_amountToBePaid_value,children:[e.amountToBePaid," сум"]})]}),t.jsxs("div",{className:_.userInfo_paid,children:[t.jsx("h4",{className:_.userInfo_paid_title,children:"Оплата:"}),t.jsx("div",{className:_.userInfo_paid_box,children:e.payment.map((n,o)=>n.value&&t.jsxs("div",{className:_.userInfo_paid_item,children:[t.jsx("span",{className:_.userInfo_paid_item_title,children:n.name}),t.jsxs("span",{className:_.userInfo_paid_item_amount,children:[n.value,"сум"]})]},o))})]}),t.jsxs("div",{className:_.userInfo_remainder,children:[t.jsx("span",{className:_.userInfo_remainder_title,children:e.transactionStatus}),t.jsxs("span",{className:_.userInfo_remainder_value,children:[s.debt===!0?-e.remainder:e.remainder," сум"]})]})]})]})]},e.id))})})}function fa({selectedId:s,setSelectedId:e}){const{currentSearchName:n,currentSearchPhoneNumber:o,filteredListOfDebtors:l,openCheckStatus:a,setOpenCheckStatus:r,setSelectedUserId:c}=q(),m=(i,y)=>{e(y),c(y),s!=y&&r(!1)};function p(i,y){s==y?r(!a):r(!1)}return t.jsx("div",{className:_.debt_content,children:l==null?void 0:l.map(i=>t.jsxs("div",{"data-id":i.id,className:`
          ${_.debt_item}
          ${i.id==s&&n&&(n==null?void 0:n.length)>0?_.active:""} 
          ${i.id==s&&o&&(o==null?void 0:o.length)>0?_.active:""}
          `,onClick:y=>m(y,i.id),children:[t.jsxs("div",{className:`
          ${_.debt_item_nav} 
          ${i.debt==!0?_.debt_item_nav_debt:_.debt_item_nav_deposit} 
          `,children:[t.jsx("h4",{className:_.debt_item_nav_name,children:i.name}),t.jsxs("div",{className:_.debt_item_nav_box,children:[i.debt&&t.jsxs("span",{className:_.debt_item_nav_transaction,children:["Общий долг: ",-i.transaction," сум"]}),i.deposit&&t.jsxs("span",{className:_.debt_item_nav_transaction,children:["Общий депозит: ",i.transaction," сум"]}),t.jsx("button",{className:_.debt_item_nav_btn,onClick:y=>p(y,i.id),children:t.jsx(F,{name:"IdentificationIcon"})})]})]},i.id),a===!0&&s===i.id&&t.jsx(ba,{item:i})]},i.id))})}function ha(){const{errorMessage:s,listOfDebtors:e,createNewDebt:n,currentSearchName:o,currentSearchPhoneNumber:l,setSelectedUserId:a,setFilteredListOfDebtors:r,setCurrentSearchPhoneNumber:c,setCurrentSearchName:m}=q(),{setOpenDebt:p,setAmountsObj:i,setMonetaryDebt:y,setTotalAmountDue:h,setTotalAmountsObj:N,delSelectedProducts:B}=S(),[P,x]=v.useState(null);v.useEffect(()=>{if(!n&&o&&o.length>0){const I=o.length>0?e.filter(k=>k==null?void 0:k.name.toLowerCase().trim().includes(o==null?void 0:o.toLowerCase().trim())):e;r(I)}else if(!n&&l&&(l==null?void 0:l.length)>0){const I=(l==null?void 0:l.length)>0?e.filter(k=>k==null?void 0:k.phoneNumber.toLowerCase().trim().includes(l==null?void 0:l.toLowerCase().trim())):e;r(I)}else r([]),x(""),a("")},[o,l]);const w=()=>{p(!1),y(!1),m(""),c(""),N({}),i([]),B([]),h(0)};return t.jsxs("div",{className:_.debt,children:[t.jsx(ma,{}),t.jsx(fa,{selectedId:P,setSelectedId:x}),t.jsx("button",{className:_.debt_back,onClick:()=>w(),children:"назад"}),t.jsx("p",{children:s.text}),t.jsx(ie,{})]})}const pa=()=>{const{monetaryDebt:s,openDebt:e}=S();return t.jsxs("div",{className:_.tableBase_kassa,children:[!e&&t.jsxs(t.Fragment,{children:[t.jsx(ia,{}),t.jsx(da,{}),t.jsx(ie,{})]}),e&&s&&t.jsx(t.Fragment,{children:t.jsx(ha,{})})]})},va=pa;function ga(){const{error:s,openMenu:e,amountChose:n,searchProduct:o,setAmountChose:l,setOpenMenu:a,setSearchProduct:r,setError:c}=S(),[m,p]=v.useState(!1);v.useEffect(()=>{p(s.status);const h=setTimeout(()=>{p(!1),c({status:!1,text:""})},3e3);return()=>clearTimeout(h)},[s.status===!0]);const i=h=>{h.preventDefault(),r("")},y=h=>{h.stopPropagation(),a(!e)};return t.jsx("header",{className:_.tableBase_header,children:t.jsxs("nav",{className:_.tableBase_nav,children:[t.jsxs("div",{children:[t.jsx(z,{to:"/cash-register/menu",className:_.tableBase_nav_block,children:t.jsx(F,{name:"WrenchScrewdriverIcon",width:40})}),t.jsxs("ul",{className:_.tableBase_nav_list,children:[t.jsx("li",{children:t.jsxs(z,{to:"/admin/settings/modules",className:_.tableBase_nav_link,children:[t.jsx(F,{name:"AdjustmentsVerticalIcon",width:20}),t.jsx("span",{children:"Admin"})]})}),t.jsx("li",{children:t.jsxs(z,{onClick:h=>y(h),to:"",className:_.tableBase_nav_link,children:[t.jsx(F,{name:"Bars3Icon",width:20}),t.jsx("span",{children:"Меню"})]})})]})]}),m&&t.jsx("span",{className:_.tableBase_nav_error,children:s.text}),t.jsxs("form",{action:"",className:_.tableBase_nav_form,children:[t.jsx("input",{onChange:h=>r(h.target.value),type:"text",value:o,placeholder:"Введите наименование или штрихкод товара",className:_.tableBase_nav_input}),t.jsx("button",{onClick:h=>i(h),children:t.jsx(F,{name:"XMarkIcon",width:20})}),t.jsxs("div",{className:_.tableBase_nav_box,children:[t.jsx("input",{onChange:h=>l(Number(h.target.value)),type:"number",value:n,min:"1",max:"100",className:_.tableBase_nav_amount}),t.jsx("span",{children:"шт"})]})]})]})})}function ya(){const[s,e]=v.useState([]),[n,o]=v.useState(!0);v.useEffect(()=>{e([...r])},[]);const{openMenu:l,leftMenu:a,leftMenuActive:r}=S();v.useEffect(()=>{l&&(o(!0),e([...r]))},[l]);const c=()=>{o(!1),e([...r,...a])},m=p=>{p.stopPropagation()};return t.jsxs("div",{className:`
      ${_.tableBase_menuList} 
      ${l?_.tableBase_menuList_open:""}
      `,onClick:p=>m(p),style:{minHeight:`${n?"max-content":""}`,height:`${n?"":"400px"}`},children:[t.jsx("ul",{className:_.tableBase_menuList_list,children:s==null?void 0:s.map(p=>t.jsx("li",{children:t.jsx(z,{to:"#",className:_.tableBase_menuList_link,children:p.title})},p.id))}),n&&t.jsxs("span",{className:_.tableBase_menuList_more,onClick:c,children:["Eшe +",a.length]})]})}function xa({filteredProducts:s,setProducts:e}){const{settingsSearchParams:n}=S(),[o,l]=v.useState([]);return v.useEffect(()=>{const a=n.filter(r=>r.checked);l(()=>[...a])},[n]),t.jsx(t.Fragment,{children:s.length>0&&t.jsxs("table",{className:_.tableBase_table,children:[t.jsx("thead",{className:_.tableBase_table_head,children:t.jsx("tr",{className:_.tableBase_table_head_tr,children:o==null?void 0:o.map(a=>t.jsx("th",{className:_.tableBase_table_head_th,children:a.title},a.id))})}),t.jsx("tbody",{className:_.tableBase_table_body,children:s==null?void 0:s.map(a=>t.jsx("tr",{onClick:()=>e(a==null?void 0:a.mxikCode),className:_.tableBase_table_body_tr,children:o==null?void 0:o.map(r=>t.jsxs("td",{className:_.tableBase_table_body_td,children:[r.title=="Фото"&&t.jsx("img",{src:"/img.jpeg",width:50,height:50,alt:"",className:_.tableBase_table_body_img}),r.title=="Наименование"&&(a==null?void 0:a.crmNameProduct),r.title=="Приходная цена"&&(a==null?void 0:a.crmArrivalPrice)+" сум",r.title=="Продажная цена"&&(a==null?void 0:a.crmSellingPrice)+" сум",r.title=="QR Код"&&(a==null?void 0:a.mxikCode),r.title=="Ед.измерения"&&(a==null?void 0:a.attributeName),r.title=="Количество"&&(a==null?void 0:a.crmAmount)+" шт"]},r.id))},a==null?void 0:a.mxikCode))})]})})}function Ba({column:s,amounts:e,countProduct:n,delProduct:o}){const{amountChose:l,selectedProducts:a,totalAmounts:r}=S();return t.jsx("tbody",{className:_.tableBase_table_body,children:a==null?void 0:a.map(c=>t.jsx("tr",{className:_.tableBase_table_body_tr_selected,children:s==null?void 0:s.map(m=>t.jsxs("td",{className:`${_.tableBase_table_body_td} ${m.title=="Штрихкод"?"mxikCode":m.title=="Цена"?"price text-center":m.title=="Количество"?"amount":""}`,children:[m.title=="Фото"&&t.jsx("img",{src:"/img.jpeg",width:50,height:50,alt:"",className:_.tableBase_table_body_img}),m.title=="Наименование"&&(c==null?void 0:c.crmNameProduct),m.title=="Приходная цена"&&(c==null?void 0:c.crmArrivalPrice)+" сум",m.title=="Продажная цена"&&(c==null?void 0:c.crmSellingPrice)+" сум",m.title=="Цена"&&(c==null?void 0:c.crmSellingPrice)+" сум",m.title=="Штрихкод"&&(c==null?void 0:c.mxikCode),m.title=="Ед.измерения"&&(c==null?void 0:c.attributeName),m.title=="Количество"&&t.jsxs("div",{className:_.tableBase_table_amount,children:[t.jsx("button",{onClick:p=>n(p,c),"data-symbol":"-",className:`${_.tableBase_table_amount_btn} ${_.tableBase_table_amount_minus}`,children:"-"}),t.jsx("input",{min:1,max:c==null?void 0:c.crmAmount,type:"number",className:`${_.tableBase_table_amount_input} amount`,value:e[c.mxikCode]||l,readOnly:!0}),t.jsx("button",{onClick:p=>n(p,c),"data-symbol":"+",className:`${_.tableBase_table_amount_btn} ${_.tableBase_table_amount_plus}`,children:"+"})]}),(m==null?void 0:m.title)=="Сумма"&&t.jsxs(t.Fragment,{children:[(c==null?void 0:c.mxikCode)&&r[c==null?void 0:c.mxikCode],t.jsx("span",{children:"сум"}),t.jsx("button",{onClick:()=>o(c==null?void 0:c.mxikCode),className:`del ${_.tableBase_table_del}`,children:t.jsx(F,{name:"TrashIcon",width:20,color:"white"})})]})]},m.id))},c==null?void 0:c.mxikCode))})}function ja({column:s}){return t.jsx("thead",{className:_.tableBase_table_head,children:t.jsx("tr",{className:_.tableBase_table_head_tr,children:s==null?void 0:s.map(e=>t.jsx("th",{className:_.tableBase_table_head_th,children:e.title},e.id))})})}function wa({amounts:s,countProduct:e,filteredProducts:n,setFilteredProducts:o}){const{searchProduct:l,amountChose:a,selectedProducts:r,amountsObj:c,settingsParams:m,totalAmountsObj:p,setAmountsObj:i,delSelectedProducts:y,updateTotalAmountsObj:h}=S(),[N,B]=v.useState([]);v.useEffect(()=>{const x=m.filter(w=>w.checked);B(()=>[...x])},[m]);const P=x=>{const w=r.filter(C=>(C==null?void 0:C.mxikCode)!=x),I=n.filter(C=>(C==null?void 0:C.mxikCode)!=x);o([...I]);const k=r.find(C=>(C==null?void 0:C.mxikCode)==x);if(r.findIndex(C=>(C==null?void 0:C.mxikCode)==x),k&&k.crmAmount){y(w);const C={};for(const O in p)O!=x&&(C[O]=p[O]);if(l&&a<=k.crmAmount){const D=[...n.filter(g=>(g==null?void 0:g.mxikCode)!=x),k];o(D)}if(c.some(O=>O.name==(k==null?void 0:k.crmNameProduct))){const O=c.filter(D=>D.name!=(k==null?void 0:k.crmNameProduct));i([...O])}else i([...c]);h(C)}};return t.jsx(t.Fragment,{children:r.length>0&&t.jsxs("table",{className:_.tableBase_table,children:[t.jsx(ja,{column:N}),t.jsx(Ba,{column:N,amounts:s,countProduct:e,delProduct:P})]})})}function ka(){const{setPayNumberOpen:s,openPay:e,setOpenPay:n,searchProduct:o,amountChose:l,selectedProducts:a,amountsObj:r,totalAmountsObj:c,setError:m,setSelectedProducts:p,setAmountsObj:i,setTotalAmountsObj:y,totalAmounts:h,setTotalAmounts:N}=S(),{shop1Products:B}=be(),[P,x]=v.useState([]),[w,I]=v.useState({});v.useEffect(()=>{if(o.length>0){const D=o.length>0?B==null?void 0:B.filter(g=>{var A;return((A=g==null?void 0:g.crmNameProduct)==null?void 0:A.toLowerCase().trim().includes(o==null?void 0:o.toLowerCase().trim()))&&(g==null?void 0:g.crmAmount)&&(g==null?void 0:g.crmAmount)>0&&(g==null?void 0:g.crmAmount)>=l}):[];x(D)}else x([])},[o,l]);const k=D=>{const g=B.filter(A=>(A==null?void 0:A.mxikCode)==D)[0];if(a.some(A=>(A==null?void 0:A.mxikCode)==(g==null?void 0:g.mxikCode)))m({status:!0,text:`Вы ужу выбрали - "${g.crmNameProduct}"`});else{p(g),x(H=>H.filter(M=>(M==null?void 0:M.mxikCode)!=D));const A={...w,[D]:l};I(A);const R={...h,[D]:(g==null?void 0:g.crmSellingPrice)*l};N(R),console.log("totalAmounts",h),i([...r,{amount:l,name:g.crmNameProduct}]),y({...c,[g.mxikCode]:g.crmSellingPrice*l})}},C=(D,g)=>{const A=D.target,R=A.getAttribute("data-symbol"),H=A.closest("tr"),M=g.mxikCode,$=(g==null?void 0:g.crmSellingPrice)&&(g==null?void 0:g.crmSellingPrice),K=H.querySelector(".amount input");if(!K)throw new Error("Input element not found");let b=Number(K.value),u=h[M];if(R==="+"&&$?(b+=1,u+=$):R==="-"&&$&&(b-=1,u-=$),b>=1&&b<=Number(K.getAttribute("max"))){const E={...w,[M]:b};I(E);const j={...h,[M]:u};if(N(j),r.some(W=>W.name==g.crmNameProduct)){const W=r==null?void 0:r.filter(G=>G.name!=g.crmNameProduct);i([...W,{amount:b,name:g==null?void 0:g.crmNameProduct}])}else i([...r,{amount:b,name:g.crmNameProduct}]);y({...c,[M]:u})}},O=()=>{n(!1),s(!1)};return t.jsxs("div",{className:_.tableBase,children:[t.jsx(ya,{}),e&&t.jsx("span",{className:_.tableBase_dark,onClick:O}),t.jsx(xa,{filteredProducts:P,setProducts:k}),t.jsx(wa,{countProduct:C,amounts:w,filteredProducts:P,setFilteredProducts:x})]})}const Na="_layout_1vvmu_1",Ca="_layout_back_1vvmu_4",Ia="_layout_title_1vvmu_14",Pa="_layout_list_1vvmu_19",Sa="_layout_link_1vvmu_25",La="_layout_link_active_1vvmu_34",Aa="_form_list_1vvmu_38",Da="_form_check_1vvmu_43",Ma="_navSetting_1vvmu_50",Oa="_found_1vvmu_54",Ea="_table_1vvmu_75",Ta="_table_head_1vvmu_79",$a="_table_head_row_1vvmu_82",Wa="_table_head_col_1vvmu_86",Ra="_menu_1vvmu_89",Ha="_menuLeft_1vvmu_94",Fa="_menuLeft_item_1vvmu_98",Ka="_menuRight_1vvmu_109",za="_menuRight_item_1vvmu_113",Va="_settingsColor_title_1vvmu_125",Ua="_settingsColor_content_1vvmu_130",Ga="_settingsColor_right_1vvmu_135",qa="_settingsColor_right_content_1vvmu_141",Xa="_settingsColor_amounts_1vvmu_150",Ya="_settingsColor_amounts_list_1vvmu_154",Ja="_settingsColor_amounts_item_1vvmu_159",Qa="_settingsColor_payment_1vvmu_164",Za="_settingsColor_payment_top_1vvmu_171",en="_settingsColor_payment_bottom_1vvmu_174",tn="_settingsColor_payment_title_1vvmu_177",sn="_settingsColor_payment_amount_1vvmu_177",an="_settingsColor_payment_box_1vvmu_183",nn="_settingsColor_payment_boxColor_1vvmu_192",on="_settingsColor_payment_checkbox_1vvmu_196",ln="_settingsColor_calculate_title_1vvmu_206",rn="_settingsColor_calculate_amount_1vvmu_206",_n="_settingsColor_calculate_block_1vvmu_212",cn="_settingsColor_calculate_button_1vvmu_222",f={layout:Na,layout_back:Ca,layout_title:Ia,layout_list:Pa,layout_link:Sa,layout_link_active:La,form_list:Aa,form_check:Da,navSetting:Ma,found:Oa,table:Ea,table_head:Ta,table_head_row:$a,table_head_col:Wa,menu:Ra,menuLeft:Ha,menuLeft_item:Fa,menuRight:Ka,menuRight_item:za,settingsColor_title:Va,settingsColor_content:Ua,settingsColor_right:Ga,settingsColor_right_content:qa,settingsColor_amounts:Xa,settingsColor_amounts_list:Ya,settingsColor_amounts_item:Ja,settingsColor_payment:Qa,settingsColor_payment_top:Za,settingsColor_payment_bottom:en,settingsColor_payment_title:tn,settingsColor_payment_amount:sn,settingsColor_payment_box:an,settingsColor_payment_boxColor:nn,settingsColor_payment_checkbox:on,settingsColor_calculate_title:ln,settingsColor_calculate_amount:rn,settingsColor_calculate_block:_n,settingsColor_calculate_button:cn};function un(){const s=v.useRef([]),{settingsParams:e,setSettingsParams:n}=S();v.useEffect(()=>{s.current.forEach((l,a)=>{l&&(l.checked=e[a].checked)})},[e]);const o=l=>{const a=e.map(r=>({id:r.id,title:r.title,checked:r.title==l.currentTarget.value?l.currentTarget.checked:r.checked}));n(a)};return t.jsx("nav",{className:f.navSetting,children:t.jsx("form",{action:"",className:f.form,children:t.jsx("ul",{className:f.form_list,children:e==null?void 0:e.map((l,a)=>t.jsx("li",{children:t.jsxs("label",{className:f.form_check,children:[t.jsx("input",{type:"checkbox",value:l.title,ref:r=>{s.current[a]=r},onChange:r=>o(r)}),t.jsx("span",{className:f.form_check_text,children:l.title})]})},l.id))})})})}function dn(){const{leftMenu:s,setLeftMenu:e,leftMenuActive:n,setLeftMenuActive:o}=S(),l=a=>{const r=s.filter(c=>c.id!=a.id);e([...r]),o([...n,a])};return t.jsx("div",{className:f.menuLeft,children:s==null?void 0:s.map(a=>t.jsx("div",{className:f.menuLeft_item,onClick:()=>l(a),children:t.jsx("span",{children:a==null?void 0:a.title})},a==null?void 0:a.id))})}function mn(){const{leftMenu:s,setLeftMenu:e,leftMenuActive:n,setLeftMenuActive:o}=S(),[l,a]=v.useState(),r=i=>{const y=n.filter(h=>h.id!=i.id);o([...y]),e([...s,i])};function c(i,y){a(y)}function m(i){i.preventDefault()}function p(i,y){if(i.preventDefault(),l&&y){const h=n.findIndex(B=>B.id==l.id),N=n.findIndex(B=>B.id==y.id);if(h>N){const B=n.filter(P=>P.id!=l.id);B.splice(N,1,l,y),o(B)}else h<N&&(n.splice(h,1,y),n.splice(N,1,l),o(n))}}return t.jsx("div",{className:f.menuRight,children:n==null?void 0:n.map((i,y)=>t.jsxs("div",{className:f.menuRight_item,onClick:()=>r(i),draggable:!0,onDragStart:h=>c(h,i),onDragOver:h=>m(h),onDrop:h=>p(h,i),children:[t.jsx("span",{children:y+1}),t.jsx("span",{children:i==null?void 0:i.title})]},i==null?void 0:i.id))})}function bn(){return t.jsxs("div",{className:f.menu,children:[t.jsx(dn,{}),t.jsx(mn,{})]})}function X(){return(X=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(s[o]=n[o])}return s}).apply(this,arguments)}function ue(s,e){if(s==null)return{};var n,o,l={},a=Object.keys(s);for(o=0;o<a.length;o++)e.indexOf(n=a[o])>=0||(l[n]=s[n]);return l}function Q(s){var e=v.useRef(s),n=v.useRef(function(o){e.current&&e.current(o)});return e.current=s,n.current}var V=function(s,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),s>n?n:s<e?e:s},U=function(s){return"touches"in s},Z=function(s){return s&&s.ownerDocument.defaultView||self},ae=function(s,e,n){var o=s.getBoundingClientRect(),l=U(e)?function(a,r){for(var c=0;c<a.length;c++)if(a[c].identifier===r)return a[c];return a[0]}(e.touches,n):e;return{left:V((l.pageX-(o.left+Z(s).pageXOffset))/o.width),top:V((l.pageY-(o.top+Z(s).pageYOffset))/o.height)}},ne=function(s){!U(s)&&s.preventDefault()},te=L.memo(function(s){var e=s.onMove,n=s.onKey,o=ue(s,["onMove","onKey"]),l=v.useRef(null),a=Q(e),r=Q(n),c=v.useRef(null),m=v.useRef(!1),p=v.useMemo(function(){var N=function(x){ne(x),(U(x)?x.touches.length>0:x.buttons>0)&&l.current?a(ae(l.current,x,c.current)):P(!1)},B=function(){return P(!1)};function P(x){var w=m.current,I=Z(l.current),k=x?I.addEventListener:I.removeEventListener;k(w?"touchmove":"mousemove",N),k(w?"touchend":"mouseup",B)}return[function(x){var w=x.nativeEvent,I=l.current;if(I&&(ne(w),!function(C,O){return O&&!U(C)}(w,m.current)&&I)){if(U(w)){m.current=!0;var k=w.changedTouches||[];k.length&&(c.current=k[0].identifier)}I.focus(),a(ae(I,w,c.current)),P(!0)}},function(x){var w=x.which||x.keyCode;w<37||w>40||(x.preventDefault(),r({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},P]},[r,a]),i=p[0],y=p[1],h=p[2];return v.useEffect(function(){return h},[h]),L.createElement("div",X({},o,{onTouchStart:i,onMouseDown:i,className:"react-colorful__interactive",ref:l,onKeyDown:y,tabIndex:0,role:"slider"}))}),Y=function(s){return s.filter(Boolean).join(" ")},se=function(s){var e=s.color,n=s.left,o=s.top,l=o===void 0?.5:o,a=Y(["react-colorful__pointer",s.className]);return L.createElement("div",{className:a,style:{top:100*l+"%",left:100*n+"%"}},L.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},T=function(s,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*s)/n},de=function(s){var e=s.s,n=s.v,o=s.a,l=(200-e)*n/100;return{h:T(s.h),s:T(l>0&&l<200?e*n/100/(l<=100?l:200-l)*100:0),l:T(l/2),a:T(o,2)}},ee=function(s){var e=de(s);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},J=function(s){var e=de(s);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},fn=function(s){var e=s.h,n=s.s,o=s.v,l=s.a;e=e/360*6,n/=100,o/=100;var a=Math.floor(e),r=o*(1-n),c=o*(1-(e-a)*n),m=o*(1-(1-e+a)*n),p=a%6;return{r:T(255*[o,c,r,r,m,o][p]),g:T(255*[m,o,o,c,r,r][p]),b:T(255*[r,r,m,o,o,c][p]),a:T(l,2)}},hn=function(s){var e=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(s);return e?pn({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}},pn=function(s){var e=s.r,n=s.g,o=s.b,l=s.a,a=Math.max(e,n,o),r=a-Math.min(e,n,o),c=r?a===e?(n-o)/r:a===n?2+(o-e)/r:4+(e-n)/r:0;return{h:T(60*(c<0?c+6:c)),s:T(a?r/a*100:0),v:T(a/255*100),a:l}},vn=L.memo(function(s){var e=s.hue,n=s.onChange,o=Y(["react-colorful__hue",s.className]);return L.createElement("div",{className:o},L.createElement(te,{onMove:function(l){n({h:360*l.left})},onKey:function(l){n({h:V(e+360*l.left,0,360)})},"aria-label":"Hue","aria-valuenow":T(e),"aria-valuemax":"360","aria-valuemin":"0"},L.createElement(se,{className:"react-colorful__hue-pointer",left:e/360,color:ee({h:e,s:100,v:100,a:1})})))}),gn=L.memo(function(s){var e=s.hsva,n=s.onChange,o={backgroundColor:ee({h:e.h,s:100,v:100,a:1})};return L.createElement("div",{className:"react-colorful__saturation",style:o},L.createElement(te,{onMove:function(l){n({s:100*l.left,v:100-100*l.top})},onKey:function(l){n({s:V(e.s+100*l.left,0,100),v:V(e.v-100*l.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+T(e.s)+"%, Brightness "+T(e.v)+"%"},L.createElement(se,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:ee(e)})))}),yn=function(s,e){if(s===e)return!0;for(var n in s)if(s[n]!==e[n])return!1;return!0},xn=function(s,e){return s.replace(/\s/g,"")===e.replace(/\s/g,"")};function Bn(s,e,n){var o=Q(n),l=v.useState(function(){return s.toHsva(e)}),a=l[0],r=l[1],c=v.useRef({color:e,hsva:a});v.useEffect(function(){if(!s.equal(e,c.current.color)){var p=s.toHsva(e);c.current={hsva:p,color:e},r(p)}},[e,s]),v.useEffect(function(){var p;yn(a,c.current.hsva)||s.equal(p=s.fromHsva(a),c.current.color)||(c.current={hsva:a,color:p},o(p))},[a,s,o]);var m=v.useCallback(function(p){r(function(i){return Object.assign({},i,p)})},[]);return[a,m]}var jn=typeof window<"u"?v.useLayoutEffect:v.useEffect,wn=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},oe=new Map,kn=function(s){jn(function(){var e=s.current?s.current.ownerDocument:document;if(e!==void 0&&!oe.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,oe.set(e,n);var o=wn();o&&n.setAttribute("nonce",o),e.head.appendChild(n)}},[])},Nn=function(s){var e=s.className,n=s.hsva,o=s.onChange,l={backgroundImage:"linear-gradient(90deg, "+J(Object.assign({},n,{a:0}))+", "+J(Object.assign({},n,{a:1}))+")"},a=Y(["react-colorful__alpha",e]),r=T(100*n.a);return L.createElement("div",{className:a},L.createElement("div",{className:"react-colorful__alpha-gradient",style:l}),L.createElement(te,{onMove:function(c){o({a:c.left})},onKey:function(c){o({a:V(n.a+c.left)})},"aria-label":"Alpha","aria-valuetext":r+"%","aria-valuenow":r,"aria-valuemin":"0","aria-valuemax":"100"},L.createElement(se,{className:"react-colorful__alpha-pointer",left:n.a,color:J(n)})))},Cn=function(s){var e=s.className,n=s.colorModel,o=s.color,l=o===void 0?n.defaultColor:o,a=s.onChange,r=ue(s,["className","colorModel","color","onChange"]),c=v.useRef(null);kn(c);var m=Bn(n,l,a),p=m[0],i=m[1],y=Y(["react-colorful",e]);return L.createElement("div",X({},r,{ref:c,className:y}),L.createElement(gn,{hsva:p,onChange:i}),L.createElement(vn,{hue:p.h,onChange:i}),L.createElement(Nn,{hsva:p,onChange:i,className:"react-colorful__last-control"}))},In={defaultColor:"rgba(0, 0, 0, 1)",toHsva:hn,fromHsva:function(s){var e=fn(s);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},equal:xn},Pn=function(s){return L.createElement(Cn,X({},s,{colorModel:In}))};function Sn(){const{paymentColorList:s,setPaymentColorList:e,currentColor:n,currentColorBlock:o,setCurrentColor:l}=S(),[a,r]=v.useState(n);v.useEffect(()=>{r(n)},[n]);const c=m=>{r(m),l(m);const p=s.filter(y=>y.id==o)[0],i=s.findIndex(y=>y.id==o);if(p){p.color=m;const y=JSON.parse(JSON.stringify(s));y.splice(i,1,p),e([...y])}};return t.jsx(Pn,{color:a,onChange:c})}function Ln(){return t.jsx("div",{className:f.settingsColor_left,children:t.jsx(Sn,{})})}function An(){return t.jsx("div",{className:f.settingsColor_amounts,children:t.jsxs("ul",{className:f.settingsColor_amounts_list,children:[t.jsxs("li",{className:f.settingsColor_amounts_item,children:[t.jsx("span",{children:"Наименований"}),t.jsx("span",{children:"10"})]}),t.jsxs("li",{className:f.settingsColor_amounts_item,children:[t.jsx("span",{children:"Скидка"}),t.jsx("span",{children:"150 000"})]}),t.jsxs("li",{className:f.settingsColor_amounts_item,children:[t.jsx("span",{children:"Наценка"}),t.jsx("span",{children:"150 000"})]}),t.jsxs("li",{className:f.settingsColor_amounts_item,children:[t.jsx("span",{children:"К оплате"}),t.jsx("span",{children:"100 000 000"})]})]})})}function Dn({id:s,name:e,amount:n,color:o,index:l}){const a=v.useRef([]),{paymentColorList:r,setPaymentColorList:c,setCurrentColor:m,setCurrentColorBlock:p}=S();v.useEffect(()=>{a.current.forEach((h,N)=>{h&&(h.checked=r[N].isActive)})},[r]);const i=h=>{const N=r.filter(B=>B.id==h)[0];m(N.color),p(h)},y=()=>{const h=r.map(N=>({id:N.id,name:N.name,amount:N.amount,color:N.color,isActive:N.id===s?!N.isActive:N.isActive}));c([...h])};return t.jsxs("div",{className:f.settingsColor_payment,children:[t.jsxs("div",{className:f.settingsColor_payment_top,style:{background:o},onClick:()=>i(s),children:[t.jsxs("h3",{className:f.settingsColor_payment_title,children:[e," Все"]}),t.jsxs("div",{className:f.settingsColor_payment_box,children:[t.jsx("span",{children:"Выбирите цвет"}),t.jsx("div",{className:f.settingsColor_payment_boxColor,style:{background:o},onClick:()=>i(s)})]}),t.jsxs("label",{className:f.settingsColor_payment_checkbox,children:[t.jsx("input",{type:"checkbox",ref:h=>{a.current[l]=h},onChange:y}),t.jsx("span",{children:e})]})]}),t.jsx("div",{className:f.settingsColor_payment_bottom,children:t.jsx("h3",{className:f.settingsColor_payment_amount,children:n})})]})}function Mn(){return t.jsxs("div",{className:f.settingsColor_calculate,children:[t.jsx("h3",{className:f.settingsColor_calculate_title,children:"Остаток"}),t.jsxs("div",{className:f.settingsColor_calculate_block,children:[t.jsx("span",{className:f.settingsColor_calculate_amount,children:"0"}),t.jsx("button",{className:f.settingsColor_calculate_button,children:"РАСЧИТАТЬ"})]})]})}function On(){const{paymentColorList:s}=S(),[e,n]=v.useState([]);return v.useEffect(()=>{n([...s])},[s]),t.jsx("div",{className:f.settingsColor_right,children:t.jsxs("div",{className:f.settingsColor_right_content,children:[t.jsx(An,{}),e==null?void 0:e.map((o,l)=>t.jsx(Dn,{index:l,name:o.name,id:o==null?void 0:o.id,amount:o==null?void 0:o.amount,color:o==null?void 0:o.color},o.id)),t.jsx(Mn,{})]})})}function En(){return t.jsxs("div",{className:f.settingsColor,children:[t.jsx("h2",{className:f.settingsColor_title,children:"Настройте вид расчетного меню"}),t.jsxs("div",{className:f.settingsColor_content,children:[t.jsx(Ln,{}),t.jsx(On,{})]})]})}function Tn(){const s=v.useRef([]),{settingsSearchParams:e,setSettingsSearchParams:n}=S();v.useEffect(()=>{s.current.forEach((l,a)=>{l&&(l.checked=e[a].checked)})},[e]);const o=l=>{const a=e.map(r=>({id:r.id,title:r.title,checked:r.title==l.currentTarget.value?l.currentTarget.checked:r.checked}));n(a)};return t.jsx("nav",{className:f.navSetting,children:t.jsx("form",{action:"",className:f.form,children:t.jsx("ul",{className:f.form_list,children:e==null?void 0:e.map((l,a)=>t.jsx("li",{children:t.jsxs("label",{className:f.form_check,children:[t.jsx("input",{type:"checkbox",value:l.title,ref:r=>{s.current[a]=r},onChange:r=>o(r)}),t.jsx("span",{className:f.form_check_text,children:l.title})]})},l.id))})})})}function $n({column:s}){return t.jsx("section",{className:f.found,children:t.jsxs("table",{className:f.table,children:[t.jsx("thead",{className:f.table_head,children:t.jsx("tr",{className:f.table_head_row,style:{gridTemplateColumns:`repeat(${s.length}, 200px)`},children:s==null?void 0:s.map(e=>t.jsx("td",{className:f.table_head_col,children:e.title},e.id))})}),t.jsx("tbody",{className:f.table_body,children:t.jsx("tr",{className:f.table_body_row,children:t.jsx("td",{className:f.table_body_col})})})]})})}function Wn({columnSearch:s}){return t.jsx("section",{className:f.found,children:t.jsxs("table",{className:f.table,children:[t.jsx("thead",{className:f.table_head,children:t.jsx("tr",{className:f.table_head_row,style:{gridTemplateColumns:`repeat(${s.length}, 200px)`},children:s==null?void 0:s.map(e=>t.jsx("td",{className:f.table_head_col,children:e.title},e.id))})}),t.jsx("tbody",{className:f.table_body,children:t.jsx("tr",{className:f.table_body_row,children:t.jsx("td",{className:f.table_body_col})})})]})})}const Rn=[{id:d(),title:"Левое меню",href:"/cash-register/menu/menu-left"},{id:d(),title:"Список товаров",href:"/cash-register/menu/product-list"},{id:d(),title:"Поиск товара в ручном режиме",href:"/cash-register/menu/search-goods"},{id:d(),title:"Вид кассы",href:"/cash-register/menu/type"}];function Hn(){const e=ce().pathname,{settingsParams:n,settingsSearchParams:o}=S(),[l,a]=v.useState([]),[r,c]=v.useState([]);return v.useEffect(()=>{const m=n.filter(i=>i.checked);a(()=>[...m]);const p=o.filter(i=>i.checked);c(()=>[...p])},[n,o]),t.jsx("div",{className:"container",children:t.jsxs("nav",{className:f.layout,children:[t.jsx(z,{className:f.layout_back,to:"/cash-register",children:"Закрыть"}),t.jsx("h2",{className:f.layout_title,children:"Настройки"}),t.jsx("ul",{className:f.layout_list,children:Rn.map(m=>t.jsx("li",{children:t.jsx(z,{to:m.href,className:`${f.layout_link} ${m.href==e?f.layout_link_active:""}`,children:m.title})},m.id))}),e=="/cash-register/menu/menu-left"&&t.jsx(bn,{}),e=="/cash-register/menu/product-list"&&t.jsxs(t.Fragment,{children:[t.jsx(un,{}),t.jsx($n,{column:l})]}),e=="/cash-register/menu/search-goods"&&t.jsxs(t.Fragment,{children:[t.jsx(Tn,{}),t.jsx(Wn,{columnSearch:r})]}),e=="/cash-register/menu/type"&&t.jsx(En,{})]})})}function Gn(){const e=ce().pathname,{setOpenMenu:n}=S(),o=()=>{n(!1)};return t.jsxs(t.Fragment,{children:[e=="/cash-register"&&t.jsx("div",{className:_.wrapper,onClick:o,children:t.jsxs("div",{className:_.wrapper_container,children:[t.jsxs("section",{className:_.left,children:[t.jsx(ga,{}),t.jsx(ka,{})]}),t.jsx("section",{className:_.right,children:t.jsx(va,{})})]})}),e.startsWith("/cash-register/menu")&&t.jsx(Hn,{})]})}export{Gn as default};
