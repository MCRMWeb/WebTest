import{r as _,j as i,x as v,C as w,N as f,o as S}from"./index-BbdDCsGs.js";import{p as I,H as N}from"./Header-rgnsHATz.js";import{C as h}from"./CustomIcon-CscvTZki.js";import{S as b,N as u,a as j}from"./scrollbar-D020Vbtj.js";import"./userStore-D42cJZ7V.js";import"./XMarkIcon-LaLfqWue.js";const y="_wrapper_9mgbx_1",k="_wrapper_title_9mgbx_5",$="_wrapper_content_9mgbx_13",M="_wrapper_switcher_list_9mgbx_18",C="_wrapper_switcher_link_9mgbx_23",E="_active_9mgbx_41",B="_left_9mgbx_45",P="_right_9mgbx_49",R="_right_top_ratingsBlock_9mgbx_54",F="_right_top_ratings_9mgbx_54",L="_right_top_wish_9mgbx_65",A="_right_top_like_9mgbx_74",z="_right_top_like_active_9mgbx_77",H="_right_top_name_9mgbx_80",V="_rightInfo_9mgbx_87",D="_rightInfo_options_9mgbx_94",G="_rightInfo_options_box_9mgbx_101",O="_rightInfo_options_box_col_9mgbx_106",Z="_rightInfo_options_counter_9mgbx_111",q="_rightInfo_options_images_9mgbx_120",J="_rightInfo_options_images_item_9mgbx_126",K="_rightInfo_options_images_item_active_9mgbx_129",Q="_rightInfo_options_images_block_9mgbx_134",T="_rightInfo_options_img_9mgbx_139",U="_rightInfo_buttons_9mgbx_144",W="_rightInfo_button_9mgbx_144",X="_mySwiper_9mgbx_167",Y="_mySwiper_slide_img_9mgbx_172",ii="_myMiniSwiper_9mgbx_178",si="_myMiniSwiper_slide_img_9mgbx_183",ti="_myMiniSwiper_btn_9mgbx_188",ni="_myMiniSwiper_prev_9mgbx_194",ei="_myMiniSwiper_next_9mgbx_206",oi="_myMiniSwiper_next_disabled_9mgbx_213",ri="_myMiniSwiper_prev_disabled_9mgbx_213",s={wrapper:y,wrapper_title:k,wrapper_content:$,wrapper_switcher_list:M,wrapper_switcher_link:C,active:E,left:B,right:P,right_top_ratingsBlock:R,right_top_ratings:F,right_top_wish:L,right_top_like:A,right_top_like_active:z,right_top_name:H,rightInfo:V,rightInfo_options:D,rightInfo_options_box:G,rightInfo_options_box_col:O,rightInfo_options_counter:Z,rightInfo_options_images:q,rightInfo_options_images_item:J,rightInfo_options_images_item_active:K,rightInfo_options_images_block:Q,rightInfo_options_img:T,rightInfo_buttons:U,rightInfo_button:W,mySwiper:X,mySwiper_slide_img:Y,myMiniSwiper:ii,myMiniSwiper_slide_img:si,myMiniSwiper_btn:ti,myMiniSwiper_prev:ni,myMiniSwiper_next:ei,myMiniSwiper_next_disabled:oi,myMiniSwiper_prev_disabled:ri};function _i({title:n,titleId:t,...e},o){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},e),n?_.createElement("title",{id:t},n):null,_.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const ai=_.forwardRef(_i);function ci({name:n="HandRaisedIcon",width:t=30,height:e=30,color:o="black",background:r="transparent",transition:a=500,className:c,onClick:l}){const g={width:`${t}px`,height:`${e||t}px`,color:o,transition:`${a}ms`,background:r};return i.jsx(i.Fragment,{children:n=="StarIcon"&&i.jsx(ai,{className:c,style:g,onClick:l})})}function li({currentItem:n}){const[t,e]=_.useState([]),[o,r]=_.useState(null),[a,c]=_.useState(!0),[l,g]=_.useState(!1);_.useEffect(()=>{console.log("swiper",o)},[o]),_.useEffect(()=>{if(n.images){let p=1;const d=n.images.map(x=>({id:v(),src:x,order:p++}));e([...d])}},[n]);const m=p=>{const d=t.filter(x=>x.id!=p.id);d.unshift(p),e(d)};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:s.rightInfo_options_box,children:[i.jsx("span",{children:"Цвет:"}),i.jsx("span",{})]}),i.jsxs("div",{className:s.rightInfo_options_images,children:[i.jsx("div",{className:s.rightInfo_options_images_item_active,children:i.jsx("img",{src:t[0]&&`https://api.mcrm.uz/${t[0].src}`,alt:"",className:s.rightInfo_options_img})}),i.jsxs("div",{className:s.rightInfo_options_images_block,children:[i.jsx("button",{className:`${s.myMiniSwiper_prev} ${a?s.myMiniSwiper_prev_disabled:""}`,disabled:a,children:i.jsx(h,{name:"ChevronLeftIcon",color:"rgb(191, 187, 187)"})}),i.jsx("button",{className:`${s.myMiniSwiper_next} ${l?s.myMiniSwiper_next_disabled:""}`,disabled:l,children:i.jsx(h,{name:"ChevronRightIcon",color:"rgb(191, 187, 187)"})}),i.jsx(b,{spaceBetween:10,modules:[u],slidesPerView:2.6,slidesPerGroup:1,className:s.myMiniSwiper,navigation:{nextEl:`.${s.myMiniSwiper_next}`,prevEl:`.${s.myMiniSwiper_prev}`},onSwiper:p=>r(p),onSlideChange:()=>{c(o.isBeginning),g(o.isEnd)},children:t==null?void 0:t.map(p=>i.jsx(j,{className:s.rightInfo_options_images_item,onClick:()=>m(p),children:i.jsx("img",{src:`https://api.mcrm.uz/${p.src}`,alt:"",className:s.rightInfo_options_img})},p.id))})]})]})]})}function pi(){return i.jsxs("div",{className:`${s.rightInfo_options_box} ${s.rightInfo_options_box_col}`,children:[i.jsx("span",{children:"Размер:"}),i.jsx("span",{})]})}function gi({setCount:n,currentCount:t}){return i.jsxs("div",{className:`${s.rightInfo_options_box} ${s.rightInfo_options_box_col}`,children:[i.jsx("span",{children:"Количество:"}),i.jsxs("span",{className:s.rightInfo_options_counter,children:[i.jsx("button",{className:s.rightInfo_options_counter_btn,onClick:()=>n("-"),children:i.jsx(h,{name:"MinusIcon",width:25,height:25,color:t==1?"#c6c0c0":"black"})}),t,i.jsx("button",{className:s.rightInfo_options_counter_btn,onClick:()=>n("+"),children:i.jsx(h,{name:"PlusIcon",width:25,height:25,color:"black"})})]})]})}function mi({currentItem:n,currentCost:t}){var e;return i.jsxs("div",{className:s.rightInfo_options_box,children:[i.jsx("span",{children:"Цена:"}),i.jsxs("span",{children:[t==0?(e=n.nomenclature)==null?void 0:e.price:t," Сум"]})]})}function hi(){return i.jsxs("div",{className:s.rightInfo_buttons,children:[i.jsx("button",{className:s.rightInfo_button,children:"Добавить в корзину"}),i.jsx("button",{className:s.rightInfo_button,children:"Купить в 1 клик"})]})}function di({currentItem:n}){const[t,e]=_.useState(1),[o,r]=_.useState(0);_.useEffect(()=>{var l;const c=(l=n.nomenclature)==null?void 0:l.price;r(c),console.log("currentItem",n)},[n]);const a=c=>{var l,g;if(c=="+"){const m=(l=n.nomenclature)==null?void 0:l.price;e(t+1),r(o+m)}if(c=="-"&&t!=1){const m=(g=n.nomenclature)==null?void 0:g.price;e(t-1),r(o-m)}};return i.jsxs("div",{className:s.rightInfo,children:[i.jsx(li,{currentItem:n}),i.jsxs("div",{className:s.rightInfo_options,children:[i.jsx(pi,{}),i.jsx(gi,{setCount:a,currentCount:t}),i.jsx(mi,{currentItem:n,currentCost:o})]}),i.jsx(hi,{})]})}function xi({currentItem:n}){const{favoriteActive:t,setFavoriteActive:e}=I(),o=r=>{if(r.stopPropagation(),Array.isArray(t)&&t.some(a=>a.mxikCode==n.mxikCode)){const a=t.filter(c=>c.mxikCode!=n.mxikCode);e(a)}else e([...t,n])};return i.jsxs("div",{className:s.right,children:[i.jsxs("div",{className:s.right_top,children:[i.jsxs("div",{className:s.right_top_ratingsBlock,children:[i.jsxs("div",{className:s.right_top_ratings,children:[i.jsxs("div",{children:[i.jsx(ci,{name:"StarIcon",width:15,height:15,color:"orange",className:s.right_top_ratings_icon}),i.jsx("span",{children:"4.4"})]}),i.jsx("span",{children:"(14 оценок)"}),i.jsx("span",{children:"Более 90 заказов"})]}),i.jsxs("div",{className:s.right_top_wish,onClick:r=>o(r),children:[i.jsx(h,{name:"HeartIcon",width:18,height:18,className:`${s.right_top_like} ${t[t.findIndex(r=>r.mxikCode==n.mxikCode)]?s.right_top_like_active:""}`}),i.jsx("span",{children:"В Избранные"})]})]}),i.jsx("div",{className:s.right_top_name,children:n.positionName})]}),i.jsx(di,{currentItem:n})]})}function fi({currentItem:n}){var t;return i.jsx("div",{className:s.left,children:i.jsx(b,{className:s.mySwiper,modules:[u],spaceBetween:50,slidesPerView:1,navigation:!0,children:(n==null?void 0:n.images)&&((t=n==null?void 0:n.images)==null?void 0:t.map((e,o)=>i.jsx(j,{className:s.mySwiper_slide,children:i.jsx("img",{src:`https://api.mcrm.uz/${e}`,alt:"",className:s.mySwiper_slide_img})},o)))})})}function wi({currentItem:n}){const{id:t}=w();return i.jsx("div",{className:s.wrapper_switcher,children:i.jsx("div",{className:"container",children:i.jsxs("ul",{className:s.wrapper_switcher_list,children:[i.jsx("li",{children:i.jsx(f,{to:`/productInfo/${t}/desc`,className:({isActive:e})=>e?`${s.wrapper_switcher_link} ${s.active}`:`${s.wrapper_switcher_link}`,children:"Описание товара"})}),n.crmCommentsStatus&&i.jsx("li",{children:i.jsx(f,{to:`/productInfo/${t}/reviews`,className:({isActive:e})=>e?`${s.wrapper_switcher_link} ${s.active}`:`${s.wrapper_switcher_link}`,children:"Отзывы"})})]})})})}function Ni(){const{id:n}=w(),[t,e]=_.useState({});_.useEffect(()=>{o()},[n]);const o=async()=>{try{const r=await S.get(`web-nomenclatures/${n}`);console.log("res",r);const a=r.data;e(a)}catch(r){console.log("Ошибка произошла при получении продукта на странице информацции о продукте",r)}};return i.jsxs(i.Fragment,{children:[i.jsx(N,{}),i.jsxs("div",{className:`${s.wrapper} container`,children:[i.jsx("h2",{className:s.wrapper_title,children:t.title}),i.jsxs("div",{className:s.wrapper_content,children:[i.jsx(fi,{currentItem:t}),i.jsx(xi,{currentItem:t})]}),i.jsx(wi,{currentItem:t})]})]})}export{Ni as default};
