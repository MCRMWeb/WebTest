import{j as e,a as _e,r as u,w as Ke,L as Y,c as T,b as ve,x as re,e as le,y as de,u as Fe,z as Mt,A as Bt,B as At,C as mt}from"./index-BcsToL9E.js";import{u as Lt}from"./userStore-BZ2falIS.js";import{C as B}from"./CustomIcon-BGcp0K0y.js";import{s as Ye}from"./shop1Store-C-ETVVz4.js";import{c as He,a as Qe,H as qt}from"./Header-BNc7GZy3.js";import{a as ke,s as ee,M as ht}from"./Modal-DqPwmaaw.js";import{b as xe}from"./bannerStore-DhpxFRYC.js";import{C as Et}from"./CustomIcon-CPwf8xrc.js";import"./XMarkIcon-CqrFMn7D.js";const Wt="_wrapper_mqpnx_1",Ut="_wrapper_title_mqpnx_4",zt="_content_mqpnx_10",Rt="_content_left_mqpnx_16",Vt="_content_right_mqpnx_19",Tt="_tools_mqpnx_45",Kt="_tools_link_mqpnx_50",Ht="_tools_link_active_mqpnx_63",Xt="_settings_mqpnx_86",Gt="_settings_title_mqpnx_89",Zt="_settings_content_mqpnx_94",Jt="_settings_content_top_mqpnx_97",Yt="_settings_content_buttons_mqpnx_100",Qt="_settings_content_btn_mqpnx_110",es="_settings_content_btn_cancel_mqpnx_122",ts="_settings_content_btn_save_mqpnx_125",ss="_settings_tools_mqpnx_128",os="_settings_tools_link_mqpnx_133",ns="_settings_tools_link_active_mqpnx_148",as="_wrapperModules_mqpnx_153",rs="_item_mqpnx_160",is="_item_top_mqpnx_165",cs="_item_top_title_mqpnx_176",ls="_item_top_arrow_mqpnx_180",_s="_item_top_arrow_active_mqpnx_188",ds="_item_block_mqpnx_191",ps="_item_block_item_mqpnx_202",us="_item_block_open_mqpnx_205",ms="_item_onOff_mqpnx_211",hs="_item_delivery_mqpnx_211",gs="_versions_block_mqpnx_217",bs="_versions_block_top_mqpnx_222",vs="_versions_block_top_title_mqpnx_232",xs="_versions_block_top_arrow_mqpnx_237",fs="_versions_block_top_arrow_active_mqpnx_246",ks="_versions_block_dropdown_mqpnx_249",ys="_versions_block_dropdown_item_mqpnx_260",js="_versions_block_dropdown_open_mqpnx_271",ws="_versions_block_onOff_mqpnx_277",Cs="_versions_block_delivery_mqpnx_277",Ns="_categoriesDropDown_title_mqpnx_283",Ss="_categoriesDropDown_item_mqpnx_286",Is="_categoriesDropDown_item_top_mqpnx_292",Ps="_categoriesDropDown_item_top_title_mqpnx_303",$s="_categoriesDropDown_item_top_arrow_mqpnx_307",Ds="_categoriesDropDown_item_top_arrow_active_mqpnx_314",Os="_categoriesDropDown_item_block_mqpnx_317",Fs="_categoriesDropDown_item_block_line_mqpnx_326",Ms="_categoriesDropDown_item_block_active_mqpnx_338",Bs="_categoriesDropDown_item_block_open_mqpnx_341",As="_categoriesDropDown_item_onOff_mqpnx_346",Ls="_categoriesDropDown_item_delivery_mqpnx_346",qs="_products_buttons_mqpnx_352",Es="_products_btn_mqpnx_358",Ws="_products_btn_active_mqpnx_369",Us="_productItem_title_mqpnx_374",zs="_productItem_basePhoto_mqpnx_379",Rs="_productItem_photos_mqpnx_385",Vs="_productItem_photos_desc_mqpnx_391",Ts="_productItem_photo_mqpnx_385",Ks="_productItem_photo_img_mqpnx_406",Hs="_productItem_photo_close_mqpnx_417",Xs="_productItem_photo_active_mqpnx_429",Gs="_productItem_add_mqpnx_433",Zs="_productItem_add_text_mqpnx_441",Js="_productItem_settings_mqpnx_446",Ys="_productItem_left_info_mqpnx_450",Qs="_productItem_left_item_mqpnx_458",eo="_productItem_left_item_top_mqpnx_462",to="_productItem_left_item_top_input_mqpnx_483",so="_productItem_left_item_bottom_mqpnx_489",oo="_productItem_left_form_mqpnx_502",no="_productItem_left_form_label_mqpnx_509",ao="_productItem_left_form_title_mqpnx_513",ro="_productItem_left_form_input_mqpnx_519",io="_productItem_left_form_textarea_mqpnx_527",co="_productItem_left_form_size_mqpnx_535",lo="_productItem_right_mqpnx_543",_o="_productItem_right_item_mqpnx_550",po="_productItem_right_top_mqpnx_555",uo="_productItem_right_title_mqpnx_562",mo="_productItem_right_bottom_items_mqpnx_568",ho="_productItem_right_bottom_items_active_mqpnx_577",go="_productItem_right_bottom_item_mqpnx_568",bo="_productItem_right_bottom_row_mqpnx_603",vo="_productItem_right_bottom_del_mqpnx_608",xo="_banner_nav_list_mqpnx_619",fo="_banner_nav_link_mqpnx_625",ko="_banner_nav_link_active_mqpnx_640",yo="_addingWrapper_title_mqpnx_645",jo="_addingWrapper_form_mqpnx_650",wo="_addingWrapper_form_btn_mqpnx_655",Co="_addingWrapper_search_mqpnx_672",No="_addingWrapper_search_input_mqpnx_678",So="_addingWrapper_search_icon_mqpnx_686",Io="_addingWrapper_table_mqpnx_689",Po="_addingWrapper_table_error_mqpnx_692",$o="_addingWrapper_thead_tr_mqpnx_696",Do="_addingWrapper_thead_th_mqpnx_700",Oo="_addingWrapper_tbody_tr_mqpnx_708",Fo="_addingWrapper_tbody_td_mqpnx_711",Mo="_addingWrapper_tbody_buttons_mqpnx_725",Bo="_addingWrapper_tbody_add_mqpnx_730",Ao="_addingWrapper_tbody_del_mqpnx_737",Lo="_errorWrapper_mqpnx_745",qo="_errorWrapper_block_mqpnx_754",Eo="_errorWrapper_block_close_mqpnx_764",Wo="_layout_title_mqpnx_775",Uo="_layout_buttons_mqpnx_780",zo="_layout_btn_mqpnx_786",Ro="_layout_btn_active_mqpnx_800",Vo="_editBlock_mqpnx_805",To="_articleModal_mqpnx_817",Ko="_articleModal_block_mqpnx_826",Ho="_articleModal_block_nav_mqpnx_833",Xo="_articleModal_block_title_mqpnx_840",Go="_articleModal_block_info_mqpnx_845",Zo="_articleModal_block_info_item_mqpnx_848",Jo="_articleModal_block_recommended_mqpnx_863",Yo="_articleModal_block_recommended_title_mqpnx_866",Qo="_articleModal_block_recommended_item_mqpnx_872",en="_articleModal_block_recommended_item_title_mqpnx_876",tn="_articleModal_block_recommended_content_mqpnx_882",sn="_articleModal_block_recommended_img_mqpnx_887",on="_articleModal_block_recommended_info_mqpnx_897",nn="_articleModal_block_recommended_desc_mqpnx_902",an="_articleModal_block_recommended_article_mqpnx_916",rn="_articleModal_block_search_mqpnx_921",cn="_articleModal_block_search_box_mqpnx_924",ln="_articleModal_block_search_input_mqpnx_929",_n="_articleModal_block_search_btn_mqpnx_941",dn="_articleModal_block_found_mqpnx_951",pn="_articleModal_block_buttonBox_mqpnx_957",un="_articleModal_block_button_mqpnx_957",mn="_homePage_wrapper_title_mqpnx_974",hn="_homePage_blocks_mqpnx_984",gn="_homePage_addBlock_mqpnx_990",bn="_homePage_addBlock_title_mqpnx_1007",vn="_homePage_addBlock_active_mqpnx_1010",xn="_homePage_addBlockItem_mqpnx_1014",fn="_homePage_addBlockItem_close_mqpnx_1023",kn="_homePage_addBlockItem_super_mqpnx_1029",yn="_homePage_addBlockItem_super_title_mqpnx_1033",jn="_homePage_addBlockItem_super_block_mqpnx_1038",wn="_homePage_addBlockItem_super_item_mqpnx_1063",Cn="_homePage_addBlockItem_content_mqpnx_1079",Nn="_homePage_addBlockItem_categories_mqpnx_1103",Sn="_homePage_delModal_mqpnx_1110",In="_homePage_delModal_block_mqpnx_1120",Pn="_homePage_delModal_buttons_mqpnx_1130",$n="_homePage_delModal_btn_mqpnx_1140",Dn="_homePage_delModal_del_mqpnx_1149",On="_homePage_delModal_cancel_mqpnx_1152",_={wrapper:Wt,wrapper_title:Ut,content:zt,content_left:Rt,content_right:Vt,tools:Tt,tools_link:Kt,tools_link_active:Ht,settings:Xt,settings_title:Gt,settings_content:Zt,settings_content_top:Jt,settings_content_buttons:Yt,settings_content_btn:Qt,settings_content_btn_cancel:es,settings_content_btn_save:ts,settings_tools:ss,settings_tools_link:os,settings_tools_link_active:ns,wrapperModules:as,item:rs,item_top:is,item_top_title:cs,item_top_arrow:ls,item_top_arrow_active:_s,item_block:ds,item_block_item:ps,item_block_open:us,item_onOff:ms,item_delivery:hs,versions_block:gs,versions_block_top:bs,versions_block_top_title:vs,versions_block_top_arrow:xs,versions_block_top_arrow_active:fs,versions_block_dropdown:ks,versions_block_dropdown_item:ys,versions_block_dropdown_open:js,versions_block_onOff:ws,versions_block_delivery:Cs,categoriesDropDown_title:Ns,categoriesDropDown_item:Ss,categoriesDropDown_item_top:Is,categoriesDropDown_item_top_title:Ps,categoriesDropDown_item_top_arrow:$s,categoriesDropDown_item_top_arrow_active:Ds,categoriesDropDown_item_block:Os,categoriesDropDown_item_block_line:Fs,categoriesDropDown_item_block_active:Ms,categoriesDropDown_item_block_open:Bs,categoriesDropDown_item_onOff:As,categoriesDropDown_item_delivery:Ls,products_buttons:qs,products_btn:Es,products_btn_active:Ws,productItem_title:Us,productItem_basePhoto:zs,productItem_photos:Rs,productItem_photos_desc:Vs,productItem_photo:Ts,productItem_photo_img:Ks,productItem_photo_close:Hs,productItem_photo_active:Xs,productItem_add:Gs,productItem_add_text:Zs,productItem_settings:Js,productItem_left_info:Ys,productItem_left_item:Qs,productItem_left_item_top:eo,productItem_left_item_top_input:to,productItem_left_item_bottom:so,productItem_left_form:oo,productItem_left_form_label:no,productItem_left_form_title:ao,productItem_left_form_input:ro,productItem_left_form_textarea:io,productItem_left_form_size:co,productItem_right:lo,productItem_right_item:_o,productItem_right_top:po,productItem_right_title:uo,productItem_right_bottom_items:mo,productItem_right_bottom_items_active:ho,productItem_right_bottom_item:go,productItem_right_bottom_row:bo,productItem_right_bottom_del:vo,banner_nav_list:xo,banner_nav_link:fo,banner_nav_link_active:ko,addingWrapper_title:yo,addingWrapper_form:jo,addingWrapper_form_btn:wo,addingWrapper_search:Co,addingWrapper_search_input:No,addingWrapper_search_icon:So,addingWrapper_table:Io,addingWrapper_table_error:Po,addingWrapper_thead_tr:$o,addingWrapper_thead_th:Do,addingWrapper_tbody_tr:Oo,addingWrapper_tbody_td:Fo,addingWrapper_tbody_buttons:Mo,addingWrapper_tbody_add:Bo,addingWrapper_tbody_del:Ao,errorWrapper:Lo,errorWrapper_block:qo,errorWrapper_block_close:Eo,layout_title:Wo,layout_buttons:Uo,layout_btn:zo,layout_btn_active:Ro,editBlock:Vo,articleModal:To,articleModal_block:Ko,articleModal_block_nav:Ho,articleModal_block_title:Xo,articleModal_block_info:Go,articleModal_block_info_item:Zo,articleModal_block_recommended:Jo,articleModal_block_recommended_title:Yo,articleModal_block_recommended_item:Qo,articleModal_block_recommended_item_title:en,articleModal_block_recommended_content:tn,articleModal_block_recommended_img:sn,articleModal_block_recommended_info:on,articleModal_block_recommended_desc:nn,articleModal_block_recommended_article:an,articleModal_block_search:rn,articleModal_block_search_box:cn,articleModal_block_search_input:ln,articleModal_block_search_btn:_n,articleModal_block_found:dn,articleModal_block_buttonBox:pn,articleModal_block_button:un,homePage_wrapper_title:mn,homePage_blocks:hn,homePage_addBlock:gn,homePage_addBlock_title:bn,homePage_addBlock_active:vn,homePage_addBlockItem:xn,homePage_addBlockItem_close:fn,homePage_addBlockItem_super:kn,homePage_addBlockItem_super_title:yn,homePage_addBlockItem_super_block:jn,homePage_addBlockItem_super_item:wn,homePage_addBlockItem_content:Cn,homePage_addBlockItem_categories:Nn,homePage_delModal:Sn,homePage_delModal_block:In,homePage_delModal_buttons:Pn,homePage_delModal_btn:$n,homePage_delModal_del:Dn,homePage_delModal_cancel:On};function De({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:c=1.1,status:p=!1}){const r={width:`${o}px`,height:`${o/2-o/20}px`,background:p?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},l={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${p?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${c}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:l})})}const Fn="_versions_1cgvq_1",Mn="_versions_block_1cgvq_6",Bn="_versions_block_top_1cgvq_11",An="_versions_block_top_title_1cgvq_21",Ln="_versions_block_top_arrow_1cgvq_25",qn="_versions_block_top_arrow_active_1cgvq_34",En="_versions_block_dropdown_1cgvq_37",Wn="_versions_block_dropdown_item_1cgvq_49",Un="_versions_block_dropdown_open_1cgvq_60",zn="_versions_block_onOff_1cgvq_66",Rn="_versions_block_delivery_1cgvq_66",Vn="_versions2_1cgvq_72",Tn="_versions2_block_1cgvq_77",Kn="_versions2_block_top_1cgvq_82",Hn="_versions2_block_top_title_1cgvq_92",Xn="_versions2_block_top_arrow_1cgvq_96",Gn="_versions2_block_top_arrow_active_1cgvq_105",Zn="_versions2_block_dropdown_1cgvq_108",Jn="_versions2_block_dropdown_item_1cgvq_119",Yn="_versions2_block_dropdown_open_1cgvq_130",Qn="_versions2_block_onOff_1cgvq_136",ea="_versions2_block_delivery_1cgvq_136",ta="_version3_1cgvq_142",sa="_version3_title_1cgvq_147",oa="_version3_block_1cgvq_153",na="_version3_block_top_1cgvq_158",aa="_version3_block_top_title_1cgvq_169",ra="_version3_block_top_arrow_1cgvq_173",ia="_version3_block_top_arrow_active_1cgvq_183",ca="_version3_block_dropdown_1cgvq_186",la="_version3_block_dropdown_item_1cgvq_197",_a="_version3_block_dropdown_open_1cgvq_213",da="_version3_block_onOff_1cgvq_237",pa="_version3_block_delivery_1cgvq_237",ua="_versionExtraOptions_1cgvq_243",ma="_versionExtraOptions_title_1cgvq_248",ha="_versionExtraOptions_block_1cgvq_254",ga="_versionExtraOptions_block_top_1cgvq_259",ba="_versionExtraOptions_block_top_title_1cgvq_270",va="_versionExtraOptions_block_top_arrow_1cgvq_275",xa="_versionExtraOptions_block_top_arrow_active_1cgvq_285",fa="_versionExtraOptions_block_dropdown_1cgvq_288",ka="_versionExtraOptions_block_dropdown_item_1cgvq_299",ya="_versionExtraOptions_block_dropdown_open_1cgvq_316",ja="_versionExtraOptions_block_onOff_1cgvq_340",wa="_versionExtraOptions_block_delivery_1cgvq_340",q={versions:Fn,versions_block:Mn,versions_block_top:Bn,versions_block_top_title:An,versions_block_top_arrow:Ln,versions_block_top_arrow_active:qn,versions_block_dropdown:En,versions_block_dropdown_item:Wn,versions_block_dropdown_open:Un,versions_block_onOff:zn,versions_block_delivery:Rn,versions2:Vn,versions2_block:Tn,versions2_block_top:Kn,versions2_block_top_title:Hn,versions2_block_top_arrow:Xn,versions2_block_top_arrow_active:Gn,versions2_block_dropdown:Zn,versions2_block_dropdown_item:Jn,versions2_block_dropdown_open:Yn,versions2_block_onOff:Qn,versions2_block_delivery:ea,version3:ta,version3_title:sa,version3_block:oa,version3_block_top:na,version3_block_top_title:aa,version3_block_top_arrow:ra,version3_block_top_arrow_active:ia,version3_block_dropdown:ca,version3_block_dropdown_item:la,version3_block_dropdown_open:_a,version3_block_onOff:da,version3_block_delivery:pa,versionExtraOptions:ua,versionExtraOptions_title:ma,versionExtraOptions_block:ha,versionExtraOptions_block_top:ga,versionExtraOptions_block_top_title:ba,versionExtraOptions_block_top_arrow:va,versionExtraOptions_block_top_arrow_active:xa,versionExtraOptions_block_dropdown:fa,versionExtraOptions_block_dropdown_item:ka,versionExtraOptions_block_dropdown_open:ya,versionExtraOptions_block_onOff:ja,versionExtraOptions_block_delivery:wa};function at({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:c,setOpenBlock:p,setCurrentVersion:r,setVersionList:l}){const i=d=>{r(d.title);const m=s.map(v=>({id:v.id,title:v.title,isActive:!1})),g=m.find(v=>v.id==d.id),h=m.findIndex(v=>v.id==d.id);g&&(g.isActive=!0,m.splice(h,1,g),l(m))};return e.jsxs("div",{className:a??q.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:q.versions_block,children:[e.jsxs("div",{className:q.versions_block_top,children:[e.jsx("h2",{className:q.versions_block_top_title,style:{color:o},children:c}),e.jsx("button",{className:q.versions_block_top_btn,onClick:()=>p(!n),children:e.jsx("div",{className:`${q.versions_block_top_arrow} ${n?q.versions_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${q.versions_block_dropdown} ${n?q.versions_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:q.versions_block_dropdown_item,onClick:()=>i(d),children:d.title},d.id))})]})]})}function Ca(){const{modulesCashRegisterStatus:o,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:a,openBlockCashRegister:n,openBlockCashRegisterVersion:c,openBlockCart:p,cartVersionList:r,modulesCartStatus:l,cartCurrentVersion:i,openBlockCartVersion:d,setCartVersionList:m,setCartCurrentVersion:g,setModulesCartStatus:h,setOpenBlockCart:v,setOpenBlockCartVersion:x,setDeliveryStatus:j,setOpenBlockCashRegister:I,setCashRegisterVersionList:w,setModulesCashRegisterStatus:P,setCashRegisterCurrentVersion:S,setOpenBlockCashRegisterVersion:k}=_e(),f=()=>{v(!p)},b=()=>{I(!n)};return e.jsxs("div",{className:_.wrapperModules,children:[e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>f(),children:[e.jsx("h2",{className:_.item_top_title,children:"Корзина"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>f(),children:e.jsx("div",{className:`${_.item_top_arrow} ${p?_.item_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${p?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>h(!l),children:e.jsx(De,{status:l,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(at,{color:"rgb(137, 250, 135)",openBlock:d,setOpenBlock:x,title:"Выберите версию",versionList:r,currentVersion:i,setCurrentVersion:g,setVersionList:m}),e.jsxs("div",{className:_.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:_.item_shell,onClick:()=>j(!t),children:e.jsx(De,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>b(),children:[e.jsx("h2",{className:_.item_top_title,children:"Кacca"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>b(),children:e.jsx("div",{className:`${_.item_top_arrow} ${n?_.item_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${n?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>P(!o),children:e.jsx(De,{status:o,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(at,{color:"rgb(137, 250, 135)",openBlock:c,setOpenBlock:k,title:"Выберите версию",versionList:s,currentVersion:a,setCurrentVersion:S,setVersionList:w})]})]})]})}function Na(){const{templates:o,setTemplates:t}=_e(),[s,a]=u.useState([...o]);u.useEffect(()=>{a([...o])},[o]);const n=r=>{const l=s.map(i=>i.id===r?{...i,open:!i.open}:i);a(l)},c=(r,l)=>{const i=s.map(d=>d.id===r?{...d,isActive:!0,templateThemes:d.templateThemes.map(m=>m.id===l?{...m,isActive:!0}:{...m,isActive:!1})}:{...d,isActive:!1,templateThemes:d.templateThemes.map(m=>({...m,isActive:!1}))});a(i)};function p(){t(s)}return e.jsxs("div",{className:_.wrapperModules,children:[s.map(r=>e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>n(r.id),children:[e.jsx("h2",{className:_.item_top_title,children:r.title}),e.jsx("button",{className:_.item_top_btn,onClick:()=>n(r.id),children:e.jsx("div",{className:`${_.item_top_arrow} ${r.open?_.item_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.item_block} ${r.open?_.item_block_open:""}`,children:r.templateThemes.map(l=>e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:l.title}),e.jsx("div",{className:_.item_shell,onClick:()=>c(r.id,l.id),children:e.jsx(De,{status:l.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},l.id))})]},r.id)),e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>p(),children:"Сохранить"})]})]})}function Sa({title:o,setOpenModal:t}){const{currentCategory:s}=_e(),[a,n]=u.useState(""),{selectedSuperCategory:c,selectedCategory:p}=He();u.useEffect(()=>{s=="Котегории"&&c&&r(c),s=="Подкотегории"&&p&&r(p)},[s,c,p]);const r=async i=>{try{const m=await(await Ke.get(`https://api.mcrm.uz/api/categories/${i}`)).data;n(m.name.ru)}catch(d){console.error("Ошибка произошла при получении названия варианта категории",d)}},l=()=>{t&&t(!0)};return e.jsxs("div",{className:_.editBlock,onClick:l,children:[a||o,e.jsx(B,{name:"PencilIcon"})]})}const Ia="_modalCategory_xzv82_1",Pa="_modalCategory_block_xzv82_10",$a="_modalCategory_nav_xzv82_16",Da="_modalCategory_nav_title_xzv82_23",Oa="_modalCategory_content_xzv82_29",Fa="_modalCategory_content_message_xzv82_36",Ma="_modalCategory_content_link_xzv82_44",Ba="_modalCategory_content_link_active_xzv82_72",Aa="_modalCategory_content_item_xzv82_82",La="_modalCategory_content_block_xzv82_104",qa="_modalCategory_content_block_title_xzv82_108",Ea="_settings_xzv82_115",Wa="_settings_title_xzv82_118",Ua="_settings_content_xzv82_123",za="_settings_content_top_xzv82_126",Ra="_settings_content_buttons_xzv82_129",Va="_settings_content_btn_xzv82_139",Ta="_settings_content_btn_cancel_xzv82_151",Ka="_settings_content_btn_save_xzv82_154",Ha="_settings_tools_xzv82_157",Xa="_settings_tools_link_xzv82_162",Ga="_settings_tools_link_active_xzv82_177",ae={modalCategory:Ia,modalCategory_block:Pa,modalCategory_nav:$a,modalCategory_nav_title:Da,modalCategory_content:Oa,modalCategory_content_message:Fa,modalCategory_content_link:Ma,modalCategory_content_link_active:Ba,modalCategory_content_item:Aa,modalCategory_content_block:La,modalCategory_content_block_title:qa,settings:Ea,settings_title:Wa,settings_content:Ua,settings_content_top:za,settings_content_buttons:Ra,settings_content_btn:Va,settings_content_btn_cancel:Ta,settings_content_btn_save:Ka,settings_tools:Ha,settings_tools_link:Xa,settings_tools_link_active:Ga};function Za({setCancel:o}){return e.jsxs("div",{className:ae.modalCategory_nav,children:[e.jsx("h2",{className:ae.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:ae.modalCategory_nav_close,onClick:o,children:e.jsx(B,{width:24,height:24,name:"XMarkIcon"})})]})}function Ja({superCategory:o,category:t,setMessageStatus:s,fetchCategories:a}){const{currentCategory:n}=_e(),{selectedSuperCategory:c,setSelectedSuperCategory:p}=He(),{setCurrentCategory:r}=ke(),[l,i]=u.useState(10),d=(g,h)=>{if(g.preventDefault(),n==="Подкотегории"){a("category",1,10,h.id);const v=t.filter(x=>x.parentId==h.id);r(v),p(h.id),s(!1)}p(h.id)},m=g=>{g.preventDefault();const h=l+10;i(h),a("super",1,h)};return e.jsxs("div",{className:ae.modalCategory_content_block,children:[e.jsx("h2",{className:ae.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:ae.modalCategory_content_item,children:[o.map(g=>e.jsxs(Y,{to:"#",className:`${ae.modalCategory_content_link} ${g.id==c?ae.modalCategory_content_link_active:""} `,onClick:h=>d(h,g),children:[g.name.ru,e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},g.id)),e.jsx(Y,{to:"#",className:ae.modalCategory_content_link,onClick:g=>m(g),children:"Ещё..."})]})]})}function Ya({categoryId:o,category:t,setCategoryId:s,setSubCategory:a,fetchCategories:n}){const{selectedSuperCategory:c}=He(),[p,r]=u.useState(10),l=d=>{d.preventDefault();const m=p+10;r(m),n("category",1,m,c)},i=(d,m)=>{a(d,m),s(m.id)};return t.length>0&&e.jsxs("div",{className:ae.modalCategory_content_block,children:[e.jsx("h2",{className:ae.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:ae.modalCategory_content_item,children:[t==null?void 0:t.map(d=>e.jsxs(Y,{to:"#",className:`${ae.modalCategory_content_link} ${d.id==o?ae.modalCategory_content_link_active:""} `,onClick:m=>i(m,d),children:[d.name.ru,e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},d.id)),e.jsx(Y,{to:"#",className:ae.modalCategory_content_link,onClick:d=>l(d),children:"Ещё..."})]})]})}function Qa({setSettings:o,setCancel:t}){return e.jsxs("div",{className:ae.settings_content_buttons,children:[e.jsx("button",{className:`${ae.settings_content_btn} ${ae.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(Y,{to:"#",className:`${ae.settings_content_btn} ${ae.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function er({setOpenModal:o}){const{currentCategory:t}=_e(),{selectedSuperCategory:s,setSelectedSuperCategory:a,selectedCategory:n,setSelectedCategory:c}=He(),[p,r]=u.useState(0),[l,i]=u.useState(!1),[d,m]=u.useState("Выберите категорию"),[g,h]=u.useState([]),[v,x]=u.useState([]);u.useEffect(()=>{P("super",1,10),n&&r(n)},[]);const j=(k,f)=>{k.preventDefault(),P("subCategory",1,10,f.id),i(!1)},I=()=>{t=="Котегории"?a(s):t=="Подкотегории"&&c(p),w()},w=()=>{i(!1),m("Выберите категорию"),o(!1)},P=async(k,f,b,C)=>{try{const y=k=="super"?`https://api.mcrm.uz/api/categories?&page=${f}&perPage=${b}`:`https://api.mcrm.uz/api/categories?parentId=${C}&page=${f}&perPage=${b}`,O=(await Ke.get(y)).data.data.map(H=>({...H,label:k==="super"?"Супер категория":k==="category"?"Категория":"Субкатегория"}));k==="super"&&h([...O]),k==="category"&&x([...O])}catch(y){console.error(`Ошибка произошла при получении ${k} категорий`,y)}},S=()=>{o(!1)};return e.jsx("div",{className:ae.modalCategory,onClick:S,children:e.jsxs("div",{className:ae.modalCategory_block,onClick:k=>k.stopPropagation(),children:[e.jsx(Za,{setCancel:w}),e.jsx("p",{className:ae.modalCategory_content_message,children:l?d:""}),e.jsxs("div",{className:ae.modalCategory_content,children:[e.jsx(Ja,{superCategory:g,category:v,setMessageStatus:i,fetchCategories:P}),t==="Подкотегории"&&e.jsx(Ya,{categoryId:p,category:v,setCategoryId:r,setSubCategory:j,fetchCategories:P}),e.jsx(Qa,{setSettings:I,setCancel:w})]})]})})}function tr(){const[o,t]=u.useState(!1),[s,a]=u.useState(!1),{currentCategory:n,categoriesStatus:c,categories:p,setCategoriesStatus:r,setCurrentCategory:l}=_e();u.useEffect(()=>{t(n==="Котегории"||n==="Подкотегории")},[n]);const i=d=>{l(d.title),d.title==="Котегории"||d.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:_.categoriesDropDown,children:[e.jsx("h2",{className:_.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(er,{setOpenModal:a}),e.jsxs("div",{className:_.categoriesDropDown_item,children:[e.jsxs("div",{className:_.categoriesDropDown_item_top,onClick:()=>r(!c),children:[e.jsx("h2",{className:_.categoriesDropDown_item_top_title,children:n}),e.jsx("button",{className:_.categoriesDropDown_item_top_btn,onClick:()=>r(!c),children:e.jsx("div",{className:`${_.categoriesDropDown_item_top_arrow} ${c?_.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.categoriesDropDown_item_block} ${c?_.categoriesDropDown_item_block_open:""}`,children:p.map(d=>e.jsx("div",{className:`${_.categoriesDropDown_item_block_line} ${d.title==n?_.categoriesDropDown_item_block_active:""}`,onClick:()=>i(d),children:d.title},d.id))})]}),o&&e.jsx(Sa,{title:"Выберите вариант",setOpenModal:a})]})}const sr="_banner_xoj3o_1",or="_banner_title_xoj3o_6",nr="_products_banner_xoj3o_11",ar="_products_banner_wrap_xoj3o_14",rr="_products_banner_wrap_btn_xoj3o_20",ir="_products_banner_wrap_filter_xoj3o_31",cr="_products_banner_wrap_filter_text_xoj3o_41",lr="_products_banner_form_xoj3o_49",_r="_products_banner_form_wrap_xoj3o_54",dr="_products_banner_form_wrap_btn_xoj3o_60",pr="_products_banner_form_wrap_input_xoj3o_76",ur="_products_banner_form_wrap_icon_xoj3o_84",mr="_table_xoj3o_88",hr="_table_tbody_xoj3o_93",gr="_table_tbody_tr_xoj3o_98",br="_table_tbody_tr_active_xoj3o_101",vr="_table_tbody_img_xoj3o_104",xr="_table_tr_xoj3o_109",fr="_table_th_xoj3o_112",kr="_table_td_xoj3o_123",yr="_table_td_edit_xoj3o_131",jr="_table_btn_xoj3o_137",wr="_versions_xoj3o_145",Cr="_versions_block_xoj3o_150",Nr="_versions_block_top_xoj3o_155",Sr="_versions_block_top_title_xoj3o_165",Ir="_versions_block_top_arrow_xoj3o_169",Pr="_versions_block_top_arrow_active_xoj3o_178",$r="_versions_block_dropdown_xoj3o_181",Dr="_versions_block_dropdown_item_xoj3o_196",Or="_versions_block_dropdown_open_xoj3o_207",Fr="_add_banner_xoj3o_214",Mr="_add_banner_header_xoj3o_222",Br="_add_banner_header_title_xoj3o_226",Ar="_add_banner_content_xoj3o_230",Lr="_add_banner_content_product_xoj3o_233",qr="_add_banner_content_link_xoj3o_255",Er="_add_banner_content_info_xoj3o_263",Wr="_add_banner_content_info_text_xoj3o_267",Ur="_add_banner_content_download_xoj3o_273",zr="_add_banner_content_download_link_xoj3o_281",Rr="_add_banner_content_btns_xoj3o_293",Vr="_add_banner_content_btn_xoj3o_293",Tr="_category_wrap_xoj3o_311",Kr="_modalCategory_xoj3o_315",Hr="_modalCategory_block_xoj3o_323",Xr="_modalCategory_nav_xoj3o_328",Gr="_modalCategory_nav_title_xoj3o_335",Zr="_modalCategory_content_xoj3o_341",Jr="_modalCategory_content_message_xoj3o_348",Yr="_modalCategory_content_link_xoj3o_356",Qr="_modalCategory_content_link_active_xoj3o_384",ei="_modalCategory_content_item_xoj3o_394",ti="_modalCategory_content_block_xoj3o_416",si="_modalCategory_content_block_title_xoj3o_420",oi="_add_link_xoj3o_427",ni="_add_link_title_xoj3o_430",ai="_add_link_input_xoj3o_434",ri="_modal_btn_xoj3o_443",$={banner:sr,banner_title:or,products_banner:nr,products_banner_wrap:ar,products_banner_wrap_btn:rr,products_banner_wrap_filter:ir,products_banner_wrap_filter_text:cr,products_banner_form:lr,products_banner_form_wrap:_r,products_banner_form_wrap_btn:dr,products_banner_form_wrap_input:pr,products_banner_form_wrap_icon:ur,table:mr,table_tbody:hr,table_tbody_tr:gr,table_tbody_tr_active:br,table_tbody_img:vr,table_tr:xr,table_th:fr,table_td:kr,table_td_edit:yr,table_btn:jr,versions:wr,versions_block:Cr,versions_block_top:Nr,versions_block_top_title:Sr,versions_block_top_arrow:Ir,versions_block_top_arrow_active:Pr,versions_block_dropdown:$r,versions_block_dropdown_item:Dr,versions_block_dropdown_open:Or,add_banner:Fr,add_banner_header:Mr,add_banner_header_title:Br,add_banner_content:Ar,add_banner_content_product:Lr,add_banner_content_link:qr,add_banner_content_info:Er,add_banner_content_info_text:Wr,add_banner_content_download:Ur,add_banner_content_download_link:zr,add_banner_content_btns:Rr,add_banner_content_btn:Vr,category_wrap:Tr,modalCategory:Kr,modalCategory_block:Hr,modalCategory_nav:Xr,modalCategory_nav_title:Gr,modalCategory_content:Zr,modalCategory_content_message:Jr,modalCategory_content_link:Yr,modalCategory_content_link_active:Qr,modalCategory_content_item:ei,modalCategory_content_block:ti,modalCategory_content_block_title:si,add_link:oi,add_link_title:ni,add_link_input:ai,modal_btn:ri};function gt({color:o="black",title:t="",versionList:s=[],className:a,openBlock:n,setOpenBlock:c,setVersionList:p}){const[r,l]=u.useState(s[0].title),{setChangeCategoryStyles:i}=xe(),d=m=>{const g=s.map(h=>({...h,isOpen:h.id===m.id}));m.title=="Категория"&&i(!0),l(m.title),p(g),c(!1)};return e.jsxs("div",{className:a??$.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:$.versions_block,children:[e.jsxs("div",{className:$.versions_block_top,onClick:()=>c(!n),style:{cursor:"pointer"},children:[e.jsx("h2",{className:$.versions_block_top_title,style:{color:o},children:r}),e.jsx("button",{className:$.versions_block_top_btn,children:e.jsx("div",{className:`${$.versions_block_top_arrow} ${n?$.versions_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${$.versions_block_dropdown} ${n?$.versions_block_dropdown_open:""}`,children:s.map(m=>e.jsx(Y,{className:$.versions_block_dropdown_item,to:m.href,onClick:()=>d(m),children:m.title},m.id))})]})]})}function Je({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:c=1.1,status:p=!1}){const r={width:`${o}px`,height:`${o/2-o/20}px`,background:p?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},l={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${p?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${c}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:l})})}const Ue=({arr:o=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:a=!1,isEdit:n=!1,isCategory:c,isLinks:p,setArrToUse:r,setPickedProduct:l,setPickedProductActive:i,bannersArrProduct:d})=>{const{selectedProductId:m,setSelectedProductId:g,setCurrentProductOpen:h,clearPickedProductsArr:v,setOpenAddBanner:x}=xe(),[j,I]=u.useState(null),w=b=>d==null?void 0:d.some(C=>C.type_id===b),P=async(b,C)=>{if(s==="byId"&&(l==null||l(b)),n&&C)try{if(!w(C==null?void 0:C.id)){const O=await(await T.patch(`web-banners/${m}`,{typeId:b})).data;console.log("data",O);const H=d==null?void 0:d.map(A=>A.id===m?O:A);h(!1),r==null||r(H)}}catch(y){console.log(y)}I(b)},S=(b,C)=>{s==="productId"&&(x(!0),i==null||i(b),P==null||P(b),I(b),v(),g(b))},k=b=>b.typeId!==void 0,f=async(b,C,y)=>{b.stopPropagation();try{await T.patch(`web-banners/${C}`,{isActive:!y.isActive})}catch(O){console.log(O)}const N=t.map(O=>O.id===C?{...O,isActive:!O.isActive}:O);r==null||r(N)};return e.jsxs("table",{className:$.table,children:[e.jsx("thead",{className:$.table_thead,children:e.jsx("tr",{className:$.table_tr,children:o.map(b=>e.jsx("th",{className:$.table_th,children:b.title},b.id))})}),e.jsx("tbody",{className:$.table_tbody,children:t==null?void 0:t.map(b=>{var C;return e.jsxs("tr",{className:`${$.table_tbody_tr}
            ${!n&&j==b.id?$.table_tbody_tr_active:""}
            `,style:{cursor:a||c||p?"pointer":"default"},onClick:()=>S(b.id),children:[e.jsx("td",{className:$.table_td,children:e.jsxs("div",{style:{width:"70px",height:"40px"},children:[s==="byId"&&(b==null?void 0:b.title),n?b.title:"",a&&e.jsx("img",{className:$.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),c&&e.jsx("img",{className:$.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),p&&e.jsx("img",{className:$.table_tbody_img,src:b.image??"",alt:"Banner"})]})}),e.jsxs("td",{className:$.table_td,children:[c?b.title:"",a?b.title:(C=b.nomenclature)==null?void 0:C.price,p&&b.title]}),e.jsx("td",{className:$.table_td,children:a?"":b.crmAmount}),e.jsx("td",{className:$.table_td,children:c?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:y=>{const N=b;N.id&&f(y,N.id,N)},children:e.jsx(Je,{width:62,status:b.isActive})}):a?e.jsx("div",{className:$.table_td_edit,children:e.jsx("div",{onClick:y=>{const N=b;N.id&&f(y,N.id,N)},children:e.jsx(Je,{width:62,status:b.isActive})})}):p?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:y=>{const N=b;N.id&&f(y,N.id,N)},children:e.jsx(Je,{width:62,status:b.isActive})}):e.jsx("button",{className:$.table_btn,onClick:()=>P(b.id,b),children:n?"Заменить":"Выбрать"})})]},k(b)?b.typeId:b.id)})})]})};function ii({setCancel:o}){return e.jsxs("div",{className:ee.modalCategory_nav,children:[e.jsx("h2",{className:ee.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:ee.modalCategory_nav_close,onClick:o,children:e.jsx(B,{width:24,height:24,name:"XMarkIcon"})})]})}function ci({superCategory:o,category:t,superId:s,setLocalPicked:a,setSuperId:n,setMessageStatus:c,setSubCategories:p,fetchCategories:r,setSuperCategoryObj:l,getBannersItems:i}){const{changeCategoryStyles:d,categoriesArr:m,setCategoriesArr:g,setActiveCategory:h,setActiveCategoryTitle:v,setOpenAddBanner:x}=xe(),{setCurrentCategory:j}=ke(),[I,w]=u.useState(10),P=(k,f)=>{k.preventDefault(),r("category",1,10,f.id),p([]);const b=t.filter(C=>C.parentId==f.id);if(j(b),a(f),n(f.id),c(!1),d&&f.label&&(h(f),v(f.name.ru)),d){const C=m.filter(y=>y.label!==f.label);C.push(f),g(C)}l==null||l(f),x(!0),i==null||i()},S=()=>{const k=I+10;w(k),r("super",1,k),console.log("addPage",k)};return e.jsxs("div",{className:ee.modalCategory_content_block,children:[e.jsx("h2",{className:ee.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:ee.modalCategory_content_item,children:[o.map(k=>e.jsxs(Y,{to:"#",className:`${ee.modalCategory_content_link} ${k.id==s?ee.modalCategory_content_link_active:""} `,onClick:f=>P(f,k),children:[k.name.ru,e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},k.id)),e.jsx(Y,{to:"#",className:ee.modalCategory_content_link,onClick:()=>S(),children:"Ещё..."})]})]})}function li({superId:o,categoryId:t,category:s,setSubCategory:a,fetchCategories:n}){const[c,p]=u.useState(10),r=()=>{const i=c+10;p(i),n("category",1,i,o),console.log("addPage",i,o)},l=(i,d)=>{a(i,d)};return s.length>0&&e.jsxs("div",{className:ee.modalCategory_content_block,children:[e.jsx("h2",{className:ee.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:ee.modalCategory_content_item,children:[s==null?void 0:s.map(i=>e.jsxs(Y,{to:"#",className:`${ee.modalCategory_content_link} ${i.id==t?ee.modalCategory_content_link_active:""} `,onClick:d=>l(d,i),children:[i.name.ru,e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},i.id)),e.jsx(Y,{to:"#",className:ee.modalCategory_content_link,onClick:()=>r(),children:"Ещё..."})]})]})}function _i({subId:o,categoryId:t,subCategories:s,setSubProductsList:a,fetchCategories:n}){const[c,p]=u.useState(10),r=()=>{const l=c+10;p(l),n("subCategory",1,l,t),console.log("addPage",l)};return s.length>0&&e.jsxs("div",{className:ee.modalCategory_content_block,children:[e.jsx("h2",{className:ee.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:ee.modalCategory_content_item,children:[s==null?void 0:s.map(l=>e.jsxs(Y,{to:"#",className:`${ee.modalCategory_content_link} ${l.id==o?ee.modalCategory_content_link_active:""} `,onClick:i=>a(i,l),children:[l.name.ru,e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id)),e.jsx(Y,{to:"#",className:ee.modalCategory_content_link,onClick:()=>r(),children:"Ещё..."})]})]})}function di({setSettings:o,setCancel:t}){return e.jsxs("div",{className:ee.settings_content_buttons,children:[e.jsx("button",{className:`${ee.settings_content_btn} ${ee.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${ee.settings_content_btn} ${ee.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function Xe({isProduct:o,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:a,setCurrentCategory:n,setCurrentSubCategory:c}=ke(),{changeCategoryStyles:p,categoriesArr:r,pickedProducts:l,setCategoriesArr:i,setPickedProducts:d,setActiveCategory:m,setActiveCategoryTitle:g,setBannersArr1:h,bannersArr1:v,setOpenModalCategoryBanner:x}=xe(),j=p?$:ee,[I,w]=u.useState(0),[P,S]=u.useState(0),[k,f]=u.useState(0),[b,C]=u.useState({}),[y,N]=u.useState(!1),[O,H]=u.useState("Выберите категорию"),[A,W]=u.useState([]),[se,fe]=u.useState([]),[he,K]=u.useState([]),[U,X]=u.useState(null),[te,ie]=u.useState(null),[E,D]=u.useState(null);u.useEffect(()=>{console.log("pickedProducts",l)},[l]),u.useEffect(()=>{we("super",1,10)},[]);const[ne]=u.useState(1),[pe]=u.useState(10);async function ge(){const J=ve.get("multi-store");try{const z=await T.get(`web-banners?multiStoreId=${J}&page=${ne}&perPage=${pe}`);h(z.data.data),console.log("bannersArr1",v)}catch(z){console.log("error",z)}}const Ne=(J,z)=>{J.preventDefault(),we("subCategory",1,10,z.id);const Q=he.filter(G=>G.parentId==z.id);if(c(Q),C(z),S(z.id),N(!1),p&&z.label&&(m(z),g(z.name.ru)),p){const G=r.filter(qe=>qe.label!==z.label);G.push(z),i(G)}ie(z),ge()},Ie=(J,z)=>{if(J.preventDefault(),C(z),f(z.id),N(!1),p&&z.label&&(m(z),g(z.name.ru)),p){const Q=r.filter(G=>G.name.ru!==z.name.ru);Q.push(z),console.log("newCategories",Q),i(Q)}D(z),ge()};async function ce(J){const z=ve.get("multi-store");try{const Q=await T.get(`web-nomenclatures?multiStoreId=${z}&categoryId=${J}&page=${ne}&perPage=${pe}`);d(Q.data.data)}catch(Q){console.log("error",Q)}}const be=()=>{if(Object.keys(b).length===0){N(!0),H("Выберите Суперкотегорию");return}if(se.length>0&&P===0){N(!0),H("Выберите Категорию");return}if(he.length>0&&k===0){N(!0),H("Выберите Подкотегорию");return}ce(b.id),console.log("localPicked",b);const J=[];U&&J.push(U),te&&J.push(te),E&&J.push(E),i(J),je()},je=()=>{a(b),s(!1),w(0),S(0),f(0),C({}),n([]),c([]),N(!1),H("Выберите категорию"),x(!1)},we=async(J,z,Q,G)=>{try{const qe=J=="super"?`https://api.mcrm.uz/api/categories?&page=${z}&perPage=${Q}`:`https://api.mcrm.uz/api/categories?parentId=${G}&page=${z}&perPage=${Q}`,Ze=(await Ke.get(qe)).data.data.map(Ft=>({...Ft,label:J==="super"?"Супер категория":J==="category"?"Категория":"Субкатегория"}));J==="super"&&W([...Ze]),J==="category"&&fe([...Ze]),J==="subCategory"&&K([...Ze])}catch(qe){console.error(`Ошибка произошла при получении ${J} категорий`,qe)}};return e.jsx("div",{className:j.modalCategory,children:e.jsxs("div",{className:j.modalCategory_block,children:[!p&&e.jsx(ii,{setCancel:je}),e.jsx("p",{className:j.modalCategory_content_message,children:y?O:""}),e.jsxs("div",{className:j.modalCategory_content,children:[e.jsx(ci,{superId:I,superCategory:A,category:se,setLocalPicked:C,setSuperId:w,setMessageStatus:N,fetchCategories:we,setSubCategories:K,setSuperCategoryObj:X,getBannersItems:ge}),e.jsx(li,{superId:I,categoryId:P,category:se,setSubCategory:Ne,fetchCategories:we}),e.jsx(_i,{subId:k,categoryId:P,subCategories:he,setSubProductsList:Ie,fetchCategories:we}),!t&&e.jsx(di,{setSettings:be,setCancel:je})]})]})})}const Ae=({title:o,currentProductEdit:t,isEdit:s,isCategory:a,isLinks:n,linkTextEdit:c,deleteBanner:p,isProduct:r,arrToUse:l,setArrToUse:i,typeOfBanner:d})=>{const{currentProductTable:m,changeCategoryStyles:g,categoriesArr:h,linksPageBannerText:v,openLinksPage:x,activeCategory:j,bannersArr1:I,setCurrentProductOpen:w,setOpenAddBanner:P}=xe(),[S,k]=u.useState(null),[f,b]=u.useState(""),[C,y]=u.useState(null);async function N(K){if(K){const U=new FormData;U.append("files[]",K);try{const te=await(await T.post("media-objects/uploads",U)).data;return console.log("data",te),b(te[0]),te}catch(X){console.log("не удалось добавить картинку на сервер",X)}}}async function O(K){try{const X=await(await T.post("web-banners",K)).data;console.log("data",X)}catch(U){console.log("ошибка при добовления баннера к продукту",U)}}async function H(K,U){try{return await(await T.patch(`web-banners/${K.id}`,{image:U})).data}catch(X){console.log(X)}}const A=K=>{if(K.target.files&&K.target.files[0]){const U=K.target.files[0];y(U),N(U);const X=new FileReader;X.onloadend=()=>{const te=X.result;k(te)},X.readAsDataURL(U)}},W=()=>{document.getElementById("upload").click()},se=()=>{const K=Number(ve.get("multi-store"));if(C){if(d==="product"){const U={multiStoreId:K,type:"product",typeId:m==null?void 0:m.id,image:f};I.filter(ie=>ie.type==="product").some(ie=>ie.type_id===(m==null?void 0:m.id))||O(U),P(!1),k(null),y(null);const te=document.getElementById("upload");te&&(te.value="")}if(d==="category"){const U={multiStoreId:K,type:"category",typeId:j.id,image:f};I.filter(ie=>ie.type==="category").some(ie=>ie.type_id===(j==null?void 0:j.id))||(O(U),P(!1)),k(null),y(null);const te=document.getElementById("upload");te&&(te.value="")}}},fe=async()=>{if(r){const K=await H(t,f),U=l==null?void 0:l.map(X=>X.id===(t==null?void 0:t.id)?K:X);i==null||i(U)}if(a){const K=I.filter(U=>U.type==="category").some(U=>U.type_id===(j==null?void 0:j.id));try{if(!K){const U=await H(t,f),te=await(await T.patch(`web-banners/${t==null?void 0:t.id}`,{typeId:j.id})).data;console.log("activeCategory",j),console.log("currentProductEdit",t),console.log("data",te);const ie=l==null?void 0:l.map(E=>E.id===(t==null?void 0:t.id)?{...E,image:U.image,title:te.title,type_id:te.type_id}:E);i==null||i(ie),console.log("updatedBannerCategory",ie)}}catch(U){console.log(U)}}w(!1),P(!1)},he=()=>{p==null||p(t==null?void 0:t.id),P(!1)};return e.jsxs("div",{className:$.add_banner,children:[e.jsx("div",{className:$.add_banner_header,children:e.jsx("h3",{className:$.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:$.add_banner_content,children:[g?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:$.add_banner_content_product,children:[o,":",a&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]}),n&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),h==null?void 0:h.map(K=>e.jsx("span",{className:$.add_banner_content_product,children:K.name.ru},K.name.ru))]}):e.jsx("p",{className:$.add_banner_content_product,children:x?`${o}: ${v}`:`${o}: ${m==null?void 0:m.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:A}),e.jsx("label",{htmlFor:"upload",className:$.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:$.add_banner_content_info,children:e.jsx("p",{className:$.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:$.add_banner_content_download,children:e.jsx("img",{src:S||`https://api.mcrm.uz/${t==null?void 0:t.image}`,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{className:$.add_banner_content_download,children:S?e.jsx("img",{src:S,alt:"Uploaded",className:$.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:$.add_banner_content_download_link,onClick:()=>W(),children:[e.jsx(B,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:$.add_banner_content_btns,children:[e.jsx("button",{className:$.add_banner_content_btn,onClick:he,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:$.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>fe(),children:"Изменить"})]}):e.jsxs("div",{className:$.add_banner_content_btns,children:[e.jsx("button",{className:$.add_banner_content_btn,onClick:()=>w(!1),children:"Отмена"}),e.jsx("button",{className:$.add_banner_content_btn,onClick:()=>se(),children:"Сохранить"})]})]})]})};function bt({inputText:o,setInputText:t,filteredUsers:s,isProductEdit:a}){const{categoriesArr:n,setCurrentProductOpen:c,setChangeCategoryStyles:p,setOpenModalCategoryBanner:r,clearCategoriesArr:l}=xe(),i=()=>{a&&c(!1),p(!1),r(!0),l()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:$.products_banner_wrap,children:[e.jsx("button",{className:$.products_banner_wrap_btn,onClick:i,children:e.jsx(B,{name:"FunnelIcon",width:20})}),(n==null?void 0:n.length)!==0&&e.jsx("div",{className:$.products_banner_wrap_filter,children:n==null?void 0:n.map(d=>e.jsx("span",{className:$.products_banner_wrap_filter_text,children:d.name.ru},d.id))}),e.jsxs("form",{action:"",className:$.products_banner_form,onSubmit:d=>s==null?void 0:s(d),children:[e.jsxs("div",{className:$.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:$.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:o,onChange:d=>t==null?void 0:t(d.target.value)}),e.jsx(B,{className:$.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:$.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const pi=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],ui=()=>{const{openModalCategoryBanner:o,setOpenModalCategoryBanner:t,searchTextBanner:s,setSearchTextBanner:a,pickedProducts:n,clearPickedProductsArr:c,webProductsArr:p,setBannersArr1:r,bannersArr1:l,openAddBanner:i,setOpenAddBanner:d,setCurrentProductTable:m,clearCategoriesArr:g,setOpenLinksPage:h,setOpenProductsPage:v,setChangeCategoryStyles:x}=xe(),[j]=u.useState(1),[I]=u.useState(10),[w,P]=u.useState(""),[S,k]=u.useState(p);async function f(){const y=ve.get("multi-store");try{const N=await T.get(`web-banners?multiStoreId=${y}&page=${j}&perPage=${I}`);r(N.data.data),console.log("bannersArr1",l)}catch(N){console.log("error",N)}}const b=y=>{y.preventDefault(),a(w)},C=async y=>{const N=S.find(O=>O.id===y);N&&(await f(),m(N),d(!0))};return u.useEffect(()=>{s&&k(S.filter(y=>{var N;return(N=y.title)==null?void 0:N.toLowerCase().includes(s.toLowerCase())})),n.length>0&&k(n)},[s,n]),u.useEffect(()=>{w===""?(k(p),a(""),c(),d(!1)):(k(p),g()),o&&P("")},[w,o]),u.useEffect(()=>{d(!1),h(!1),v(!0),t(!1),x(!1),g()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(bt,{inputText:w,setInputText:P,filteredUsers:b}),e.jsx(Ue,{arrToUse:S,arr:pi,setPickedProduct:C,selectionMode:"byId"})]}),o&&e.jsx(Xe,{isProduct:!0}),i&&e.jsx(Ae,{title:"Товар",typeOfBanner:"product"})]})},mi=()=>{const{categoriesArr:o,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:a,openAddBanner:n}=xe();return u.useEffect(()=>{t(!1),s(!0),a(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:$.category_wrap,children:e.jsx(Xe,{isCategory:!0})}),n&&e.jsx(Ae,{title:"Каталог",categories:o,typeOfBanner:"category"})]})},hi=()=>{const{linksPageBannerText:o,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:a,setOpenProductsPage:n}=xe();return u.useEffect(()=>{s(!0),a(!1),t(""),n(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$.add_link,children:[e.jsx("h3",{className:$.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:$.add_link_input,type:"text",value:o,onChange:c=>t(c.target.value)})]}),e.jsx(Ae,{title:"Страница"})]})};function gi(){const{openBannerDropdown:o,setOpenBannerDropdown:t,setWebProductsArr:s}=xe(),a=re(),[n,c]=u.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/newBanner/products"},{id:1,title:"Категория",href:"/admin/settings/banner/newBanner/category"},{id:1,title:"Страница",href:"/admin/settings/banner/newBanner/link"}]),[p]=u.useState(1),[r]=u.useState(10);async function l(){const i=ve.get("multi-store");try{const d=await T.get(`web-nomenclatures?multiStoreId=${i}&page=${p}&perPage=${r}`);s(d.data.data)}catch(d){console.log("error",d)}}return u.useEffect(()=>{l()},[]),e.jsxs("div",{className:$.banner,children:[e.jsx("h3",{className:$.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(gt,{openBlock:o,setOpenBlock:t,versionList:n,setVersionList:c}),e.jsxs("div",{className:$.banner_content,children:[a.pathname.startsWith("/admin/settings/banner/newBanner/products")&&e.jsx(ui,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/category")&&e.jsx(mi,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/link")&&e.jsx(hi,{})]})]})}const bi=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],vi=()=>{const{pickedProducts:o,currentProductOpen:t,openModalCategoryBanner:s,bannersArr1:a,searchTextBanner:n,currentProductTable:c,webProductsArr:p,clearPickedProductsArr:r,clearCategoriesArr:l,setCurrentProductOpen:i,setCurrentProductTable:d,setSearchTextBanner:m,setOpenLinksPage:g,setOpenProductsPage:h,setOpenModalCategoryBanner:v,setBannersArr1:x}=xe(),[j,I]=u.useState(""),[w,P]=u.useState(p),[S,k]=u.useState([]),[f]=u.useState(1),[b]=u.useState(20);async function C(){const A=ve.get("multi-store");try{const fe=(await(await T.get(`web-banners?multiStoreId=${A}&page=${f}&perPage=${b}`)).data.data).filter(he=>he.type==="product");k(fe)}catch(W){console.log("не удалось получить обьекты с баннерами",W)}}async function y(A){try{T.delete(`web-banners/${A}`)}catch(W){console.log("не удалось удалить",W)}}const N=A=>{A.preventDefault(),m(j),l()},O=A=>{const W=S.find(se=>se.id===A);W&&(d(W),i(!0))};u.useEffect(()=>{n&&P(w.filter(A=>{var W;return(W=A.title)==null?void 0:W.toLowerCase().includes(n.toLowerCase())})),o.length>0&&P(o)},[n,o]);const H=A=>{k(S.filter(W=>W.id!==A)),x(a.filter(W=>W.id!==A)),y(A)};return u.useEffect(()=>{i(!1),g(!1),h(!0),v(!1),l()},[i,g,h,v,l]),u.useEffect(()=>{C()},[]),u.useEffect(()=>{j===""?(P(p),m(""),r()):(P(p),l())},[j]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ue,{arrToUse:S,setArrToUse:k,arr:bi,setPickedProductActive:O,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(bt,{filteredUsers:N,setInputText:I}),e.jsx(Ue,{arrToUse:w,bannersArrProduct:S,setArrToUse:k,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Ae,{arrToUse:S,setArrToUse:k,title:"Продукт",currentProductEdit:c,isEdit:!0,isProduct:!0,deleteBanner:H})]})]}),s&&e.jsx(Xe,{})]})},xi=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],fi=()=>{const{currentProductTable:o,currentProductOpen:t,setCurrentProductOpen:s,setCurrentProductTable:a,setOpenAddBanner:n,openAddBanner:c}=xe(),[p,r]=u.useState([]),[l]=u.useState(1),[i]=u.useState(20);async function d(){const v=ve.get("multi-store");try{const I=(await(await T.get(`web-banners?multiStoreId=${v}&page=${l}&perPage=${i}`)).data.data).filter(w=>w.type==="category");r(I)}catch(x){console.log("не удалось получить обьекты с баннерами",x)}}async function m(v){try{T.delete(`web-banners/${v}`)}catch(x){console.log("не удалось удалить",x)}}const g=v=>{const x=p.find(j=>j.id===v);x&&(a(x),s(!0))},h=v=>{r(p.filter(x=>x.id!=v)),m(v)};return u.useEffect(()=>{d()},[]),u.useEffect(()=>{s(!1),n(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ue,{arr:xi,arrToUse:p,setArrToUse:r,selectionMode:"productId",isCategory:!0,setPickedProductActive:g}),c&&e.jsx(Xe,{isCategory:!0}),c&&e.jsx(Ae,{arrToUse:p,setArrToUse:r,title:"Каталог",currentProductEdit:o,isEdit:!0,isCategory:!0,deleteBanner:h})]})},ki=({setLinkText:o,currentProductEdit:t})=>{xe();const[s,a]=u.useState(t.brandName||""),n=c=>{a(c),o(c)};return u.useEffect(()=>{a(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:$.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:$.add_link_input,type:"text",onChange:c=>n(c.target.value),value:s})]})},yi=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],ji=()=>{const{currentProductOpen:o,currentProductTable:t,setCurrentProductTable:s,setCurrentProductOpen:a}=xe(),[n,c]=u.useState(""),[p,r]=u.useState([]),[l]=u.useState(1),[i]=u.useState(20);async function d(){const v=ve.get("multi-store");try{const I=(await(await T.get(`web-banners?multiStoreId=${v}&page=${l}&perPage=${i}`)).data.data).filter(w=>w.type==="link");r(I)}catch(x){console.log("не удалось получить обьекты с баннерами",x)}}async function m(v){try{T.delete(`web-banners/${v}`)}catch(x){console.log("не удалось удалить",x)}}u.useEffect(()=>{d()},[]);const g=v=>{const x=p.find(j=>j.id===v);x&&(s(x),console.log("currentProductTable",t),a(!0))},h=v=>{r(p.filter(x=>x.id!==v)),m(v)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ue,{arr:yi,arrToUse:p,selectionMode:"productId",setPickedProductActive:g,isLinks:!0}),o&&e.jsxs(e.Fragment,{children:[e.jsx(ki,{setLinkText:c,currentProductEdit:t}),e.jsx(Ae,{title:"Страница",currentProductEdit:t,deleteBanner:h,isLinks:!0,isEdit:!0,linkTextEdit:n})]})]})};function wi(){const{openBannerDropdown:o,setOpenBannerDropdown:t}=xe(),s=re(),[a,n]=u.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/activeBanner/activeProducts"},{id:1,title:"Категория",href:"/admin/settings/banner/activeBanner/activeCategory"},{id:1,title:"Страница",href:"/admin/settings/banner/activeBanner/activeLink"}]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:$.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(gt,{openBlock:o,setOpenBlock:t,versionList:a,setVersionList:n})]}),e.jsxs("div",{className:$.banner_content,children:[s.pathname.startsWith("/admin/settings/banner/activeBanner/activeProducts")&&e.jsx(vi,{}),s.pathname.startsWith("/admin/settings/banner/activeBanner/activeCategory")&&e.jsx(fi,{}),s.pathname.startsWith("/admin/settings/banner/activeBanner/activeLink")&&e.jsx(ji,{})]})]})}const Ci=[{id:1,title:"Новый",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner/activeProducts"}];function Ni(){const t=re().pathname,{setCurrentProductOpen:s}=xe();return u.useEffect(()=>{s(!1)},[]),e.jsx("div",{className:_.banner,children:e.jsxs("div",{className:_.banner_nav,children:[e.jsx("ul",{className:_.banner_nav_list,children:Ci.map(a=>e.jsx("li",{children:e.jsx(Y,{to:a.href,className:`${_.banner_nav_link} ${t.startsWith(a.href.split("/products")[0])||t.startsWith(a.href.split("/activeProducts")[0])?_.banner_nav_link_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:_.settings_content_base,children:[t.startsWith("/admin/settings/banner/newBanner")&&e.jsx(gi,{}),t.startsWith("/admin/settings/banner/activeBanner")&&e.jsx(wi,{})]})]})})}const Si="_contacts_mxkpi_1",Ii="_contacts_content_mxkpi_4",Pi="_contacts_nav_mxkpi_7",$i="_contacts_nav_list_mxkpi_10",Di="_contacts_nav_link_mxkpi_15",Oi="_contacts_nav_link_active_mxkpi_30",Fi="_contacts_btn_mxkpi_34",Mi="_socials_mxkpi_55",Bi="_socials_title_mxkpi_60",Ai="_socials_content_mxkpi_65",Li="_socials_content_wrap_mxkpi_70",qi="_socials_content_wrap_input_mxkpi_75",Ei="_aboutUs_mxkpi_84",Wi="_aboutUs_add_image_mxkpi_87",Ui="_aboutUs_content_mxkpi_90",zi="_aboutUs_image_wrap_mxkpi_95",Ri="_aboutUs_download_mxkpi_104",Vi="_aboutUs_text_mxkpi_112",Ti="_aboutUs_inputs_mxkpi_120",Ki="_aboutUs_inputs_wrap_mxkpi_126",Hi="_aboutUs_inputs_wrap_title_mxkpi_130",Xi="_aboutUs_inputs_wrap_input_mxkpi_136",Gi="_aboutUs_inputs_wrap_textarea_mxkpi_144",Zi="_aboutUs_btn_mxkpi_152",Ji="_aboutUs_week_info_mxkpi_172",Yi="_aboutUs_week_info_text_mxkpi_178",Qi="_aboutUs_week_content_mxkpi_183",ec="_aboutUs_week_wrap_mxkpi_189",tc="_aboutUs_week_wrap_colored_mxkpi_193",sc="_aboutUs_week_wrap_colored_active_mxkpi_203",oc="_aboutUs_week_wrap_colored_last_mxkpi_206",nc="_aboutUs_week_wrap_day_mxkpi_209",ac="_aboutUs_week_wrap_schedule_mxkpi_215",rc="_aboutUs_week_wrap_input_mxkpi_221",ic="_custom_checkbox_mxkpi_241",cc="_custom_checkbox_input_mxkpi_247",lc="_custom_checkbox_box_mxkpi_252",_c="_custom_checkbox_box_icon_mxkpi_261",L={contacts:Si,contacts_content:Ii,contacts_nav:Pi,contacts_nav_list:$i,contacts_nav_link:Di,contacts_nav_link_active:Oi,contacts_btn:Fi,socials:Mi,socials_title:Bi,socials_content:Ai,socials_content_wrap:Li,socials_content_wrap_input:qi,aboutUs:Ei,aboutUs_add_image:Wi,aboutUs_content:Ui,aboutUs_image_wrap:zi,aboutUs_download:Ri,aboutUs_text:Vi,aboutUs_inputs:Ti,aboutUs_inputs_wrap:Ki,aboutUs_inputs_wrap_title:Hi,aboutUs_inputs_wrap_input:Xi,aboutUs_inputs_wrap_textarea:Gi,aboutUs_btn:Zi,aboutUs_week_info:Ji,aboutUs_week_info_text:Yi,aboutUs_week_content:Qi,aboutUs_week_wrap:ec,aboutUs_week_wrap_colored:tc,aboutUs_week_wrap_colored_active:sc,aboutUs_week_wrap_colored_last:oc,aboutUs_week_wrap_day:nc,aboutUs_week_wrap_schedule:ac,aboutUs_week_wrap_input:rc,custom_checkbox:ic,custom_checkbox_input:cc,custom_checkbox_box:lc,custom_checkbox_box_icon:_c},dc=({temporaryImageUrl:o,setTemporaryImageUrl:t})=>{Qe();const[s,a]=u.useState(null),[n,c]=u.useState(null);u.useEffect(()=>{const l=localStorage.getItem("savedLogoImageUrl");l&&(a(l),t(l))},[t]);const p=l=>{if(l.target.files&&l.target.files[0]){const i=l.target.files[0];c(i);const d=new FileReader;d.onloadend=()=>{const m=d.result;a(m),t(m),localStorage.setItem("savedLogoImageUrl",m)},d.readAsDataURL(i)}},r=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:L.aboutUs_add_image,children:[e.jsx("div",{className:L.aboutUs_image_wrap,children:s||o?e.jsx("img",{src:o||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>r(),children:e.jsx(B,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:p}),e.jsx("label",{htmlFor:"upload",className:L.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:L.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function Oe(){return Oe=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},Oe.apply(this,arguments)}const vt=(o,t)=>{const s={};for(const a in o)t.indexOf(a)===-1&&(s[a]=o[a]);return s},xt=le.createContext(null),Ge=le.createContext(null),pc=o=>t=>le.createElement(Ge.Consumer,null,s=>le.createElement(o,Oe({parent:s},t))),uc=(o=[])=>{const[t,s]=u.useState(!1),a=u.useRef(o),n=(()=>{const p=u.useContext(xt);if(p===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return p})(),c=n.getApi();return u.useEffect(()=>{n.load().then(()=>Promise.all(a.current.map(n.loadModule))).then(()=>s(!0))},[]),t&&c?c:null},mc=()=>{},hc=["onLoad","onError","modules","apiLoader"];function ft(o,t=!1,s=[]){return a=>{const{width:n,height:c,modules:p=[],onLoad:r=mc}=a,l=uc(s.concat(p)),i=!t||!!l,d=vt(a,hc);return u.useEffect(()=>l?r(l):void 0,[l]),i?le.createElement(o,Oe({ymaps:l},d)):le.createElement("div",{style:{width:n,height:c}})}}const gc=typeof window<"u",rt={lang:"ru_RU",load:"",ns:"",mode:"release"},bc=o=>{const{version:t="2.1",enterprise:s=!1,query:a={lang:"ru_RU",load:"",ns:""},preload:n=!1,children:c}=o,p=u.useRef((r=>{const{query:l=rt}=r,i=Date.now().toString(32),d=l.ns||"",m="__yandex-maps-api-onload__$$"+i,g="__yandex-maps-api-onerror__$$"+i,h=gc?window:{},v={};let x;const j=()=>d?h[d]:x,I=()=>{delete h[m],delete h[g]};return{load:()=>{if(j())return Promise.resolve(x);if(v[d])return v[d];const w={onload:m,onerror:g,...rt,...l},P=Object.keys(w).map(k=>`${k}=${w[k]}`).join("&"),S=[`https://${r.enterprise?"enterprise.":""}api-maps.yandex.ru`,r.version,"?"+P].join("/");return v[d]=new Promise((k,f)=>{h[m]=b=>{I(),b.ready(()=>{x=b,k(b)})},h[g]=b=>{I(),f(b)},(b=>new Promise((C,y)=>{const N=document.createElement("script");N.type="text/javascript",N.onload=C,N.onerror=y,N.src=b,N.async=!0,document.head.appendChild(N)}))(S).catch(h[g])}),v[d]},getApi:j,loadModule:w=>new Promise((P,S)=>{x.modules.require(w).done(k=>{k.forEach(f=>{((b,C,y,N=!1)=>{const O=typeof C=="string"?C.split("."):C.slice();let H,A=b;for(;O.length>1;)H=O.shift(),A[H]||(A[H]={}),A=A[H];const W=O[0];A[W]=N===!0&&A[W]||y})(x,w,f,!0)}),P(x)},S)})}})({version:t,enterprise:s,query:a,preload:n}));return u.useEffect(()=>{n&&p.current.load()},[p.current]),le.createElement(xt.Provider,{value:p.current},c)},it=/^on(?=[A-Z])/;function oe(o){return Object.keys(o).reduce((t,s)=>{if(it.test(s)){const a=s.replace(it,"").toLowerCase();t._events[a]=o[s]}else t[s]=o[s];return t},{_events:{}})}function Me(o,t,s){typeof s=="function"&&o.events.add(t,s)}function Be(o,t,s){typeof s=="function"&&o.events.remove(t,s)}function Le(o,t,s){Object.keys(Object.assign({},t,s)).forEach(a=>{t[a]!==s[a]&&(Be(o,a,t[a]),Me(o,a,s[a]))})}const kt=o=>"default"+o.charAt(0).toUpperCase()+o.slice(1);function ue(o,t){return o[t]!==void 0||o[kt(t)]===void 0}function F(o,t,s){return(ue(o,t)?o[t]:o[kt(t)])||s}function me(o,t,s=null){if(o!==t){if(o&&("current"in o?o.current=null:typeof o=="function"&&o(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function yt(o){const{width:t,height:s,style:a,className:n}=o;return a!==void 0||n!==void 0?Object.assign({},a&&{style:a},n&&{className:n}):{style:{width:t,height:s}}}class vc extends le.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:a=()=>{}}=this.props;a(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const jt=o=>({onError:t,...s})=>le.createElement(vc,{onError:t},le.createElement(o,s));class Ee extends le.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Ee.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Ee.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ee.unmountObject(this.instance,this.props)}render(){const t=yt(this.props),s=oe(this.props),a=vt(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return le.createElement(Ge.Provider,{value:this.state.instance},le.createElement("div",Oe({ref:this._getRef},t,a),this.props.children))}static mountObject(t,s,a){const{instanceRef:n,_events:c}=oe(a),p=new s(t,F(a,"state"),F(a,"options"));return Object.keys(c).forEach(r=>Me(p,r,c[r])),me(null,n,p),p}static updateObject(t,s,a){const{_events:n,instanceRef:c}=oe(a),{_events:p,instanceRef:r}=oe(s);if(ue(a,"state")){const l=F(s,"state",{}),i=F(a,"state",{});l.type!==i.type&&t.setType(i.type),l.behaviors!==i.behaviors&&(l.behaviors&&t.behaviors.disable(l.behaviors),i.behaviors&&t.behaviors.enable(i.behaviors)),i.zoom&&l.zoom!==i.zoom&&t.setZoom(i.zoom),i.center&&l.center!==i.center&&t.setCenter(i.center),i.bounds&&l.bounds!==i.bounds&&t.setBounds(i.bounds)}if(ue(a,"options")){const l=F(s,"options"),i=F(a,"options",{});l!==i&&t.options.set(i)}F(s,"width")===F(a,"width")&&F(s,"height")===F(a,"height")||t.container.fitToViewport(),Le(t,p,n),me(r,c,t)}static unmountObject(t,s){const{instanceRef:a,_events:n}=oe(s);t!==null&&(Object.keys(n).forEach(c=>Be(t,c,n[c])),t.destroy(),me(a))}}const wt=jt(ft(Ee,!0,["Map"]));wt.defaultProps={width:320,height:240};class ze extends le.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&ze.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&ze.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,ze.unmountObject(this.state.instance,this.props)}render(){const t=yt(this.props);return le.createElement("div",Oe({ref:this._getRef},t))}static mountObject(t,s,a){const{instanceRef:n,_events:c}=oe(a),p=F(a,"point"),r=F(a,"locateOptions"),l=F(a,"options");return new Promise((i,d)=>{s.locate(p,r).done(m=>{if(m.length>0){const g=new s.Player(t,m[0],l);me(null,n,g),Object.keys(c).forEach(h=>Me(g,h,c[h])),i(g)}},d)})}static updateObject(t,s,a){const{_events:n,instanceRef:c}=oe(a),{_events:p,instanceRef:r}=oe(s);if(ue(a,"options")){const l=F(s,"options"),i=F(a,"options");l!==i&&t.options.set(i)}if(ue(a,"point")){const l=F(a,"point"),i=F(s,"point"),d=F(a,"locateOptions");l!==i&&t.moveTo(l,d)}Le(t,p,n),me(r,c,t)}static unmountObject(t,s){const{instanceRef:a,_events:n}=oe(s);t!==null&&(Object.keys(n).forEach(c=>Be(t,c,n[c])),me(a))}}class We extends le.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=We.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&We.updateControl(this.instance,t,this.props)}componentWillUnmount(){We.unmountControl(this.instance,this.props)}render(){return le.createElement(Ge.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:a,parent:n,lazy:c,_events:p}=oe(s),r=new t({data:F(s,"data"),options:F(s,"options"),state:F(s,"state"),mapTypes:F(s,"mapTypes"),lazy:c});if(Object.keys(p).forEach(l=>Me(r,l,p[l])),n&&n.controls&&typeof n.controls.add=="function")n.controls.add(r);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(r)}return me(null,a,r),r}static updateControl(t,s,a){const{_events:n,instanceRef:c}=oe(a),{_events:p,instanceRef:r}=oe(s);if(ue(a,"options")){const l=F(s,"options"),i=F(a,"options");l!==i&&t.options.set(i)}if(ue(a,"data")){const l=F(s,"data"),i=F(a,"data");l!==i&&t.data.set(i)}if(ue(a,"state")){const l=F(s,"state"),i=F(a,"state");l!==i&&t.state.set(i)}if(ue(a,"mapTypes")){const l=F(s,"mapTypes"),i=F(a,"mapTypes");l!==i&&(t.removeAllMapTypes(),i.forEach(d=>t.addMapType(d)))}Le(t,p,n),me(r,c,t)}static unmountControl(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s);t!==null&&(Object.keys(c).forEach(p=>Be(t,p,c[p])),n.controls&&typeof n.controls.remove=="function"?n.controls.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),me(a))}}var xc=jt(pc(ft(o=>le.createElement(We,Oe({},o,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Re extends le.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Re.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Re.updateObject(this.instance,t,this.props)}componentWillUnmount(){Re.unmountObject(this.instance,this.props)}render(){return le.createElement(Ge.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s),p=new t(F(s,"options"));if(Object.keys(c).forEach(r=>Me(p,r,c[r])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(p);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount Clusterer");n.add(p)}return me(null,a,p),p}static updateObject(t,s,a){const{_events:n,instanceRef:c}=oe(a),{_events:p,instanceRef:r}=oe(s);if(ue(a,"options")){const l=F(s,"options"),i=F(a,"options");l!==i&&t.options.set(i)}Le(t,p,n),me(r,c,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s);t!==null&&(Object.keys(c).forEach(p=>Be(t,p,c[p])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),me(a))}}class Ve extends le.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Ve.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Ve.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ve.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s),p=F(s,"options",{}),r=F(s,"features",{}),l=F(s,"filter",null),i=F(s,"objects",{}),d=F(s,"clusters",{}),m=new t(p);if(m.add(r||[]),m.setFilter(l),m.objects.options.set(i),m.clusters.options.set(d),Object.keys(c).forEach(g=>Me(m,g,c[g])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(m);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount ObjectManager");n.add(m)}return me(null,a,m),m}static updateObject(t,s,a){const{_events:n,instanceRef:c}=oe(a),{_events:p,instanceRef:r}=oe(s);if(ue(a,"options")){const l=F(s,"options"),i=F(a,"options");l!==i&&t.options.set(i)}if(ue(a,"objects")){const l=F(s,"objects"),i=F(a,"objects");l!==i&&t.objects.options.set(i)}if(ue(a,"clusters")){const l=F(s,"clusters"),i=F(a,"clusters");l!==i&&t.clusters.options.set(i)}if(ue(a,"filter")){const l=F(s,"filter"),i=F(a,"filter");l!==i&&t.setFilter(i)}if(ue(a,"features")){const l=F(s,"features"),i=F(a,"features");l!==i&&(t.remove(l),t.add(i))}Le(t,p,n),me(r,c,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s);t!==null&&(Object.keys(c).forEach(p=>Be(t,p,c[p])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),me(a))}}class Te extends le.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:a}=this.props,n=Te.mountObject(a&&typeof a.modifyConstructor=="function"?a.modifyConstructor(s[t]):s[t],this.props);this.instance=n,this.setState({instance:n})}componentDidUpdate(t){this.instance!==null&&Te.updateObject(this.instance,t,this.props)}componentWillUnmount(){Te.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s),p=new t(F(s,"geometry"),F(s,"properties"),F(s,"options"));if(Object.keys(c).forEach(r=>Me(p,r,c[r])),n&&n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(p);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(p)}return me(null,a,p),p}static updateObject(t,s,a){const{_events:n,instanceRef:c}=oe(a),{_events:p,instanceRef:r}=oe(s);if(ue(a,"geometry")){const l=F(s,"geometry",{}),i=F(a,"geometry",{});Array.isArray(i)&&i!==l?Array.isArray(i[0])&&typeof i[1]=="number"?(t.geometry.setCoordinates(i[0]),t.geometry.setRadius(i[1])):t.geometry.setCoordinates(i):typeof i=="object"&&(i.coordinates!==l.coordinates&&t.geometry.setCoordinates(i.coordinates),i.radius!==l.radius&&t.geometry.setRadius(i.radius))}if(ue(a,"properties")){const l=F(s,"properties"),i=F(a,"properties");l!==i&&t.properties.set(i)}if(ue(a,"options")){const l=F(s,"options"),i=F(a,"options");l!==i&&t.options.set(i)}Le(t,p,n),me(r,c,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:c}=oe(s);t!==null&&(Object.keys(c).forEach(p=>Be(t,p,c[p])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),me(a))}}const fc=()=>{const o=u.useRef(null);return e.jsx(bc,{children:e.jsx("div",{children:e.jsx(wt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{o.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(xc,{options:{position:{bottom:20,right:20}}})})})})},kc=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(a,n)=>{t(c=>c.map(p=>p.id===n?{...p,text:a}:p))};return e.jsxs("div",{className:L.aboutUs_inputs,children:[o.map(a=>e.jsx("div",{className:L.aboutUs_inputs_wrap,children:a.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:L.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("textarea",{className:L.aboutUs_inputs_wrap_textarea,onChange:n=>s(n.target.value,a.id),value:a.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:L.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("input",{className:L.aboutUs_inputs_wrap_input,type:a.type==="isPhone"?"number":a.type==="isEmail"?"email":"text",onChange:n=>s(n.target.value,a.id),value:a.text})]})},a.id)),e.jsx(fc,{})]})},yc=({id:o,checked:t,onChange:s})=>{const a=n=>{s(o,n.target.checked)};return e.jsxs("label",{className:L.custom_checkbox,children:[e.jsx("input",{className:L.custom_checkbox_input,type:"checkbox",checked:t,onChange:a}),e.jsx("span",{className:L.custom_checkbox_box,children:e.jsx(B,{name:"CheckIcon",width:18,height:18,className:L.custom_checkbox_box_icon})})]})},jc=({temporaryContactsSchedule:o,setTemporaryContactsSchedule:t})=>{const s=r=>{const l=r.replace(/\D/g,"");return l.length<=2?l:`${l.slice(0,2)}:${l.slice(2,4)}`},a=(r,l,i,d)=>{if(!d.isActive)return;const m=s(i);t(g=>g.map(h=>h.id===r?{...h,workHours:{...h.workHours,[l]:m}}:h))},n=(r,l)=>{t(i=>i.map(d=>d.id===r?{...d,isActive:l,workHours:l?d.workHours:{start:"",end:""}}:d))},c=u.useRef({}),p=u.useRef({});return u.useEffect(()=>{o.forEach(r=>{var l;r.isActive&&c.current[r.id]&&!p.current[r.id]&&((l=c.current[r.id])==null||l.focus(),p.current[r.id]=!0)})},[o]),e.jsxs("div",{className:L.aboutUs_week,children:[e.jsxs("div",{className:L.aboutUs_week_info,children:[e.jsx("span",{className:L.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:L.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:L.aboutUs_week_content,children:o.map((r,l)=>{const i=l===o.length-1,d=i&&r.isActive?L.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:L.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${L.aboutUs_week_wrap_colored} 
                  ${r.isActive?L.aboutUs_week_wrap_colored_active:""} 
                  ${i?L.aboutUs_week_wrap_colored_last:""} 
                  ${d}
                `,children:[e.jsx("span",{className:L.aboutUs_week_wrap_day,children:r.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:L.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:m=>c.current[r.id]=m,className:L.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:m=>a(r.id,"start",m.target.value,r),value:r.workHours.start}),e.jsx("span",{className:L.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:L.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:m=>a(r.id,"end",m.target.value,r),value:r.workHours.end})]})]}),e.jsx(yc,{id:r.id,checked:r.isActive,onChange:n})]},r.id)})})]})},wc=()=>{const{contactsFormInputsArr:o,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:a,setImageUrlLogo:n}=Qe(),[c,p]=u.useState(o),[r,l]=u.useState(""),[i,d]=u.useState(s),m=()=>{t(c),n(r);const g=i.map(h=>h.workHours&&h.workHours.start===""&&h.workHours.end===""?{...h,isActive:!1}:h);a(g)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:L.aboutUs,children:[e.jsx(dc,{temporaryImageUrl:r,setTemporaryImageUrl:l}),e.jsxs("div",{className:L.aboutUs_content,children:[e.jsx(kc,{temporarySocialPlatforms:c,setTemporarySocialPlatforms:p}),e.jsx(jc,{temporaryContactsSchedule:i,setTemporaryContactsSchedule:d})]})]}),e.jsx("button",{className:L.aboutUs_btn,onClick:m,children:"Сохранить"})]})};function Cc({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:c=1.1,status:p=!1,disabled:r=!1}){const l={width:`${o}px`,height:`${o/2-o/20}px`,background:p?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},i={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${p?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${c}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:l,children:e.jsx("div",{style:i})})}const Nc=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(n,c)=>{t(p=>p.map(r=>r.id===n?{...r,url:c,isActive:c===""?!1:r.isActive}:r))},a=(n,c)=>{n.url!==""&&t(p=>p.map(r=>r.id===c?{...r,isActive:!r.isActive,url:n.isActive?"":n.url}:r))};return e.jsx(e.Fragment,{children:o.map(n=>e.jsxs("div",{className:L.socials_content_wrap,children:[e.jsx("img",{src:n.icon,alt:n.alt}),e.jsx("input",{type:"text",className:L.socials_content_wrap_input,value:n.url||"",onChange:c=>s(n.id,c.target.value)}),e.jsx("div",{onClick:()=>a(n,n.id),children:e.jsx(Cc,{status:n.isActive})})]},n.id))})},Sc=()=>{const{socialPlatforms:o,setSocialPlatforms:t,setActiveSocials:s}=Qe(),[a,n]=u.useState(o);async function c(){const r=ve.get("multi-store"),l=await T.get(`web-credentials/${r}`);if(l){const i=Object.entries(l.data.social).filter(([m,g])=>g.isActive).map(([m,g])=>({name:m,...g})),d=o.filter(m=>i.some(g=>g.name===m.name)).map(m=>{const g=i.find(h=>h.name===m.name);return{...m,...g,isActive:!0}});s(d)}}async function p(){t(a);const r=ve.get("multi-store"),l=a.reduce((i,d)=>(i[d.name]={url:d.url,isActive:d.isActive},i),{});try{const i=await T.patch(`web-credentials/${r}`,{social:l});c()}catch(i){console.log("error",i)}}return e.jsxs("div",{className:L.socials,children:[e.jsx("h3",{className:L.socials_title,children:"Соц-сети"}),e.jsx("div",{className:L.socials_content,children:e.jsx(Nc,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:n})}),e.jsx("button",{className:L.contacts_btn,onClick:p,children:"Сохранить"})]})},Ic=[{id:de(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:de(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function Pc(){const t=re().pathname;return e.jsx("div",{className:L.contacts,children:e.jsxs("div",{className:L.contacts_content,children:[e.jsx("div",{className:L.contacts_nav,children:e.jsx("ul",{className:L.contacts_nav_list,children:Ic.map(s=>e.jsx(Y,{to:s.href,className:`${L.contacts_nav_link} ${s.href==t?L.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(Sc,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(wc,{})]})})}const $c="_radioLabel_1w8t1_1",Dc="_radioLabel_selected_1w8t1_7",Oc="_radioLabel_radio_1w8t1_7",Fc="_radioLabel_input_1w8t1_15",Mc="_radioLabel_text_1w8t1_28",Bc="_storeBtn_1w8t1_34",Ac="_storeBtn_active_1w8t1_48",Lc="_deliveryInput_text_1w8t1_53",qc="_deliveryInput_wrap_1w8t1_58",Ec="_deliveryInput_wrap_input_1w8t1_66",Wc="_version3_1w8t1_74",Uc="_version3_title_1w8t1_79",zc="_version3_block_1w8t1_85",Rc="_version3_block_top_1w8t1_90",Vc="_version3_block_top_title_1w8t1_102",Tc="_version3_block_top_arrow_1w8t1_106",Kc="_version3_block_top_arrow_active_1w8t1_119",Hc="_version3_block_dropdown_1w8t1_122",Xc="_version3_block_dropdown_item_1w8t1_133",Gc="_version3_block_dropdown_open_1w8t1_149",Zc="_version3_block_onOff_1w8t1_173",Jc="_version3_block_delivery_1w8t1_173",Yc="_version3_pickedWrap_1w8t1_178",Qc="_version3_pickedWrap_item_1w8t1_189",el="_kilometerPricing_1w8t1_205",tl="_kilometerPricing_wrap_1w8t1_210",sl="_kilometerPricing_wrap_input_1w8t1_219",ol="_textarea_1w8t1_225",nl="_textarea_title_1w8t1_230",al="_textarea_text_1w8t1_236",rl="_textarea_count_1w8t1_243",R={radioLabel:$c,radioLabel_selected:Dc,radioLabel_radio:Oc,radioLabel_input:Fc,radioLabel_text:Mc,storeBtn:Bc,storeBtn_active:Ac,deliveryInput_text:Lc,deliveryInput_wrap:qc,deliveryInput_wrap_input:Ec,version3:Wc,version3_title:Uc,version3_block:zc,version3_block_top:Rc,version3_block_top_title:Vc,version3_block_top_arrow:Tc,version3_block_top_arrow_active:Kc,version3_block_dropdown:Hc,version3_block_dropdown_item:Xc,version3_block_dropdown_open:Gc,version3_block_onOff:Zc,version3_block_delivery:Jc,version3_pickedWrap:Yc,version3_pickedWrap_item:Qc,kilometerPricing:el,kilometerPricing_wrap:tl,kilometerPricing_wrap_input:sl,textarea:ol,textarea_title:nl,textarea_text:al,textarea_count:rl},Se=({id:o,value:t,checked:s,onChange:a,label:n})=>e.jsxs("label",{className:`${R.radioLabel} ${s?R.radioLabel_selected:""}`,children:[e.jsx("input",{type:"radio",id:o,value:t,checked:s,onChange:a,className:R.radioLabel_input}),e.jsx("span",{className:R.radioLabel_radio}),e.jsx("span",{className:R.radioLabel_text,children:n})]}),et=(o,t)=>{const s=Fe();return re(),{handleChange:u.useCallback(n=>{const c=n.target.value;o(c);const p=t[c];p&&s(p)},[s,t,o])}},il="_delivery_vkjtc_1",cl="_delivery_title_vkjtc_5",ll="_delivery_main_vkjtc_10",_l="_delivery_btn_vkjtc_16",dl="_deliveryOrg_vkjtc_28",pl="_deliveryOrg_radios_vkjtc_31",ul="_deliveryOrg_children_vkjtc_37",ml="_deliveryOrg_children_wrap_vkjtc_40",hl="_storeDelivery_vkjtc_46",gl="_storeDelivery_stores_vkjtc_49",bl="_storeDelivery_radios_vkjtc_55",Z={delivery:il,delivery_title:cl,delivery_main:ll,delivery_btn:_l,deliveryOrg:dl,deliveryOrg_radios:pl,deliveryOrg_children:ul,deliveryOrg_children_wrap:ml,storeDelivery:hl,storeDelivery_stores:gl,storeDelivery_radios:bl},Ce=({text:o,placeholder:t,value:s,setValue:a})=>e.jsxs("div",{className:R.deliveryInput,children:[e.jsx("p",{className:R.deliveryInput_text,children:o}),e.jsxs("div",{className:R.deliveryInput_wrap,children:[e.jsx("input",{className:R.deliveryInput_wrap_input,type:"number",placeholder:t,value:s,onChange:n=>a(n.target.value)}),e.jsx("span",{className:R.deliveryInput_wrap_input_text,children:"UZS"})]})]}),ye=Mt()(Bt(At(o=>({deliveryStoresArr:[{id:de(),name:"Магазин1",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:de(),name:"Магазин2",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:de(),name:"Магазин3",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}],setDeliveryStoresArr:t=>o({deliveryStoresArr:t}),isActiveStoreId:"",setIsActiveStoreId:t=>o({isActiveStoreId:t}),citiesDelivery:[{id:de(),city:"Ташкент"},{id:de(),city:"Бухара"},{id:de(),city:"Самарканд"}],setCitiesDelivery:t=>o({citiesDelivery:t}),selectedOption:"",setSelectedOption:t=>o({selectedOption:t}),selectedOrganizationOption:"",setSelectedOrganizationOption:t=>o({selectedOrganizationOption:t}),selectedStoreOption:"",setSelectedStoreOption:t=>o({selectedStoreOption:t}),saveLocation:"",setSaveLocation:t=>o({saveLocation:t}),savePathStore:"",setSavePathStore:t=>o({savePathStore:t}),saveLocationStore:[],setSaveLocationStore:t=>o({saveLocationStore:t}),pickedCitiesFreeDelivery:[],setPickedCitiesFreeDelivery:t=>o({pickedCitiesFreeDelivery:t}),inputSumFree:"",setInputSumFree:t=>o({inputSumFree:t}),pickedCitiesFixedDelivery:[],setPickedCitiesFixedDelivery:t=>o({pickedCitiesFixedDelivery:t}),inputSumFixed:"",setInputSumFixed:t=>o({inputSumFixed:t}),inputFixedPrice:"",setInputFixedPrice:t=>o({inputFixedPrice:t}),pickedCitiesFlexibleDelivery:[],setPickedCitiesFlexibleDelivery:t=>o({pickedCitiesFlexibleDelivery:t}),inputSumFlexible:"",setInputSumFlexible:t=>o({inputSumFlexible:t}),inputFirstKm:"",setInputFirstKm:t=>o({inputFirstKm:t}),inputLastKm:"",setInputLastKm:t=>o({inputLastKm:t}),inputExtraKm:"",setInputExtraKm:t=>o({inputExtraKm:t}),pickedCitiesOwnDelivery:[],setPickedCitiesOwnDelivery:t=>o({pickedCitiesOwnDelivery:t}),inputSumOwn:"",setInputSumOwn:t=>o({inputSumOwn:t}),textareaVal:"",setTextareaVal:t=>o({textareaVal:t}),openCountriesDropdown:!1,setOpenCountriesDropdown:t=>o({openCountriesDropdown:t})}),{name:"delivery-store",partialize:o=>({...o})})));function Pe({citiesArrDelivery:o,setCitiesArrDelivery:t,pickedCities:s,setPickedCities:a}){const{openCountriesDropdown:n,setOpenCountriesDropdown:c}=ye(),p=l=>{s.some(i=>i.id===l.id)||a([...s,l]),c(!1)},r=(l,i)=>{i.stopPropagation(),a(s.filter(d=>d.id!==l.id))};return e.jsxs("div",{className:R.version3,children:[e.jsx("span",{className:R.version3_title,children:"Города"}),e.jsxs("div",{className:R.version3_block,children:[e.jsxs("div",{className:`${s.length>0?R.version3_pickedWrap:R.version3_block_top}`,onClick:()=>c(!n),children:[s.length>0?s.map(l=>e.jsxs("div",{className:R.version3_pickedWrap_item,children:[e.jsx("h2",{className:R.version3_block_top_title,children:l.city}),e.jsx("button",{onClick:i=>r(l,i),children:e.jsx(B,{name:"XMarkIcon",width:15})})]},l.id)):e.jsx("h2",{className:R.version3_block_top_title,children:"Выберите город"}),e.jsx("button",{className:R.version3_block_top_btn,onClick:()=>c(!n),children:e.jsx("div",{className:`${R.version3_block_top_arrow} ${n&&o.length>0?R.version3_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${R.version3_block_dropdown} ${n&&o.length>0?R.version3_block_dropdown_open:""}`,children:o==null?void 0:o.map(l=>e.jsx("span",{className:R.version3_block_dropdown_item,onClick:()=>p(l),children:l.city},l.id))})]})]})}const $e=()=>{const{setPickedCitiesFreeDelivery:o,setInputSumFree:t,setPickedCitiesFixedDelivery:s,setInputSumFixed:a,setInputFixedPrice:n,setPickedCitiesFlexibleDelivery:c,setInputSumFlexible:p,setInputFirstKm:r,setInputLastKm:l,setInputExtraKm:i,setPickedCitiesOwnDelivery:d,setInputSumOwn:m,setTextareaVal:g}=ye();return{resetOrg:v=>{v!=="free"&&(o([]),t("")),v!=="fixed"&&(s([]),a(""),n("")),v!=="flexible"&&(c([]),p(""),r(""),l(""),i("")),v!=="own"&&(d([]),m(""),g("")),v==="all"&&(o([]),t(""),s([]),a(""),n(""),c([]),p(""),r(""),l(""),i(""),d([]),m(""),g(""))}}},vl=()=>{const{setInputSumFree:o,citiesDelivery:t,setCitiesDelivery:s,pickedCitiesFreeDelivery:a,inputSumFree:n,setPickedCitiesFreeDelivery:c,deliveryStoresArr:p,setDeliveryStoresArr:r,setOpenCountriesDropdown:l,setSaveLocation:i,setSaveLocationStore:d}=ye(),m=re(),[g,h]=u.useState(a),[v,x]=u.useState(n);u.useEffect(()=>{l(!1)},[]);const{resetOrg:j}=$e(),I=()=>{j("free");const w=g,P=v;c(w),o(P);const S=[{cities:w,minPrice:P}],k=p.map(f=>({...f,location:"storeFreeDelivery",deliveryFree:S,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}));console.log("deliveryStoresArr",p),r(k),i(m.pathname),d([]),l(!1)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:v,setValue:x}),e.jsx(Pe,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:g,setPickedCities:h}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>I(),children:"Сохранить"})]})},xl=()=>{const{resetOrg:o}=$e(),{inputSumFixed:t,setInputSumFixed:s,inputFixedPrice:a,setInputFixedPrice:n,citiesDelivery:c,setCitiesDelivery:p,pickedCitiesFixedDelivery:r,setPickedCitiesFixedDelivery:l,deliveryStoresArr:i,setDeliveryStoresArr:d,setOpenCountriesDropdown:m,setSaveLocation:g,setSaveLocationStore:h}=ye(),[v,x]=u.useState(r),[j,I]=u.useState(t),[w,P]=u.useState(a);u.useEffect(()=>{m(!1)},[]);const S=()=>{o("fixed");const k=v,f=j,b=w;l(k),s(f),n(b);const C=[{cities:k,minPrice:f,fixedPrice:b}],y=i.map(N=>({...N,location:"storeFixedPriceDelivery",deliveryFree:[],deliveryFixed:C,deliveryFlexible:[],deliveryOwn:[]}));d(y),g(location.pathname),h([]),console.log("deliveryStoresArr",i),m(!1)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:j,setValue:I}),e.jsx(Ce,{text:"Цена за доставку",placeholder:"0",value:w,setValue:P}),e.jsx(Pe,{citiesArrDelivery:c,setCitiesArrDelivery:p,pickedCities:v,setPickedCities:x}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>S(),children:"Сохранить"})]})},Ct=({valueFirst:o,setValueFirst:t,valueLast:s,setValueLast:a})=>e.jsxs("div",{className:R.kilometerPricing,children:[e.jsx("span",{className:R.deliveryInput_text,children:"Первые"}),e.jsxs("div",{className:R.kilometerPricing_wrap,children:[e.jsx("input",{className:R.kilometerPricing_wrap_input,type:"number",value:o,placeholder:"0",onChange:n=>t(n.target.value)}),e.jsx("span",{children:"KM"})]}),e.jsx("span",{className:R.deliveryInput_text,children:"по"}),e.jsxs("div",{className:R.kilometerPricing_wrap,children:[e.jsx("input",{className:R.kilometerPricing_wrap_input,type:"number",value:s,placeholder:"0",onChange:n=>a(n.target.value)}),e.jsx("span",{children:"KM"})]})]}),fl=()=>{const{deliveryStoresArr:o,citiesDelivery:t,setCitiesDelivery:s,setDeliveryStoresArr:a,pickedCitiesFlexibleDelivery:n,setPickedCitiesFlexibleDelivery:c,inputSumFlexible:p,setInputSumFlexible:r,inputFirstKm:l,setInputFirstKm:i,inputLastKm:d,setInputLastKm:m,inputExtraKm:g,setInputExtraKm:h,setOpenCountriesDropdown:v,setSaveLocation:x,setSaveLocationStore:j}=ye(),[I,w]=u.useState(n),[P,S]=u.useState(p),[k,f]=u.useState(l),[b,C]=u.useState(d),[y,N]=u.useState(g),{resetOrg:O}=$e(),H=()=>{O("flexible");const A=I,W=P,se=k,fe=b,he=y;c(A),r(W),i(se),m(fe),h(he);const K=[{cities:A,minPrice:W,pricingPerKm:{firstKm:se,lastKm:fe},extraPricing:he}],U=o.map(X=>({...X,location:"storeFlexibleDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:K,deliveryOwn:[]}));a(U),x(location.pathname),j([]),v(!1)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:P,setValue:S}),e.jsx(Ct,{valueFirst:k,setValueFirst:f,valueLast:b,setValueLast:C}),e.jsx(Ce,{text:"За каждый следующий км",placeholder:"0",value:y,setValue:N}),e.jsx(Pe,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:I,setPickedCities:w}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>H(),children:"Сохранить"})]})},Nt=({value:o,setValue:t})=>{const[a,n]=u.useState(400),c=p=>{const r=p.target.value;t(r),r.length<=400&&n(400-r.length)};return e.jsxs("div",{className:R.textarea,children:[e.jsx("span",{className:R.textarea_title,children:"Текст для пояснения"}),e.jsx("textarea",{className:R.textarea_text,maxLength:400,onChange:c,value:o}),e.jsxs("span",{className:R.textarea_count,children:[a,"/",400]})]})},kl=()=>{const{deliveryStoresArr:o,citiesDelivery:t,setCitiesDelivery:s,setDeliveryStoresArr:a,pickedCitiesOwnDelivery:n,setPickedCitiesOwnDelivery:c,inputSumOwn:p,setInputSumOwn:r,textareaVal:l,setTextareaVal:i,setSaveLocation:d,setSaveLocationStore:m}=ye(),[g,h]=u.useState(n),[v,x]=u.useState(p),[j,I]=u.useState(l),{resetOrg:w}=$e(),P=()=>{w("own");const S=g,k=v,f=j;c(S),r(k),i(f);const b=[{cities:S,minPrice:k,description:f}],C=o.map(y=>({...y,location:"storeOwnVersionDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:b}));a(C),d(location.pathname),m([])};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:v,setValue:x}),e.jsx(Nt,{value:j,setValue:I}),e.jsx(Pe,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:g,setPickedCities:h}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>P(),children:"Сохранить"})]})},yl=()=>{const{selectedOrganizationOption:o,saveLocation:t,setSelectedOrganizationOption:s}=ye(),a=re(),n=Fe(),c={freeDelivery:"/admin/settings/delivery/forOrganization/freeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forOrganization/fixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forOrganization/flexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forOrganization/ownVersionDelivery"};u.useEffect(()=>{t?n(t):s("")},[t,n]),u.useEffect(()=>{const r=a.pathname,l=Object.keys(c).find(i=>c[i]===r);l&&s(l)},[a.pathname,s]);const{handleChange:p}=et(s,c);return e.jsxs("div",{className:Z.deliveryOrg,children:[e.jsx("h4",{className:Z.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:Z.deliveryOrg_radios,children:[e.jsx(Se,{id:"freeDelivery",value:"freeDelivery",checked:o==="freeDelivery",onChange:p,label:"Бесплатная доставка"}),e.jsx(Se,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:o==="fixedPriceDelivery",onChange:p,label:"Фиксированная цена"}),e.jsx(Se,{id:"flexibleDelivery",value:"flexibleDelivery",checked:o==="flexibleDelivery",onChange:p,label:"Гибкая доставка"}),e.jsx(Se,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:o==="ownVersionDelivery",onChange:p,label:"Свой вариант"})]}),e.jsxs("div",{className:Z.deliveryOrg_children,children:[a.pathname.startsWith("/admin/settings/delivery/forOrganization/freeDelivery")&&e.jsx(vl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/fixedPriceDelivery")&&e.jsx(xl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/flexibleDelivery")&&e.jsx(fl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/ownVersionDelivery")&&e.jsx(kl,{})]})]})},jl=({text:o,isActive:t,onClick:s,href:a})=>e.jsx(Y,{className:`${R.storeBtn} ${t?R.storeBtn_active:""}`,onClick:s,to:`settings/delivery/forStore/${a}/settingsSave`,children:o}),wl=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:c,setSaveLocationStore:p,setSaveLocation:r,setSavePathStore:l}=ye(),i=re(),[d,m]=u.useState([]),[g,h]=u.useState("");u.useEffect(()=>{var I,w;const j=t.find(P=>P.id===o);j&&j.deliveryFree?(m(((I=j.deliveryFree[0])==null?void 0:I.cities)||[]),h(((w=j.deliveryFree[0])==null?void 0:w.minPrice)||"")):(m([]),h(""))},[o]);const{resetOrg:v}=$e(),x=()=>{v("all");const w=[{cities:d,minPrice:g}],P=t.map(f=>f.id===o?{...f,deliveryFree:w,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}:f);s(P);const S=[...c],k=S.findIndex(f=>f.id===o);k>=0?S[k].location=i.pathname:S.push({id:o,location:i.pathname}),p(S),console.log("saveLocationStore",c),r(""),l(i.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:g,setValue:h}),e.jsx(Pe,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:d,setPickedCities:m}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>x(),children:"Сохранить"})]})},Cl=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:c,setSaveLocationStore:p,setSaveLocation:r,setSavePathStore:l}=ye(),i=re(),[d,m]=u.useState([]),[g,h]=u.useState(""),[v,x]=u.useState("");u.useEffect(()=>{var P,S,k;const w=t.find(f=>f.id===o);w&&w.deliveryFixed?(m(((P=w.deliveryFixed[0])==null?void 0:P.cities)||[]),h(((S=w.deliveryFixed[0])==null?void 0:S.minPrice)||""),x(((k=w.deliveryFixed[0])==null?void 0:k.fixedPrice)||"")):(m([]),h(""),x(""))},[o]);const{resetOrg:j}=$e(),I=()=>{j("all");const k=[{cities:d,minPrice:g,fixedPrice:v}],f=t.map(y=>y.id===o?{...y,deliveryFixed:k,deliveryFree:[],deliveryFlexible:[],deliveryOwn:[]}:y);s(f);const b=[...c],C=b.findIndex(y=>y.id===o);C>=0?b[C].location=i.pathname:b.push({id:o,location:i.pathname}),p(b),r(""),l(i.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:g,setValue:h}),e.jsx(Ce,{text:"Цена за доставку",placeholder:"0",value:v,setValue:x}),e.jsx(Pe,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:d,setPickedCities:m}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>I(),children:"Сохранить"})]})},Nl=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:c,setSaveLocationStore:p,setSaveLocation:r,setSavePathStore:l}=ye(),i=re(),[d,m]=u.useState([]),[g,h]=u.useState(""),[v,x]=u.useState(""),[j,I]=u.useState(""),[w,P]=u.useState("");u.useEffect(()=>{var b,C,y,N,O,H,A;const f=t.find(W=>W.id===o);f&&f.deliveryFlexible?(m(((b=f.deliveryFlexible[0])==null?void 0:b.cities)||[]),h(((C=f.deliveryFlexible[0])==null?void 0:C.minPrice)||""),x(((N=(y=f.deliveryFlexible[0])==null?void 0:y.pricingPerKm)==null?void 0:N.firstKm)||""),I(((H=(O=f.deliveryFlexible[0])==null?void 0:O.pricingPerKm)==null?void 0:H.lastKm)||""),P(((A=f.deliveryFlexible[0])==null?void 0:A.extraPricing)||"")):(m([]),h(""),x(""),I(""),P(""))},[o]);const{resetOrg:S}=$e(),k=()=>{S("all");const O=[{cities:d,minPrice:g,pricingPerKm:{firstKm:v,lastKm:j},extraPricing:w}],H=t.map(se=>se.id===o?{...se,deliveryFlexible:O,deliveryFree:[],deliveryFixed:[],deliveryOwn:[]}:se);s(H);const A=[...c],W=A.findIndex(se=>se.id===o);W>=0?A[W].location=i.pathname:A.push({id:o,location:i.pathname}),p(A),r(""),l(i.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:g,setValue:h}),e.jsx(Ct,{valueFirst:v,setValueFirst:x,valueLast:j,setValueLast:I}),e.jsx(Ce,{text:"За каждый следующий км",placeholder:"0",value:w,setValue:P}),e.jsx(Pe,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:d,setPickedCities:m}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>k(),children:"Сохранить"})]})},Sl=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:c,setSaveLocationStore:p,setSaveLocation:r,setSavePathStore:l}=ye(),i=re(),[d,m]=u.useState([]),[g,h]=u.useState(""),[v,x]=u.useState("");u.useEffect(()=>{var P,S,k;const w=t.find(f=>f.id===o);w&&w.deliveryOwn?(m(((P=w.deliveryOwn[0])==null?void 0:P.cities)||[]),h(((S=w.deliveryOwn[0])==null?void 0:S.minPrice)||""),x(((k=w.deliveryOwn[0])==null?void 0:k.description)||"")):(m([]),h(""),x(""))},[o]);const{resetOrg:j}=$e(),I=()=>{j("all");const k=[{cities:d,minPrice:g,description:v}],f=t.map(y=>y.id===o?{...y,deliveryOwn:k,deliveryFree:[],deliveryFixed:[],deliveryFlexible:[]}:y);s(f);const b=[...c],C=b.findIndex(y=>y.id===o);C>=0?b[C].location=i.pathname:b.push({id:o,location:i.pathname}),p(b),r(""),l(i.pathname)};return e.jsxs("div",{className:Z.deliveryOrg_children_wrap,children:[e.jsx(Ce,{text:"Минимальная сумма заказа",placeholder:"0",value:g,setValue:h}),e.jsx(Nt,{value:v,setValue:x}),e.jsx(Pe,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:d,setPickedCities:m}),e.jsx("button",{className:Z.delivery_btn,onClick:()=>I(),children:"Сохранить"})]})},Il=()=>{const{deliveryStoresArr:o,selectedStoreOption:t,isActiveStoreId:s,saveLocationStore:a,setSelectedStoreOption:n}=ye(),c=re(),p=Fe(),r={storeFreeDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFreeDelivery`,storeFixedPriceDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFixedPriceDelivery`,storeFlexibleDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFlexibleDelivery`,storeOwnVersionDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeOwnVersionDelivery`},{handleChange:l}=et(n,r);return u.useEffect(()=>{const i=a.find(g=>g.id===s),d=Object.keys(r).find(g=>r[g]===(i==null?void 0:i.location)),m=o[0].location;console.log("option",d),a.length>0&&i?(p(i.location),n(d)):(p(`/admin/settings/delivery/forStore/${s}/settingsSave/${m}`),n(m))},[s,a]),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h4",{className:Z.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:Z.storeDelivery_radios,children:[e.jsx(Se,{id:"storeFreeDelivery",value:"storeFreeDelivery",checked:t==="storeFreeDelivery",onChange:l,label:"Бесплатная доставка"}),e.jsx(Se,{id:"storeFixedPriceDelivery",value:"storeFixedPriceDelivery",checked:t==="storeFixedPriceDelivery",onChange:l,label:"Фиксированная цена"}),e.jsx(Se,{id:"storeFlexibleDelivery",value:"storeFlexibleDelivery",checked:t==="storeFlexibleDelivery",onChange:l,label:"Гибкая доставка"}),e.jsx(Se,{id:"storeOwnVersionDelivery",value:"storeOwnVersionDelivery",checked:t==="storeOwnVersionDelivery",onChange:l,label:"Свой вариант"})]})]}),e.jsxs("div",{className:Z.deliveryOrg_children,children:[c.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFreeDelivery`)&&e.jsx(wl,{}),c.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFixedPriceDelivery`)&&e.jsx(Cl,{}),c.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFlexibleDelivery`)&&e.jsx(Nl,{}),c.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeOwnVersionDelivery`)&&e.jsx(Sl,{})]})]})},Pl=()=>{u.useState(1),u.useState(10),u.useState([]);const{deliveryStoresArr:o,isActiveStoreId:t,setIsActiveStoreId:s,savePathStore:a}=ye(),n=r=>{s(r)};u.useEffect(()=>{a&&p(a)},[]);const c=re(),p=Fe();return e.jsxs("div",{className:Z.storeDelivery,children:[e.jsx("h4",{className:Z.delivery_title,children:"Выберите магазин "}),e.jsx("div",{className:Z.storeDelivery_stores,children:o.map(r=>e.jsx(jl,{text:r.name,isActive:r.id===t,onClick:()=>n(r.id),href:r.id},r.id))}),c.pathname.startsWith(`/admin/settings/delivery/forStore/${t}/settingsSave`)&&e.jsx(Il,{})]})},$l=()=>{const{selectedOption:o,setSelectedOption:t,saveLocationStore:s,savePathStore:a,saveLocation:n}=ye(),c=re(),p=Fe(),r={forOrganization:"/admin/settings/delivery/forOrganization",forStore:"/admin/settings/delivery/forStore"};u.useEffect(()=>{n!==""?(p(n),t("forOrganization")):s.some(i=>i.location)&&(p(a),t(s[0].location),t("forStore"))},[]);const{handleChange:l}=et(t,r);return e.jsxs("div",{className:Z.delivery,children:[e.jsx("h3",{className:Z.delivery_title,children:"Выберите версию настройки доставки"}),e.jsxs("div",{className:Z.delivery_main,children:[e.jsx(Se,{id:"forOrganization",value:"forOrganization",checked:o==="forOrganization",onChange:l,label:"Для организации"}),e.jsx(Se,{id:"forStore",value:"forStore",checked:o==="forStore",onChange:l,label:"Для каждого магазина"})]}),c.pathname.startsWith("/admin/settings/delivery/forOrganization")&&e.jsx(yl,{}),c.pathname.startsWith("/admin/settings/delivery/forStore")&&e.jsx(Pl,{})]})};function Dl(){const{addBlockStatus:o,setAddBlockStatus:t,setAddBlockProducts:s}=_e();u.useEffect(()=>{s([])},[]);const a=n=>{n.stopPropagation(),t(!o)};return e.jsxs("button",{className:`${_.homePage_addBlock} ${o?_.homePage_addBlock_active:""}`,onClick:n=>a(n),children:[e.jsx("span",{className:_.homePage_addBlock_title,children:"Добавить блок"}),e.jsx(Et,{name:"PlusIcon"})]})}function Ol({setSure:o,setDelModalStatus:t}){return e.jsx("div",{className:_.homePage_delModal,onClick:()=>t(!1),children:e.jsxs("div",{className:_.homePage_delModal_block,onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:"Вы уверены что хотите удалить блок ?"}),e.jsxs("div",{className:_.homePage_delModal_buttons,children:[e.jsx("button",{className:`${_.homePage_delModal_btn} ${_.homePage_delModal_del}`,onClick:()=>o(!0),children:"удалить"}),e.jsx("button",{className:`${_.homePage_delModal_btn} ${_.homePage_delModal_cancel}`,onClick:()=>t(!1),children:"отмена"})]})]})})}function Fl({item:o,delModalStatus:t,setDelModalStatus:s}){const{addBlockStatus:a,homePageBlock:n,setHomePageBlock:c,addBlockProducts:p}=_e(),[r,l]=u.useState(!1),i=h=>{const v=n.filter(x=>x.id!=h);c([...v]),l(!1)};u.useEffect(()=>{r&&(i(o.id),s(!1))},[r]);const[d,m]=u.useState("");u.useEffect(()=>{m(o.title)},[]);const g=h=>{const v=n.map(x=>x.id==h.id?{id:h.id,title:d,superCategory:h.superCategory,category:h.category,subCategory:h.subCategory,products:h.products}:{...x});c([...v])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.homePage_wrapper,draggable:!t,children:[t&&e.jsx("div",{onDragStart:h=>h.stopPropagation(),onDragOver:h=>h.stopPropagation(),children:e.jsx(Ol,{setSure:l,setDelModalStatus:s})}),e.jsxs("div",{className:_.homePage_wrapper_title,children:[e.jsx("input",{type:"text",value:d,onChange:h=>m(h.target.value),onBlur:()=>g(o)}),e.jsx(B,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:`${_.homePage_addBlockItem} ${a?_.homePage_addBlockItem_active:""}`,children:[e.jsx("button",{className:_.homePage_addBlockItem_close,onClick:()=>s(!0),children:e.jsx(B,{name:"XMarkIcon"})}),e.jsxs("p",{className:_.homePage_addBlockItem_categories,children:[e.jsxs("span",{children:[o.superCategory.name.ru," / "]}),e.jsxs("span",{children:[o.category.name.ru," / "]}),e.jsx("span",{children:o.subCategory.name.ru})]}),e.jsx("h2",{className:_.homePage_addBlockItem_super_title,children:"Продукты"}),e.jsx("div",{className:_.homePage_addBlockItem_content,children:o.products.map(h=>{var v,x;return e.jsx("div",{className:_.homePage_addBlockItem_super_item,children:e.jsx("span",{children:(x=(v=h.nomenclature)==null?void 0:v.name)==null?void 0:x.ru})},h.id)})})]})]})})}const Ml="_modalCategory_6mlu2_1",Bl="_modalCategory_block_6mlu2_10",Al="_modalCategory_block_createTitle_6mlu2_16",Ll="_modalCategory_nav_6mlu2_33",ql="_modalCategory_nav_title_6mlu2_40",El="_modalCategory_content_6mlu2_46",Wl="_modalCategory_content_message_6mlu2_53",Ul="_modalCategory_content_allActive_6mlu2_61",zl="_modalCategory_content_more_6mlu2_61",Rl="_modalCategory_content_link_6mlu2_76",Vl="_modalCategory_content_link_product_6mlu2_76",Tl="_modalCategory_content_link_active_6mlu2_111",Kl="_modalCategory_content_link_product_active_6mlu2_111",Hl="_modalCategory_content_item_6mlu2_124",Xl="_modalCategory_content_block_6mlu2_146",Gl="_modalCategory_content_block_title_6mlu2_150",Zl="_settings_6mlu2_157",Jl="_settings_title_6mlu2_160",Yl="_settings_content_6mlu2_165",Ql="_settings_content_top_6mlu2_168",e_="_settings_content_buttons_6mlu2_171",t_="_settings_content_btn_6mlu2_181",s_="_settings_content_btn_cancel_6mlu2_193",o_="_settings_content_btn_save_6mlu2_196",n_="_settings_tools_6mlu2_199",a_="_settings_tools_link_6mlu2_204",r_="_settings_tools_link_active_6mlu2_219",i_="_blink_6mlu2_1",V={modalCategory:Ml,modalCategory_block:Bl,modalCategory_block_createTitle:Al,modalCategory_nav:Ll,modalCategory_nav_title:ql,modalCategory_content:El,modalCategory_content_message:Wl,modalCategory_content_allActive:Ul,modalCategory_content_more:zl,modalCategory_content_link:Rl,modalCategory_content_link_product:Vl,modalCategory_content_link_active:Tl,modalCategory_content_link_product_active:Kl,modalCategory_content_item:Hl,modalCategory_content_block:Xl,modalCategory_content_block_title:Gl,settings:Zl,settings_title:Jl,settings_content:Yl,settings_content_top:Ql,settings_content_buttons:e_,settings_content_btn:t_,settings_content_btn_cancel:s_,settings_content_btn_save:o_,settings_tools:n_,settings_tools_link:a_,settings_tools_link_active:r_,blink:i_};function c_({superCategory:o,category:t,superId:s,moreSuperStatus:a,setSubId:n,setLocalPicked:c,setSuperId:p,setMessageStatus:r,setSubCategories:l,fetchCategories:i}){const{setCurrentCategory:d}=ke(),[m,g]=u.useState(10),h=(x,j)=>{x.preventDefault(),i("category",1,10,j.id),l([]);const I=t.filter(w=>w.parentId==j.id);d(I),c(j),p(j.id),r(!1),n(0)},v=x=>{x.preventDefault();const j=m+10;g(j),i("super",1,j)};return e.jsxs("div",{className:V.modalCategory_content_block,children:[e.jsx("h2",{className:V.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:V.modalCategory_content_item,children:[o.map(x=>e.jsxs("div",{className:`${V.modalCategory_content_link} ${x.id==s?V.modalCategory_content_link_active:""} `,onClick:j=>h(j,x),children:[e.jsx("span",{children:x.name.ru}),e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},x.id)),a&&e.jsx("span",{className:V.modalCategory_content_more,onClick:x=>v(x),children:"Ещё..."})]})]})}function l_({superId:o,categoryId:t,setCategoryId:s,category:a,moreStatus:n,setMoreStatus:c,setSubId:p,setSubCategory:r,fetchCategories:l}){const[i,d]=u.useState(10);u.useEffect(()=>{d(10),c(!0),s(0)},[o]);const m=h=>{h.preventDefault();const v=i+10;d(v),l("category",1,v,o)},g=(h,v)=>{p(0),r(h,v)};return e.jsxs("div",{className:V.modalCategory_content_block,children:[e.jsx("h2",{className:V.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:V.modalCategory_content_item,children:[a==null?void 0:a.map(h=>e.jsxs("div",{className:`${V.modalCategory_content_link} ${h.id==t?V.modalCategory_content_link_active:""} `,onClick:v=>g(v,h),children:[e.jsx("span",{children:h.name.ru}),e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),n&&e.jsx("span",{className:V.modalCategory_content_more,onClick:h=>m(h),children:"Ещё..."})]})]})}function __({subId:o,setSubId:t,categoryId:s,moreSubStatus:a,setMoreSubStatus:n,subCategories:c,setSubProductsList:p,fetchCategories:r}){_e();const[l]=u.useState(1),[i,d]=u.useState(10);u.useEffect(()=>{n(!0)},[s]);const m=h=>{h.preventDefault();const v=i+10;d(v),r("subCategory",l,v,s)},g=async(h,v)=>{p(h,v),t(v.id)};return e.jsxs("div",{className:V.modalCategory_content_block,children:[e.jsx("h2",{className:V.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:V.modalCategory_content_item,children:[c==null?void 0:c.map(h=>e.jsxs("div",{className:`${V.modalCategory_content_link} ${h.id==o?V.modalCategory_content_link_active:""} `,onClick:v=>g(v,h),children:[e.jsx("span",{children:h.name.ru}),e.jsx(B,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),a&&e.jsx("span",{className:V.modalCategory_content_more,onClick:h=>m(h),children:"Ещё..."})]})]})}function d_({setSettings:o,setCancel:t}){const{setAddBlockStatus:s}=_e(),a=()=>{t(),s(!1)};return e.jsxs("div",{className:V.settings_content_buttons,children:[e.jsx("button",{className:`${V.settings_content_btn} ${V.settings_content_btn_cancel}`,onClick:a,children:"Отмена"}),e.jsx(Y,{to:"#",className:`${V.settings_content_btn} ${V.settings_content_btn_save}`,onClick:n=>o(n),children:"Сохранить"})]})}function p_({subId:o}){const{addBlockProducts:t,setAddBlockProducts:s}=_e(),[a,n]=u.useState(!1),[c,p]=u.useState([]),[r,l]=u.useState([]),[i]=u.useState(1),[d,m]=u.useState(10),[g,h]=u.useState(!0);u.useEffect(()=>{s([]),l([]),n(!1),p([]),o!=0&&P(o,d)},[o]);const v=u.useRef([]),x=u.useRef(null),j=(k,f)=>{if(k){p([...c,f]);const b=r.filter(C=>C.id==f)[0];s([...t,b])}else if(!k&&x.current){const b=c.filter(y=>y!=f);p([...b]);const C=t.filter(y=>y.id!=f);s([...C]),n(!1),x.current.checked=!1}x.current&&k&&c.length+1==r.length&&(n(!0),x.current.checked=!0,s([...r]))},I=k=>{k.preventDefault();const f=d+10;m(f),S(o,f)},w=k=>{if(n(k),k){v.current.forEach(b=>{b&&(b.checked=k)});const f=r.map(b=>b.id);p([...f]),s([...r])}else p([]),v.current.forEach(f=>{f&&(f.checked=k)}),s([])};async function P(k,f){const b=await S(k,f);l([...b])}const S=async(k,f)=>{const b=ve.get("multi-store");try{const C=await T.get(`web-nomenclatures?multiStoreId=${b}&categoryId=${k}&page=${i}&perPage=${f}`),y=await C.data.data,N=await C.data.pagination;return y.length<N.total?l([...y]):y.length==N.total&&(l([...y]),h(!1)),C.data.data}catch(C){console.log("Ошибка при получении продуктов по id",C)}};return e.jsxs("div",{className:V.modalCategory_content_block,children:[e.jsx("h2",{className:V.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:V.modalCategory_content_item,children:[r.length>1&&e.jsxs("label",{className:V.modalCategory_content_allActive,children:[e.jsx("input",{type:"checkbox",onChange:k=>w(k.target.checked),ref:x}),e.jsx("span",{children:a?"Отключить все":"Выбрать все"})]}),r==null?void 0:r.map((k,f)=>{var b,C;return e.jsxs("label",{className:`
              ${V.modalCategory_content_link_product}
              ${a||c.includes(k.id)?V.modalCategory_content_link_active:""}
              `,children:[e.jsx("input",{type:"checkbox",onChange:y=>j(y.target.checked,k.id),ref:y=>{v.current[f]=y}}),e.jsx("span",{children:(C=(b=k==null?void 0:k.nomenclature)==null?void 0:b.name)==null?void 0:C.ru})]},k.id)}),g&&e.jsx("span",{className:V.modalCategory_content_more,onClick:k=>I(k),children:"Ещё..."})]})]})}function u_(){const{TemporaryData:o,currentProduct:t,setCurrentCategory:s,setPickedCategory:a,setCurrentSubCategory:n,setTemporaryData:c,setOpenModalCategory:p,setCurrentProduct:r}=ke(),{homePageBlock:l,setHomePageBlock:i,setAddBlockStatus:d,homePageBlockName:m,setHomePageBlockName:g,setAddBlockStatusItem:h,addBlockProducts:v,setAddBlockProducts:x}=_e(),[j,I]=u.useState(0),[w,P]=u.useState(0),[S,k]=u.useState(0),[f,b]=u.useState({}),[C,y]=u.useState(!1),[N,O]=u.useState("Выберите категорию"),[H,A]=u.useState(!0),[W,se]=u.useState(!0),[fe,he]=u.useState(!0),[K,U]=u.useState([]),[X,te]=u.useState([]),[ie,E]=u.useState([]);u.useEffect(()=>{Ne("super",1,10)},[]);const D=(ce,be)=>{ce.preventDefault(),Ne("subCategory",1,10,be.id);const je=ie.filter(we=>we.parentId==be.id);n(je),b(be),P(be.id),y(!1)},ne=(ce,be)=>{ce.preventDefault(),b(be),k(be.id),y(!1)},pe=async ce=>{if(ce.preventDefault(),Object.keys(f).length===0){y(!0),O("Выберите Суперкотегорию");return}if(X.length>0&&w===0){y(!0),O("Выберите Категорию");return}if(ie.length>0&&S===0){y(!0),O("Выберите Подкотегорию");return}if(m==""){y(!0),O("Введите название блока");return}if(S){h(!0);const be=K.filter(G=>G.id==j)[0],je=X.filter(G=>G.id==w)[0],we=ie.filter(G=>G.id==S)[0],J={id:de(),title:m||"Заголовок не добавлен",superCategory:be,category:je,subCategory:we,products:v};i([J,...l]);const z=o.find(G=>G.mxikCode==(t==null?void 0:t.mxikCode)),Q=o.findIndex(G=>G.mxikCode==(t==null?void 0:t.mxikCode));z&&(z.crmCategory=f,o.splice(Q,1,z),c([...o]))}ge()},ge=()=>{a(f),p(!1),I(0),P(0),r({}),k(0),b({}),s([]),n([]),x([]),y(!1),O("Выберите категорию"),d(!1),g("")},Ne=async(ce,be,je,we)=>{try{const J=ce=="super"?`https://api.mcrm.uz/api/categories?&page=${be}&perPage=${je}`:`https://api.mcrm.uz/api/categories?parentId=${we}&page=${be}&perPage=${je}`,z=await Ke.get(J),Q=z.data.data.map(G=>({...G,label:ce==="super"?"Супер категория":ce==="category"?"Категория":"Субкатегория"}));if(ce==="super"){const G=await z.data.pagination;Q.length<G.total?U([...Q]):Q.length==G.total&&(U([...Q]),A(!1))}if(ce==="category"){const G=await z.data.pagination;Q.length<G.total?te([...Q]):Q.length==G.total&&(te([...Q]),se(!1))}if(ce==="subCategory"){const G=await z.data.pagination;Q.length<G.total?E([...Q]):Q.length==G.total&&(E([...Q]),he(!1))}}catch(J){console.error(`Ошибка произошла при получении ${ce} категорий`,J)}},Ie=u.useRef(null);return u.useEffect(()=>{Ie.current&&Ie.current.focus()},[Ie]),e.jsx("div",{className:V.modalCategory,onClick:ce=>ce.stopPropagation(),children:e.jsxs("div",{className:V.modalCategory_block,children:[e.jsx("p",{className:V.modalCategory_content_message,children:C?N:""}),e.jsxs("div",{className:`${V.modalCategory_block_createTitle}`,children:[e.jsx("input",{ref:Ie,type:"text",value:m,onChange:ce=>g(ce.target.value),placeholder:"Заголовок  блока"}),e.jsx(B,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:V.modalCategory_content,children:[e.jsx(c_,{moreSuperStatus:H,superId:j,setSubId:k,superCategory:K,category:X,setLocalPicked:b,setSuperId:I,setMessageStatus:y,fetchCategories:Ne,setSubCategories:E}),X.length>0&&e.jsx(l_,{setSubId:k,setCategoryId:P,setMoreStatus:se,moreStatus:W,superId:j,categoryId:w,category:X,setSubCategory:D,fetchCategories:Ne}),ie.length>0&&e.jsx(__,{subId:S,setSubId:k,moreSubStatus:fe,categoryId:w,subCategories:ie,setSubProductsList:ne,setMoreSubStatus:he,fetchCategories:Ne}),S!=0&&e.jsx(p_,{subId:S}),e.jsx(d_,{setSettings:pe,setCancel:ge})]})]})})}function m_(){const{addBlockStatus:o,homePageBlock:t,setHomePageBlock:s}=_e(),[a,n]=u.useState(null),[c,p]=u.useState([]),[r,l]=u.useState(!1);u.useEffect(()=>{const h=c.length>0?c.reduce((x,j)=>j.order>x?j.order:x,-1/0):0,v=t.map((x,j)=>({...x,order:h+j+1}));p([...v])},[t]),u.useEffect(()=>{},[]);function i(h,v){n(v),h.target.style.cursor=r?"default":"grabbing"}function d(h){h.target.style.cursor=r?"default":"grab"}function m(h){h.preventDefault()}function g(h,v){h.preventDefault();const x=c&&c.map(j=>j.id===v.id?{...j,order:(a==null?void 0:a.order)||j.order}:j.id===(a==null?void 0:a.id)?{...j,order:v.order}:j).sort((j,I)=>(j&&j.order)-(I&&I.order));x&&(p(x),s(x)),n(null)}return e.jsxs("div",{className:_.homePage,children:[e.jsx(Dl,{}),o&&e.jsx(u_,{}),e.jsx("div",{className:_.homePage_blocks,children:c.length>0&&c.map(h=>e.jsx("div",{draggable:!r,onDragStart:v=>i(v,h),onDragLeave:v=>d(v),onDragEnd:v=>d(v),onDragOver:v=>m(v),onDrop:v=>g(v,h),children:e.jsx(Fl,{item:h,delModalStatus:r,setDelModalStatus:l})},h.id))})]})}const h_=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"},{id:"7",label:"Главная страница",href:"/admin/settings/homePage"}];function g_(){const t=re().pathname,{setAddBlockStatus:s}=_e();return e.jsx("div",{className:_.settings,onClick:()=>s(!1),children:e.jsxs("div",{className:_.settings_content,children:[e.jsx("div",{className:_.settings_content_top,children:e.jsx("ul",{className:_.settings_tools,children:h_.map(a=>e.jsx("li",{children:e.jsx(Y,{to:a.href,className:`${_.settings_tools_link} ${t.startsWith(a.href)?_.settings_tools_link_active:""}`,children:a.label})},a.id))})}),t=="/admin/settings/modules"&&e.jsx(Ca,{}),t=="/admin/settings/templates"&&e.jsx(Na,{}),t=="/admin/settings/categories"&&e.jsx(tr,{}),t.startsWith("/admin/settings/banner")&&e.jsx(Ni,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(Pc,{}),t.startsWith("/admin/settings/delivery")&&e.jsx($l,{}),t.startsWith("/admin/settings/homePage")&&e.jsx(m_,{})]})})}const ct=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function b_(){const[o,t]=u.useState(""),[s]=u.useState(1),[a]=u.useState(10),[n,c]=u.useState({status:!1,message:""}),[p,r]=u.useState([]);u.useEffect(()=>{o||(r([]),c({status:!1,message:""}))},[o]);async function l(i){i.preventDefault();const d=ve.get("multi-store");try{const g=await(await T.get(`nomenclatures?multiStoreId=${d}&name=${o}&page=${s}&perPage=${a}`)).data.data;g.length>0?(r([...g]),c({status:!1,message:""})):(r([]),c({status:!0,message:"Совпадений не найдено"}))}catch(m){console.log("Ошибка произошла при поиске продуктов на складе",m)}}return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:i=>l(i),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:o}),e.jsx(B,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:ct.map(i=>e.jsx("th",{className:_.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:p==null?void 0:p.map(i=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[ct.map(d=>{var m;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[d.title=="Наименование"?e.jsx("span",{children:(m=i==null?void 0:i.name)==null?void 0:m.ru}):"",d.title=="Штрих-код"?e.jsx("span",{children:i.mxik}):"",d.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},d.id)}),!i.hasWebNomenclature&&e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsx(Y,{to:`/admin/stock-product/${i.id}`,className:_.addingWrapper_tbody_add,children:"Добавить"})})]},i==null?void 0:i.mxik))})]}),n.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:n.message})]})}const lt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function v_(){const[o,t]=u.useState(""),[s,a]=u.useState({status:!1,message:""}),[n,c]=u.useState([]),[p]=u.useState(1),[r]=u.useState(10);u.useEffect(()=>{o||(c([]),a({status:!1,message:""}))},[o]);async function l(){const g=ve.get("multi-store");try{console.log(222,"searchText",o);const v=(await T.get(`web-nomenclatures?multiStoreId=${g}&title=${o}&page=${p}&perPage=${r}`)).data.data;console.log(999,"data",v),v.length>0?(c([...v]),a({status:!1,message:""})):(c([]),a({status:!0,message:"Совпадений не найдено"}))}catch(h){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",h)}}async function i(g,h){g.preventDefault();try{const v=await T.patch(`web-nomenclatures/${h}`,{isActive:!1});t(""),c([]),console.log("Продукт успешно отключен с веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}async function d(g,h){g.preventDefault();try{const v=await T.patch(`web-nomenclatures/${h}`,{isActive:!0});t(""),c([]),console.log("Продукт успешно включен на веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}const m=async g=>{g.preventDefault(),l()};return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:g=>m(g),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:g=>t(g.target.value),value:o}),e.jsx(B,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsxs("tr",{className:_.addingWrapper_thead_tr,children:[lt.map(g=>e.jsx("th",{className:_.addingWrapper_thead_th,children:g.title},g.id)),e.jsx("th",{className:_.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:n==null?void 0:n.map(g=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[lt.map(h=>e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[h.title=="Наименование"?e.jsx("span",{children:g.title}):"",h.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},h.id)),e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsxs("div",{className:_.addingWrapper_tbody_buttons,children:[g.isActive&&e.jsx(Y,{to:"#",className:_.addingWrapper_tbody_del,onClick:h=>i(h,g.id),children:"Отключить"}),!g.isActive&&e.jsx(Y,{to:"#",className:_.addingWrapper_tbody_del,onClick:h=>d(h,g.id),children:"Включить"}),e.jsx(Y,{to:`/admin/website-product/${g.id}`,className:_.addingWrapper_tbody_add,children:"Изменить"})]})})]},g==null?void 0:g.id))})]}),s.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:s.message})]})}const x_=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function f_(){const t=re().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:x_.map(s=>e.jsx(Y,{to:s.href,className:`${_.products_btn} ${s.href==t?_.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(b_,{}),t=="/admin/product/adding/website"&&e.jsx(v_,{})]})}const k_=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function y_(){const t=re().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:k_.map(s=>e.jsx(Y,{to:s.href,className:`${_.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?_.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(f_,{})]})}const j_="_user_title_1uizv_1",w_="_user_list_1uizv_6",C_="_user_list_link_1uizv_12",N_="_user_list_link_active_1uizv_26",S_="_user_form_1uizv_30",I_="_user_form_btn_1uizv_35",P_="_user_form_wrap_1uizv_51",$_="_user_form_input_1uizv_57",D_="_user_form_icon_1uizv_65",O_="_user_table_1uizv_68",F_="_user_table_tbody_1uizv_71",M_="_user_table_tr_1uizv_74",B_="_user_table_th_1uizv_77",A_="_user_table_td_1uizv_85",L_="_user_table_btns_1uizv_89",q_="_user_table_btn_1uizv_89",E_="_user_table_btn_blocked_1uizv_107",W_="_modal_1uizv_111",U_="_modal_active_1uizv_120",z_="_modal_wrap_1uizv_123",R_="_modal_wrap_header_1uizv_131",V_="_modal_wrap_stores_1uizv_143",T_="_modal_wrap_stores_text_1uizv_165",K_="_modal_btns_1uizv_169",H_="_modal_btn_1uizv_169",X_="_modal_content_1uizv_193",G_="_modal_content_text_1uizv_197",Z_="_versions_1uizv_206",J_="_versions_block_1uizv_211",Y_="_versions_block_top_1uizv_216",Q_="_versions_block_top_title_1uizv_226",ed="_versions_block_top_arrow_1uizv_230",td="_versions_block_top_arrow_active_1uizv_239",sd="_versions_block_dropdown_1uizv_242",od="_versions_block_dropdown_item_1uizv_257",nd="_versions_block_dropdown_open_1uizv_268",ad="_shop_header_1uizv_275",rd="_shop_header_title_1uizv_282",M={user_title:j_,user_list:w_,user_list_link:C_,user_list_link_active:N_,user_form:S_,user_form_btn:I_,user_form_wrap:P_,user_form_input:$_,user_form_icon:D_,user_table:O_,user_table_tbody:F_,user_table_tr:M_,user_table_th:B_,user_table_td:A_,user_table_btns:L_,user_table_btn:q_,user_table_btn_blocked:E_,modal:W_,modal_active:U_,modal_wrap:z_,modal_wrap_header:R_,modal_wrap_stores:V_,modal_wrap_stores_text:T_,modal_btns:K_,modal_btn:H_,modal_content:X_,modal_content_text:G_,versions:Z_,versions_block:J_,versions_block_top:Y_,versions_block_top_title:Q_,versions_block_top_arrow:ed,versions_block_top_arrow_active:td,versions_block_dropdown:sd,versions_block_dropdown_item:od,versions_block_dropdown_open:nd,shop_header:ad,shop_header_title:rd},tt=({headers:o})=>e.jsx("thead",{className:M.user_table_thead,children:e.jsx("tr",{className:M.user_table_tr,children:o.map(t=>e.jsx("th",{className:M.user_table_th,children:t.title},t.id))})}),st=()=>{const[o,t]=u.useState(""),{setUserSearch:s}=_e(),a=n=>{n.preventDefault(),s(o)};return u.useEffect(()=>{o==""&&s("")},[o]),e.jsxs("form",{action:"",className:M.user_form,children:[e.jsxs("div",{className:M.user_form_wrap,children:[e.jsx("input",{type:"text",className:M.user_form_input,placeholder:"Поиск пользователей",onChange:n=>t(n.target.value),value:o}),e.jsx(B,{className:M.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:M.user_form_btn,onClick:n=>a(n),children:"Найти"})]})},ot=({arr:o,showStore:t})=>{const{usersList:s,userSearch:a,openModalAdmin:n,openAppointUser:c,shopListAdmin:p,setOpenAppointUser:r,setOpenModalAdmin:l,setUsersList:i,setEditUserAdmin:d,setShopListDropdownAdmin:m,setCloseBlock:g,setFilteredShopListAdmin:h}=_e(),x=re().pathname,[j,I]=u.useState([]);u.useEffect(()=>{let f=o;x==="/clients"?f=o.filter(b=>b.isUser):x==="/employees"&&(f=o.filter(b=>!b.isUser)),f=f==null?void 0:f.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),I(f)},[a,s,o,x]);const w=f=>{const b=s.map(C=>C.id===f?{...C,isBlocked:!C.isBlocked}:C);i(b)},P=f=>{l(!0),g(!0);const b=s.find(N=>N.id==f),C=[{id:de(),title:"Магазин 1",order:1},{id:de(),title:"Магазин 2",order:2},{id:de(),title:"Магазин 3",order:3}],y=C.filter(N=>!(b!=null&&b.shopList.some(O=>O.title===N.title)));console.log("editUser",b),console.log("shopListAdminArr",C),b&&(m(b.shopList),d(b),h(y))},S=f=>{r(!0),g(!0),m([]),h(p);const b=s.find(C=>C.id==f);b&&d(b)},k=n||c;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:M.user_table_tbody,children:j.map(f=>e.jsxs("tr",{children:[e.jsx("td",{className:M.user_table_td,children:f.name}),e.jsx("td",{className:M.user_table_td,children:t?f.shopList.map(b=>e.jsxs("p",{children:[b.title," ",`(${b.position})`]},b.id)):e.jsx("p",{children:f.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:M.user_table_td,children:t?"Админ 1":f.registerDate}),e.jsx("td",{className:M.user_table_btns,children:f!=null&&f.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${M.user_table_btn} ${f.isBlocked?M.user_table_btn_blocked:""}`,onClick:()=>w(f.id),children:f.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:M.user_table_btn,onClick:()=>S(f.id),disabled:k,children:"Назначить"})]}):e.jsx("button",{className:M.user_table_btn,onClick:()=>P(f.id),style:{background:"#B5FFC7"},disabled:k,children:"Изменить"})})]},f.id))})})};function _t({color:o="black",className:t,header:s,isEnabled:a,dropdownItem:n,margin:c,versionList:p,closeBlock:r}){const{shopListAdmin:l,shopListDropdownAdmin:i,filteredShopListAdmin:d,setShopListDropdownAdmin:m,setShopListAdmin:g}=_e(),[h,v]=u.useState("Выберете должность"),[x,j]=u.useState("Выберете магазин"),[I,w]=u.useState(!1);u.useEffect(()=>{n!=null&&n.position?v(n.position):v("Выберете должность")},[n==null?void 0:n.position]),u.useEffect(()=>{r||w(!1)},[r]);const P=(b,C)=>{if(n){v(b.title);const y=i.filter(O=>O.title==n.title),N=i.findIndex(O=>O.title==n.title);y[0].position=b.title,i.splice(N,1,y[0]),m(i)}else j(b.title);if(a&&!i.some(y=>y.title==b.title)){v("Выберете должность");const y={...b,originalIndex:C};m([...i,y]),g(d.filter((N,O)=>O!==C))}w(!1)},S=b=>{const C=i.filter(y=>y.id!==b.id);if(m(C),b.originalIndex!==void 0){const y=[...l];y.splice(b.originalIndex,0,b),g(y)}else{const y=[...d,b].sort((N,O)=>N.order!==void 0&&O.order!==void 0?N.order-O.order:0);g(y),console.log("arr",y)}},k=()=>{w(!I)};function f(b,C){return b.order&&C.order&&(b==null?void 0:b.order)>(C==null?void 0:C.order)?1:-1}return e.jsx("div",{className:t??M.versions,style:{marginBottom:c},children:e.jsxs("div",{className:M.versions_block,children:[s&&e.jsxs("div",{className:M.shop_header,children:[e.jsx("p",{className:M.shop_header_title,children:n==null?void 0:n.title}),e.jsx("button",{onClick:()=>n&&S(n),children:e.jsx(B,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:M.versions_block_top,children:[e.jsx("h2",{className:M.versions_block_top_title,style:{color:o},children:n?h:x}),e.jsx("button",{className:M.versions_block_top_btn,onClick:()=>k(),children:e.jsx("div",{className:`${M.versions_block_top_arrow} ${I?M.versions_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${M.versions_block_dropdown} ${I?M.versions_block_dropdown_open:""}`,children:p==null?void 0:p.sort(f).map((b,C)=>e.jsx("span",{className:M.versions_block_dropdown_item,onClick:()=>P(b,C),children:b.title},C))})]})})}const nt=()=>{const{currentShopModal:o,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:a,openModalAdmin:n,editUserAdmin:c,shopListAdmin:p,usersList:r,openAppointUser:l,closeBlock:i,filteredShopListAdmin:d,setCurrentShopModal:m,setShopListPositionAdmin:g,setCurrentShopPosition:h,setOpenModalAdmin:v,setShopListAdmin:x,setUsersList:j,setOpenAppointUser:I,setCloseBlock:w,setFilteredShopListAdmin:P}=_e();u.useEffect(()=>{},[d]);const S=()=>{const y=r.findIndex(N=>N.id==(c==null?void 0:c.id));c&&t.every(N=>"position"in N)&&(c.shopList=t,r.splice(y,1,c),j(r),x(p),console.log("filteredShopListAdmin",d)),console.log("shopListAdmin",p),b(),t.length==0&&k()},k=()=>{if(c){c.isUser=!0,c.isEmployes=!1,c.shopList=[];const y={id:de(),title:"",position:"пользователь"};c.shopList=[{...y}]}b()},f=()=>{const y=r.findIndex(N=>N.id==(c==null?void 0:c.id));if(c&&(c.shopList=t,r.splice(y,1,c),c.isUser=!1,c.isEmployes=!0,j(r),I(!1),!(c!=null&&c.shopList.some(N=>"position"in N)))){c.isUser=!0,c.shopList=[];const N={id:de(),title:"",position:"пользователь"};c.shopList=[{...N}]}},b=()=>{x(p),P([]),v(!1),I(!1),w(!1),console.log("close modal")},C=u.useRef(null);return u.useEffect(()=>{const y=N=>{var O;C.current&&!((O=C==null?void 0:C.current)!=null&&O.contains(N.target))&&b()};return n||l?document.addEventListener("mousedown",y):document.removeEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[n,l]),e.jsx("div",{className:`${M.modal} ${n?M.modal_active:""} ${l?M.modal_active:""}`,children:e.jsxs("div",{ref:C,className:M.modal_wrap,children:[e.jsxs("div",{className:M.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>b(),children:e.jsx(B,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:M.modal_content,children:[e.jsxs("p",{className:M.modal_content_text,children:["Логин: ",c==null?void 0:c.name]}),e.jsxs("p",{className:M.modal_content_text,children:["Статус:",c==null?void 0:c.shopList.map(y=>e.jsx("span",{children:y.position},y.id))]}),e.jsx(_t,{color:"#717171",setVersionList:x,currentVersion:o,setCurrentVersion:m,isEnabled:a,versionList:d||p,closeBlock:i}),e.jsxs("div",{className:M.modal_wrap_stores,children:[e.jsx("p",{className:M.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((y,N)=>e.jsx(_t,{dropdownItem:y,margin:"12px",color:"#717171",versionList:s,setVersionList:g,setCurrentVersion:h,header:!0,closeBlock:i},N))]}),e.jsx("div",{className:M.modal_btns,children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>b(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:M.modal_btn,onClick:()=>f(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>k(),children:"Уволить"}),e.jsx("button",{className:M.modal_btn,onClick:()=>S(),children:"Сохранить"})]})})]})]})})},id=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],cd=()=>{const{usersList:o}=_e();return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(tt,{headers:id}),e.jsx(ot,{arr:o})]}),e.jsx(nt,{})]})},ld=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],_d=()=>{const{usersList:o}=_e(),t=o.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(tt,{headers:ld}),e.jsx(ot,{arr:t})]}),e.jsx(nt,{})]})},dd=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],pd=()=>{const{usersList:o}=_e(),t=o.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(tt,{headers:dd}),e.jsx(ot,{arr:t,showStore:!0})]}),e.jsx(nt,{})]})},ud=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],md=()=>{const t=re().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M.users,children:e.jsxs("div",{className:M.users_header,children:[e.jsx("h2",{className:M.user_title,children:"Пользователи"}),e.jsx("ul",{className:M.user_list,children:ud.map(s=>e.jsx("li",{children:e.jsx(Y,{className:`${M.user_list_link} ${t==s.href?M.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(cd,{}),t=="/admin/users/clients"&&e.jsx(_d,{}),t=="/admin/users/employees"&&e.jsx(pd,{})]})]})},dt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function hd(){const[o,t]=u.useState(""),[s]=u.useState(1),[a]=u.useState(10),[n,c]=u.useState([]);u.useEffect(()=>{p()},[o]);async function p(){const r=ve.get("multi-store");try{const l=await T.get(`nomenclatures?multiStoreId=${r}&page=${s}&perPage=${a}`),i=await l.data.data;console.log("res",l),c([...i])}catch(l){console.log("Ошибка произошла при получении всх продуктов со склада",l)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>t(r.target.value),value:o}),e.jsx(B,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:dt.map(r=>e.jsx("th",{className:_.addingWrapper_thead_th,children:r.title},r.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:n&&(n==null?void 0:n.map(r=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:dt.map(l=>{var i,d;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[l.title=="Наименование"?e.jsx("span",{children:((i=r==null?void 0:r.name)==null?void 0:i.ru)&&((d=r==null?void 0:r.name)==null?void 0:d.ru)}):"",l.title=="Штрих-код"?e.jsx("span",{children:r==null?void 0:r.barcode}):""]},l.id)})},r==null?void 0:r.id)))})]})]})})}const pt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function gd(){const[o,t]=u.useState(""),[s]=u.useState(1),[a]=u.useState(10),[n,c]=u.useState([]);u.useEffect(()=>{p()},[o]);async function p(){const r=ve.get("multi-store");try{const l=await T.get(`web-nomenclatures?multiStoreId=${r}&page=${s}&perPage=${a}`),i=await l.data.data;console.log("res",l),c([...i])}catch(l){console.log("Ошибка произошла при получении всх продуктов со склада",l)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>t(r.target.value),value:o}),e.jsx(B,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:pt.map(r=>e.jsx("th",{className:_.addingWrapper_thead_th,children:r.title},r.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:n==null?void 0:n.map(r=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:pt.map(l=>e.jsx("td",{className:_.addingWrapper_tbody_td,children:l.title=="Наименование"?e.jsx("span",{children:r==null?void 0:r.title}):""},l.id))},r==null?void 0:r.id))})]})]})})}function bd(){const t=re().pathname,{shopsStocks:s}=Ye();return e.jsxs("div",{className:_.layout,children:[e.jsx("ul",{className:_.layout_buttons,children:s.map(a=>e.jsx("li",{children:e.jsx(Y,{to:`/admin/shops/shop/${a.url}`,className:`${_.layout_btn} ${t==`/admin/shops/shop/${a.url}`?_.layout_btn_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:_.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(hd,{}),t==="/admin/shops/shop/website"&&e.jsx(gd,{})]})]})}function vd(){const{shopsAmount:o,currentShop:t,setCurrentShop:s}=Ye(),n=re().pathname;return e.jsxs("div",{className:_.layout,children:[e.jsx("h2",{className:_.layout_title,children:"Магазины"}),e.jsx("ul",{className:_.layout_buttons,children:o.map(c=>e.jsx("li",{children:e.jsx(Y,{to:"/admin/shops/shop",className:`${_.layout_btn} ${t==c.url?_.layout_btn_active:""}`,onClick:()=>s(c.url),children:c.title})},c.id))}),n.startsWith("/admin/shops/shop")&&e.jsx("div",{className:_.layout_content,children:e.jsx(bd,{})})]})}function xd({item:o}){const{setErrorModal:t}=ke(),s=a=>{a.stopPropagation()};return e.jsx("div",{className:_.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:_.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:_.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(B,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:o.message})]})})}function fd({localNewImage:o,setLocalNewImage:t}){const[s,a]=u.useState(null);function n(d,m){return d.order>m.order?1:-1}function c(d,m){a(m)}function p(d){d.target.style.background="white"}function r(d){d.preventDefault(),d.target.style.background="lightgray"}function l(d,m){d.preventDefault(),d.target.style.background="white";const g=o&&o.map(h=>h.id===m.id?{...h,order:(s==null?void 0:s.order)||h.order}:h.id===(s==null?void 0:s.id)?{...h,order:m.order}:h).sort((h,v)=>h.order-v.order);console.log(555,"newImages",g),g&&t(g),a(null)}const i=d=>{const m=o.filter(g=>g.id!==d);t([...m])};return u.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:o&&o.sort(n).map((d,m)=>e.jsxs("div",{className:`${_.productItem_photo} ${m==0?_.productItem_photo_active:""}`,draggable:!0,onDragStart:g=>c(g,d),onDragLeave:g=>p(g),onDragEnd:g=>p(g),onDragOver:g=>r(g),onDrop:g=>l(g,d),children:[e.jsx("div",{className:_.productItem_photo_img,children:e.jsx("img",{src:d.src?`https://api.mcrm.uz/${d.src}`:d.localSrc?d.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:_.productItem_photo_close,onClick:()=>i(d.id),children:e.jsx(B,{width:18,height:18,name:"XMarkIcon"})})]},d.id))})}function St({stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:a,setLocalFormData:n,localFormData:c}){const{errorModal:p}=ke(),r=u.useRef(null),l=()=>{r.current!=null&&r.current.click()},i=async d=>{var g,h;const m=(h=(g=d==null?void 0:d.target)==null?void 0:g.files)==null?void 0:h[0];if(m&&["image/jpeg","image/png","image/webp"].includes(m.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",m);const v=new FormData;v.append("files[]",m),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",v),m&&n([...c,m]);const x=s&&(s==null?void 0:s.length)>0?s.reduce((I,w)=>w.order>I?w.order:I,-1/0):1,j=new FileReader;j.onload=I=>{var w;if((w=I.target)!=null&&w.result){const P={id:de(),order:x?x+1:1,localSrc:URL.createObjectURL(m)},S=[...s,P];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",S),a&&a([...S]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},j.readAsDataURL(m),console.log(6,"отрисовал выбранную картинку files",m),r.current&&(r.current.value="")}};return e.jsxs("div",{className:_.productItem_top,children:[p.status&&e.jsx(xd,{item:p}),e.jsx("h1",{className:_.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:_.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:_.productItem_photos,children:[e.jsx(fd,{stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:a}),e.jsxs("div",{className:`${_.productItem_photo} ${_.productItem_add}`,onClick:l,children:[e.jsx(B,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:_.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:i,ref:r})]})]}),e.jsx("p",{className:_.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function It({localCategory:o,productName:t,productDescription:s,setProductDescription:a,setProductName:n,myBarcode:c,vendorCode:p,setVendorCode:r,myPrice:l}){var j,I,w,P;const{pickedCategory:i,currentProduct:d,setArticleModal:m,setOpenModalCategory:g}=ke();u.useEffect(()=>{(i||o)&&x()},[i,o]);const[h,v]=u.useState(""),x=async()=>{try{const k=(await T.get(`categories/${i.id?i.id:o}`)).data;v(k.name.ru)}catch(S){console.log("Ошибка произошла при получении категонии по id",S)}};return e.jsxs("div",{className:_.productItem_left,children:[e.jsxs("div",{className:_.productItem_left_info,children:[e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:_.productItem_left_item_top_input,value:p||"",onChange:S=>r(S.target.value)})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,onClick:()=>m(!0),children:"Изменить"})})]}),e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:h||((I=(j=d==null?void 0:d.category)==null?void 0:j.name)!=null&&I.ru?(P=(w=d==null?void 0:d.category)==null?void 0:w.name)==null?void 0:P.ru:"")})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,onClick:()=>g(!0),children:i!=null&&i.name||d!=null&&d.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:c})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:l})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:_.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:_.productItem_left_form,children:[e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:_.productItem_left_form_input,type:"text",value:t||"",onChange:S=>n(S.target.value)})]}),e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:S=>a(S.target.value),value:s||"",className:_.productItem_left_form_textarea}),e.jsx("p",{className:_.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function kd({color:o="black",title:t="",extraOptionsList:s,className:a,openBlock:n,setOpenBlock:c,setExtraOptionsList:p}){const r=u.useRef([]);u.useEffect(()=>{r.current.length>0&&l()},[s]);const l=()=>{s&&s.forEach(d=>{r.current.forEach(m=>{m.name==d.title&&(m.checked=d.isActive)})})},i=(d,m)=>{const g=JSON.parse(JSON.stringify(s));g.forEach(h=>{h.title==m&&(h.isActive=!h.isActive)}),p&&p(g)};return e.jsxs("div",{className:a??q.versionExtraOptions,children:[t&&e.jsx("span",{className:q.versionExtraOptions_title,children:t}),e.jsxs("div",{className:q.versionExtraOptions_block,children:[e.jsxs("div",{className:q.versionExtraOptions_block_top,onClick:()=>c&&c(!n),children:[e.jsx("h2",{className:q.versionExtraOptions_block_top_title,style:{color:o},children:t||"Выберите параметры"}),e.jsx("button",{className:q.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${q.versionExtraOptions_block_top_arrow} ${n?q.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${q.versionExtraOptions_block_dropdown} ${n?q.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((d,m)=>e.jsxs("label",{className:q.versionExtraOptions_block_dropdown_item,children:[d.title,e.jsx("input",{ref:g=>{g&&(r.current[m]=g)},type:"checkbox",name:d.title,"data-type":d.title,onChange:g=>i(g,d.title)})]},d.id))})]})]})}function yd({color:o="black",title:t="",versionList:s,className:a}){const[n,c]=u.useState(!1),[p,r]=u.useState("");u.useEffect(()=>{s==null||s.forEach(d=>{d.isActive&&r(d.title)})},[]);const l=()=>{c(!n)},i=d=>{s==null||s.forEach(m=>m.isActive=!1),s==null||s.forEach(m=>{m.title==d.title&&(m.isActive=!0,r(m.title))}),l()};return e.jsxs("div",{className:a??q.version3,children:[e.jsx("span",{className:q.version3_title,children:t}),e.jsxs("div",{className:q.version3_block,children:[e.jsxs("div",{className:q.version3_block_top,onClick:()=>l(),children:[e.jsx("h2",{className:q.version3_block_top_title,style:{color:o},children:p||"Выбрать"}),e.jsx("button",{className:q.version3_block_top_btn,children:e.jsx("div",{className:`${q.version3_block_top_arrow} ${n?q.version3_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${q.version3_block_dropdown} ${n?q.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(d=>e.jsx("span",{className:q.version3_block_dropdown_item,onClick:()=>i(d),children:s.length>1?d.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},d.id))})]})]})}function jd({extraOptionsStatus:o,localCategory:t,setExtraOptionsStatus:s,extraOptions:a}){const[n,c]=u.useState(!1);return u.useEffect(()=>{},[t]),e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>s(!o),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Доп. параметры"}),e.jsx(De,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsxs("div",{className:`${_.productItem_right_bottom_items} ${o?_.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:_.productItem_right_bottom_item,children:e.jsx(kd,{color:"",extraOptionsList:a,openBlock:n,setOpenBlock:c})}),a.map(p=>{if(p.isActive)return e.jsxs("div",{className:_.productItem_right_bottom_item,children:[e.jsx(yd,{color:"",title:p.title,versionList:p.type}),e.jsx("button",{className:_.productItem_right_bottom_del,children:"Удалить"})]},p.id)})]})]})}function ut({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:c,setOpenBlock:p,setCurrentVersion:r,setVersionList:l}){const i=d=>{r&&r(d.title);const m=s.map(v=>({id:v.id,title:v.title,isActive:!1})),g=m.find(v=>v.id==d.id),h=m.findIndex(v=>v.id==d.id);g&&(g.isActive=!0,m.splice(h,1,g),l&&l(m))};return e.jsxs("div",{className:a??q.version3,children:[e.jsx("span",{className:q.version3_title,children:t}),e.jsxs("div",{className:q.version3_block,children:[e.jsxs("div",{className:q.version3_block_top,children:[e.jsx("h2",{className:q.version3_block_top_title,style:{color:o},children:c}),e.jsx("button",{className:q.version3_block_top_btn,onClick:()=>p&&p(!n),children:e.jsx("div",{className:`${q.version3_block_top_arrow} ${n?q.version3_block_top_arrow_active:""}`,children:e.jsx(B,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${q.version3_block_dropdown} ${n?q.version3_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:q.version3_block_dropdown_item,onClick:()=>i(d),children:d.title},d.id))})]})]})}function wd({brieflyProductStatus:o,setBrieflyProductStatus:t}){return e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>t(!o),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коротко о товаре"}),e.jsx(De,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsx("div",{className:`${_.productItem_right_bottom_items} ${o?_.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${_.productItem_right_bottom_item} ${_.productItem_right_bottom_row}`,children:[e.jsx(ut,{color:"",title:"Объем, л"}),e.jsx(ut,{color:"",title:"Кол-во в упаковке"})]})})]})}function Pt({currentProduct:o,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:a,setBrieflyProductStatus:n,localCategory:c,extraOptions:p,setExtraOptions:r}){return e.jsxs("div",{className:_.productItem_right,children:[e.jsx("div",{className:_.productItem_right_item,children:e.jsxs("div",{className:_.productItem_right_top,children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коментарии"}),e.jsx(De,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(jd,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:c,extraOptions:p,setExtraOptions:r,currentProduct:o}),e.jsx(wd,{brieflyProductStatus:a,setBrieflyProductStatus:n})]})}function $t({stockName:o,setAdminSettings:t}){return e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx(Y,{to:o=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>t(),children:o=="website"?"Сохранить":"Добавить"})]})}function Cd(){const{setArticleModal:o}=ke();return e.jsxs("div",{className:_.articleModal_block_nav,children:[e.jsx("h2",{className:_.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(B,{name:"XMarkIcon"})})]})}function Nd({productName:o}){const[t]=u.useState(""),[s]=u.useState("");return e.jsxs("div",{className:_.articleModal_block_info,children:[e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:o})]}),e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[s,"1%"]})]})]})}function Dt({item:o}){return e.jsxs("div",{className:_.articleModal_block_recommended_item,children:[e.jsx("h3",{className:_.articleModal_block_recommended_item_title,children:o.title}),e.jsxs("div",{className:_.articleModal_block_recommended_content,children:[e.jsx("div",{className:_.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:_.articleModal_block_recommended_info,children:[e.jsxs("div",{className:_.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:_.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:_.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:_.articleModal_block_recommended_article,children:o.article})]})]})}const Sd=[{id:de(),title:"Молоко Nestle",article:"#DF262515"}];function Id(){return e.jsxs("div",{className:_.articleModal_block_recommended,children:[e.jsx("h2",{className:_.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:_.articleModal_block_recommended_list,children:Sd.map(o=>e.jsx(Dt,{item:o},o.id))})]})}function Pd(){return e.jsx("div",{className:_.articleModal_block_search,children:e.jsxs("div",{className:_.articleModal_block_search_box,children:[e.jsxs("div",{className:_.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(B,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:_.articleModal_block_search_btn,children:"Найти"})]})})}const $d=[{id:de(),title:"Молоко Nestle",article:"#DF262515"},{id:de(),title:"Молоко Nestle",article:"#DF262515"},{id:de(),title:"Молоко Nestle",article:"#DF262515"}];function Dd(){return e.jsx("div",{className:_.articleModal_block_found,children:$d.map(o=>e.jsx(Dt,{item:o},o.id))})}function Ot({productName:o}){return e.jsx("div",{className:_.articleModal,children:e.jsxs("div",{className:_.articleModal_block,children:[e.jsx(Cd,{}),e.jsx(Nd,{productName:o}),e.jsx(Id,{}),e.jsx(Pd,{}),e.jsx(Dd,{}),e.jsx("div",{className:_.articleModal_block_buttonBox,children:e.jsx("button",{className:_.articleModal_block_button,children:"Выбрать"})})]})})}function Od(){const o=Fe(),t=re(),{id:s}=mt(),{openModalCategory:a}=ke(),{pickedCategory:n,currentProduct:c,setErrorModal:p,setCurrentProduct:r,setPickedCategory:l,articleModal:i}=ke(),[d,m]=u.useState(""),[g,h]=u.useState(0),[v,x]=u.useState(0),[j,I]=u.useState(Number(s)),[w,P]=u.useState(!1),[S,k]=u.useState([]),[f,b]=u.useState(!1),[C,y]=u.useState(""),[N,O]=u.useState(""),[H,A]=u.useState([]),[W,se]=u.useState([]);async function fe(){try{return await(await T.get(`nomenclatures/${s}`)).data}catch(E){console.log("Ошибка произошла при получении продукта со склада по id",E)}}u.useEffect(()=>{l({})},[t.pathname]),u.useEffect(()=>{he()},[s,n]);async function he(){var D;const E=await fe();E&&(m((D=E==null?void 0:E.name)==null?void 0:D.ru),r({...E}),I(E==null?void 0:E.categoryId),h(E==null?void 0:E.barcode),x(E==null?void 0:E.price))}const K=async()=>{if(c){n.id&&(await X(),I(n.id));const E=await te(W),D=C||await ie(),ne={nomenclatureId:c.id,title:d,article:D||null,images:E.length>0?[...E]:null,description:N||null,document:"string"};console.log(333333,"newProduct",ne),await U(ne),l({}),k([]),o("/admin/product/adding/stock",{replace:!0})}else p({status:!0,message:'"Выберите категорию"'})};async function U(E){try{await T.post("web-nomenclatures",E)}catch(D){console.log("Ошибка произошла при добавлении web nomenclatures",D)}}async function X(){try{await T.patch(`nomenclatures/${s}`,{categoryId:n.id}),I(n.id)}catch(E){console.log("Ошибка произошла при изменении котегории на складе",E)}}const te=async E=>{if(E){const D=new FormData;E.forEach((ne,pe)=>{D.append(`files[${pe}]`,ne)});try{return await(await T.post("media-objects/uploads",D)).data}catch(ne){console.error("Ошибка при добавлении картинок на сервер",ne)}}},ie=async()=>{const E=ve.get("multi-store");try{const D=await T.get(`web-credentials/${E}`);return console.log("fetchArticle res",D),D.data.article}catch(D){console.log("Ошибка при получении артикля",D)}};return e.jsxs("div",{className:_.productItem,children:[a&&e.jsx(ht,{}),e.jsx(St,{stockName:"stock",myMxikCode:s,localFormData:W,setLocalFormData:se,localNewImage:H,setLocalNewImage:A}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(It,{myPrice:v,setMyPrice:x,myBarcode:g,setMyBarcode:h,localCategory:j,productName:d,productDescription:N,setProductDescription:O,setProductName:m,vendorCode:C,setVendorCode:y}),e.jsx(Pt,{extraOptionsStatus:w,setExtraOptionsStatus:P,brieflyProductStatus:f,setBrieflyProductStatus:b,localCategory:j,extraOptions:S,setExtraOptions:k,currentProduct:c})]}),e.jsx($t,{stockName:"stock",setAdminSettings:K}),i&&e.jsx(Ot,{productName:d})]})}function Fd(){const o=Fe(),t=re(),{id:s}=mt(),{openModalCategory:a}=ke(),{pickedCategory:n,webCurrentProduct:c,setWebCurrentProduct:p,setErrorModal:r,setPickedCategory:l,articleModal:i}=ke(),[d,m]=u.useState(""),[g,h]=u.useState(0),[v,x]=u.useState(0),[j,I]=u.useState(0),[w,P]=u.useState(Number(s)),[S,k]=u.useState(!1),[f,b]=u.useState([]),[C,y]=u.useState(!1),[N,O]=u.useState(""),[H,A]=u.useState(""),[W,se]=u.useState([]),[fe,he]=u.useState([]);async function K(){try{return await(await T.get(`web-nomenclatures/${s}`)).data}catch(D){console.log("Ошибка произошла при получении продукта с сайта по id",D)}}u.useEffect(()=>{l({})},[t.pathname]),u.useEffect(()=>{U()},[s]);async function U(){var ne,pe,ge,Ne,Ie,ce,be;const D=await K();if(D){x((ne=D==null?void 0:D.nomenclature)==null?void 0:ne.price),h((pe=D==null?void 0:D.nomenclature)==null?void 0:pe.barcode),I((ge=D==null?void 0:D.nomenclature)==null?void 0:ge.id),O(D==null?void 0:D.article),m(D!=null&&D.title?D==null?void 0:D.title:(Ie=(Ne=D==null?void 0:D.nomenclature)==null?void 0:Ne.name)==null?void 0:Ie.ru),p({...D}),P((be=(ce=D==null?void 0:D.nomenclature)==null?void 0:ce.category)==null?void 0:be.id);let je=1;const we=D.images?D.images.map(J=>({id:de(),order:je++,src:J})):[];se(we),je=1,A(D.description?D.description:"")}}const X=async()=>{if(c||n.label){n.id&&await ie();const D=await E(fe);console.log(15,"получил ответ от функции fetchPhotos() images",D),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const ne=W.filter(ge=>ge.src).map(ge=>{if(ge.src)return ge.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",ne);const pe={nomenclatureId:c.id,title:d,article:N,images:D.length>0||ne.length>0?[...D]:null,description:H,document:"string"};console.log(18,"создал новый объект продукта newProduct",pe),console.log(18,"localNewImage",W),te(pe),l({}),b([]),o("/admin/product/adding/website",{replace:!0})}else r({status:!0,message:'"Выберите категорию"'})};async function te(D){try{await T.patch(`web-nomenclatures/${s}`,D)}catch(ne){console.log("Ошибка произошла при добавлении web nomenclatures",ne)}}async function ie(){try{await T.patch(`nomenclatures/${j}`,{categoryId:n.id}),P(n.id)}catch(D){console.log("Ошибка произошла при изменении котегории на сайте",D)}}const E=async D=>{if(D){const ne=new FormData;D.forEach((pe,ge)=>{ne.append(`files[${ge}]`,pe)});try{return await(await T.post("media-objects/uploads",ne)).data}catch(pe){console.error("Ошибка при добавлении картинок на сервер",pe)}}};return e.jsxs("div",{className:_.productItem,children:[a&&e.jsx(ht,{}),e.jsx(St,{stockName:"website",myMxikCode:s,localNewImage:W,setLocalNewImage:se,localFormData:fe,setLocalFormData:he}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(It,{myPrice:v,setMyPrice:x,myBarcode:g,setMyBarcode:h,localCategory:w,productName:d,productDescription:H,setProductDescription:A,setProductName:m,vendorCode:N,setVendorCode:O}),e.jsx(Pt,{extraOptionsStatus:S,setExtraOptionsStatus:k,brieflyProductStatus:C,setBrieflyProductStatus:y,localCategory:w,extraOptions:f,setExtraOptions:b,currentProduct:c})]}),e.jsx($t,{stockName:"website",setAdminSettings:X}),i&&e.jsx(Ot,{productName:d})]})}function Vd(){const{user:o}=Lt(),{setCurrentShop:t}=Ye(),a=re().pathname,{searchResponse:n,checkedProducts:c,errorModal:p,searchText:r,TemporaryData:l,setTemporaryData:i,setCheckedProducts:d}=ke();u.useEffect(()=>{i([]),d([])},[]),u.useEffect(()=>{a.startsWith("/admin/shops")||t("0")},[a]);const m=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(B,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(B,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(B,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(B,{name:"BuildingStorefrontIcon"}),isActive:!1}],[g,h]=u.useState(m),v=x=>{const j=g.map(w=>({id:w.id,label:w.label,href:w.href,icon:w.icon,isActive:!1})),I=j.find(w=>w.id==x);I&&(I.isActive=!0),h(j)};return e.jsxs(e.Fragment,{children:[e.jsx(qt,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:_.wrapper,children:[e.jsx("h1",{className:_.wrapper_title,children:o==null?void 0:o.username}),e.jsxs("div",{className:_.content,children:[e.jsx("div",{className:_.content_left,children:e.jsx("ul",{className:_.tools,children:g.map(x=>e.jsx("li",{children:e.jsxs(Y,{to:x.href,className:`${_.tools_link} ${a.startsWith(x.href)?_.tools_link_active:""}`,onClick:()=>v(x.id),children:[x.icon,x.label]})},x.id))})}),a.startsWith("/admin")&&e.jsxs("div",{className:_.content_right,children:[a.startsWith("/admin/settings")&&e.jsx(g_,{}),a.startsWith("/admin/users")&&e.jsx(md,{}),a.startsWith("/admin/shops")&&e.jsx(vd,{}),a.startsWith("/admin/product")&&e.jsx(y_,{}),a.startsWith("/admin/stock-product")&&e.jsx(Od,{}),a.startsWith("/admin/website-product")&&e.jsx(Fd,{})]})]})]})})]})}export{Vd as default};
