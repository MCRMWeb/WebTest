import{y as h,r as c,w as x,j as t}from"./index-BKWzXJuX.js";import{H as f,s as i}from"./Header-CQHh410Q.js";import{C as j}from"./CustomIcon-CoemkrYJ.js";import{P}from"./Products-C1gemYao.js";import{s as y}from"./shop1Store-Ctd5_wIt.js";import"./userStore-BQ_slQsy.js";import"./XMarkIcon-Bbx2RA7i.js";function H(){const r=h().id,{websiteProducts:s}=y(),[n,m]=c.useState([]),[d,l]=c.useState("");c.useEffect(()=>{g(),p(r)},[r,s]);const g=()=>{console.log("сработал getProducts",s,new Date().getMinutes());const a=s&&(s==null?void 0:s.filter(e=>{var o;return((o=e.crmCategoryParentId)==null?void 0:o.id)==r}));m(a)},p=async a=>{try{const e=`https://api.mcrm.uz/api/categories/${a}`,u=(await x.get(e)).data;l(u.name.ru)}catch(e){console.error("Ошибка произошла при получении названия категории",e)}};return t.jsxs(t.Fragment,{children:[t.jsx(f,{}),t.jsx("div",{className:i.catalogPage,children:t.jsxs("div",{className:"container",children:[t.jsxs("h2",{className:i.catalogPage_title,children:[t.jsx("span",{children:d}),t.jsx(j,{name:"ChevronRightIcon"})]}),n.length>0?t.jsx(t.Fragment,{children:t.jsx(P,{products:n})}):t.jsx("h2",{children:"Товара нет на сайте"})]})})]})}export{H as default};
