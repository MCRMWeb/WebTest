import{r as v,u as j,j as e,L as w}from"./index-FOhuYs8g.js";import{u as N,C as a,e as y}from"./errorMessage-BcXM4Rx4.js";import{a as k}from"./auth-DX3ILFWF.js";import{C}from"./CustomBtn-B0KiRo_H.js";import{u as L}from"./userStore-HQ7Q9WEv.js";import"./CustomIcon-CmXS3TTJ.js";import"./XMarkIcon-DF-GIsgt.js";const S="_enter_1lv2t_1",U="_enter_title_1lv2t_14",q="_enter_form_1lv2t_17",E="_enter_info_1lv2t_27",D="_enter_info_error_1lv2t_33",M="_enter_info_text_1lv2t_39",R="_enter_info_link_1lv2t_42",F="_enter_button_1lv2t_48",I="_enter_button_icon_1lv2t_70",t={enter:S,enter_title:U,enter_form:q,enter_info:E,enter_info_error:D,enter_info_text:M,enter_info_link:R,enter_button:F,enter_button_icon:I},J=()=>{const[_,i]=v.useState(""),m=k(),{setUser:c}=L(),u=j(),{register:n,handleSubmit:d,reset:f,watch:g,formState:{errors:o,isValid:x}}=N({mode:"onChange"}),h=g("password"),p=async r=>{try{const s={email:r.email,username:r.username,password:r.password};console.log("filteredData",s);const l=await m.mutateAsync(s),b=await l.data;console.log("registerUser res",l),c(b.user),i(""),u("/")}catch(s){console.log("ошибка при регистрации",s),i(""),i(y(s))}f()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:t.enter,children:[e.jsx("h1",{className:t.enter_title,children:"Регистрация"}),e.jsxs("form",{className:t.enter_form,onSubmit:d(p),children:[e.jsx(a,{label:"Ваше username",type:"text",holder:"Username",errors:o.username,register:n("username",{required:"Поле обязательно для заполнения",minLength:{value:3,message:"Минимум 3 символа"}})}),e.jsx(a,{label:"Ваше email",type:"email",holder:"Email",errors:o.email,register:n("email",{required:"Поле обязательно для заполнения"})}),e.jsx(a,{label:"Ваше пароль",type:"text",holder:"Пароль",errors:o.password,register:n("password",{required:"Поле обязательно для заполнения",minLength:{value:8,message:"Минимум 8 символов"}})}),e.jsx(a,{label:"Подтвердите пароль",type:"text",holder:"Пароль",errors:o.password2,register:n("password2",{required:"Поле обязательно для заполнения",validate:r=>r===h||"Пароли не совпадают",minLength:{value:8,message:"Минимум 8 символов"}})}),e.jsx(C,{text:"Зарегистрироваться",width:240,height:50,disabled:!x,mg:"auto",icon:"UserPlusIcon",background:"rgb(137, 250, 135)",className:t.enter_button,iconClassName:t.enter_button_icon})]}),e.jsxs("div",{className:t.enter_info,children:[_&&e.jsx("h3",{className:t.enter_info_error,children:_}),e.jsx("p",{className:t.enter_info_text,children:"Есть аккаунт?"}),e.jsx(w,{to:"/signin",className:t.enter_info_link,children:"Войти"})]})]})})};export{J as default};
