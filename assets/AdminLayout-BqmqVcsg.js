import{j as e,w as _e,r as m,x as Te,L as K,v as te,q as ke,o as ae,y as oe,e as se,u as Ie,z as Ot,A as Pt,B as Ft,C as dt}from"./index-BcJR6R3f.js";import{u as At}from"./userStore-576VD1yg.js";import{C as z}from"./CustomIcon-CMVZbRaw.js";import{s as Ve}from"./shop1Store-BoMdmPjH.js";import{a as qe,c as Ze,H as Lt}from"./Header-BKqs4lJs.js";import{a as ve,s as Z,M as pt}from"./Modal-40UpXlrd.js";import{b as de}from"./bannerStore-gY4IfVyT.js";import{F as Mt,a as Bt,b as Wt,c as Et,d as Ut,e as Rt,f as zt,g as Tt,h as Vt,i as qt,j as Kt,k as Ht,l as Xt,m as Gt,n as Zt,o as Jt,p as Qt,q as Yt,r as es,s as ts,t as ss,u as os,v as ns,w as as,x as rs,y as is,z as cs,A as ls,B as _s,C as ds,D as ps,E as us,G as ms}from"./XMarkIcon-CV1FBrf-.js";const hs="_wrapper_84f33_1",vs="_wrapper_title_84f33_4",gs="_content_84f33_10",bs="_content_left_84f33_16",xs="_content_right_84f33_19",fs="_tools_84f33_45",ys="_tools_link_84f33_50",ks="_tools_link_active_84f33_63",js="_settings_84f33_86",ws="_settings_title_84f33_89",Cs="_settings_content_84f33_94",Ss="_settings_content_top_84f33_97",Ns="_settings_content_buttons_84f33_100",Is="_settings_content_btn_84f33_110",$s="_settings_content_btn_cancel_84f33_122",Ds="_settings_content_btn_save_84f33_125",Os="_settings_tools_84f33_128",Ps="_settings_tools_link_84f33_133",Fs="_settings_tools_link_active_84f33_148",As="_wrapperModules_84f33_153",Ls="_item_84f33_160",Ms="_item_top_84f33_165",Bs="_item_top_title_84f33_176",Ws="_item_top_arrow_84f33_180",Es="_item_top_arrow_active_84f33_188",Us="_item_block_84f33_191",Rs="_item_block_item_84f33_202",zs="_item_block_open_84f33_205",Ts="_item_onOff_84f33_211",Vs="_item_delivery_84f33_211",qs="_versions_block_84f33_217",Ks="_versions_block_top_84f33_222",Hs="_versions_block_top_title_84f33_232",Xs="_versions_block_top_arrow_84f33_237",Gs="_versions_block_top_arrow_active_84f33_246",Zs="_versions_block_dropdown_84f33_249",Js="_versions_block_dropdown_item_84f33_260",Qs="_versions_block_dropdown_open_84f33_271",Ys="_versions_block_onOff_84f33_277",eo="_versions_block_delivery_84f33_277",to="_categoriesDropDown_title_84f33_283",so="_categoriesDropDown_item_84f33_286",oo="_categoriesDropDown_item_top_84f33_292",no="_categoriesDropDown_item_top_title_84f33_303",ao="_categoriesDropDown_item_top_arrow_84f33_307",ro="_categoriesDropDown_item_top_arrow_active_84f33_314",io="_categoriesDropDown_item_block_84f33_317",co="_categoriesDropDown_item_block_line_84f33_326",lo="_categoriesDropDown_item_block_active_84f33_338",_o="_categoriesDropDown_item_block_open_84f33_341",po="_categoriesDropDown_item_onOff_84f33_346",uo="_categoriesDropDown_item_delivery_84f33_346",mo="_products_buttons_84f33_352",ho="_products_btn_84f33_358",vo="_products_btn_active_84f33_369",go="_productItem_title_84f33_374",bo="_productItem_basePhoto_84f33_379",xo="_productItem_photos_84f33_385",fo="_productItem_photos_desc_84f33_391",yo="_productItem_photo_84f33_385",ko="_productItem_photo_img_84f33_406",jo="_productItem_photo_close_84f33_417",wo="_productItem_photo_active_84f33_429",Co="_productItem_add_84f33_433",So="_productItem_add_text_84f33_441",No="_productItem_settings_84f33_446",Io="_productItem_left_info_84f33_450",$o="_productItem_left_item_84f33_458",Do="_productItem_left_item_top_84f33_462",Oo="_productItem_left_item_top_input_84f33_483",Po="_productItem_left_item_bottom_84f33_489",Fo="_productItem_left_form_84f33_502",Ao="_productItem_left_form_label_84f33_509",Lo="_productItem_left_form_title_84f33_513",Mo="_productItem_left_form_input_84f33_519",Bo="_productItem_left_form_textarea_84f33_527",Wo="_productItem_left_form_size_84f33_535",Eo="_productItem_right_84f33_543",Uo="_productItem_right_item_84f33_550",Ro="_productItem_right_top_84f33_555",zo="_productItem_right_title_84f33_562",To="_productItem_right_bottom_items_84f33_568",Vo="_productItem_right_bottom_items_active_84f33_577",qo="_productItem_right_bottom_item_84f33_568",Ko="_productItem_right_bottom_row_84f33_603",Ho="_productItem_right_bottom_del_84f33_608",Xo="_banner_nav_list_84f33_619",Go="_banner_nav_link_84f33_625",Zo="_banner_nav_link_active_84f33_640",Jo="_addingWrapper_title_84f33_645",Qo="_addingWrapper_form_84f33_650",Yo="_addingWrapper_form_btn_84f33_655",en="_addingWrapper_search_84f33_672",tn="_addingWrapper_search_input_84f33_678",sn="_addingWrapper_search_icon_84f33_686",on="_addingWrapper_table_84f33_689",nn="_addingWrapper_table_error_84f33_692",an="_addingWrapper_thead_tr_84f33_696",rn="_addingWrapper_thead_th_84f33_700",cn="_addingWrapper_tbody_tr_84f33_708",ln="_addingWrapper_tbody_td_84f33_711",_n="_addingWrapper_tbody_buttons_84f33_725",dn="_addingWrapper_tbody_add_84f33_730",pn="_addingWrapper_tbody_del_84f33_737",un="_errorWrapper_84f33_745",mn="_errorWrapper_block_84f33_754",hn="_errorWrapper_block_close_84f33_764",vn="_layout_title_84f33_775",gn="_layout_buttons_84f33_780",bn="_layout_btn_84f33_786",xn="_layout_btn_active_84f33_800",fn="_editBlock_84f33_805",yn="_articleModal_84f33_817",kn="_articleModal_block_84f33_826",jn="_articleModal_block_nav_84f33_833",wn="_articleModal_block_title_84f33_840",Cn="_articleModal_block_info_84f33_845",Sn="_articleModal_block_info_item_84f33_848",Nn="_articleModal_block_recommended_84f33_863",In="_articleModal_block_recommended_title_84f33_866",$n="_articleModal_block_recommended_item_84f33_872",Dn="_articleModal_block_recommended_item_title_84f33_876",On="_articleModal_block_recommended_content_84f33_882",Pn="_articleModal_block_recommended_img_84f33_887",Fn="_articleModal_block_recommended_info_84f33_897",An="_articleModal_block_recommended_desc_84f33_902",Ln="_articleModal_block_recommended_article_84f33_916",Mn="_articleModal_block_search_84f33_921",Bn="_articleModal_block_search_box_84f33_924",Wn="_articleModal_block_search_input_84f33_929",En="_articleModal_block_search_btn_84f33_941",Un="_articleModal_block_found_84f33_951",Rn="_articleModal_block_buttonBox_84f33_957",zn="_articleModal_block_button_84f33_957",Tn="_homePage_addBlock_84f33_974",Vn="_homePage_addBlock_title_84f33_990",qn="_homePage_addBlock_active_84f33_993",d={wrapper:hs,wrapper_title:vs,content:gs,content_left:bs,content_right:xs,tools:fs,tools_link:ys,tools_link_active:ks,settings:js,settings_title:ws,settings_content:Cs,settings_content_top:Ss,settings_content_buttons:Ns,settings_content_btn:Is,settings_content_btn_cancel:$s,settings_content_btn_save:Ds,settings_tools:Os,settings_tools_link:Ps,settings_tools_link_active:Fs,wrapperModules:As,item:Ls,item_top:Ms,item_top_title:Bs,item_top_arrow:Ws,item_top_arrow_active:Es,item_block:Us,item_block_item:Rs,item_block_open:zs,item_onOff:Ts,item_delivery:Vs,versions_block:qs,versions_block_top:Ks,versions_block_top_title:Hs,versions_block_top_arrow:Xs,versions_block_top_arrow_active:Gs,versions_block_dropdown:Zs,versions_block_dropdown_item:Js,versions_block_dropdown_open:Qs,versions_block_onOff:Ys,versions_block_delivery:eo,categoriesDropDown_title:to,categoriesDropDown_item:so,categoriesDropDown_item_top:oo,categoriesDropDown_item_top_title:no,categoriesDropDown_item_top_arrow:ao,categoriesDropDown_item_top_arrow_active:ro,categoriesDropDown_item_block:io,categoriesDropDown_item_block_line:co,categoriesDropDown_item_block_active:lo,categoriesDropDown_item_block_open:_o,categoriesDropDown_item_onOff:po,categoriesDropDown_item_delivery:uo,products_buttons:mo,products_btn:ho,products_btn_active:vo,productItem_title:go,productItem_basePhoto:bo,productItem_photos:xo,productItem_photos_desc:fo,productItem_photo:yo,productItem_photo_img:ko,productItem_photo_close:jo,productItem_photo_active:wo,productItem_add:Co,productItem_add_text:So,productItem_settings:No,productItem_left_info:Io,productItem_left_item:$o,productItem_left_item_top:Do,productItem_left_item_top_input:Oo,productItem_left_item_bottom:Po,productItem_left_form:Fo,productItem_left_form_label:Ao,productItem_left_form_title:Lo,productItem_left_form_input:Mo,productItem_left_form_textarea:Bo,productItem_left_form_size:Wo,productItem_right:Eo,productItem_right_item:Uo,productItem_right_top:Ro,productItem_right_title:zo,productItem_right_bottom_items:To,productItem_right_bottom_items_active:Vo,productItem_right_bottom_item:qo,productItem_right_bottom_row:Ko,productItem_right_bottom_del:Ho,banner_nav_list:Xo,banner_nav_link:Go,banner_nav_link_active:Zo,addingWrapper_title:Jo,addingWrapper_form:Qo,addingWrapper_form_btn:Yo,addingWrapper_search:en,addingWrapper_search_input:tn,addingWrapper_search_icon:sn,addingWrapper_table:on,addingWrapper_table_error:nn,addingWrapper_thead_tr:an,addingWrapper_thead_th:rn,addingWrapper_tbody_tr:cn,addingWrapper_tbody_td:ln,addingWrapper_tbody_buttons:_n,addingWrapper_tbody_add:dn,addingWrapper_tbody_del:pn,errorWrapper:un,errorWrapper_block:mn,errorWrapper_block_close:hn,layout_title:vn,layout_buttons:gn,layout_btn:bn,layout_btn_active:xn,editBlock:fn,articleModal:yn,articleModal_block:kn,articleModal_block_nav:jn,articleModal_block_title:wn,articleModal_block_info:Cn,articleModal_block_info_item:Sn,articleModal_block_recommended:Nn,articleModal_block_recommended_title:In,articleModal_block_recommended_item:$n,articleModal_block_recommended_item_title:Dn,articleModal_block_recommended_content:On,articleModal_block_recommended_img:Pn,articleModal_block_recommended_info:Fn,articleModal_block_recommended_desc:An,articleModal_block_recommended_article:Ln,articleModal_block_search:Mn,articleModal_block_search_box:Bn,articleModal_block_search_input:Wn,articleModal_block_search_btn:En,articleModal_block_found:Un,articleModal_block_buttonBox:Rn,articleModal_block_button:zn,homePage_addBlock:Tn,homePage_addBlock_title:Vn,homePage_addBlock_active:qn};function Se({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:_=1.1,status:l=!1}){const i={width:`${o}px`,height:`${o/2-o/20}px`,background:l?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},r={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${l?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${_}) translateX(${l?"110%":"0"})`};return e.jsx("div",{style:i,children:e.jsx("div",{style:r})})}const Kn="_versions_1cgvq_1",Hn="_versions_block_1cgvq_6",Xn="_versions_block_top_1cgvq_11",Gn="_versions_block_top_title_1cgvq_21",Zn="_versions_block_top_arrow_1cgvq_25",Jn="_versions_block_top_arrow_active_1cgvq_34",Qn="_versions_block_dropdown_1cgvq_37",Yn="_versions_block_dropdown_item_1cgvq_49",ea="_versions_block_dropdown_open_1cgvq_60",ta="_versions_block_onOff_1cgvq_66",sa="_versions_block_delivery_1cgvq_66",oa="_versions2_1cgvq_72",na="_versions2_block_1cgvq_77",aa="_versions2_block_top_1cgvq_82",ra="_versions2_block_top_title_1cgvq_92",ia="_versions2_block_top_arrow_1cgvq_96",ca="_versions2_block_top_arrow_active_1cgvq_105",la="_versions2_block_dropdown_1cgvq_108",_a="_versions2_block_dropdown_item_1cgvq_119",da="_versions2_block_dropdown_open_1cgvq_130",pa="_versions2_block_onOff_1cgvq_136",ua="_versions2_block_delivery_1cgvq_136",ma="_version3_1cgvq_142",ha="_version3_title_1cgvq_147",va="_version3_block_1cgvq_153",ga="_version3_block_top_1cgvq_158",ba="_version3_block_top_title_1cgvq_169",xa="_version3_block_top_arrow_1cgvq_173",fa="_version3_block_top_arrow_active_1cgvq_183",ya="_version3_block_dropdown_1cgvq_186",ka="_version3_block_dropdown_item_1cgvq_197",ja="_version3_block_dropdown_open_1cgvq_213",wa="_version3_block_onOff_1cgvq_237",Ca="_version3_block_delivery_1cgvq_237",Sa="_versionExtraOptions_1cgvq_243",Na="_versionExtraOptions_title_1cgvq_248",Ia="_versionExtraOptions_block_1cgvq_254",$a="_versionExtraOptions_block_top_1cgvq_259",Da="_versionExtraOptions_block_top_title_1cgvq_270",Oa="_versionExtraOptions_block_top_arrow_1cgvq_275",Pa="_versionExtraOptions_block_top_arrow_active_1cgvq_285",Fa="_versionExtraOptions_block_dropdown_1cgvq_288",Aa="_versionExtraOptions_block_dropdown_item_1cgvq_299",La="_versionExtraOptions_block_dropdown_open_1cgvq_316",Ma="_versionExtraOptions_block_onOff_1cgvq_340",Ba="_versionExtraOptions_block_delivery_1cgvq_340",T={versions:Kn,versions_block:Hn,versions_block_top:Xn,versions_block_top_title:Gn,versions_block_top_arrow:Zn,versions_block_top_arrow_active:Jn,versions_block_dropdown:Qn,versions_block_dropdown_item:Yn,versions_block_dropdown_open:ea,versions_block_onOff:ta,versions_block_delivery:sa,versions2:oa,versions2_block:na,versions2_block_top:aa,versions2_block_top_title:ra,versions2_block_top_arrow:ia,versions2_block_top_arrow_active:ca,versions2_block_dropdown:la,versions2_block_dropdown_item:_a,versions2_block_dropdown_open:da,versions2_block_onOff:pa,versions2_block_delivery:ua,version3:ma,version3_title:ha,version3_block:va,version3_block_top:ga,version3_block_top_title:ba,version3_block_top_arrow:xa,version3_block_top_arrow_active:fa,version3_block_dropdown:ya,version3_block_dropdown_item:ka,version3_block_dropdown_open:ja,version3_block_onOff:wa,version3_block_delivery:Ca,versionExtraOptions:Sa,versionExtraOptions_title:Na,versionExtraOptions_block:Ia,versionExtraOptions_block_top:$a,versionExtraOptions_block_top_title:Da,versionExtraOptions_block_top_arrow:Oa,versionExtraOptions_block_top_arrow_active:Pa,versionExtraOptions_block_dropdown:Fa,versionExtraOptions_block_dropdown_item:Aa,versionExtraOptions_block_dropdown_open:La,versionExtraOptions_block_onOff:Ma,versionExtraOptions_block_delivery:Ba};function st({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:_,setOpenBlock:l,setCurrentVersion:i,setVersionList:r}){const c=p=>{i(p.title);const u=s.map(g=>({id:g.id,title:g.title,isActive:!1})),h=u.find(g=>g.id==p.id),v=u.findIndex(g=>g.id==p.id);h&&(h.isActive=!0,u.splice(v,1,h),r(u))};return e.jsxs("div",{className:a??T.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:T.versions_block,children:[e.jsxs("div",{className:T.versions_block_top,children:[e.jsx("h2",{className:T.versions_block_top_title,style:{color:o},children:_}),e.jsx("button",{className:T.versions_block_top_btn,onClick:()=>l(!n),children:e.jsx("div",{className:`${T.versions_block_top_arrow} ${n?T.versions_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${T.versions_block_dropdown} ${n?T.versions_block_dropdown_open:""}`,children:s.map(p=>e.jsx("span",{className:T.versions_block_dropdown_item,onClick:()=>c(p),children:p.title},p.id))})]})]})}function Wa(){const{modulesCashRegisterStatus:o,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:a,openBlockCashRegister:n,openBlockCashRegisterVersion:_,openBlockCart:l,cartVersionList:i,modulesCartStatus:r,cartCurrentVersion:c,openBlockCartVersion:p,setCartVersionList:u,setCartCurrentVersion:h,setModulesCartStatus:v,setOpenBlockCart:g,setOpenBlockCartVersion:S,setDeliveryStatus:D,setOpenBlockCashRegister:P,setCashRegisterVersionList:j,setModulesCashRegisterStatus:w,setCashRegisterCurrentVersion:f,setOpenBlockCashRegisterVersion:k}=_e(),x=()=>{g(!l)},b=()=>{P(!n)};return e.jsxs("div",{className:d.wrapperModules,children:[e.jsxs("div",{className:d.item,children:[e.jsxs("div",{className:d.item_top,onClick:()=>x(),children:[e.jsx("h2",{className:d.item_top_title,children:"Корзина"}),e.jsx("button",{className:d.item_top_btn,onClick:()=>x(),children:e.jsx("div",{className:`${d.item_top_arrow} ${l?d.item_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${d.item_block} ${l?d.item_block_open:""}`,children:[e.jsxs("div",{className:d.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:d.item_shell,onClick:()=>v(!r),children:e.jsx(Se,{status:r,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(st,{color:"rgb(137, 250, 135)",openBlock:p,setOpenBlock:S,title:"Выберите версию",versionList:i,currentVersion:c,setCurrentVersion:h,setVersionList:u}),e.jsxs("div",{className:d.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:d.item_shell,onClick:()=>D(!t),children:e.jsx(Se,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:d.item,children:[e.jsxs("div",{className:d.item_top,onClick:()=>b(),children:[e.jsx("h2",{className:d.item_top_title,children:"Кacca"}),e.jsx("button",{className:d.item_top_btn,onClick:()=>b(),children:e.jsx("div",{className:`${d.item_top_arrow} ${n?d.item_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${d.item_block} ${n?d.item_block_open:""}`,children:[e.jsxs("div",{className:d.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:d.item_shell,onClick:()=>w(!o),children:e.jsx(Se,{status:o,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(st,{color:"rgb(137, 250, 135)",openBlock:_,setOpenBlock:k,title:"Выберите версию",versionList:s,currentVersion:a,setCurrentVersion:f,setVersionList:j})]})]})]})}function Ea(){const{templates:o,setTemplates:t}=_e(),[s,a]=m.useState([...o]);m.useEffect(()=>{a([...o])},[o]);const n=i=>{const r=s.map(c=>c.id===i?{...c,open:!c.open}:c);a(r)},_=(i,r)=>{const c=s.map(p=>p.id===i?{...p,isActive:!0,templateThemes:p.templateThemes.map(u=>u.id===r?{...u,isActive:!0}:{...u,isActive:!1})}:{...p,isActive:!1,templateThemes:p.templateThemes.map(u=>({...u,isActive:!1}))});a(c)};function l(){t(s)}return e.jsxs("div",{className:d.wrapperModules,children:[s.map(i=>e.jsxs("div",{className:d.item,children:[e.jsxs("div",{className:d.item_top,onClick:()=>n(i.id),children:[e.jsx("h2",{className:d.item_top_title,children:i.title}),e.jsx("button",{className:d.item_top_btn,onClick:()=>n(i.id),children:e.jsx("div",{className:`${d.item_top_arrow} ${i.open?d.item_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${d.item_block} ${i.open?d.item_block_open:""}`,children:i.templateThemes.map(r=>e.jsxs("div",{className:d.item_onOff,children:[e.jsx("span",{children:r.title}),e.jsx("div",{className:d.item_shell,onClick:()=>_(i.id,r.id),children:e.jsx(Se,{status:r.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},r.id))})]},i.id)),e.jsxs("div",{className:d.settings_content_buttons,children:[e.jsx("button",{className:`${d.settings_content_btn} ${d.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${d.settings_content_btn} ${d.settings_content_btn_save}`,onClick:()=>l(),children:"Сохранить"})]})]})}function Ua({title:o,setOpenModal:t}){const{currentCategory:s}=_e(),[a,n]=m.useState(""),{selectedSuperCategory:_,selectedCategory:l}=qe();m.useEffect(()=>{s=="Котегории"&&_&&i(_),s=="Подкотегории"&&l&&i(l)},[s,_,l]);const i=async c=>{try{const u=await(await Te.get(`https://api.mcrm.uz/api/categories/${c}`)).data;n(u.name.ru)}catch(p){console.error("Ошибка произошла при получении названия варианта категории",p)}},r=()=>{t&&t(!0)};return e.jsxs("div",{className:d.editBlock,onClick:r,children:[a||o,e.jsx(z,{name:"PencilIcon"})]})}const Ra="_modalCategory_xzv82_1",za="_modalCategory_block_xzv82_10",Ta="_modalCategory_nav_xzv82_16",Va="_modalCategory_nav_title_xzv82_23",qa="_modalCategory_content_xzv82_29",Ka="_modalCategory_content_message_xzv82_36",Ha="_modalCategory_content_link_xzv82_44",Xa="_modalCategory_content_link_active_xzv82_72",Ga="_modalCategory_content_item_xzv82_82",Za="_modalCategory_content_block_xzv82_104",Ja="_modalCategory_content_block_title_xzv82_108",Qa="_settings_xzv82_115",Ya="_settings_title_xzv82_118",er="_settings_content_xzv82_123",tr="_settings_content_top_xzv82_126",sr="_settings_content_buttons_xzv82_129",or="_settings_content_btn_xzv82_139",nr="_settings_content_btn_cancel_xzv82_151",ar="_settings_content_btn_save_xzv82_154",rr="_settings_tools_xzv82_157",ir="_settings_tools_link_xzv82_162",cr="_settings_tools_link_active_xzv82_177",ee={modalCategory:Ra,modalCategory_block:za,modalCategory_nav:Ta,modalCategory_nav_title:Va,modalCategory_content:qa,modalCategory_content_message:Ka,modalCategory_content_link:Ha,modalCategory_content_link_active:Xa,modalCategory_content_item:Ga,modalCategory_content_block:Za,modalCategory_content_block_title:Ja,settings:Qa,settings_title:Ya,settings_content:er,settings_content_top:tr,settings_content_buttons:sr,settings_content_btn:or,settings_content_btn_cancel:nr,settings_content_btn_save:ar,settings_tools:rr,settings_tools_link:ir,settings_tools_link_active:cr};function lr({setCancel:o}){return e.jsxs("div",{className:ee.modalCategory_nav,children:[e.jsx("h2",{className:ee.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:ee.modalCategory_nav_close,onClick:o,children:e.jsx(z,{width:24,height:24,name:"XMarkIcon"})})]})}function _r({superCategory:o,category:t,setMessageStatus:s,fetchCategories:a}){const{currentCategory:n}=_e(),{selectedSuperCategory:_,setSelectedSuperCategory:l}=qe(),{setCurrentCategory:i}=ve(),[r,c]=m.useState(10),p=(h,v)=>{if(h.preventDefault(),n==="Подкотегории"){a("category",1,10,v.id);const g=t.filter(S=>S.parentId==v.id);i(g),l(v.id),s(!1)}l(v.id)},u=h=>{h.preventDefault();const v=r+10;c(v),a("super",1,v)};return e.jsxs("div",{className:ee.modalCategory_content_block,children:[e.jsx("h2",{className:ee.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:ee.modalCategory_content_item,children:[o.map(h=>e.jsxs(K,{to:"#",className:`${ee.modalCategory_content_link} ${h.id==_?ee.modalCategory_content_link_active:""} `,onClick:v=>p(v,h),children:[h.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),e.jsx(K,{to:"#",className:ee.modalCategory_content_link,onClick:h=>u(h),children:"Ещё..."})]})]})}function dr({categoryId:o,category:t,setCategoryId:s,setSubCategory:a,fetchCategories:n}){const{selectedSuperCategory:_}=qe(),[l,i]=m.useState(10),r=p=>{p.preventDefault();const u=l+10;i(u),n("category",1,u,_)},c=(p,u)=>{a(p,u),s(u.id)};return t.length>0&&e.jsxs("div",{className:ee.modalCategory_content_block,children:[e.jsx("h2",{className:ee.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:ee.modalCategory_content_item,children:[t==null?void 0:t.map(p=>e.jsxs(K,{to:"#",className:`${ee.modalCategory_content_link} ${p.id==o?ee.modalCategory_content_link_active:""} `,onClick:u=>c(u,p),children:[p.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},p.id)),e.jsx(K,{to:"#",className:ee.modalCategory_content_link,onClick:p=>r(p),children:"Ещё..."})]})]})}function pr({setSettings:o,setCancel:t}){return e.jsxs("div",{className:ee.settings_content_buttons,children:[e.jsx("button",{className:`${ee.settings_content_btn} ${ee.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(K,{to:"#",className:`${ee.settings_content_btn} ${ee.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function ur({setOpenModal:o}){const{currentCategory:t}=_e(),{selectedSuperCategory:s,setSelectedSuperCategory:a,selectedCategory:n,setSelectedCategory:_}=qe(),[l,i]=m.useState(0),[r,c]=m.useState(!1),[p,u]=m.useState("Выберите категорию"),[h,v]=m.useState([]),[g,S]=m.useState([]);m.useEffect(()=>{w("super",1,10),n&&i(n)},[]);const D=(k,x)=>{k.preventDefault(),w("subCategory",1,10,x.id),c(!1)},P=()=>{t=="Котегории"?a(s):t=="Подкотегории"&&_(l),j()},j=()=>{c(!1),u("Выберите категорию"),o(!1)},w=async(k,x,b,I)=>{try{const C=k=="super"?`https://api.mcrm.uz/api/categories?&page=${x}&perPage=${b}`:`https://api.mcrm.uz/api/categories?parentId=${I}&page=${x}&perPage=${b}`,W=(await Te.get(C)).data.data.map(U=>({...U,label:k==="super"?"Супер категория":k==="category"?"Категория":"Субкатегория"}));k==="super"&&v([...W]),k==="category"&&S([...W])}catch(C){console.error(`Ошибка произошла при получении ${k} категорий`,C)}},f=()=>{o(!1)};return e.jsx("div",{className:ee.modalCategory,onClick:f,children:e.jsxs("div",{className:ee.modalCategory_block,onClick:k=>k.stopPropagation(),children:[e.jsx(lr,{setCancel:j}),e.jsx("p",{className:ee.modalCategory_content_message,children:r?p:""}),e.jsxs("div",{className:ee.modalCategory_content,children:[e.jsx(_r,{superCategory:h,category:g,setMessageStatus:c,fetchCategories:w}),t==="Подкотегории"&&e.jsx(dr,{categoryId:l,category:g,setCategoryId:i,setSubCategory:D,fetchCategories:w}),e.jsx(pr,{setSettings:P,setCancel:j})]})]})})}function mr(){const[o,t]=m.useState(!1),[s,a]=m.useState(!1),{currentCategory:n,categoriesStatus:_,categories:l,setCategoriesStatus:i,setCurrentCategory:r}=_e();m.useEffect(()=>{t(n==="Котегории"||n==="Подкотегории")},[n]);const c=p=>{r(p.title),p.title==="Котегории"||p.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:d.categoriesDropDown,children:[e.jsx("h2",{className:d.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(ur,{setOpenModal:a}),e.jsxs("div",{className:d.categoriesDropDown_item,children:[e.jsxs("div",{className:d.categoriesDropDown_item_top,onClick:()=>i(!_),children:[e.jsx("h2",{className:d.categoriesDropDown_item_top_title,children:n}),e.jsx("button",{className:d.categoriesDropDown_item_top_btn,onClick:()=>i(!_),children:e.jsx("div",{className:`${d.categoriesDropDown_item_top_arrow} ${_?d.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${d.categoriesDropDown_item_block} ${_?d.categoriesDropDown_item_block_open:""}`,children:l.map(p=>e.jsx("div",{className:`${d.categoriesDropDown_item_block_line} ${p.title==n?d.categoriesDropDown_item_block_active:""}`,onClick:()=>c(p),children:p.title},p.id))})]}),o&&e.jsx(Ua,{title:"Выберите вариант",setOpenModal:a})]})}const hr="_banner_1eodh_1",vr="_banner_title_1eodh_5",gr="_products_banner_1eodh_10",br="_products_banner_wrap_1eodh_13",xr="_products_banner_wrap_btn_1eodh_19",fr="_products_banner_wrap_filter_1eodh_30",yr="_products_banner_wrap_filter_text_1eodh_40",kr="_products_banner_form_1eodh_48",jr="_products_banner_form_wrap_1eodh_53",wr="_products_banner_form_wrap_btn_1eodh_59",Cr="_products_banner_form_wrap_input_1eodh_75",Sr="_products_banner_form_wrap_icon_1eodh_83",Nr="_table_1eodh_87",Ir="_table_tbody_1eodh_92",$r="_table_tbody_tr_1eodh_97",Dr="_table_tbody_tr_active_1eodh_100",Or="_table_tbody_img_1eodh_103",Pr="_table_tr_1eodh_108",Fr="_table_th_1eodh_111",Ar="_table_td_1eodh_122",Lr="_table_td_edit_1eodh_130",Mr="_table_btn_1eodh_136",Br="_versions_1eodh_144",Wr="_versions_block_1eodh_149",Er="_versions_block_top_1eodh_154",Ur="_versions_block_top_title_1eodh_164",Rr="_versions_block_top_arrow_1eodh_168",zr="_versions_block_top_arrow_active_1eodh_177",Tr="_versions_block_dropdown_1eodh_180",Vr="_versions_block_dropdown_item_1eodh_195",qr="_versions_block_dropdown_open_1eodh_206",Kr="_add_banner_1eodh_213",Hr="_add_banner_header_1eodh_221",Xr="_add_banner_header_title_1eodh_225",Gr="_add_banner_content_1eodh_229",Zr="_add_banner_content_product_1eodh_232",Jr="_add_banner_content_link_1eodh_254",Qr="_add_banner_content_info_1eodh_262",Yr="_add_banner_content_info_text_1eodh_266",ei="_add_banner_content_download_1eodh_272",ti="_add_banner_content_download_link_1eodh_281",si="_add_banner_content_btns_1eodh_293",oi="_add_banner_content_btn_1eodh_293",ni="_category_wrap_1eodh_311",ai="_modalCategory_1eodh_315",ri="_modalCategory_block_1eodh_323",ii="_modalCategory_nav_1eodh_328",ci="_modalCategory_nav_title_1eodh_335",li="_modalCategory_content_1eodh_341",_i="_modalCategory_content_message_1eodh_348",di="_modalCategory_content_link_1eodh_356",pi="_modalCategory_content_link_active_1eodh_384",ui="_modalCategory_content_item_1eodh_394",mi="_modalCategory_content_block_1eodh_416",hi="_modalCategory_content_block_title_1eodh_420",vi="_add_link_1eodh_427",gi="_add_link_title_1eodh_430",bi="_add_link_input_1eodh_434",xi="_modal_btn_1eodh_443",F={banner:hr,banner_title:vr,products_banner:gr,products_banner_wrap:br,products_banner_wrap_btn:xr,products_banner_wrap_filter:fr,products_banner_wrap_filter_text:yr,products_banner_form:kr,products_banner_form_wrap:jr,products_banner_form_wrap_btn:wr,products_banner_form_wrap_input:Cr,products_banner_form_wrap_icon:Sr,table:Nr,table_tbody:Ir,table_tbody_tr:$r,table_tbody_tr_active:Dr,table_tbody_img:Or,table_tr:Pr,table_th:Fr,table_td:Ar,table_td_edit:Lr,table_btn:Mr,versions:Br,versions_block:Wr,versions_block_top:Er,versions_block_top_title:Ur,versions_block_top_arrow:Rr,versions_block_top_arrow_active:zr,versions_block_dropdown:Tr,versions_block_dropdown_item:Vr,versions_block_dropdown_open:qr,add_banner:Kr,add_banner_header:Hr,add_banner_header_title:Xr,add_banner_content:Gr,add_banner_content_product:Zr,add_banner_content_link:Jr,add_banner_content_info:Qr,add_banner_content_info_text:Yr,add_banner_content_download:ei,add_banner_content_download_link:ti,add_banner_content_btns:si,add_banner_content_btn:oi,category_wrap:ni,modalCategory:ai,modalCategory_block:ri,modalCategory_nav:ii,modalCategory_nav_title:ci,modalCategory_content:li,modalCategory_content_message:_i,modalCategory_content_link:di,modalCategory_content_link_active:pi,modalCategory_content_item:ui,modalCategory_content_block:mi,modalCategory_content_block_title:hi,add_link:vi,add_link_title:gi,add_link_input:bi,modal_btn:xi};function ut({color:o="black",title:t="",versionList:s=[],className:a,openBlock:n,setOpenBlock:_,setVersionList:l}){const[i,r]=m.useState(s[0].title),{setChangeCategoryStyles:c}=de(),p=u=>{const h=s.map(v=>({...v,isOpen:v.id===u.id}));u.title=="Категория"&&c(!0),r(u.title),l(h),_(!1)};return e.jsxs("div",{className:a??F.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:F.versions_block,children:[e.jsxs("div",{className:F.versions_block_top,children:[e.jsx("h2",{className:F.versions_block_top_title,style:{color:o},children:i}),e.jsx("button",{className:F.versions_block_top_btn,onClick:()=>_(!n),children:e.jsx("div",{className:`${F.versions_block_top_arrow} ${n?F.versions_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${F.versions_block_dropdown} ${n?F.versions_block_dropdown_open:""}`,children:s.map(u=>e.jsx("span",{className:F.versions_block_dropdown_item,onClick:()=>p(u),children:u.title},u.id))})]})]})}function Ge({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:_=1.1,status:l=!1,disabled:i=!1}){const r={width:`${o}px`,height:`${o/2-o/20}px`,background:l?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer",opacity:i?1:.3},c={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${l?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${_}) translateX(${l?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:c})})}const We=({arr:o=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:a=!1,isEdit:n=!1,isCategory:_,isLinks:l,setPickedProduct:i,setPickedProductActive:r})=>{const{bannersArr:c,selectedProductEdit:p,imageUrlEditBanner:u,bannersArrProduct:h,bannersArrLink:v,setBannersArrLink:g,setSelectedProductEdit:S,setImageUrlEditBanner:D,setCurrentProductOpen:P,clearPickedProductsArr:j,setBannersArrProduct:w,setBannersArr:f,setBannersArrCategory:k}=de(),[x,b]=m.useState("");m.useState(new Set);const I=y=>c.some(L=>L.title===y&&L.isBannerActive),C=(y,L)=>{if(s==="byId"&&(i==null||i(y)),n&&L){const E={id:te(),bannerUrl:u,title:L.title,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};E.title!=null&&!I(E.title)?(w(h.map(A=>A.id===p?E:A)),f(c.map(A=>A.id===p?E:A)),P(!1)):console.warn("Объект с таким brandName уже существует.")}b(y)},O=(y,L)=>{s==="productId"&&(r==null||r(y),C==null||C(y),b(y),j(),L.id&&S(L.id),L.bannerUrl&&D(L.bannerUrl))},W=(y,L,E)=>{if(y.stopPropagation(),E.isBannerActive)a&&(w(t.map(A=>A.id===L?{...A,toggleSwitcher:!A.toggleSwitcher}:A)),f(c.map(A=>A.id===L?{...A,toggleSwitcher:!A.toggleSwitcher}:A))),_&&(k(t.map(A=>A.id===L?{...A,toggleSwitcher:!A.toggleSwitcher}:A)),f(c.map(A=>A.id===L?{...A,toggleSwitcher:!A.toggleSwitcher}:A))),l&&(g(t.map(A=>A.id===L?{...A,toggleSwitcher:!A.toggleSwitcher}:A)),f(c.map(A=>A.id===L?{...A,toggleSwitcher:!A.toggleSwitcher}:A)));else return},U=y=>y.id!==void 0,q=(y,L)=>{y.stopPropagation(),w(t.map(E=>E.id===L.id?{...E,isBannerActive:!1,title:"-"}:E)),f(c.map(E=>E.id===L.id?{...E,isBannerActive:!1,title:"-"}:E))};return e.jsxs("table",{className:F.table,children:[e.jsx("thead",{className:F.table_thead,children:e.jsx("tr",{className:F.table_tr,children:o.map(y=>e.jsx("th",{className:F.table_th,children:y.title},y.id))})}),e.jsx("tbody",{className:F.table_tbody,children:t==null?void 0:t.map(y=>{var L;return e.jsxs("tr",{className:`${F.table_tbody_tr} ${!n&&x==y.id?F.table_tbody_tr_active:""}`,style:{cursor:a||_||l?"pointer":"default"},onClick:()=>O(y.id,y),children:[e.jsxs("td",{className:F.table_td,children:[s==="byId"&&(y==null?void 0:y.title),n?y.title:"",a&&e.jsx("img",{className:F.table_tbody_img,src:y.bannerUrl??"",alt:"Banner"}),_&&e.jsx("img",{className:F.table_tbody_img,src:y.bannerUrl??"",alt:"Banner"}),l&&e.jsx("img",{className:F.table_tbody_img,src:y.bannerUrl??"",alt:"Banner"})]}),e.jsxs("td",{className:F.table_td,children:[_?y.categoryTitle:"",a?y.title:(L=y.nomenclature)==null?void 0:L.price,l&&y.title]}),e.jsx("td",{className:F.table_td,children:a?"":y.crmAmount}),e.jsx("td",{className:F.table_td,children:_?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:E=>{const A=y;A.id&&W(E,A.id,y)},children:e.jsx(Ge,{width:62,status:U(y)&&y.toggleSwitcher&&y.isBannerActive,disabled:U(y)&&y.isBannerActive})}):a?e.jsxs("div",{className:F.table_td_edit,children:[y.brandName!=="-"&&e.jsx("button",{className:F.table_btn,style:{width:"156px",background:"#FFB5B5"},onClick:E=>q(E,y),children:"Открепить продукт"}),e.jsx("div",{onClick:E=>{const A=y;A.id&&W(E,A.id,y)},children:e.jsx(Ge,{width:62,status:U(y)&&y.toggleSwitcher&&y.isBannerActive,disabled:U(y)&&y.isBannerActive})})]}):l?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:E=>{const A=y;A.id&&W(E,A.id,y)},children:e.jsx(Ge,{width:62,status:U(y)&&y.toggleSwitcher&&y.isBannerActive,disabled:U(y)&&y.isBannerActive})}):e.jsx("button",{className:F.table_btn,onClick:()=>C(y.id,y),children:n?"Заменить":"Выбрать"})})]},(U(y),y.id))})})]})};function fi({setCancel:o}){return e.jsxs("div",{className:Z.modalCategory_nav,children:[e.jsx("h2",{className:Z.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:Z.modalCategory_nav_close,onClick:o,children:e.jsx(z,{width:24,height:24,name:"XMarkIcon"})})]})}function yi({superCategory:o,category:t,superId:s,setLocalPicked:a,setSuperId:n,setMessageStatus:_,setSubCategories:l,fetchCategories:i,setSuperCategoryObj:r}){const{changeCategoryStyles:c,categoriesArr:p,setCategoriesArr:u,setActiveCategory:h,setActiveCategoryTitle:v}=de(),{setCurrentCategory:g}=ve(),[S,D]=m.useState(10),P=(w,f)=>{w.preventDefault(),i("category",1,10,f.id),l([]);const k=t.filter(x=>x.parentId==f.id);if(g(k),a(f),n(f.id),_(!1),c&&f.label&&(h(f.label),v(f.name.ru)),c){const x=p.filter(b=>b.label!==f.label);x.push(f),u(x)}r==null||r(f)},j=()=>{const w=S+10;D(w),i("super",1,w),console.log("addPage",w)};return e.jsxs("div",{className:Z.modalCategory_content_block,children:[e.jsx("h2",{className:Z.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:Z.modalCategory_content_item,children:[o.map(w=>e.jsxs(K,{to:"#",className:`${Z.modalCategory_content_link} ${w.id==s?Z.modalCategory_content_link_active:""} `,onClick:f=>P(f,w),children:[w.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},w.id)),e.jsx(K,{to:"#",className:Z.modalCategory_content_link,onClick:()=>j(),children:"Ещё..."})]})]})}function ki({superId:o,categoryId:t,category:s,setSubCategory:a,fetchCategories:n}){const[_,l]=m.useState(10),i=()=>{const c=_+10;l(c),n("category",1,c,o),console.log("addPage",c,o)},r=(c,p)=>{a(c,p)};return s.length>0&&e.jsxs("div",{className:Z.modalCategory_content_block,children:[e.jsx("h2",{className:Z.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:Z.modalCategory_content_item,children:[s==null?void 0:s.map(c=>e.jsxs(K,{to:"#",className:`${Z.modalCategory_content_link} ${c.id==t?Z.modalCategory_content_link_active:""} `,onClick:p=>r(p,c),children:[c.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},c.id)),e.jsx(K,{to:"#",className:Z.modalCategory_content_link,onClick:()=>i(),children:"Ещё..."})]})]})}function ji({subId:o,categoryId:t,subCategories:s,setSubProductsList:a,fetchCategories:n}){const[_,l]=m.useState(10),i=()=>{const r=_+10;l(r),n("subCategory",1,r,t),console.log("addPage",r)};return s.length>0&&e.jsxs("div",{className:Z.modalCategory_content_block,children:[e.jsx("h2",{className:Z.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:Z.modalCategory_content_item,children:[s==null?void 0:s.map(r=>e.jsxs(K,{to:"#",className:`${Z.modalCategory_content_link} ${r.id==o?Z.modalCategory_content_link_active:""} `,onClick:c=>a(c,r),children:[r.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},r.id)),e.jsx(K,{to:"#",className:Z.modalCategory_content_link,onClick:()=>i(),children:"Ещё..."})]})]})}function wi({setSettings:o,setCancel:t}){return e.jsxs("div",{className:Z.settings_content_buttons,children:[e.jsx("button",{className:`${Z.settings_content_btn} ${Z.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${Z.settings_content_btn} ${Z.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function Ke({isProduct:o,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:a,setCurrentCategory:n,setCurrentSubCategory:_}=ve(),{changeCategoryStyles:l,categoriesArr:i,pickedProducts:r,setCategoriesArr:c,setPickedProducts:p,setActiveCategory:u,setActiveCategoryTitle:h,setOpenModalCategoryBanner:v}=de(),g=l?F:Z;Ve();const[S,D]=m.useState(0),[P,j]=m.useState(0),[w,f]=m.useState(0),[k,x]=m.useState({}),[b,I]=m.useState(!1),[C,O]=m.useState("Выберите категорию"),[W,U]=m.useState([]),[q,y]=m.useState([]),[L,E]=m.useState([]),[A,le]=m.useState(null),[pe,be]=m.useState(null),[he,ye]=m.useState(null);m.useEffect(()=>{console.log("pickedProducts",r)},[r]),m.useEffect(()=>{je("super",1,10)},[]);const[$]=m.useState(1),[N]=m.useState(10);m.useState([]);const H=(ne,G)=>{ne.preventDefault(),je("subCategory",1,10,G.id);const ue=L.filter(xe=>xe.parentId==G.id);if(_(ue),x(G),j(G.id),I(!1),l&&G.label&&(u(G.label),h(G.name.ru)),l){const xe=i.filter(Le=>Le.label!==G.label);xe.push(G),c(xe)}be(G)},Y=(ne,G)=>{if(ne.preventDefault(),x(G),f(G.id),I(!1),l&&G.label&&(u(G.label),h(G.name.ru)),l){const ue=i.filter(xe=>xe.name.ru!==G.name.ru);ue.push(G),console.log("newCategories",ue),c(ue)}ye(G)};async function re(ne){const G=ke.get("multi-store");try{const ue=await ae.get(`web-nomenclatures?multiStoreId=${G}&categoryId=${ne}&page=${$}&perPage=${N}`);p(ue.data.data)}catch(ue){console.log("error",ue)}}const Oe=()=>{if(Object.keys(k).length===0){I(!0),O("Выберите Суперкотегорию");return}if(q.length>0&&P===0){I(!0),O("Выберите Категорию");return}if(L.length>0&&w===0){I(!0),O("Выберите Подкотегорию");return}console.log(k),re(k.id);const ne=[];A&&ne.push(A),pe&&ne.push(pe),he&&ne.push(he),c(ne),Pe()},Pe=()=>{a(k),s(!1),D(0),j(0),f(0),x({}),n([]),_([]),I(!1),O("Выберите категорию"),v(!1)},je=async(ne,G,ue,xe)=>{try{const Le=ne=="super"?`https://api.mcrm.uz/api/categories?&page=${G}&perPage=${ue}`:`https://api.mcrm.uz/api/categories?parentId=${xe}&page=${G}&perPage=${ue}`,Xe=(await Te.get(Le)).data.data.map(Dt=>({...Dt,label:ne==="super"?"Супер категория":ne==="category"?"Категория":"Субкатегория"}));ne==="super"&&U([...Xe]),ne==="category"&&y([...Xe]),ne==="subCategory"&&E([...Xe])}catch(Le){console.error(`Ошибка произошла при получении ${ne} категорий`,Le)}};return e.jsx("div",{className:g.modalCategory,children:e.jsxs("div",{className:g.modalCategory_block,children:[!l&&e.jsx(fi,{setCancel:Pe}),e.jsx("p",{className:g.modalCategory_content_message,children:b?C:""}),e.jsxs("div",{className:g.modalCategory_content,children:[e.jsx(yi,{superId:S,superCategory:W,category:q,setLocalPicked:x,setSuperId:D,setMessageStatus:I,fetchCategories:je,setSubCategories:E,setSuperCategoryObj:le}),e.jsx(ki,{superId:S,categoryId:P,category:q,setSubCategory:H,fetchCategories:je}),e.jsx(ji,{subId:w,categoryId:P,subCategories:L,setSubProductsList:Y,fetchCategories:je}),!t&&e.jsx(wi,{setSettings:Oe,setCancel:Pe})]})]})})}const Fe=({title:o,currentProductEdit:t,isEdit:s,isCategory:a,isLinks:n,linkTextEdit:_,deleteBanner:l,isProduct:i})=>{const{currentProductTable:r,changeCategoryStyles:c,categoriesArr:p,bannersArr:u,linksPageBannerText:h,openLinksPage:v,openProductsPage:g,activeCategory:S,activeCategoryTitle:D,bannersArrProduct:P,bannersArrCategory:j,bannersArrLink:w,setBannersArrLink:f,setCurrentProductOpen:k,clearCategoriesArr:x,addBannerToArr:b,setLinksPageBannerText:I,setBannersArrProduct:C,setBannersArr:O,setBannersArrCategory:W}=de(),[U,q]=m.useState(null),[y,L]=m.useState(null),[E,A]=m.useState(""),le=$=>{if($.target.files&&$.target.files[0]){const N=$.target.files[0];console.log("file",N),L(N);const H=new FileReader;H.onloadend=()=>{const Y=H.result;q(Y)},H.readAsDataURL(N)}},pe=()=>{document.getElementById("upload").click()},be=()=>{if(!y)return;const $=()=>{switch(S){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}};if(y&&r&&g){const N={id:te(),bannerUrl:U||"",title:r.title,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(re=>re.title===N.title)||b(N),k(!1),q(null),L(null);const Y=document.getElementById("upload");Y&&(Y.value="")}if(c&&v==!1){const N=$(),H={id:te(),bannerUrl:U||"",categoryLabel:N,categoryTitle:D,isCategoryBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(Oe=>Oe.categoryTitle===H.categoryTitle)||b(H),q(null),L(null);const re=document.getElementById("upload");re&&(re.value="")}if(v&&h){const N={id:te(),bannerUrl:U||"",title:h,isLinkBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(re=>re.title===N.title)||(b(N),console.log("bannersArr",u)),q(null),L(null),I("");const Y=document.getElementById("upload");Y&&(Y.value="")}},he=()=>{U===null?(console.log("bannersArrProduct",P),console.log("bannersArr",u),s&&(a&&(A((()=>{switch(S){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}})()),W(j.map(N=>N.id===(r==null?void 0:r.id)?{...N,categoryTitle:D,activeCategoryEdit:E}:N))),n&&(f(w.map($=>$.id===(t==null?void 0:t.id)?{...$,title:_}:$)),O(u.map($=>$.id===(t==null?void 0:t.id)?{...$,title:_}:$))),k(!1))):s&&(i&&(C(P.map($=>$.id===(t==null?void 0:t.id)?{...$,bannerUrl:U}:$)),O(u.map($=>$.id===(t==null?void 0:t.id)?{...$,bannerUrl:U}:$))),a&&(W(j.map($=>$.id===(t==null?void 0:t.id)?{...$,bannerUrl:U,categoryTitle:D}:$)),O(u.map($=>$.id===(t==null?void 0:t.id)?{...$,bannerUrl:U,categoryTitle:D}:$))),n&&(f(w.map($=>$.id===(t==null?void 0:t.id)?{...$,bannerUrl:U,title:_}:$)),O(u.map($=>$.id===(t==null?void 0:t.id)?{...$,bannerUrl:U,title:_}:$))),k(!1))},ye=()=>{l==null||l(t==null?void 0:t.id),k(!1)};return e.jsxs("div",{className:F.add_banner,children:[e.jsx("div",{className:F.add_banner_header,children:e.jsx("h3",{className:F.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:F.add_banner_content,children:[c?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:F.add_banner_content_product,children:[o,":",a&&e.jsxs("span",{children:[" ",t==null?void 0:t.categoryTitle]}),n&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),p==null?void 0:p.map($=>e.jsx("span",{className:F.add_banner_content_product,children:$.name.ru},$.name.ru))]}):e.jsx("p",{className:F.add_banner_content_product,children:v?`${o}: ${h}`:`${o}: ${r==null?void 0:r.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:le}),e.jsx("label",{htmlFor:"upload",className:F.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:F.add_banner_content_info,children:e.jsx("p",{className:F.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:F.add_banner_content_download,children:e.jsx("img",{src:U||(t==null?void 0:t.bannerUrl),alt:"",style:{width:"555px",height:"229px",objectFit:"cover"}})}):e.jsx("div",{className:F.add_banner_content_download,children:U?e.jsx("img",{src:U,alt:"Uploaded",className:F.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:F.add_banner_content_download_link,onClick:()=>pe(),children:[e.jsx(z,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:F.add_banner_content_btns,children:[e.jsx("button",{className:F.add_banner_content_btn,onClick:ye,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:F.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>he(),children:"Изменить"})]}):e.jsxs("div",{className:F.add_banner_content_btns,children:[e.jsx("button",{className:F.add_banner_content_btn,onClick:()=>k(!1),children:"Отмена"}),e.jsx("button",{className:F.add_banner_content_btn,onClick:()=>be(),children:"Сохранить"})]})]})]})};function mt({inputText:o,setInputText:t,filteredUsers:s,isProductEdit:a}){const{categoriesArr:n,filteredSubCategory:_,filteredCategory:l,filteredSuperCategory:i,setCurrentProductOpen:r,setChangeCategoryStyles:c,setOpenModalCategoryBanner:p,clearCategoriesArr:u,setFilteredSubCategory:h,setFilteredCategory:v,setFilteredSuperCategory:g}=de(),S=()=>{a&&r(!1),c(!1),p(!0),u()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:F.products_banner_wrap,children:[e.jsx("button",{className:F.products_banner_wrap_btn,onClick:S,children:e.jsx(z,{name:"FunnelIcon",width:20})}),(n==null?void 0:n.length)!==0&&e.jsx("div",{className:F.products_banner_wrap_filter,children:n==null?void 0:n.map(D=>e.jsx("span",{className:F.products_banner_wrap_filter_text,children:D.name.ru},D.id))}),e.jsxs("form",{action:"",className:F.products_banner_form,onSubmit:D=>s==null?void 0:s(D),children:[e.jsxs("div",{className:F.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:F.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:o,onChange:D=>t==null?void 0:t(D.target.value)}),e.jsx(z,{className:F.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:F.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const Ci=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],Si=()=>{const{openModalCategoryBanner:o,currentProductOpen:t,searchTextBanner:s,pickedProducts:a,webProductsArr:n,setCurrentProductTable:_,clearCategoriesArr:l,setSearchTextBanner:i,clearPickedProductsArr:r,setOpenLinksPage:c,setOpenProductsPage:p,setCurrentProductOpen:u,setOpenModalCategoryBanner:h}=de(),[v,g]=m.useState(""),S=f=>{f.preventDefault(),i(v),l()},D=f=>{const k=n.find(x=>x.id===f);k&&(console.log("currentProduct",k),_(k),u(!0))},[P,j]=m.useState([]);m.useEffect(()=>{let f=n;f=f==null?void 0:f.filter(k=>{var x;return(x=k.title)==null?void 0:x.toLowerCase().includes(s.toLowerCase())}),j(f)},[s,n]);const w=s?P:a;return m.useEffect(()=>{v===""&&(i(""),r(),u(!1)),o&&g("")},[v,o]),m.useEffect(()=>{u(!1),c(!1),p(!0),h(!1),l()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(mt,{inputText:v,setInputText:g,filteredUsers:S}),e.jsx(We,{arrToUse:w,arr:Ci,setPickedProduct:D,selectionMode:"byId"})]}),o&&e.jsx(Ke,{isProduct:!0}),t&&e.jsx(Fe,{title:"Товар"})]})},Ni=()=>{const{categoriesArr:o,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:a}=de();return m.useEffect(()=>{t(!1),s(!0),a(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:F.category_wrap,children:e.jsx(Ke,{isCategory:!0})}),e.jsx(Fe,{title:"Каталог",categories:o})]})},Ii=()=>{const{linksPageBannerText:o,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:a,setOpenProductsPage:n}=de();return m.useEffect(()=>{s(!0),a(!1),t(""),n(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F.add_link,children:[e.jsx("h3",{className:F.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:F.add_link_input,type:"text",value:o,onChange:_=>t(_.target.value)})]}),e.jsx(Fe,{title:"Страница"})]})};function $i(){const{bannerDropdownOptions:o,openBannerDropdown:t,setBannerDropdownOptions:s,setOpenBannerDropdown:a,resetDropdownToDefault:n}=de(),_=()=>{const l=o.find(i=>i.isOpen);if(!l)return null;switch(l.title){case"Продукт":return e.jsx(Si,{});case"Категория":return e.jsx(Ni,{});case"Страница":return e.jsx(Ii,{});default:return null}};return m.useEffect(()=>{n()},[]),e.jsxs("div",{className:F.banner,children:[e.jsx("h3",{className:F.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(ut,{openBlock:t,setOpenBlock:a,versionList:o,setVersionList:s}),e.jsx("div",{className:F.banner_content,children:_()})]})}const Di=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Oi=()=>{const{pickedProducts:o,currentProductOpen:t,openModalCategoryBanner:s,bannersArr:a,searchTextBanner:n,currentProductTable:_,bannersArrProduct:l,webProductsArr:i,clearPickedProductsArr:r,clearCategoriesArr:c,setCurrentProductOpen:p,setCurrentProductTable:u,setSearchTextBanner:h,setOpenLinksPage:v,setOpenProductsPage:g,setOpenModalCategoryBanner:S,setBannersArrProduct:D,setBannersArr:P}=de(),[j,w]=m.useState(""),[f,k]=m.useState([]),x=O=>{O.preventDefault(),h(j),c()},b=O=>{const W=l.find(U=>U.id===O);W&&(u(W),p(!0))};m.useEffect(()=>{let O=i;O=O==null?void 0:O.filter(W=>{var U;return(U=W.title)==null?void 0:U.toLowerCase().includes(n.toLowerCase())}),k(O)},[n,i]);const I=O=>{D(l.filter(W=>W.id!=O)),P(a.filter(W=>W.id!==O))},C=n?f:o;return m.useEffect(()=>{p(!1),v(!1),g(!0),S(!1),c()},[p,v,g,S,c]),m.useEffect(()=>{j===""&&(h(""),r())},[j]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arrToUse:l,arr:Di,setPickedProductActive:b,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(mt,{filteredUsers:x,setInputText:w}),e.jsx(We,{arrToUse:C,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Fe,{title:"Продукт",currentProductEdit:_,isEdit:!0,isProduct:!0,deleteBanner:I})]})]}),s&&e.jsx(Ke,{})]})},Pi=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Fi=()=>{const{bannersArr:o,bannersArrCategory:t,currentProductTable:s,currentProductOpen:a,setCurrentProductOpen:n,setBannersArr:_,setCurrentProductTable:l,setBannersArrCategory:i}=de(),r=p=>{const u=t.find(h=>h.id===p);u&&(l(u),n(!0),console.log("currentProductTable",s))},c=p=>{i(t.filter(u=>u.id!=p)),_(o.filter(u=>u.id!==p))};return m.useEffect(()=>{n(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arr:Pi,arrToUse:t,selectionMode:"productId",isCategory:!0,setPickedProductActive:r}),a&&e.jsx(Ke,{isCategory:!0}),a&&e.jsx(Fe,{title:"Каталог",currentProductEdit:s,isEdit:!0,isCategory:!0,deleteBanner:c})]})},Ai=({setLinkText:o,currentProductEdit:t})=>{de();const[s,a]=m.useState(t.brandName||""),n=_=>{a(_),o(_)};return m.useEffect(()=>{a(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:F.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:F.add_link_input,type:"text",onChange:_=>n(_.target.value),value:s})]})},Li=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Mi=()=>{const{bannersArr:o,bannersArrLink:t,currentProductOpen:s,currentProductTable:a,setBannersArr:n,setBannersArrLink:_,setCurrentProductTable:l,setCurrentProductOpen:i}=de(),[r,c]=m.useState(""),p=h=>{const v=t.find(g=>g.id===h);v&&(l(v),console.log("currentProductTable",a),i(!0))},u=h=>{_(t.filter(v=>v.id!=h)),n(o.filter(v=>v.id!==h))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arr:Li,arrToUse:t,selectionMode:"productId",setPickedProductActive:p,isLinks:!0}),s&&e.jsxs(e.Fragment,{children:[e.jsx(Ai,{setLinkText:c,currentProductEdit:a}),e.jsx(Fe,{title:"Страница",currentProductEdit:a,deleteBanner:u,isLinks:!0,isEdit:!0,linkTextEdit:r})]})]})};function Bi(){const{bannerDropdownOptions:o,openBannerDropdown:t,bannersArr:s,bannersArrProduct:a,bannersArrCategory:n,bannersArrLink:_,setBannerDropdownOptions:l,setOpenBannerDropdown:i,resetDropdownToDefault:r,setBannersArrProduct:c,setBannersArrCategory:p,setBannersArrLink:u}=de();m.useEffect(()=>{c(s.filter(v=>v.isProductBanner===!0)),p(s.filter(v=>v.isCategoryBanner===!0)),u(s.filter(v=>v.isLinkBanner===!0))},[]);const h=()=>{const v=o.find(g=>g.isOpen);if(!v)return null;switch(v.title){case"Продукт":return e.jsx(Oi,{});case"Категория":return e.jsx(Fi,{});case"Страница":return e.jsx(Mi,{});default:return null}};return m.useEffect(()=>{r()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:F.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(ut,{openBlock:t,setOpenBlock:i,versionList:o,setVersionList:l})]}),e.jsx("div",{className:F.banner_content,children:h()})]})}const Wi=[{id:1,title:"Новый",href:"/admin/settings/banner"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner"}];function Ei(){const[o]=m.useState(1),[t]=m.useState(10),a=oe().pathname,{setCurrentProductOpen:n,setWebProductsArr:_}=de();m.useEffect(()=>{n(!1)},[]);async function l(){const i=ke.get("multi-store");try{const r=await ae.get(`web-nomenclatures?multiStoreId=${i}&page=${o}&perPage=${t}`);_(r.data.data)}catch(r){console.log("error",r)}}return m.useEffect(()=>{l()},[]),e.jsx("div",{className:d.banner,children:e.jsxs("div",{className:d.banner_nav,children:[e.jsx("ul",{className:d.banner_nav_list,children:Wi.map(i=>e.jsx("li",{children:e.jsx(K,{to:i.href,className:`${d.banner_nav_link} ${i.href==a?d.banner_nav_link_active:""}`,children:i.title})},i.id))}),a.startsWith("/admin/settings/banner")&&e.jsxs("div",{className:d.settings_content_base,children:[a=="/admin/settings/banner"&&e.jsx($i,{}),a=="/admin/settings/banner/activeBanner"&&e.jsx(Bi,{})]})]})})}const Ui="_contacts_mxkpi_1",Ri="_contacts_content_mxkpi_4",zi="_contacts_nav_mxkpi_7",Ti="_contacts_nav_list_mxkpi_10",Vi="_contacts_nav_link_mxkpi_15",qi="_contacts_nav_link_active_mxkpi_30",Ki="_contacts_btn_mxkpi_34",Hi="_socials_mxkpi_55",Xi="_socials_title_mxkpi_60",Gi="_socials_content_mxkpi_65",Zi="_socials_content_wrap_mxkpi_70",Ji="_socials_content_wrap_input_mxkpi_75",Qi="_aboutUs_mxkpi_84",Yi="_aboutUs_add_image_mxkpi_87",ec="_aboutUs_content_mxkpi_90",tc="_aboutUs_image_wrap_mxkpi_95",sc="_aboutUs_download_mxkpi_104",oc="_aboutUs_text_mxkpi_112",nc="_aboutUs_inputs_mxkpi_120",ac="_aboutUs_inputs_wrap_mxkpi_126",rc="_aboutUs_inputs_wrap_title_mxkpi_130",ic="_aboutUs_inputs_wrap_input_mxkpi_136",cc="_aboutUs_inputs_wrap_textarea_mxkpi_144",lc="_aboutUs_btn_mxkpi_152",_c="_aboutUs_week_info_mxkpi_172",dc="_aboutUs_week_info_text_mxkpi_178",pc="_aboutUs_week_content_mxkpi_183",uc="_aboutUs_week_wrap_mxkpi_189",mc="_aboutUs_week_wrap_colored_mxkpi_193",hc="_aboutUs_week_wrap_colored_active_mxkpi_203",vc="_aboutUs_week_wrap_colored_last_mxkpi_206",gc="_aboutUs_week_wrap_day_mxkpi_209",bc="_aboutUs_week_wrap_schedule_mxkpi_215",xc="_aboutUs_week_wrap_input_mxkpi_221",fc="_custom_checkbox_mxkpi_241",yc="_custom_checkbox_input_mxkpi_247",kc="_custom_checkbox_box_mxkpi_252",jc="_custom_checkbox_box_icon_mxkpi_261",R={contacts:Ui,contacts_content:Ri,contacts_nav:zi,contacts_nav_list:Ti,contacts_nav_link:Vi,contacts_nav_link_active:qi,contacts_btn:Ki,socials:Hi,socials_title:Xi,socials_content:Gi,socials_content_wrap:Zi,socials_content_wrap_input:Ji,aboutUs:Qi,aboutUs_add_image:Yi,aboutUs_content:ec,aboutUs_image_wrap:tc,aboutUs_download:sc,aboutUs_text:oc,aboutUs_inputs:nc,aboutUs_inputs_wrap:ac,aboutUs_inputs_wrap_title:rc,aboutUs_inputs_wrap_input:ic,aboutUs_inputs_wrap_textarea:cc,aboutUs_btn:lc,aboutUs_week_info:_c,aboutUs_week_info_text:dc,aboutUs_week_content:pc,aboutUs_week_wrap:uc,aboutUs_week_wrap_colored:mc,aboutUs_week_wrap_colored_active:hc,aboutUs_week_wrap_colored_last:vc,aboutUs_week_wrap_day:gc,aboutUs_week_wrap_schedule:bc,aboutUs_week_wrap_input:xc,custom_checkbox:fc,custom_checkbox_input:yc,custom_checkbox_box:kc,custom_checkbox_box_icon:jc},wc=({temporaryImageUrl:o,setTemporaryImageUrl:t})=>{Ze();const[s,a]=m.useState(null),[n,_]=m.useState(null);m.useEffect(()=>{const r=localStorage.getItem("savedLogoImageUrl");r&&(a(r),t(r))},[t]);const l=r=>{if(r.target.files&&r.target.files[0]){const c=r.target.files[0];_(c);const p=new FileReader;p.onloadend=()=>{const u=p.result;a(u),t(u),localStorage.setItem("savedLogoImageUrl",u)},p.readAsDataURL(c)}},i=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:R.aboutUs_add_image,children:[e.jsx("div",{className:R.aboutUs_image_wrap,children:s||o?e.jsx("img",{src:o||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>i(),children:e.jsx(z,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:l}),e.jsx("label",{htmlFor:"upload",className:R.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:R.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function Ne(){return Ne=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},Ne.apply(this,arguments)}const ht=(o,t)=>{const s={};for(const a in o)t.indexOf(a)===-1&&(s[a]=o[a]);return s},vt=se.createContext(null),He=se.createContext(null),Cc=o=>t=>se.createElement(He.Consumer,null,s=>se.createElement(o,Ne({parent:s},t))),Sc=(o=[])=>{const[t,s]=m.useState(!1),a=m.useRef(o),n=(()=>{const l=m.useContext(vt);if(l===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return l})(),_=n.getApi();return m.useEffect(()=>{n.load().then(()=>Promise.all(a.current.map(n.loadModule))).then(()=>s(!0))},[]),t&&_?_:null},Nc=()=>{},Ic=["onLoad","onError","modules","apiLoader"];function gt(o,t=!1,s=[]){return a=>{const{width:n,height:_,modules:l=[],onLoad:i=Nc}=a,r=Sc(s.concat(l)),c=!t||!!r,p=ht(a,Ic);return m.useEffect(()=>r?i(r):void 0,[r]),c?se.createElement(o,Ne({ymaps:r},p)):se.createElement("div",{style:{width:n,height:_}})}}const $c=typeof window<"u",ot={lang:"ru_RU",load:"",ns:"",mode:"release"},Dc=o=>{const{version:t="2.1",enterprise:s=!1,query:a={lang:"ru_RU",load:"",ns:""},preload:n=!1,children:_}=o,l=m.useRef((i=>{const{query:r=ot}=i,c=Date.now().toString(32),p=r.ns||"",u="__yandex-maps-api-onload__$$"+c,h="__yandex-maps-api-onerror__$$"+c,v=$c?window:{},g={};let S;const D=()=>p?v[p]:S,P=()=>{delete v[u],delete v[h]};return{load:()=>{if(D())return Promise.resolve(S);if(g[p])return g[p];const j={onload:u,onerror:h,...ot,...r},w=Object.keys(j).map(k=>`${k}=${j[k]}`).join("&"),f=[`https://${i.enterprise?"enterprise.":""}api-maps.yandex.ru`,i.version,"?"+w].join("/");return g[p]=new Promise((k,x)=>{v[u]=b=>{P(),b.ready(()=>{S=b,k(b)})},v[h]=b=>{P(),x(b)},(b=>new Promise((I,C)=>{const O=document.createElement("script");O.type="text/javascript",O.onload=I,O.onerror=C,O.src=b,O.async=!0,document.head.appendChild(O)}))(f).catch(v[h])}),g[p]},getApi:D,loadModule:j=>new Promise((w,f)=>{S.modules.require(j).done(k=>{k.forEach(x=>{((b,I,C,O=!1)=>{const W=typeof I=="string"?I.split("."):I.slice();let U,q=b;for(;W.length>1;)U=W.shift(),q[U]||(q[U]={}),q=q[U];const y=W[0];q[y]=O===!0&&q[y]||C})(S,j,x,!0)}),w(S)},f)})}})({version:t,enterprise:s,query:a,preload:n}));return m.useEffect(()=>{n&&l.current.load()},[l.current]),se.createElement(vt.Provider,{value:l.current},_)},nt=/^on(?=[A-Z])/;function Q(o){return Object.keys(o).reduce((t,s)=>{if(nt.test(s)){const a=s.replace(nt,"").toLowerCase();t._events[a]=o[s]}else t[s]=o[s];return t},{_events:{}})}function $e(o,t,s){typeof s=="function"&&o.events.add(t,s)}function De(o,t,s){typeof s=="function"&&o.events.remove(t,s)}function Ae(o,t,s){Object.keys(Object.assign({},t,s)).forEach(a=>{t[a]!==s[a]&&(De(o,a,t[a]),$e(o,a,s[a]))})}const bt=o=>"default"+o.charAt(0).toUpperCase()+o.slice(1);function ie(o,t){return o[t]!==void 0||o[bt(t)]===void 0}function M(o,t,s){return(ie(o,t)?o[t]:o[bt(t)])||s}function ce(o,t,s=null){if(o!==t){if(o&&("current"in o?o.current=null:typeof o=="function"&&o(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function xt(o){const{width:t,height:s,style:a,className:n}=o;return a!==void 0||n!==void 0?Object.assign({},a&&{style:a},n&&{className:n}):{style:{width:t,height:s}}}class Oc extends se.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:a=()=>{}}=this.props;a(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const ft=o=>({onError:t,...s})=>se.createElement(Oc,{onError:t},se.createElement(o,s));class Me extends se.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Me.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Me.updateObject(this.instance,t,this.props)}componentWillUnmount(){Me.unmountObject(this.instance,this.props)}render(){const t=xt(this.props),s=Q(this.props),a=ht(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return se.createElement(He.Provider,{value:this.state.instance},se.createElement("div",Ne({ref:this._getRef},t,a),this.props.children))}static mountObject(t,s,a){const{instanceRef:n,_events:_}=Q(a),l=new s(t,M(a,"state"),M(a,"options"));return Object.keys(_).forEach(i=>$e(l,i,_[i])),ce(null,n,l),l}static updateObject(t,s,a){const{_events:n,instanceRef:_}=Q(a),{_events:l,instanceRef:i}=Q(s);if(ie(a,"state")){const r=M(s,"state",{}),c=M(a,"state",{});r.type!==c.type&&t.setType(c.type),r.behaviors!==c.behaviors&&(r.behaviors&&t.behaviors.disable(r.behaviors),c.behaviors&&t.behaviors.enable(c.behaviors)),c.zoom&&r.zoom!==c.zoom&&t.setZoom(c.zoom),c.center&&r.center!==c.center&&t.setCenter(c.center),c.bounds&&r.bounds!==c.bounds&&t.setBounds(c.bounds)}if(ie(a,"options")){const r=M(s,"options"),c=M(a,"options",{});r!==c&&t.options.set(c)}M(s,"width")===M(a,"width")&&M(s,"height")===M(a,"height")||t.container.fitToViewport(),Ae(t,l,n),ce(i,_,t)}static unmountObject(t,s){const{instanceRef:a,_events:n}=Q(s);t!==null&&(Object.keys(n).forEach(_=>De(t,_,n[_])),t.destroy(),ce(a))}}const yt=ft(gt(Me,!0,["Map"]));yt.defaultProps={width:320,height:240};class Ee extends se.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&Ee.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&Ee.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,Ee.unmountObject(this.state.instance,this.props)}render(){const t=xt(this.props);return se.createElement("div",Ne({ref:this._getRef},t))}static mountObject(t,s,a){const{instanceRef:n,_events:_}=Q(a),l=M(a,"point"),i=M(a,"locateOptions"),r=M(a,"options");return new Promise((c,p)=>{s.locate(l,i).done(u=>{if(u.length>0){const h=new s.Player(t,u[0],r);ce(null,n,h),Object.keys(_).forEach(v=>$e(h,v,_[v])),c(h)}},p)})}static updateObject(t,s,a){const{_events:n,instanceRef:_}=Q(a),{_events:l,instanceRef:i}=Q(s);if(ie(a,"options")){const r=M(s,"options"),c=M(a,"options");r!==c&&t.options.set(c)}if(ie(a,"point")){const r=M(a,"point"),c=M(s,"point"),p=M(a,"locateOptions");r!==c&&t.moveTo(r,p)}Ae(t,l,n),ce(i,_,t)}static unmountObject(t,s){const{instanceRef:a,_events:n}=Q(s);t!==null&&(Object.keys(n).forEach(_=>De(t,_,n[_])),ce(a))}}class Be extends se.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Be.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Be.updateControl(this.instance,t,this.props)}componentWillUnmount(){Be.unmountControl(this.instance,this.props)}render(){return se.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:a,parent:n,lazy:_,_events:l}=Q(s),i=new t({data:M(s,"data"),options:M(s,"options"),state:M(s,"state"),mapTypes:M(s,"mapTypes"),lazy:_});if(Object.keys(l).forEach(r=>$e(i,r,l[r])),n&&n.controls&&typeof n.controls.add=="function")n.controls.add(i);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(i)}return ce(null,a,i),i}static updateControl(t,s,a){const{_events:n,instanceRef:_}=Q(a),{_events:l,instanceRef:i}=Q(s);if(ie(a,"options")){const r=M(s,"options"),c=M(a,"options");r!==c&&t.options.set(c)}if(ie(a,"data")){const r=M(s,"data"),c=M(a,"data");r!==c&&t.data.set(c)}if(ie(a,"state")){const r=M(s,"state"),c=M(a,"state");r!==c&&t.state.set(c)}if(ie(a,"mapTypes")){const r=M(s,"mapTypes"),c=M(a,"mapTypes");r!==c&&(t.removeAllMapTypes(),c.forEach(p=>t.addMapType(p)))}Ae(t,l,n),ce(i,_,t)}static unmountControl(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s);t!==null&&(Object.keys(_).forEach(l=>De(t,l,_[l])),n.controls&&typeof n.controls.remove=="function"?n.controls.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),ce(a))}}var Pc=ft(Cc(gt(o=>se.createElement(Be,Ne({},o,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ue extends se.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ue.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ue.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ue.unmountObject(this.instance,this.props)}render(){return se.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s),l=new t(M(s,"options"));if(Object.keys(_).forEach(i=>$e(l,i,_[i])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(l);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount Clusterer");n.add(l)}return ce(null,a,l),l}static updateObject(t,s,a){const{_events:n,instanceRef:_}=Q(a),{_events:l,instanceRef:i}=Q(s);if(ie(a,"options")){const r=M(s,"options"),c=M(a,"options");r!==c&&t.options.set(c)}Ae(t,l,n),ce(i,_,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s);t!==null&&(Object.keys(_).forEach(l=>De(t,l,_[l])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),ce(a))}}class Re extends se.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Re.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Re.updateObject(this.instance,t,this.props)}componentWillUnmount(){Re.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s),l=M(s,"options",{}),i=M(s,"features",{}),r=M(s,"filter",null),c=M(s,"objects",{}),p=M(s,"clusters",{}),u=new t(l);if(u.add(i||[]),u.setFilter(r),u.objects.options.set(c),u.clusters.options.set(p),Object.keys(_).forEach(h=>$e(u,h,_[h])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(u);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount ObjectManager");n.add(u)}return ce(null,a,u),u}static updateObject(t,s,a){const{_events:n,instanceRef:_}=Q(a),{_events:l,instanceRef:i}=Q(s);if(ie(a,"options")){const r=M(s,"options"),c=M(a,"options");r!==c&&t.options.set(c)}if(ie(a,"objects")){const r=M(s,"objects"),c=M(a,"objects");r!==c&&t.objects.options.set(c)}if(ie(a,"clusters")){const r=M(s,"clusters"),c=M(a,"clusters");r!==c&&t.clusters.options.set(c)}if(ie(a,"filter")){const r=M(s,"filter"),c=M(a,"filter");r!==c&&t.setFilter(c)}if(ie(a,"features")){const r=M(s,"features"),c=M(a,"features");r!==c&&(t.remove(r),t.add(c))}Ae(t,l,n),ce(i,_,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s);t!==null&&(Object.keys(_).forEach(l=>De(t,l,_[l])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),ce(a))}}class ze extends se.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:a}=this.props,n=ze.mountObject(a&&typeof a.modifyConstructor=="function"?a.modifyConstructor(s[t]):s[t],this.props);this.instance=n,this.setState({instance:n})}componentDidUpdate(t){this.instance!==null&&ze.updateObject(this.instance,t,this.props)}componentWillUnmount(){ze.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s),l=new t(M(s,"geometry"),M(s,"properties"),M(s,"options"));if(Object.keys(_).forEach(i=>$e(l,i,_[i])),n&&n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(l);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(l)}return ce(null,a,l),l}static updateObject(t,s,a){const{_events:n,instanceRef:_}=Q(a),{_events:l,instanceRef:i}=Q(s);if(ie(a,"geometry")){const r=M(s,"geometry",{}),c=M(a,"geometry",{});Array.isArray(c)&&c!==r?Array.isArray(c[0])&&typeof c[1]=="number"?(t.geometry.setCoordinates(c[0]),t.geometry.setRadius(c[1])):t.geometry.setCoordinates(c):typeof c=="object"&&(c.coordinates!==r.coordinates&&t.geometry.setCoordinates(c.coordinates),c.radius!==r.radius&&t.geometry.setRadius(c.radius))}if(ie(a,"properties")){const r=M(s,"properties"),c=M(a,"properties");r!==c&&t.properties.set(c)}if(ie(a,"options")){const r=M(s,"options"),c=M(a,"options");r!==c&&t.options.set(c)}Ae(t,l,n),ce(i,_,t)}static unmountObject(t,s){const{instanceRef:a,parent:n,_events:_}=Q(s);t!==null&&(Object.keys(_).forEach(l=>De(t,l,_[l])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),ce(a))}}const Fc=()=>{const o=m.useRef(null);return e.jsx(Dc,{children:e.jsx("div",{children:e.jsx(yt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{o.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(Pc,{options:{position:{bottom:20,right:20}}})})})})},Ac=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(a,n)=>{t(_=>_.map(l=>l.id===n?{...l,text:a}:l))};return e.jsxs("div",{className:R.aboutUs_inputs,children:[o.map(a=>e.jsx("div",{className:R.aboutUs_inputs_wrap,children:a.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:R.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("textarea",{className:R.aboutUs_inputs_wrap_textarea,onChange:n=>s(n.target.value,a.id),value:a.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:R.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("input",{className:R.aboutUs_inputs_wrap_input,type:a.type==="isPhone"?"number":a.type==="isEmail"?"email":"text",onChange:n=>s(n.target.value,a.id),value:a.text})]})},a.id)),e.jsx(Fc,{})]})},Lc=({id:o,checked:t,onChange:s})=>{const a=n=>{s(o,n.target.checked)};return e.jsxs("label",{className:R.custom_checkbox,children:[e.jsx("input",{className:R.custom_checkbox_input,type:"checkbox",checked:t,onChange:a}),e.jsx("span",{className:R.custom_checkbox_box,children:e.jsx(z,{name:"CheckIcon",width:18,height:18,className:R.custom_checkbox_box_icon})})]})},Mc=({temporaryContactsSchedule:o,setTemporaryContactsSchedule:t})=>{const s=i=>{const r=i.replace(/\D/g,"");return r.length<=2?r:`${r.slice(0,2)}:${r.slice(2,4)}`},a=(i,r,c,p)=>{if(!p.isActive)return;const u=s(c);t(h=>h.map(v=>v.id===i?{...v,workHours:{...v.workHours,[r]:u}}:v))},n=(i,r)=>{t(c=>c.map(p=>p.id===i?{...p,isActive:r,workHours:r?p.workHours:{start:"",end:""}}:p))},_=m.useRef({}),l=m.useRef({});return m.useEffect(()=>{o.forEach(i=>{var r;i.isActive&&_.current[i.id]&&!l.current[i.id]&&((r=_.current[i.id])==null||r.focus(),l.current[i.id]=!0)})},[o]),e.jsxs("div",{className:R.aboutUs_week,children:[e.jsxs("div",{className:R.aboutUs_week_info,children:[e.jsx("span",{className:R.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:R.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:R.aboutUs_week_content,children:o.map((i,r)=>{const c=r===o.length-1,p=c&&i.isActive?R.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:R.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${R.aboutUs_week_wrap_colored} 
                  ${i.isActive?R.aboutUs_week_wrap_colored_active:""} 
                  ${c?R.aboutUs_week_wrap_colored_last:""} 
                  ${p}
                `,children:[e.jsx("span",{className:R.aboutUs_week_wrap_day,children:i.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:R.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:u=>_.current[i.id]=u,className:R.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>a(i.id,"start",u.target.value,i),value:i.workHours.start}),e.jsx("span",{className:R.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:R.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>a(i.id,"end",u.target.value,i),value:i.workHours.end})]})]}),e.jsx(Lc,{id:i.id,checked:i.isActive,onChange:n})]},i.id)})})]})},Bc=()=>{const{contactsFormInputsArr:o,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:a,setImageUrlLogo:n}=Ze(),[_,l]=m.useState(o),[i,r]=m.useState(""),[c,p]=m.useState(s),u=()=>{t(_),n(i);const h=c.map(v=>v.workHours&&v.workHours.start===""&&v.workHours.end===""?{...v,isActive:!1}:v);a(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:R.aboutUs,children:[e.jsx(wc,{temporaryImageUrl:i,setTemporaryImageUrl:r}),e.jsxs("div",{className:R.aboutUs_content,children:[e.jsx(Ac,{temporarySocialPlatforms:_,setTemporarySocialPlatforms:l}),e.jsx(Mc,{temporaryContactsSchedule:c,setTemporaryContactsSchedule:p})]})]}),e.jsx("button",{className:R.aboutUs_btn,onClick:u,children:"Сохранить"})]})};function Wc({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:n=500,scale:_=1.1,status:l=!1,disabled:i=!1}){const r={width:`${o}px`,height:`${o/2-o/20}px`,background:l?s:a,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},c={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${l?s:a}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${_}) translateX(${l?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:c})})}const Ec=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(n,_)=>{t(l=>l.map(i=>i.id===n?{...i,url:_,isActive:_===""?!1:i.isActive}:i))},a=(n,_)=>{n.url!==""&&t(l=>l.map(i=>i.id===_?{...i,isActive:!i.isActive,url:n.isActive?"":n.url}:i))};return e.jsx(e.Fragment,{children:o.map(n=>e.jsxs("div",{className:R.socials_content_wrap,children:[e.jsx("img",{src:n.icon,alt:n.alt}),e.jsx("input",{type:"text",className:R.socials_content_wrap_input,value:n.url||"",onChange:_=>s(n.id,_.target.value)}),e.jsx("div",{onClick:()=>a(n,n.id),children:e.jsx(Wc,{status:n.isActive})})]},n.id))})},Uc=()=>{const{socialPlatforms:o,setSocialPlatforms:t,setActiveSocials:s}=Ze(),[a,n]=m.useState(o);async function _(){const i=ke.get("multi-store"),r=await ae.get(`web-credentials/${i}`);if(r){const c=Object.entries(r.data.social).filter(([u,h])=>h.isActive).map(([u,h])=>({name:u,...h})),p=o.filter(u=>c.some(h=>h.name===u.name)).map(u=>{const h=c.find(v=>v.name===u.name);return{...u,...h,isActive:!0}});s(p)}}async function l(){t(a);const i=ke.get("multi-store"),r=a.reduce((c,p)=>(c[p.name]={url:p.url,isActive:p.isActive},c),{});try{const c=await ae.patch(`web-credentials/${i}`,{social:r});_()}catch(c){console.log("error",c)}}return e.jsxs("div",{className:R.socials,children:[e.jsx("h3",{className:R.socials_title,children:"Соц-сети"}),e.jsx("div",{className:R.socials_content,children:e.jsx(Ec,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:n})}),e.jsx("button",{className:R.contacts_btn,onClick:l,children:"Сохранить"})]})},Rc=[{id:te(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:te(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function zc(){const t=oe().pathname;return e.jsx("div",{className:R.contacts,children:e.jsxs("div",{className:R.contacts_content,children:[e.jsx("div",{className:R.contacts_nav,children:e.jsx("ul",{className:R.contacts_nav_list,children:Rc.map(s=>e.jsx(K,{to:s.href,className:`${R.contacts_nav_link} ${s.href==t?R.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(Uc,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Bc,{})]})})}const Tc="_radioLabel_1w8t1_1",Vc="_radioLabel_selected_1w8t1_7",qc="_radioLabel_radio_1w8t1_7",Kc="_radioLabel_input_1w8t1_15",Hc="_radioLabel_text_1w8t1_28",Xc="_storeBtn_1w8t1_34",Gc="_storeBtn_active_1w8t1_48",Zc="_deliveryInput_text_1w8t1_53",Jc="_deliveryInput_wrap_1w8t1_58",Qc="_deliveryInput_wrap_input_1w8t1_66",Yc="_version3_1w8t1_74",el="_version3_title_1w8t1_79",tl="_version3_block_1w8t1_85",sl="_version3_block_top_1w8t1_90",ol="_version3_block_top_title_1w8t1_102",nl="_version3_block_top_arrow_1w8t1_106",al="_version3_block_top_arrow_active_1w8t1_119",rl="_version3_block_dropdown_1w8t1_122",il="_version3_block_dropdown_item_1w8t1_133",cl="_version3_block_dropdown_open_1w8t1_149",ll="_version3_block_onOff_1w8t1_173",_l="_version3_block_delivery_1w8t1_173",dl="_version3_pickedWrap_1w8t1_178",pl="_version3_pickedWrap_item_1w8t1_189",ul="_kilometerPricing_1w8t1_205",ml="_kilometerPricing_wrap_1w8t1_210",hl="_kilometerPricing_wrap_input_1w8t1_219",vl="_textarea_1w8t1_225",gl="_textarea_title_1w8t1_230",bl="_textarea_text_1w8t1_236",xl="_textarea_count_1w8t1_243",V={radioLabel:Tc,radioLabel_selected:Vc,radioLabel_radio:qc,radioLabel_input:Kc,radioLabel_text:Hc,storeBtn:Xc,storeBtn_active:Gc,deliveryInput_text:Zc,deliveryInput_wrap:Jc,deliveryInput_wrap_input:Qc,version3:Yc,version3_title:el,version3_block:tl,version3_block_top:sl,version3_block_top_title:ol,version3_block_top_arrow:nl,version3_block_top_arrow_active:al,version3_block_dropdown:rl,version3_block_dropdown_item:il,version3_block_dropdown_open:cl,version3_block_onOff:ll,version3_block_delivery:_l,version3_pickedWrap:dl,version3_pickedWrap_item:pl,kilometerPricing:ul,kilometerPricing_wrap:ml,kilometerPricing_wrap_input:hl,textarea:vl,textarea_title:gl,textarea_text:bl,textarea_count:xl},fe=({id:o,value:t,checked:s,onChange:a,label:n})=>e.jsxs("label",{className:`${V.radioLabel} ${s?V.radioLabel_selected:""}`,children:[e.jsx("input",{type:"radio",id:o,value:t,checked:s,onChange:a,className:V.radioLabel_input}),e.jsx("span",{className:V.radioLabel_radio}),e.jsx("span",{className:V.radioLabel_text,children:n})]}),Je=(o,t)=>{const s=Ie();return oe(),{handleChange:m.useCallback(n=>{const _=n.target.value;o(_);const l=t[_];l&&s(l)},[s,t,o])}},fl="_delivery_vkjtc_1",yl="_delivery_title_vkjtc_5",kl="_delivery_main_vkjtc_10",jl="_delivery_btn_vkjtc_16",wl="_deliveryOrg_vkjtc_28",Cl="_deliveryOrg_radios_vkjtc_31",Sl="_deliveryOrg_children_vkjtc_37",Nl="_deliveryOrg_children_wrap_vkjtc_40",Il="_storeDelivery_vkjtc_46",$l="_storeDelivery_stores_vkjtc_49",Dl="_storeDelivery_radios_vkjtc_55",X={delivery:fl,delivery_title:yl,delivery_main:kl,delivery_btn:jl,deliveryOrg:wl,deliveryOrg_radios:Cl,deliveryOrg_children:Sl,deliveryOrg_children_wrap:Nl,storeDelivery:Il,storeDelivery_stores:$l,storeDelivery_radios:Dl},ge=({text:o,placeholder:t,value:s,setValue:a})=>e.jsxs("div",{className:V.deliveryInput,children:[e.jsx("p",{className:V.deliveryInput_text,children:o}),e.jsxs("div",{className:V.deliveryInput_wrap,children:[e.jsx("input",{className:V.deliveryInput_wrap_input,type:"number",placeholder:t,value:s,onChange:n=>a(n.target.value)}),e.jsx("span",{className:V.deliveryInput_wrap_input_text,children:"UZS"})]})]}),me=Ot()(Pt(Ft(o=>({deliveryStoresArr:[{id:te(),name:"Магазин1",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:te(),name:"Магазин2",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:te(),name:"Магазин3",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}],setDeliveryStoresArr:t=>o({deliveryStoresArr:t}),isActiveStoreId:"",setIsActiveStoreId:t=>o({isActiveStoreId:t}),citiesDelivery:[{id:te(),city:"Ташкент"},{id:te(),city:"Бухара"},{id:te(),city:"Самарканд"}],setCitiesDelivery:t=>o({citiesDelivery:t}),selectedOption:"",setSelectedOption:t=>o({selectedOption:t}),selectedOrganizationOption:"",setSelectedOrganizationOption:t=>o({selectedOrganizationOption:t}),selectedStoreOption:"",setSelectedStoreOption:t=>o({selectedStoreOption:t}),saveLocation:"",setSaveLocation:t=>o({saveLocation:t}),savePathStore:"",setSavePathStore:t=>o({savePathStore:t}),saveLocationStore:[],setSaveLocationStore:t=>o({saveLocationStore:t}),pickedCitiesFreeDelivery:[],setPickedCitiesFreeDelivery:t=>o({pickedCitiesFreeDelivery:t}),inputSumFree:"",setInputSumFree:t=>o({inputSumFree:t}),pickedCitiesFixedDelivery:[],setPickedCitiesFixedDelivery:t=>o({pickedCitiesFixedDelivery:t}),inputSumFixed:"",setInputSumFixed:t=>o({inputSumFixed:t}),inputFixedPrice:"",setInputFixedPrice:t=>o({inputFixedPrice:t}),pickedCitiesFlexibleDelivery:[],setPickedCitiesFlexibleDelivery:t=>o({pickedCitiesFlexibleDelivery:t}),inputSumFlexible:"",setInputSumFlexible:t=>o({inputSumFlexible:t}),inputFirstKm:"",setInputFirstKm:t=>o({inputFirstKm:t}),inputLastKm:"",setInputLastKm:t=>o({inputLastKm:t}),inputExtraKm:"",setInputExtraKm:t=>o({inputExtraKm:t}),pickedCitiesOwnDelivery:[],setPickedCitiesOwnDelivery:t=>o({pickedCitiesOwnDelivery:t}),inputSumOwn:"",setInputSumOwn:t=>o({inputSumOwn:t}),textareaVal:"",setTextareaVal:t=>o({textareaVal:t}),openCountriesDropdown:!1,setOpenCountriesDropdown:t=>o({openCountriesDropdown:t})}),{name:"delivery-store",partialize:o=>({...o})})));function we({citiesArrDelivery:o,setCitiesArrDelivery:t,pickedCities:s,setPickedCities:a}){const{openCountriesDropdown:n,setOpenCountriesDropdown:_}=me(),l=r=>{s.some(c=>c.id===r.id)||a([...s,r]),_(!1)},i=(r,c)=>{c.stopPropagation(),a(s.filter(p=>p.id!==r.id))};return e.jsxs("div",{className:V.version3,children:[e.jsx("span",{className:V.version3_title,children:"Города"}),e.jsxs("div",{className:V.version3_block,children:[e.jsxs("div",{className:`${s.length>0?V.version3_pickedWrap:V.version3_block_top}`,onClick:()=>_(!n),children:[s.length>0?s.map(r=>e.jsxs("div",{className:V.version3_pickedWrap_item,children:[e.jsx("h2",{className:V.version3_block_top_title,children:r.city}),e.jsx("button",{onClick:c=>i(r,c),children:e.jsx(z,{name:"XMarkIcon",width:15})})]},r.id)):e.jsx("h2",{className:V.version3_block_top_title,children:"Выберите город"}),e.jsx("button",{className:V.version3_block_top_btn,onClick:()=>_(!n),children:e.jsx("div",{className:`${V.version3_block_top_arrow} ${n&&o.length>0?V.version3_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${V.version3_block_dropdown} ${n&&o.length>0?V.version3_block_dropdown_open:""}`,children:o==null?void 0:o.map(r=>e.jsx("span",{className:V.version3_block_dropdown_item,onClick:()=>l(r),children:r.city},r.id))})]})]})}const Ce=()=>{const{setPickedCitiesFreeDelivery:o,setInputSumFree:t,setPickedCitiesFixedDelivery:s,setInputSumFixed:a,setInputFixedPrice:n,setPickedCitiesFlexibleDelivery:_,setInputSumFlexible:l,setInputFirstKm:i,setInputLastKm:r,setInputExtraKm:c,setPickedCitiesOwnDelivery:p,setInputSumOwn:u,setTextareaVal:h}=me();return{resetOrg:g=>{g!=="free"&&(o([]),t("")),g!=="fixed"&&(s([]),a(""),n("")),g!=="flexible"&&(_([]),l(""),i(""),r(""),c("")),g!=="own"&&(p([]),u(""),h("")),g==="all"&&(o([]),t(""),s([]),a(""),n(""),_([]),l(""),i(""),r(""),c(""),p([]),u(""),h(""))}}},Ol=()=>{const{setInputSumFree:o,citiesDelivery:t,setCitiesDelivery:s,pickedCitiesFreeDelivery:a,inputSumFree:n,setPickedCitiesFreeDelivery:_,deliveryStoresArr:l,setDeliveryStoresArr:i,setOpenCountriesDropdown:r,setSaveLocation:c,setSaveLocationStore:p}=me(),u=oe(),[h,v]=m.useState(a),[g,S]=m.useState(n);m.useEffect(()=>{r(!1)},[]);const{resetOrg:D}=Ce(),P=()=>{D("free");const j=h,w=g;_(j),o(w);const f=[{cities:j,minPrice:w}],k=l.map(x=>({...x,location:"storeFreeDelivery",deliveryFree:f,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}));console.log("deliveryStoresArr",l),i(k),c(u.pathname),p([]),r(!1)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:g,setValue:S}),e.jsx(we,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:h,setPickedCities:v}),e.jsx("button",{className:X.delivery_btn,onClick:()=>P(),children:"Сохранить"})]})},Pl=()=>{const{resetOrg:o}=Ce(),{inputSumFixed:t,setInputSumFixed:s,inputFixedPrice:a,setInputFixedPrice:n,citiesDelivery:_,setCitiesDelivery:l,pickedCitiesFixedDelivery:i,setPickedCitiesFixedDelivery:r,deliveryStoresArr:c,setDeliveryStoresArr:p,setOpenCountriesDropdown:u,setSaveLocation:h,setSaveLocationStore:v}=me(),[g,S]=m.useState(i),[D,P]=m.useState(t),[j,w]=m.useState(a);m.useEffect(()=>{u(!1)},[]);const f=()=>{o("fixed");const k=g,x=D,b=j;r(k),s(x),n(b);const I=[{cities:k,minPrice:x,fixedPrice:b}],C=c.map(O=>({...O,location:"storeFixedPriceDelivery",deliveryFree:[],deliveryFixed:I,deliveryFlexible:[],deliveryOwn:[]}));p(C),h(location.pathname),v([]),console.log("deliveryStoresArr",c),u(!1)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:D,setValue:P}),e.jsx(ge,{text:"Цена за доставку",placeholder:"0",value:j,setValue:w}),e.jsx(we,{citiesArrDelivery:_,setCitiesArrDelivery:l,pickedCities:g,setPickedCities:S}),e.jsx("button",{className:X.delivery_btn,onClick:()=>f(),children:"Сохранить"})]})},kt=({valueFirst:o,setValueFirst:t,valueLast:s,setValueLast:a})=>e.jsxs("div",{className:V.kilometerPricing,children:[e.jsx("span",{className:V.deliveryInput_text,children:"Первые"}),e.jsxs("div",{className:V.kilometerPricing_wrap,children:[e.jsx("input",{className:V.kilometerPricing_wrap_input,type:"number",value:o,placeholder:"0",onChange:n=>t(n.target.value)}),e.jsx("span",{children:"KM"})]}),e.jsx("span",{className:V.deliveryInput_text,children:"по"}),e.jsxs("div",{className:V.kilometerPricing_wrap,children:[e.jsx("input",{className:V.kilometerPricing_wrap_input,type:"number",value:s,placeholder:"0",onChange:n=>a(n.target.value)}),e.jsx("span",{children:"KM"})]})]}),Fl=()=>{const{deliveryStoresArr:o,citiesDelivery:t,setCitiesDelivery:s,setDeliveryStoresArr:a,pickedCitiesFlexibleDelivery:n,setPickedCitiesFlexibleDelivery:_,inputSumFlexible:l,setInputSumFlexible:i,inputFirstKm:r,setInputFirstKm:c,inputLastKm:p,setInputLastKm:u,inputExtraKm:h,setInputExtraKm:v,setOpenCountriesDropdown:g,setSaveLocation:S,setSaveLocationStore:D}=me(),[P,j]=m.useState(n),[w,f]=m.useState(l),[k,x]=m.useState(r),[b,I]=m.useState(p),[C,O]=m.useState(h),{resetOrg:W}=Ce(),U=()=>{W("flexible");const q=P,y=w,L=k,E=b,A=C;_(q),i(y),c(L),u(E),v(A);const le=[{cities:q,minPrice:y,pricingPerKm:{firstKm:L,lastKm:E},extraPricing:A}],pe=o.map(be=>({...be,location:"storeFlexibleDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:le,deliveryOwn:[]}));a(pe),S(location.pathname),D([]),g(!1)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:w,setValue:f}),e.jsx(kt,{valueFirst:k,setValueFirst:x,valueLast:b,setValueLast:I}),e.jsx(ge,{text:"За каждый следующий км",placeholder:"0",value:C,setValue:O}),e.jsx(we,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:P,setPickedCities:j}),e.jsx("button",{className:X.delivery_btn,onClick:()=>U(),children:"Сохранить"})]})},jt=({value:o,setValue:t})=>{const[a,n]=m.useState(400),_=l=>{const i=l.target.value;t(i),i.length<=400&&n(400-i.length)};return e.jsxs("div",{className:V.textarea,children:[e.jsx("span",{className:V.textarea_title,children:"Текст для пояснения"}),e.jsx("textarea",{className:V.textarea_text,maxLength:400,onChange:_,value:o}),e.jsxs("span",{className:V.textarea_count,children:[a,"/",400]})]})},Al=()=>{const{deliveryStoresArr:o,citiesDelivery:t,setCitiesDelivery:s,setDeliveryStoresArr:a,pickedCitiesOwnDelivery:n,setPickedCitiesOwnDelivery:_,inputSumOwn:l,setInputSumOwn:i,textareaVal:r,setTextareaVal:c,setSaveLocation:p,setSaveLocationStore:u}=me(),[h,v]=m.useState(n),[g,S]=m.useState(l),[D,P]=m.useState(r),{resetOrg:j}=Ce(),w=()=>{j("own");const f=h,k=g,x=D;_(f),i(k),c(x);const b=[{cities:f,minPrice:k,description:x}],I=o.map(C=>({...C,location:"storeOwnVersionDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:b}));a(I),p(location.pathname),u([])};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:g,setValue:S}),e.jsx(jt,{value:D,setValue:P}),e.jsx(we,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:h,setPickedCities:v}),e.jsx("button",{className:X.delivery_btn,onClick:()=>w(),children:"Сохранить"})]})},Ll=()=>{const{selectedOrganizationOption:o,saveLocation:t,setSelectedOrganizationOption:s}=me(),a=oe(),n=Ie(),_={freeDelivery:"/admin/settings/delivery/forOrganization/freeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forOrganization/fixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forOrganization/flexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forOrganization/ownVersionDelivery"};m.useEffect(()=>{t?n(t):s("")},[t,n]),m.useEffect(()=>{const i=a.pathname,r=Object.keys(_).find(c=>_[c]===i);r&&s(r)},[a.pathname,s]);const{handleChange:l}=Je(s,_);return e.jsxs("div",{className:X.deliveryOrg,children:[e.jsx("h4",{className:X.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:X.deliveryOrg_radios,children:[e.jsx(fe,{id:"freeDelivery",value:"freeDelivery",checked:o==="freeDelivery",onChange:l,label:"Бесплатная доставка"}),e.jsx(fe,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:o==="fixedPriceDelivery",onChange:l,label:"Фиксированная цена"}),e.jsx(fe,{id:"flexibleDelivery",value:"flexibleDelivery",checked:o==="flexibleDelivery",onChange:l,label:"Гибкая доставка"}),e.jsx(fe,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:o==="ownVersionDelivery",onChange:l,label:"Свой вариант"})]}),e.jsxs("div",{className:X.deliveryOrg_children,children:[a.pathname.startsWith("/admin/settings/delivery/forOrganization/freeDelivery")&&e.jsx(Ol,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/fixedPriceDelivery")&&e.jsx(Pl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/flexibleDelivery")&&e.jsx(Fl,{}),a.pathname.startsWith("/admin/settings/delivery/forOrganization/ownVersionDelivery")&&e.jsx(Al,{})]})]})},Ml=({text:o,isActive:t,onClick:s,href:a})=>e.jsx(K,{className:`${V.storeBtn} ${t?V.storeBtn_active:""}`,onClick:s,to:`settings/delivery/forStore/${a}/settingsSave`,children:o}),Bl=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=me(),c=oe(),[p,u]=m.useState([]),[h,v]=m.useState("");m.useEffect(()=>{var P,j;const D=t.find(w=>w.id===o);D&&D.deliveryFree?(u(((P=D.deliveryFree[0])==null?void 0:P.cities)||[]),v(((j=D.deliveryFree[0])==null?void 0:j.minPrice)||"")):(u([]),v(""))},[o]);const{resetOrg:g}=Ce(),S=()=>{g("all");const j=[{cities:p,minPrice:h}],w=t.map(x=>x.id===o?{...x,deliveryFree:j,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}:x);s(w);const f=[..._],k=f.findIndex(x=>x.id===o);k>=0?f[k].location=c.pathname:f.push({id:o,location:c.pathname}),l(f),console.log("saveLocationStore",_),i(""),r(c.pathname)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:v}),e.jsx(we,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:X.delivery_btn,onClick:()=>S(),children:"Сохранить"})]})},Wl=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=me(),c=oe(),[p,u]=m.useState([]),[h,v]=m.useState(""),[g,S]=m.useState("");m.useEffect(()=>{var w,f,k;const j=t.find(x=>x.id===o);j&&j.deliveryFixed?(u(((w=j.deliveryFixed[0])==null?void 0:w.cities)||[]),v(((f=j.deliveryFixed[0])==null?void 0:f.minPrice)||""),S(((k=j.deliveryFixed[0])==null?void 0:k.fixedPrice)||"")):(u([]),v(""),S(""))},[o]);const{resetOrg:D}=Ce(),P=()=>{D("all");const k=[{cities:p,minPrice:h,fixedPrice:g}],x=t.map(C=>C.id===o?{...C,deliveryFixed:k,deliveryFree:[],deliveryFlexible:[],deliveryOwn:[]}:C);s(x);const b=[..._],I=b.findIndex(C=>C.id===o);I>=0?b[I].location=c.pathname:b.push({id:o,location:c.pathname}),l(b),i(""),r(c.pathname)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:v}),e.jsx(ge,{text:"Цена за доставку",placeholder:"0",value:g,setValue:S}),e.jsx(we,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:X.delivery_btn,onClick:()=>P(),children:"Сохранить"})]})},El=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=me(),c=oe(),[p,u]=m.useState([]),[h,v]=m.useState(""),[g,S]=m.useState(""),[D,P]=m.useState(""),[j,w]=m.useState("");m.useEffect(()=>{var b,I,C,O,W,U,q;const x=t.find(y=>y.id===o);x&&x.deliveryFlexible?(u(((b=x.deliveryFlexible[0])==null?void 0:b.cities)||[]),v(((I=x.deliveryFlexible[0])==null?void 0:I.minPrice)||""),S(((O=(C=x.deliveryFlexible[0])==null?void 0:C.pricingPerKm)==null?void 0:O.firstKm)||""),P(((U=(W=x.deliveryFlexible[0])==null?void 0:W.pricingPerKm)==null?void 0:U.lastKm)||""),w(((q=x.deliveryFlexible[0])==null?void 0:q.extraPricing)||"")):(u([]),v(""),S(""),P(""),w(""))},[o]);const{resetOrg:f}=Ce(),k=()=>{f("all");const W=[{cities:p,minPrice:h,pricingPerKm:{firstKm:g,lastKm:D},extraPricing:j}],U=t.map(L=>L.id===o?{...L,deliveryFlexible:W,deliveryFree:[],deliveryFixed:[],deliveryOwn:[]}:L);s(U);const q=[..._],y=q.findIndex(L=>L.id===o);y>=0?q[y].location=c.pathname:q.push({id:o,location:c.pathname}),l(q),i(""),r(c.pathname)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:v}),e.jsx(kt,{valueFirst:g,setValueFirst:S,valueLast:D,setValueLast:P}),e.jsx(ge,{text:"За каждый следующий км",placeholder:"0",value:j,setValue:w}),e.jsx(we,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:X.delivery_btn,onClick:()=>k(),children:"Сохранить"})]})},Ul=()=>{const{isActiveStoreId:o,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:a,setCitiesDelivery:n,saveLocationStore:_,setSaveLocationStore:l,setSaveLocation:i,setSavePathStore:r}=me(),c=oe(),[p,u]=m.useState([]),[h,v]=m.useState(""),[g,S]=m.useState("");m.useEffect(()=>{var w,f,k;const j=t.find(x=>x.id===o);j&&j.deliveryOwn?(u(((w=j.deliveryOwn[0])==null?void 0:w.cities)||[]),v(((f=j.deliveryOwn[0])==null?void 0:f.minPrice)||""),S(((k=j.deliveryOwn[0])==null?void 0:k.description)||"")):(u([]),v(""),S(""))},[o]);const{resetOrg:D}=Ce(),P=()=>{D("all");const k=[{cities:p,minPrice:h,description:g}],x=t.map(C=>C.id===o?{...C,deliveryOwn:k,deliveryFree:[],deliveryFixed:[],deliveryFlexible:[]}:C);s(x);const b=[..._],I=b.findIndex(C=>C.id===o);I>=0?b[I].location=c.pathname:b.push({id:o,location:c.pathname}),l(b),i(""),r(c.pathname)};return e.jsxs("div",{className:X.deliveryOrg_children_wrap,children:[e.jsx(ge,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:v}),e.jsx(jt,{value:g,setValue:S}),e.jsx(we,{citiesArrDelivery:a,setCitiesArrDelivery:n,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:X.delivery_btn,onClick:()=>P(),children:"Сохранить"})]})},Rl=()=>{const{deliveryStoresArr:o,selectedStoreOption:t,isActiveStoreId:s,saveLocationStore:a,setSelectedStoreOption:n}=me(),_=oe(),l=Ie(),i={storeFreeDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFreeDelivery`,storeFixedPriceDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFixedPriceDelivery`,storeFlexibleDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFlexibleDelivery`,storeOwnVersionDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeOwnVersionDelivery`},{handleChange:r}=Je(n,i);return m.useEffect(()=>{const c=a.find(h=>h.id===s),p=Object.keys(i).find(h=>i[h]===(c==null?void 0:c.location)),u=o[0].location;console.log("option",p),a.length>0&&c?(l(c.location),n(p)):(l(`/admin/settings/delivery/forStore/${s}/settingsSave/${u||""}`),n(u))},[s,a]),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h4",{className:X.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:X.storeDelivery_radios,children:[e.jsx(fe,{id:"storeFreeDelivery",value:"storeFreeDelivery",checked:t==="storeFreeDelivery",onChange:r,label:"Бесплатная доставка"}),e.jsx(fe,{id:"storeFixedPriceDelivery",value:"storeFixedPriceDelivery",checked:t==="storeFixedPriceDelivery",onChange:r,label:"Фиксированная цена"}),e.jsx(fe,{id:"storeFlexibleDelivery",value:"storeFlexibleDelivery",checked:t==="storeFlexibleDelivery",onChange:r,label:"Гибкая доставка"}),e.jsx(fe,{id:"storeOwnVersionDelivery",value:"storeOwnVersionDelivery",checked:t==="storeOwnVersionDelivery",onChange:r,label:"Свой вариант"})]})]}),e.jsxs("div",{className:X.deliveryOrg_children,children:[_.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFreeDelivery`)&&e.jsx(Bl,{}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFixedPriceDelivery`)&&e.jsx(Wl,{}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFlexibleDelivery`)&&e.jsx(El,{}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeOwnVersionDelivery`)&&e.jsx(Ul,{})]})]})},zl=()=>{const{deliveryStoresArr:o,isActiveStoreId:t,setIsActiveStoreId:s,savePathStore:a}=me(),n=i=>{s(i)};m.useEffect(()=>{a&&l(a)},[]);const _=oe(),l=Ie();return e.jsxs("div",{className:X.storeDelivery,children:[e.jsx("h4",{className:X.delivery_title,children:"Выберите магазин "}),e.jsx("div",{className:X.storeDelivery_stores,children:o.map(i=>e.jsx(Ml,{text:i.name,isActive:i.id===t,onClick:()=>n(i.id),href:i.id},i.id))}),_.pathname.startsWith(`/admin/settings/delivery/forStore/${t}/settingsSave`)&&e.jsx(Rl,{})]})},Tl=()=>{const{selectedOption:o,setSelectedOption:t,saveLocationStore:s,savePathStore:a,saveLocation:n}=me(),_=oe(),l=Ie(),i={forOrganization:"/admin/settings/delivery/forOrganization",forStore:"/admin/settings/delivery/forStore"};m.useEffect(()=>{n!==""?(l(n),t("forOrganization")):s.some(c=>c.location)&&(l(a),t(s[0].location),t("forStore"))},[]);const{handleChange:r}=Je(t,i);return e.jsxs("div",{className:X.delivery,children:[e.jsx("h3",{className:X.delivery_title,children:"Выберите версию настройки доставки"}),e.jsxs("div",{className:X.delivery_main,children:[e.jsx(fe,{id:"forOrganization",value:"forOrganization",checked:o==="forOrganization",onChange:r,label:"Для организации"}),e.jsx(fe,{id:"forStore",value:"forStore",checked:o==="forStore",onChange:r,label:"Для каждого магазина"})]}),_.pathname.startsWith("/admin/settings/delivery/forOrganization")&&e.jsx(Ll,{}),_.pathname.startsWith("/admin/settings/delivery/forStore")&&e.jsx(zl,{})]})};function Vl({name:o="HandRaisedIcon",width:t=30,height:s=30,color:a="black",background:n="transparent",transition:_=500,className:l,onClick:i}){const r={width:`${t}px`,height:`${s||t}px`,color:a,transition:`${_}ms`,background:n};return e.jsxs(e.Fragment,{children:[o=="HandRaisedIcon"&&e.jsx(Mt,{className:l,style:r,onClick:i}),o=="UserIcon"&&e.jsx(Bt,{className:l,style:r,onClick:i}),o=="HeartIcon"&&e.jsx(Wt,{className:l,style:r,onClick:i}),o=="AdjustmentsHorizontalIcon"&&e.jsx(Et,{className:l,style:r,onClick:i}),o=="BanknotesIcon"&&e.jsx(Ut,{className:l,style:r,onClick:i}),o=="ShoppingBagIcon"&&e.jsx(Rt,{className:l,style:r,onClick:i}),o=="CogIcon"&&e.jsx(zt,{className:l,style:r,onClick:i}),o=="ShoppingCartIcon"&&e.jsx(Tt,{className:l,style:r,onClick:i}),o=="UsersIcon"&&e.jsx(Vt,{className:l,style:r,onClick:i}),o=="ChevronDownIcon"&&e.jsx(qt,{className:l,style:r,onClick:i}),o=="Cog8ToothIcon"&&e.jsx(Kt,{className:l,style:r,onClick:i}),o=="EyeIcon"&&e.jsx(Ht,{className:l,style:r,onClick:i}),o=="EyeSlashIcon"&&e.jsx(Xt,{className:l,style:r,onClick:i}),o=="IdentificationIcon"&&e.jsx(Gt,{className:l,style:r,onClick:i}),o=="WrenchScrewdriverIcon"&&e.jsx(Zt,{className:l,style:r,onClick:i}),o=="XMarkIcon"&&e.jsx(Jt,{className:l,style:r,onClick:i}),o=="PhoneXMarkIcon"&&e.jsx(Qt,{className:l,style:r,onClick:i}),o=="Bars3Icon"&&e.jsx(Yt,{className:l,style:r,onClick:i}),o=="AdjustmentsVerticalIcon"&&e.jsx(es,{className:l,style:r,onClick:i}),o=="TrashIcon"&&e.jsx(ts,{className:l,style:r,onClick:i}),o=="BackspaceIcon"&&e.jsx(ss,{className:l,style:r,onClick:i}),o=="QueueListIcon"&&e.jsx(os,{className:l,style:r,onClick:i}),o=="ChevronRightIcon"&&e.jsx(ns,{className:l,style:r,onClick:i}),o=="MagnifyingGlassIcon"&&e.jsx(as,{className:l,style:r,onClick:i}),o=="ArrowLeftStartOnRectangleIcon"&&e.jsx(rs,{className:l,style:r,onClick:i}),o=="BuildingStorefrontIcon"&&e.jsx(is,{className:l,style:r,onClick:i}),o=="BuildingLibraryIcon"&&e.jsx(cs,{className:l,style:r,onClick:i}),o=="ArrowLeftEndOnRectangleIcon"&&e.jsx(ls,{className:l,style:r,onClick:i}),o=="UserPlusIcon"&&e.jsx(_s,{className:l,style:r,onClick:i}),o=="PlusIcon"&&e.jsx(ds,{className:l,style:r,onClick:i}),o=="FolderOpenIcon"&&e.jsx(ps,{className:l,style:r,onClick:i}),o=="FunnelIcon"&&e.jsx(us,{className:l,style:r,onClick:i}),o=="PhotoIcon"&&e.jsx(ms,{className:l,style:r,onClick:i})]})}function ql(){const{addBlockStatus:o,setAddBlockStatus:t}=_e(),s=a=>{a.stopPropagation(),t(!o)};return e.jsxs("button",{className:`${d.homePage_addBlock} ${o?d.homePage_addBlock_active:""}`,onClick:a=>s(a),children:[e.jsx("span",{className:d.homePage_addBlock_title,children:"Добавить блок"}),e.jsx(Vl,{name:"PlusIcon"})]})}const Kl="_modalCategory_1y02h_1",Hl="_modalCategory_block_1y02h_5",Xl="_modalCategory_nav_1y02h_12",Gl="_modalCategory_nav_title_1y02h_19",Zl="_modalCategory_content_1y02h_25",Jl="_modalCategory_content_message_1y02h_32",Ql="_modalCategory_content_link_1y02h_40",Yl="_modalCategory_content_link_active_1y02h_68",e_="_modalCategory_content_item_1y02h_78",t_="_modalCategory_content_block_1y02h_100",s_="_modalCategory_content_block_title_1y02h_104",o_="_settings_1y02h_111",n_="_settings_title_1y02h_114",a_="_settings_content_1y02h_119",r_="_settings_content_top_1y02h_122",i_="_settings_content_buttons_1y02h_125",c_="_settings_content_btn_1y02h_135",l_="_settings_content_btn_cancel_1y02h_147",__="_settings_content_btn_save_1y02h_150",d_="_settings_tools_1y02h_153",p_="_settings_tools_link_1y02h_158",u_="_settings_tools_link_active_1y02h_173",J={modalCategory:Kl,modalCategory_block:Hl,modalCategory_nav:Xl,modalCategory_nav_title:Gl,modalCategory_content:Zl,modalCategory_content_message:Jl,modalCategory_content_link:Ql,modalCategory_content_link_active:Yl,modalCategory_content_item:e_,modalCategory_content_block:t_,modalCategory_content_block_title:s_,settings:o_,settings_title:n_,settings_content:a_,settings_content_top:r_,settings_content_buttons:i_,settings_content_btn:c_,settings_content_btn_cancel:l_,settings_content_btn_save:__,settings_tools:d_,settings_tools_link:p_,settings_tools_link_active:u_};function m_({superCategory:o,category:t,superId:s,setLocalPicked:a,setSuperId:n,setMessageStatus:_,setSubCategories:l,fetchCategories:i}){const{setCurrentCategory:r}=ve(),[c,p]=m.useState(10),u=(v,g)=>{v.preventDefault(),i("category",1,10,g.id),l([]);const S=t.filter(D=>D.parentId==g.id);r(S),a(g),n(g.id),_(!1)},h=v=>{v.preventDefault();const g=c+10;p(g),i("super",1,g),console.log("addPage",g)};return e.jsxs("div",{className:J.modalCategory_content_block,children:[e.jsx("h2",{className:J.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:J.modalCategory_content_item,children:[o.map(v=>e.jsxs(K,{to:"#",className:`${J.modalCategory_content_link} ${v.id==s?J.modalCategory_content_link_active:""} `,onClick:g=>u(g,v),children:[v.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},v.id)),e.jsx(K,{to:"#",className:J.modalCategory_content_link,onClick:v=>h(v),children:"Ещё..."})]})]})}function h_({superId:o,categoryId:t,category:s,setSubCategory:a,fetchCategories:n}){const[_,l]=m.useState(10),i=c=>{c.preventDefault();const p=_+10;l(p),n("category",1,p,o),console.log("addPage",p,o)},r=(c,p)=>{a(c,p)};return s.length>0&&e.jsxs("div",{className:J.modalCategory_content_block,children:[e.jsx("h2",{className:J.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:J.modalCategory_content_item,children:[s==null?void 0:s.map(c=>e.jsxs(K,{to:"#",className:`${J.modalCategory_content_link} ${c.id==t?J.modalCategory_content_link_active:""} `,onClick:p=>r(p,c),children:[c.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},c.id)),e.jsx(K,{to:"#",className:J.modalCategory_content_link,onClick:c=>i(c),children:"Ещё..."})]})]})}function v_({subId:o,categoryId:t,subCategories:s,setSubProductsList:a,fetchCategories:n}){const[_,l]=m.useState(10),i=r=>{r.preventDefault();const c=_+10;l(c),n("subCategory",1,c,t),console.log("addPage",c)};return s.length>0&&e.jsxs("div",{className:J.modalCategory_content_block,children:[e.jsx("h2",{className:J.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:J.modalCategory_content_item,children:[s==null?void 0:s.map(r=>e.jsxs(K,{to:"#",className:`${J.modalCategory_content_link} ${r.id==o?J.modalCategory_content_link_active:""} `,onClick:c=>a(c,r),children:[r.name.ru,e.jsx(z,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},r.id)),e.jsx(K,{to:"#",className:J.modalCategory_content_link,onClick:r=>i(r),children:"Ещё..."})]})]})}function g_({setSettings:o,setCancel:t}){return e.jsxs("div",{className:J.settings_content_buttons,children:[e.jsx("button",{className:`${J.settings_content_btn} ${J.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(K,{to:"#",className:`${J.settings_content_btn} ${J.settings_content_btn_save}`,onClick:s=>o(s),children:"Сохранить"})]})}function b_(){const{TemporaryData:o,currentProduct:t,setCurrentCategory:s,setPickedCategory:a,setCurrentSubCategory:n,setTemporaryData:_,setOpenModalCategory:l,setCurrentProduct:i}=ve(),[r,c]=m.useState(0),[p,u]=m.useState(0),[h,v]=m.useState(0),[g,S]=m.useState({}),[D,P]=m.useState(!1),[j,w]=m.useState("Выберите категорию"),[f,k]=m.useState([]),[x,b]=m.useState([]),[I,C]=m.useState([]);m.useEffect(()=>{y("super",1,10)},[]);const O=(L,E)=>{L.preventDefault(),y("subCategory",1,10,E.id);const A=I.filter(le=>le.parentId==E.id);n(A),S(E),u(E.id),P(!1)},W=(L,E)=>{L.preventDefault(),S(E),v(E.id),P(!1)},U=L=>{if(L.preventDefault(),Object.keys(g).length===0){P(!0),w("Выберите Суперкотегорию");return}if(x.length>0&&p===0){P(!0),w("Выберите Категорию");return}if(I.length>0&&h===0){P(!0),w("Выберите Подкотегорию");return}if(o.length>0&&t){const E=o.find(le=>le.mxikCode==(t==null?void 0:t.mxikCode)),A=o.findIndex(le=>le.mxikCode==(t==null?void 0:t.mxikCode));E&&(E.crmCategory=g,o.splice(A,1,E),_([...o]))}q()},q=()=>{a(g),l(!1),c(0),u(0),i({}),v(0),S({}),s([]),n([]),P(!1),w("Выберите категорию")},y=async(L,E,A,le)=>{try{const pe=L=="super"?`https://api.mcrm.uz/api/categories?&page=${E}&perPage=${A}`:`https://api.mcrm.uz/api/categories?parentId=${le}&page=${E}&perPage=${A}`,he=(await Te.get(pe)).data.data.map(ye=>({...ye,label:L==="super"?"Супер категория":L==="category"?"Категория":"Субкатегория"}));L==="super"&&k([...he]),L==="category"&&b([...he]),L==="subCategory"&&C([...he]),console.log("fetchCategories data",L,he)}catch(pe){console.error(`Ошибка произошла при получении ${L} категорий`,pe)}};return e.jsx("div",{className:J.modalCategory,children:e.jsxs("div",{className:J.modalCategory_block,children:[e.jsx("p",{className:J.modalCategory_content_message,children:D?j:""}),e.jsxs("div",{className:J.modalCategory_content,children:[e.jsx(m_,{superId:r,superCategory:f,category:x,setLocalPicked:S,setSuperId:c,setMessageStatus:P,fetchCategories:y,setSubCategories:C}),e.jsx(h_,{superId:r,categoryId:p,category:x,setSubCategory:O,fetchCategories:y}),e.jsx(v_,{subId:h,categoryId:p,subCategories:I,setSubProductsList:W,fetchCategories:y}),e.jsx(g_,{setSettings:U,setCancel:q})]})]})})}function x_(){const{addBlockStatus:o}=_e();return e.jsxs("div",{className:d.homePage,children:[e.jsx(ql,{}),o&&e.jsx(b_,{})]})}const f_=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"},{id:"7",label:"Главная страница",href:"/admin/settings/homePage"}];function y_(){const t=oe().pathname,{setAddBlockStatus:s}=_e();return e.jsx("div",{className:d.settings,onClick:()=>s(!1),children:e.jsxs("div",{className:d.settings_content,children:[e.jsx("div",{className:d.settings_content_top,children:e.jsx("ul",{className:d.settings_tools,children:f_.map(a=>e.jsx("li",{children:e.jsx(K,{to:a.href,className:`${d.settings_tools_link} ${t.startsWith(a.href)?d.settings_tools_link_active:""}`,children:a.label})},a.id))})}),t=="/admin/settings/modules"&&e.jsx(Wa,{}),t=="/admin/settings/templates"&&e.jsx(Ea,{}),t=="/admin/settings/categories"&&e.jsx(mr,{}),t.startsWith("/admin/settings/banner")&&e.jsx(Ei,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(zc,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(Tl,{}),t.startsWith("/admin/settings/homePage")&&e.jsx(x_,{})]})})}const at=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function k_(){const[o,t]=m.useState(""),[s]=m.useState(1),[a]=m.useState(10),[n,_]=m.useState({status:!1,message:""}),[l,i]=m.useState([]);m.useEffect(()=>{o||(i([]),_({status:!1,message:""}))},[o]);async function r(c){c.preventDefault();const p=ke.get("multi-store");try{const h=await(await ae.get(`nomenclatures?multiStoreId=${p}&name=${o}&page=${s}&perPage=${a}`)).data.data;h.length>0?(i([...h]),_({status:!1,message:""})):(i([]),_({status:!0,message:"Совпадений не найдено"}))}catch(u){console.log("Ошибка произошла при поиске продуктов на складе",u)}}return e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("form",{action:"",className:d.addingWrapper_form,onSubmit:c=>r(c),children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:c=>t(c.target.value),value:o}),e.jsx(z,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsx("tr",{className:d.addingWrapper_thead_tr,children:at.map(c=>e.jsx("th",{className:d.addingWrapper_thead_th,children:c.title},c.id))})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:l==null?void 0:l.map(c=>e.jsxs("tr",{className:d.addingWrapper_tbody_tr,children:[at.map(p=>{var u;return e.jsxs("td",{className:d.addingWrapper_tbody_td,children:[p.title=="Наименование"?e.jsx("span",{children:(u=c==null?void 0:c.name)==null?void 0:u.ru}):"",p.title=="Штрих-код"?e.jsx("span",{children:c.mxik}):"",p.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},p.id)}),!c.hasWebNomenclature&&e.jsx("td",{className:d.addingWrapper_tbody_td,children:e.jsx(K,{to:`/admin/stock-product/${c.id}`,className:d.addingWrapper_tbody_add,children:"Добавить"})})]},c==null?void 0:c.mxik))})]}),n.status&&e.jsx("span",{className:d.addingWrapper_table_error,children:n.message})]})}const rt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function j_(){const[o,t]=m.useState(""),[s,a]=m.useState({status:!1,message:""}),[n,_]=m.useState([]),[l]=m.useState(1),[i]=m.useState(10);m.useEffect(()=>{o||(_([]),a({status:!1,message:""}))},[o]);async function r(){const h=ke.get("multi-store");try{console.log(222,"searchText",o);const g=(await ae.get(`web-nomenclatures?multiStoreId=${h}&title=${o}&page=${l}&perPage=${i}`)).data.data;console.log(999,"data",g),g.length>0?(_([...g]),a({status:!1,message:""})):(_([]),a({status:!0,message:"Совпадений не найдено"}))}catch(v){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",v)}}async function c(h,v){h.preventDefault();try{const g=await ae.patch(`web-nomenclatures/${v}`,{isActive:!1});t(""),_([]),console.log("Продукт успешно отключен с веб сайта",g)}catch(g){console.log("Ошибка произошла при удалении продукта с вебсайта",g)}}async function p(h,v){h.preventDefault();try{const g=await ae.patch(`web-nomenclatures/${v}`,{isActive:!0});t(""),_([]),console.log("Продукт успешно включен на веб сайта",g)}catch(g){console.log("Ошибка произошла при удалении продукта с вебсайта",g)}}const u=async h=>{h.preventDefault(),r()};return e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("form",{action:"",className:d.addingWrapper_form,onSubmit:h=>u(h),children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:h=>t(h.target.value),value:o}),e.jsx(z,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsxs("tr",{className:d.addingWrapper_thead_tr,children:[rt.map(h=>e.jsx("th",{className:d.addingWrapper_thead_th,children:h.title},h.id)),e.jsx("th",{className:d.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:n==null?void 0:n.map(h=>e.jsxs("tr",{className:d.addingWrapper_tbody_tr,children:[rt.map(v=>e.jsxs("td",{className:d.addingWrapper_tbody_td,children:[v.title=="Наименование"?e.jsx("span",{children:h.title}):"",v.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},v.id)),e.jsx("td",{className:d.addingWrapper_tbody_td,children:e.jsxs("div",{className:d.addingWrapper_tbody_buttons,children:[h.isActive&&e.jsx(K,{to:"#",className:d.addingWrapper_tbody_del,onClick:v=>c(v,h.id),children:"Отключить"}),!h.isActive&&e.jsx(K,{to:"#",className:d.addingWrapper_tbody_del,onClick:v=>p(v,h.id),children:"Включить"}),e.jsx(K,{to:`/admin/website-product/${h.id}`,className:d.addingWrapper_tbody_add,children:"Изменить"})]})})]},h==null?void 0:h.id))})]}),s.status&&e.jsx("span",{className:d.addingWrapper_table_error,children:s.message})]})}const w_=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function C_(){const t=oe().pathname;return e.jsxs("div",{className:d.products,children:[e.jsx("div",{className:d.products_buttons,children:w_.map(s=>e.jsx(K,{to:s.href,className:`${d.products_btn} ${s.href==t?d.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(k_,{}),t=="/admin/product/adding/website"&&e.jsx(j_,{})]})}const S_=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function N_(){const t=oe().pathname;return e.jsxs("div",{className:d.products,children:[e.jsx("div",{className:d.products_buttons,children:S_.map(s=>e.jsx(K,{to:s.href,className:`${d.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?d.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(C_,{})]})}const I_="_user_title_1uizv_1",$_="_user_list_1uizv_6",D_="_user_list_link_1uizv_12",O_="_user_list_link_active_1uizv_26",P_="_user_form_1uizv_30",F_="_user_form_btn_1uizv_35",A_="_user_form_wrap_1uizv_51",L_="_user_form_input_1uizv_57",M_="_user_form_icon_1uizv_65",B_="_user_table_1uizv_68",W_="_user_table_tbody_1uizv_71",E_="_user_table_tr_1uizv_74",U_="_user_table_th_1uizv_77",R_="_user_table_td_1uizv_85",z_="_user_table_btns_1uizv_89",T_="_user_table_btn_1uizv_89",V_="_user_table_btn_blocked_1uizv_107",q_="_modal_1uizv_111",K_="_modal_active_1uizv_120",H_="_modal_wrap_1uizv_123",X_="_modal_wrap_header_1uizv_131",G_="_modal_wrap_stores_1uizv_143",Z_="_modal_wrap_stores_text_1uizv_165",J_="_modal_btns_1uizv_169",Q_="_modal_btn_1uizv_169",Y_="_modal_content_1uizv_193",ed="_modal_content_text_1uizv_197",td="_versions_1uizv_206",sd="_versions_block_1uizv_211",od="_versions_block_top_1uizv_216",nd="_versions_block_top_title_1uizv_226",ad="_versions_block_top_arrow_1uizv_230",rd="_versions_block_top_arrow_active_1uizv_239",id="_versions_block_dropdown_1uizv_242",cd="_versions_block_dropdown_item_1uizv_257",ld="_versions_block_dropdown_open_1uizv_268",_d="_shop_header_1uizv_275",dd="_shop_header_title_1uizv_282",B={user_title:I_,user_list:$_,user_list_link:D_,user_list_link_active:O_,user_form:P_,user_form_btn:F_,user_form_wrap:A_,user_form_input:L_,user_form_icon:M_,user_table:B_,user_table_tbody:W_,user_table_tr:E_,user_table_th:U_,user_table_td:R_,user_table_btns:z_,user_table_btn:T_,user_table_btn_blocked:V_,modal:q_,modal_active:K_,modal_wrap:H_,modal_wrap_header:X_,modal_wrap_stores:G_,modal_wrap_stores_text:Z_,modal_btns:J_,modal_btn:Q_,modal_content:Y_,modal_content_text:ed,versions:td,versions_block:sd,versions_block_top:od,versions_block_top_title:nd,versions_block_top_arrow:ad,versions_block_top_arrow_active:rd,versions_block_dropdown:id,versions_block_dropdown_item:cd,versions_block_dropdown_open:ld,shop_header:_d,shop_header_title:dd},Qe=({headers:o})=>e.jsx("thead",{className:B.user_table_thead,children:e.jsx("tr",{className:B.user_table_tr,children:o.map(t=>e.jsx("th",{className:B.user_table_th,children:t.title},t.id))})}),Ye=()=>{const[o,t]=m.useState(""),{setUserSearch:s}=_e(),a=n=>{n.preventDefault(),s(o)};return m.useEffect(()=>{o==""&&s("")},[o]),e.jsxs("form",{action:"",className:B.user_form,children:[e.jsxs("div",{className:B.user_form_wrap,children:[e.jsx("input",{type:"text",className:B.user_form_input,placeholder:"Поиск пользователей",onChange:n=>t(n.target.value),value:o}),e.jsx(z,{className:B.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:B.user_form_btn,onClick:n=>a(n),children:"Найти"})]})},et=({arr:o,showStore:t})=>{const{usersList:s,userSearch:a,openModalAdmin:n,openAppointUser:_,shopListAdmin:l,setOpenAppointUser:i,setOpenModalAdmin:r,setUsersList:c,setEditUserAdmin:p,setShopListDropdownAdmin:u,setCloseBlock:h,setFilteredShopListAdmin:v}=_e(),S=oe().pathname,[D,P]=m.useState([]);m.useEffect(()=>{let x=o;S==="/clients"?x=o.filter(b=>b.isUser):S==="/employees"&&(x=o.filter(b=>!b.isUser)),x=x==null?void 0:x.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),P(x)},[a,s,o,S]);const j=x=>{const b=s.map(I=>I.id===x?{...I,isBlocked:!I.isBlocked}:I);c(b)},w=x=>{r(!0),h(!0);const b=s.find(O=>O.id==x),I=[{id:te(),title:"Магазин 1",order:1},{id:te(),title:"Магазин 2",order:2},{id:te(),title:"Магазин 3",order:3}],C=I.filter(O=>!(b!=null&&b.shopList.some(W=>W.title===O.title)));console.log("editUser",b),console.log("shopListAdminArr",I),b&&(u(b.shopList),p(b),v(C))},f=x=>{i(!0),h(!0),u([]),v(l);const b=s.find(I=>I.id==x);b&&p(b)},k=n||_;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:B.user_table_tbody,children:D.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:B.user_table_td,children:x.name}),e.jsx("td",{className:B.user_table_td,children:t?x.shopList.map(b=>e.jsxs("p",{children:[b.title," ",`(${b.position})`]},b.id)):e.jsx("p",{children:x.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:B.user_table_td,children:t?"Админ 1":x.registerDate}),e.jsx("td",{className:B.user_table_btns,children:x!=null&&x.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${B.user_table_btn} ${x.isBlocked?B.user_table_btn_blocked:""}`,onClick:()=>j(x.id),children:x.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:B.user_table_btn,onClick:()=>f(x.id),disabled:k,children:"Назначить"})]}):e.jsx("button",{className:B.user_table_btn,onClick:()=>w(x.id),style:{background:"#B5FFC7"},disabled:k,children:"Изменить"})})]},x.id))})})};function it({color:o="black",className:t,header:s,isEnabled:a,dropdownItem:n,margin:_,versionList:l,closeBlock:i}){const{shopListAdmin:r,shopListDropdownAdmin:c,filteredShopListAdmin:p,setShopListDropdownAdmin:u,setShopListAdmin:h}=_e(),[v,g]=m.useState("Выберете должность"),[S,D]=m.useState("Выберете магазин"),[P,j]=m.useState(!1);m.useEffect(()=>{n!=null&&n.position?g(n.position):g("Выберете должность")},[n==null?void 0:n.position]),m.useEffect(()=>{i||j(!1)},[i]);const w=(b,I)=>{if(n){g(b.title);const C=c.filter(W=>W.title==n.title),O=c.findIndex(W=>W.title==n.title);C[0].position=b.title,c.splice(O,1,C[0]),u(c)}else D(b.title);if(a&&!c.some(C=>C.title==b.title)){g("Выберете должность");const C={...b,originalIndex:I};u([...c,C]),h(p.filter((O,W)=>W!==I))}j(!1)},f=b=>{const I=c.filter(C=>C.id!==b.id);if(u(I),b.originalIndex!==void 0){const C=[...r];C.splice(b.originalIndex,0,b),h(C)}else{const C=[...p,b].sort((O,W)=>O.order!==void 0&&W.order!==void 0?O.order-W.order:0);h(C),console.log("arr",C)}},k=()=>{j(!P)};function x(b,I){return b.order&&I.order&&(b==null?void 0:b.order)>(I==null?void 0:I.order)?1:-1}return e.jsx("div",{className:t??B.versions,style:{marginBottom:_},children:e.jsxs("div",{className:B.versions_block,children:[s&&e.jsxs("div",{className:B.shop_header,children:[e.jsx("p",{className:B.shop_header_title,children:n==null?void 0:n.title}),e.jsx("button",{onClick:()=>n&&f(n),children:e.jsx(z,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:B.versions_block_top,children:[e.jsx("h2",{className:B.versions_block_top_title,style:{color:o},children:n?v:S}),e.jsx("button",{className:B.versions_block_top_btn,onClick:()=>k(),children:e.jsx("div",{className:`${B.versions_block_top_arrow} ${P?B.versions_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${B.versions_block_dropdown} ${P?B.versions_block_dropdown_open:""}`,children:l==null?void 0:l.sort(x).map((b,I)=>e.jsx("span",{className:B.versions_block_dropdown_item,onClick:()=>w(b,I),children:b.title},I))})]})})}const tt=()=>{const{currentShopModal:o,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:a,openModalAdmin:n,editUserAdmin:_,shopListAdmin:l,usersList:i,openAppointUser:r,closeBlock:c,filteredShopListAdmin:p,setCurrentShopModal:u,setShopListPositionAdmin:h,setCurrentShopPosition:v,setOpenModalAdmin:g,setShopListAdmin:S,setUsersList:D,setOpenAppointUser:P,setCloseBlock:j,setFilteredShopListAdmin:w}=_e();m.useEffect(()=>{},[p]);const f=()=>{const C=i.findIndex(O=>O.id==(_==null?void 0:_.id));_&&t.every(O=>"position"in O)&&(_.shopList=t,i.splice(C,1,_),D(i),S(l),console.log("filteredShopListAdmin",p)),console.log("shopListAdmin",l),b(),t.length==0&&k()},k=()=>{if(_){_.isUser=!0,_.isEmployes=!1,_.shopList=[];const C={id:te(),title:"",position:"пользователь"};_.shopList=[{...C}]}b()},x=()=>{const C=i.findIndex(O=>O.id==(_==null?void 0:_.id));if(_&&(_.shopList=t,i.splice(C,1,_),_.isUser=!1,_.isEmployes=!0,D(i),P(!1),!(_!=null&&_.shopList.some(O=>"position"in O)))){_.isUser=!0,_.shopList=[];const O={id:te(),title:"",position:"пользователь"};_.shopList=[{...O}]}},b=()=>{S(l),w([]),g(!1),P(!1),j(!1),console.log("close modal")},I=m.useRef(null);return m.useEffect(()=>{const C=O=>{var W;I.current&&!((W=I==null?void 0:I.current)!=null&&W.contains(O.target))&&b()};return n||r?document.addEventListener("mousedown",C):document.removeEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[n,r]),e.jsx("div",{className:`${B.modal} ${n?B.modal_active:""} ${r?B.modal_active:""}`,children:e.jsxs("div",{ref:I,className:B.modal_wrap,children:[e.jsxs("div",{className:B.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>b(),children:e.jsx(z,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:B.modal_content,children:[e.jsxs("p",{className:B.modal_content_text,children:["Логин: ",_==null?void 0:_.name]}),e.jsxs("p",{className:B.modal_content_text,children:["Статус:",_==null?void 0:_.shopList.map(C=>e.jsx("span",{children:C.position},C.id))]}),e.jsx(it,{color:"#717171",setVersionList:S,currentVersion:o,setCurrentVersion:u,isEnabled:a,versionList:p||l,closeBlock:c}),e.jsxs("div",{className:B.modal_wrap_stores,children:[e.jsx("p",{className:B.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((C,O)=>e.jsx(it,{dropdownItem:C,margin:"12px",color:"#717171",versionList:s,setVersionList:h,setCurrentVersion:v,header:!0,closeBlock:c},O))]}),e.jsx("div",{className:B.modal_btns,children:r?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:B.modal_btn,onClick:()=>b(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:B.modal_btn,onClick:()=>x(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:B.modal_btn,onClick:()=>k(),children:"Уволить"}),e.jsx("button",{className:B.modal_btn,onClick:()=>f(),children:"Сохранить"})]})})]})]})})},pd=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],ud=()=>{const{usersList:o}=_e();return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:B.user_table,children:[e.jsx(Qe,{headers:pd}),e.jsx(et,{arr:o})]}),e.jsx(tt,{})]})},md=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],hd=()=>{const{usersList:o}=_e(),t=o.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:B.user_table,children:[e.jsx(Qe,{headers:md}),e.jsx(et,{arr:t})]}),e.jsx(tt,{})]})},vd=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],gd=()=>{const{usersList:o}=_e(),t=o.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:B.user_table,children:[e.jsx(Qe,{headers:vd}),e.jsx(et,{arr:t,showStore:!0})]}),e.jsx(tt,{})]})},bd=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],xd=()=>{const t=oe().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:B.users,children:e.jsxs("div",{className:B.users_header,children:[e.jsx("h2",{className:B.user_title,children:"Пользователи"}),e.jsx("ul",{className:B.user_list,children:bd.map(s=>e.jsx("li",{children:e.jsx(K,{className:`${B.user_list_link} ${t==s.href?B.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(ud,{}),t=="/admin/users/clients"&&e.jsx(hd,{}),t=="/admin/users/employees"&&e.jsx(gd,{})]})]})},ct=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function fd(){const[o,t]=m.useState(""),[s]=m.useState(1),[a]=m.useState(10),[n,_]=m.useState([]);m.useEffect(()=>{l()},[o]);async function l(){const i=ke.get("multi-store");try{const r=await ae.get(`nomenclatures?multiStoreId=${i}&page=${s}&perPage=${a}`),c=await r.data.data;console.log("res",r),_([...c])}catch(r){console.log("Ошибка произошла при получении всх продуктов со склада",r)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("h2",{className:d.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:d.addingWrapper_form,children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:o}),e.jsx(z,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsx("tr",{className:d.addingWrapper_thead_tr,children:ct.map(i=>e.jsx("th",{className:d.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:n&&(n==null?void 0:n.map(i=>e.jsx("tr",{className:d.addingWrapper_tbody_tr,children:ct.map(r=>{var c,p;return e.jsxs("td",{className:d.addingWrapper_tbody_td,children:[r.title=="Наименование"?e.jsx("span",{children:((c=i==null?void 0:i.name)==null?void 0:c.ru)&&((p=i==null?void 0:i.name)==null?void 0:p.ru)}):"",r.title=="Штрих-код"?e.jsx("span",{children:i==null?void 0:i.barcode}):""]},r.id)})},i==null?void 0:i.id)))})]})]})})}const lt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function yd(){const[o,t]=m.useState(""),[s]=m.useState(1),[a]=m.useState(10),[n,_]=m.useState([]);m.useEffect(()=>{l()},[o]);async function l(){const i=ke.get("multi-store");try{const r=await ae.get(`web-nomenclatures?multiStoreId=${i}&page=${s}&perPage=${a}`),c=await r.data.data;console.log("res",r),_([...c])}catch(r){console.log("Ошибка произошла при получении всх продуктов со склада",r)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.addingWrapper,children:[e.jsxs("h2",{className:d.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:d.addingWrapper_form,children:[e.jsxs("div",{className:d.addingWrapper_search,children:[e.jsx("input",{type:"text",className:d.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:o}),e.jsx(z,{className:d.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:d.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:d.addingWrapper_table,children:[e.jsx("thead",{className:d.addingWrapper_thead,children:e.jsx("tr",{className:d.addingWrapper_thead_tr,children:lt.map(i=>e.jsx("th",{className:d.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:d.addingWrapper_tbody,children:n==null?void 0:n.map(i=>e.jsx("tr",{className:d.addingWrapper_tbody_tr,children:lt.map(r=>e.jsx("td",{className:d.addingWrapper_tbody_td,children:r.title=="Наименование"?e.jsx("span",{children:i==null?void 0:i.title}):""},r.id))},i==null?void 0:i.id))})]})]})})}function kd(){const t=oe().pathname,{shopsStocks:s}=Ve();return e.jsxs("div",{className:d.layout,children:[e.jsx("ul",{className:d.layout_buttons,children:s.map(a=>e.jsx("li",{children:e.jsx(K,{to:`/admin/shops/shop/${a.url}`,className:`${d.layout_btn} ${t==`/admin/shops/shop/${a.url}`?d.layout_btn_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:d.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(fd,{}),t==="/admin/shops/shop/website"&&e.jsx(yd,{})]})]})}function jd(){const{shopsAmount:o,currentShop:t,setCurrentShop:s}=Ve(),n=oe().pathname;return e.jsxs("div",{className:d.layout,children:[e.jsx("h2",{className:d.layout_title,children:"Магазины"}),e.jsx("ul",{className:d.layout_buttons,children:o.map(_=>e.jsx("li",{children:e.jsx(K,{to:"/admin/shops/shop",className:`${d.layout_btn} ${t==_.url?d.layout_btn_active:""}`,onClick:()=>s(_.url),children:_.title})},_.id))}),n.startsWith("/admin/shops/shop")&&e.jsx("div",{className:d.layout_content,children:e.jsx(kd,{})})]})}function wd({item:o}){const{setErrorModal:t}=ve(),s=a=>{a.stopPropagation()};return e.jsx("div",{className:d.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:d.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:d.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(z,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:o.message})]})})}function Cd({localNewImage:o,setLocalNewImage:t}){const[s,a]=m.useState(null);function n(p,u){return p.order>u.order?1:-1}function _(p,u){a(u)}function l(p){p.target.style.background="white"}function i(p){p.preventDefault(),p.target.style.background="lightgray"}function r(p,u){p.preventDefault(),p.target.style.background="white";const h=o&&o.map(v=>v.id===u.id?{...v,order:(s==null?void 0:s.order)||v.order}:v.id===(s==null?void 0:s.id)?{...v,order:u.order}:v).sort((v,g)=>v.order-g.order);console.log(555,"newImages",h),h&&t(h),a(null)}const c=p=>{const u=o.filter(h=>h.id!==p);t([...u])};return m.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:o&&o.sort(n).map((p,u)=>e.jsxs("div",{className:`${d.productItem_photo} ${u==0?d.productItem_photo_active:""}`,draggable:!0,onDragStart:h=>_(h,p),onDragLeave:h=>l(h),onDragEnd:h=>l(h),onDragOver:h=>i(h),onDrop:h=>r(h,p),children:[e.jsx("div",{className:d.productItem_photo_img,children:e.jsx("img",{src:p.src?`https://api.mcrm.uz/${p.src}`:p.localSrc?p.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:d.productItem_photo_close,onClick:()=>c(p.id),children:e.jsx(z,{width:18,height:18,name:"XMarkIcon"})})]},p.id))})}function wt({stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:a,setLocalFormData:n,localFormData:_}){const{errorModal:l}=ve(),i=m.useRef(null),r=()=>{i.current!=null&&i.current.click()},c=async p=>{var h,v;const u=(v=(h=p==null?void 0:p.target)==null?void 0:h.files)==null?void 0:v[0];if(u&&["image/jpeg","image/png","image/webp"].includes(u.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",u);const g=new FormData;g.append("files[]",u),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",g),u&&n([..._,u]);const S=s&&(s==null?void 0:s.length)>0?s.reduce((P,j)=>j.order>P?j.order:P,-1/0):1,D=new FileReader;D.onload=P=>{var j;if((j=P.target)!=null&&j.result){const w={id:te(),order:S?S+1:1,localSrc:URL.createObjectURL(u)},f=[...s,w];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",f),a&&a([...f]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},D.readAsDataURL(u),console.log(6,"отрисовал выбранную картинку files",u),i.current&&(i.current.value="")}};return e.jsxs("div",{className:d.productItem_top,children:[l.status&&e.jsx(wd,{item:l}),e.jsx("h1",{className:d.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:d.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:d.productItem_photos,children:[e.jsx(Cd,{stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:a}),e.jsxs("div",{className:`${d.productItem_photo} ${d.productItem_add}`,onClick:r,children:[e.jsx(z,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:d.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:c,ref:i})]})]}),e.jsx("p",{className:d.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function Ct({localCategory:o,productName:t,productDescription:s,setProductDescription:a,setProductName:n,myBarcode:_,vendorCode:l,setVendorCode:i,myPrice:r}){var D,P,j,w;const{pickedCategory:c,currentProduct:p,setArticleModal:u,setOpenModalCategory:h}=ve();m.useEffect(()=>{(c||o)&&S()},[c,o]);const[v,g]=m.useState(""),S=async()=>{try{const k=(await ae.get(`categories/${c.id?c.id:o}`)).data;g(k.name.ru)}catch(f){console.log("Ошибка произошла при получении категонии по id",f)}};return e.jsxs("div",{className:d.productItem_left,children:[e.jsxs("div",{className:d.productItem_left_info,children:[e.jsxs("div",{className:d.productItem_left_item,children:[e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:d.productItem_left_item_top_input,value:l||"",onChange:f=>i(Number(f.target.value))})]}),e.jsx("div",{className:d.productItem_left_item_bottom,children:e.jsx("button",{className:d.productItem_left_item_button,onClick:()=>u(!0),children:"Изменить"})})]}),e.jsxs("div",{className:d.productItem_left_item,children:[e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:v||((P=(D=p==null?void 0:p.category)==null?void 0:D.name)!=null&&P.ru?(w=(j=p==null?void 0:p.category)==null?void 0:j.name)==null?void 0:w.ru:"")})]}),e.jsx("div",{className:d.productItem_left_item_bottom,children:e.jsx("button",{className:d.productItem_left_item_button,onClick:()=>h(!0),children:c!=null&&c.name||p!=null&&p.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:d.productItem_left_item,children:e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:_})]})}),e.jsx("div",{className:d.productItem_left_item,children:e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:r})]})}),e.jsx("div",{className:d.productItem_left_item,children:e.jsxs("div",{className:d.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:d.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:d.productItem_left_form,children:[e.jsxs("label",{className:d.productItem_left_form_label,children:[e.jsx("span",{className:d.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:d.productItem_left_form_input,type:"text",value:t||"",onChange:f=>n(f.target.value)})]}),e.jsxs("label",{className:d.productItem_left_form_label,children:[e.jsx("span",{className:d.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:f=>a(f.target.value),value:s||"",className:d.productItem_left_form_textarea}),e.jsx("p",{className:d.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function Sd({color:o="black",title:t="",extraOptionsList:s,className:a,openBlock:n,setOpenBlock:_,setExtraOptionsList:l}){const i=m.useRef([]);m.useEffect(()=>{i.current.length>0&&r()},[s]);const r=()=>{s&&s.forEach(p=>{i.current.forEach(u=>{u.name==p.title&&(u.checked=p.isActive)})})},c=(p,u)=>{const h=JSON.parse(JSON.stringify(s));h.forEach(v=>{v.title==u&&(v.isActive=!v.isActive)}),l&&l(h)};return e.jsxs("div",{className:a??T.versionExtraOptions,children:[t&&e.jsx("span",{className:T.versionExtraOptions_title,children:t}),e.jsxs("div",{className:T.versionExtraOptions_block,children:[e.jsxs("div",{className:T.versionExtraOptions_block_top,onClick:()=>_&&_(!n),children:[e.jsx("h2",{className:T.versionExtraOptions_block_top_title,style:{color:o},children:t||"Выберите параметры"}),e.jsx("button",{className:T.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${T.versionExtraOptions_block_top_arrow} ${n?T.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${T.versionExtraOptions_block_dropdown} ${n?T.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((p,u)=>e.jsxs("label",{className:T.versionExtraOptions_block_dropdown_item,children:[p.title,e.jsx("input",{ref:h=>{h&&(i.current[u]=h)},type:"checkbox",name:p.title,"data-type":p.title,onChange:h=>c(h,p.title)})]},p.id))})]})]})}function Nd({color:o="black",title:t="",versionList:s,className:a}){const[n,_]=m.useState(!1),[l,i]=m.useState("");m.useEffect(()=>{s==null||s.forEach(p=>{p.isActive&&i(p.title)})},[]);const r=()=>{_(!n)},c=p=>{s==null||s.forEach(u=>u.isActive=!1),s==null||s.forEach(u=>{u.title==p.title&&(u.isActive=!0,i(u.title))}),r()};return e.jsxs("div",{className:a??T.version3,children:[e.jsx("span",{className:T.version3_title,children:t}),e.jsxs("div",{className:T.version3_block,children:[e.jsxs("div",{className:T.version3_block_top,onClick:()=>r(),children:[e.jsx("h2",{className:T.version3_block_top_title,style:{color:o},children:l||"Выбрать"}),e.jsx("button",{className:T.version3_block_top_btn,children:e.jsx("div",{className:`${T.version3_block_top_arrow} ${n?T.version3_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${T.version3_block_dropdown} ${n?T.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(p=>e.jsx("span",{className:T.version3_block_dropdown_item,onClick:()=>c(p),children:s.length>1?p.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},p.id))})]})]})}function Id({extraOptionsStatus:o,localCategory:t,setExtraOptionsStatus:s,extraOptions:a}){const[n,_]=m.useState(!1);return m.useEffect(()=>{},[t]),e.jsxs("div",{className:d.productItem_right_item,children:[e.jsxs("div",{className:d.productItem_right_top,onClick:()=>s(!o),children:[e.jsx("h5",{className:d.productItem_right_title,children:"Доп. параметры"}),e.jsx(Se,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsxs("div",{className:`${d.productItem_right_bottom_items} ${o?d.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:d.productItem_right_bottom_item,children:e.jsx(Sd,{color:"",extraOptionsList:a,openBlock:n,setOpenBlock:_})}),a.map(l=>{if(l.isActive)return e.jsxs("div",{className:d.productItem_right_bottom_item,children:[e.jsx(Nd,{color:"",title:l.title,versionList:l.type}),e.jsx("button",{className:d.productItem_right_bottom_del,children:"Удалить"})]},l.id)})]})]})}function _t({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:n,currentVersion:_,setOpenBlock:l,setCurrentVersion:i,setVersionList:r}){const c=p=>{i&&i(p.title);const u=s.map(g=>({id:g.id,title:g.title,isActive:!1})),h=u.find(g=>g.id==p.id),v=u.findIndex(g=>g.id==p.id);h&&(h.isActive=!0,u.splice(v,1,h),r&&r(u))};return e.jsxs("div",{className:a??T.version3,children:[e.jsx("span",{className:T.version3_title,children:t}),e.jsxs("div",{className:T.version3_block,children:[e.jsxs("div",{className:T.version3_block_top,children:[e.jsx("h2",{className:T.version3_block_top_title,style:{color:o},children:_}),e.jsx("button",{className:T.version3_block_top_btn,onClick:()=>l&&l(!n),children:e.jsx("div",{className:`${T.version3_block_top_arrow} ${n?T.version3_block_top_arrow_active:""}`,children:e.jsx(z,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${T.version3_block_dropdown} ${n?T.version3_block_dropdown_open:""}`,children:s.map(p=>e.jsx("span",{className:T.version3_block_dropdown_item,onClick:()=>c(p),children:p.title},p.id))})]})]})}function $d({brieflyProductStatus:o,setBrieflyProductStatus:t}){return e.jsxs("div",{className:d.productItem_right_item,children:[e.jsxs("div",{className:d.productItem_right_top,onClick:()=>t(!o),children:[e.jsx("h5",{className:d.productItem_right_title,children:"Коротко о товаре"}),e.jsx(Se,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsx("div",{className:`${d.productItem_right_bottom_items} ${o?d.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${d.productItem_right_bottom_item} ${d.productItem_right_bottom_row}`,children:[e.jsx(_t,{color:"",title:"Объем, л"}),e.jsx(_t,{color:"",title:"Кол-во в упаковке"})]})})]})}function St({currentProduct:o,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:a,setBrieflyProductStatus:n,localCategory:_,extraOptions:l,setExtraOptions:i}){return e.jsxs("div",{className:d.productItem_right,children:[e.jsx("div",{className:d.productItem_right_item,children:e.jsxs("div",{className:d.productItem_right_top,children:[e.jsx("h5",{className:d.productItem_right_title,children:"Коментарии"}),e.jsx(Se,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(Id,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:_,extraOptions:l,setExtraOptions:i,currentProduct:o}),e.jsx($d,{brieflyProductStatus:a,setBrieflyProductStatus:n})]})}function Nt({stockName:o,setAdminSettings:t}){return e.jsxs("div",{className:d.settings_content_buttons,children:[e.jsx(K,{to:o=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${d.settings_content_btn} ${d.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${d.settings_content_btn} ${d.settings_content_btn_save}`,onClick:()=>t(),children:o=="website"?"Сохранить":"Добавить"})]})}function Dd(){const{setArticleModal:o}=ve();return e.jsxs("div",{className:d.articleModal_block_nav,children:[e.jsx("h2",{className:d.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(z,{name:"XMarkIcon"})})]})}function Od({productName:o}){const[t]=m.useState(""),[s]=m.useState("");return e.jsxs("div",{className:d.articleModal_block_info,children:[e.jsxs("div",{className:d.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:o})]}),e.jsxs("div",{className:d.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:d.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[s,"1%"]})]})]})}function It({item:o}){return e.jsxs("div",{className:d.articleModal_block_recommended_item,children:[e.jsx("h3",{className:d.articleModal_block_recommended_item_title,children:o.title}),e.jsxs("div",{className:d.articleModal_block_recommended_content,children:[e.jsx("div",{className:d.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:d.articleModal_block_recommended_info,children:[e.jsxs("div",{className:d.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:d.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:d.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:d.articleModal_block_recommended_article,children:o.article})]})]})}const Pd=[{id:te(),title:"Молоко Nestle",article:"#DF262515"}];function Fd(){return e.jsxs("div",{className:d.articleModal_block_recommended,children:[e.jsx("h2",{className:d.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:d.articleModal_block_recommended_list,children:Pd.map(o=>e.jsx(It,{item:o},o.id))})]})}function Ad(){return e.jsx("div",{className:d.articleModal_block_search,children:e.jsxs("div",{className:d.articleModal_block_search_box,children:[e.jsxs("div",{className:d.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(z,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:d.articleModal_block_search_btn,children:"Найти"})]})})}const Ld=[{id:te(),title:"Молоко Nestle",article:"#DF262515"},{id:te(),title:"Молоко Nestle",article:"#DF262515"},{id:te(),title:"Молоко Nestle",article:"#DF262515"}];function Md(){return e.jsx("div",{className:d.articleModal_block_found,children:Ld.map(o=>e.jsx(It,{item:o},o.id))})}function $t({productName:o}){return e.jsx("div",{className:d.articleModal,children:e.jsxs("div",{className:d.articleModal_block,children:[e.jsx(Dd,{}),e.jsx(Od,{productName:o}),e.jsx(Fd,{}),e.jsx(Ad,{}),e.jsx(Md,{}),e.jsx("div",{className:d.articleModal_block_buttonBox,children:e.jsx("button",{className:d.articleModal_block_button,children:"Выбрать"})})]})})}function Bd(){const o=Ie(),t=oe(),{id:s}=dt(),{openModalCategory:a}=ve(),{pickedCategory:n,currentProduct:_,setErrorModal:l,setCurrentProduct:i,setPickedCategory:r,articleModal:c}=ve(),[p,u]=m.useState(""),[h,v]=m.useState(0),[g,S]=m.useState(0),[D,P]=m.useState(Number(s)),[j,w]=m.useState(!1),[f,k]=m.useState([]),[x,b]=m.useState(!1),[I,C]=m.useState(0),[O,W]=m.useState(""),[U,q]=m.useState([]),[y,L]=m.useState([]);async function E(){try{return await(await ae.get(`nomenclatures/${s}`)).data}catch($){console.log("Ошибка произошла при получении продукта со склада по id",$)}}m.useEffect(()=>{r({})},[t.pathname]),m.useEffect(()=>{A()},[s,n]);async function A(){var N;const $=await E();$&&(u((N=$==null?void 0:$.name)==null?void 0:N.ru),i({...$}),P($==null?void 0:$.categoryId),v($==null?void 0:$.barcode),S($==null?void 0:$.price))}const le=async()=>{if(_){n.id&&(await be(),P(n.id));const $=await he(y),N=I||await ye(),H={nomenclatureId:_.id,title:p,article:N,images:[...$],description:O,document:"string"};await pe(H),r({}),k([]),o("/admin/product/adding/stock",{replace:!0})}else l({status:!0,message:'"Выберите категорию"'})};async function pe($){try{await ae.post("web-nomenclatures",$)}catch(N){console.log("Ошибка произошла при добавлении web nomenclatures",N)}}async function be(){try{await ae.patch(`nomenclatures/${s}`,{categoryId:n.id}),P(n.id)}catch($){console.log("Ошибка произошла при изменении котегории на складе",$)}}const he=async $=>{if($){const N=new FormData;$.forEach((H,Y)=>{N.append(`files[${Y}]`,H)});try{return await(await ae.post("media-objects/uploads",N)).data}catch(H){console.error("Ошибка при добавлении картинок на сервер",H)}}},ye=async()=>{const $=ke.get("multi-store");try{const N=await ae.get(`web-credentials/${$}`);return console.log("fetchArticle res",N),N.data.article}catch(N){console.log("Ошибка при получении артикля",N)}};return e.jsxs("div",{className:d.productItem,children:[a&&e.jsx(pt,{}),e.jsx(wt,{stockName:"stock",myMxikCode:s,localFormData:y,setLocalFormData:L,localNewImage:U,setLocalNewImage:q}),e.jsxs("div",{className:d.productItem_settings,children:[e.jsx(Ct,{myPrice:g,setMyPrice:S,myBarcode:h,setMyBarcode:v,localCategory:D,productName:p,productDescription:O,setProductDescription:W,setProductName:u,vendorCode:I,setVendorCode:C}),e.jsx(St,{extraOptionsStatus:j,setExtraOptionsStatus:w,brieflyProductStatus:x,setBrieflyProductStatus:b,localCategory:D,extraOptions:f,setExtraOptions:k,currentProduct:_})]}),e.jsx(Nt,{stockName:"stock",setAdminSettings:le}),c&&e.jsx($t,{productName:p})]})}function Wd(){const o=Ie(),t=oe(),{id:s}=dt(),{openModalCategory:a}=ve(),{pickedCategory:n,webCurrentProduct:_,setWebCurrentProduct:l,setErrorModal:i,setPickedCategory:r,articleModal:c}=ve(),[p,u]=m.useState(""),[h,v]=m.useState(0),[g,S]=m.useState(0),[D,P]=m.useState(0),[j,w]=m.useState(Number(s)),[f,k]=m.useState(!1),[x,b]=m.useState([]),[I,C]=m.useState(!1),[O,W]=m.useState(0),[U,q]=m.useState(""),[y,L]=m.useState([]),[E,A]=m.useState([]);async function le(){try{return await(await ae.get(`web-nomenclatures/${s}`)).data}catch(N){console.log("Ошибка произошла при получении продукта с сайта по id",N)}}m.useEffect(()=>{r({})},[t.pathname]),m.useEffect(()=>{pe()},[s]);async function pe(){var H,Y,re,Oe,Pe,je,ne;const N=await le();if(N){S((H=N==null?void 0:N.nomenclature)==null?void 0:H.price),v((Y=N==null?void 0:N.nomenclature)==null?void 0:Y.barcode),P((re=N==null?void 0:N.nomenclature)==null?void 0:re.id),W(N==null?void 0:N.article),u(N!=null&&N.title?N==null?void 0:N.title:(Pe=(Oe=N==null?void 0:N.nomenclature)==null?void 0:Oe.name)==null?void 0:Pe.ru),l({...N}),w((ne=(je=N==null?void 0:N.nomenclature)==null?void 0:je.category)==null?void 0:ne.id);let G=1;const ue=N.images?N.images.map(xe=>({id:te(),order:G++,src:xe})):[];L(ue),G=1,q(N.description?N.description:"")}}const be=async()=>{if(_||n.label){n.id&&await ye();const N=await $(E);console.log(15,"получил ответ от функции fetchPhotos() images",N),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const H=y.filter(re=>re.src).map(re=>{if(re.src)return re.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",H);const Y={nomenclatureId:_.id,title:p,article:O,images:[...H,...N],description:U,document:"string"};console.log(18,"создал новый объект продукта newProduct",Y),console.log(18,"localNewImage",y),he(Y),r({}),b([]),o("/admin/product/adding/website",{replace:!0})}else i({status:!0,message:'"Выберите категорию"'})};async function he(N){try{await ae.patch(`web-nomenclatures/${s}`,N)}catch(H){console.log("Ошибка произошла при добавлении web nomenclatures",H)}}async function ye(){try{await ae.patch(`nomenclatures/${D}`,{categoryId:n.id}),w(n.id)}catch(N){console.log("Ошибка произошла при изменении котегории на сайте",N)}}const $=async N=>{if(N){const H=new FormData;N.forEach((Y,re)=>{H.append(`files[${re}]`,Y)});try{return await(await ae.post("media-objects/uploads",H)).data}catch(Y){console.error("Ошибка при добавлении картинок на сервер",Y)}}};return e.jsxs("div",{className:d.productItem,children:[a&&e.jsx(pt,{}),e.jsx(wt,{stockName:"website",myMxikCode:s,localNewImage:y,setLocalNewImage:L,localFormData:E,setLocalFormData:A}),e.jsxs("div",{className:d.productItem_settings,children:[e.jsx(Ct,{myPrice:g,setMyPrice:S,myBarcode:h,setMyBarcode:v,localCategory:j,productName:p,productDescription:U,setProductDescription:q,setProductName:u,vendorCode:O,setVendorCode:W}),e.jsx(St,{extraOptionsStatus:f,setExtraOptionsStatus:k,brieflyProductStatus:I,setBrieflyProductStatus:C,localCategory:j,extraOptions:x,setExtraOptions:b,currentProduct:_})]}),e.jsx(Nt,{stockName:"website",setAdminSettings:be}),c&&e.jsx($t,{productName:p})]})}function Xd(){const{user:o}=At(),{setCurrentShop:t}=Ve(),a=oe().pathname;m.useEffect(()=>{a.startsWith("/admin/shops")||t("0")},[a]);const n=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(z,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(z,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(z,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(z,{name:"BuildingStorefrontIcon"}),isActive:!1}],[_,l]=m.useState(n),i=r=>{const c=_.map(u=>({id:u.id,label:u.label,href:u.href,icon:u.icon,isActive:!1})),p=c.find(u=>u.id==r);p&&(p.isActive=!0),l(c)};return e.jsxs(e.Fragment,{children:[e.jsx(Lt,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:d.wrapper,children:[e.jsx("h1",{className:d.wrapper_title,children:o==null?void 0:o.username}),e.jsxs("div",{className:d.content,children:[e.jsx("div",{className:d.content_left,children:e.jsx("ul",{className:d.tools,children:_.map(r=>e.jsx("li",{children:e.jsxs(K,{to:r.href,className:`${d.tools_link} ${a.startsWith(r.href)?d.tools_link_active:""}`,onClick:()=>i(r.id),children:[r.icon,r.label]})},r.id))})}),a.startsWith("/admin")&&e.jsxs("div",{className:d.content_right,children:[a.startsWith("/admin/settings")&&e.jsx(y_,{}),a.startsWith("/admin/users")&&e.jsx(xd,{}),a.startsWith("/admin/shops")&&e.jsx(jd,{}),a.startsWith("/admin/product")&&e.jsx(N_,{}),a.startsWith("/admin/stock-product")&&e.jsx(Bd,{}),a.startsWith("/admin/website-product")&&e.jsx(Wd,{})]})]})]})})]})}export{Xd as default};
