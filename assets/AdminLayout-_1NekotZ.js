import{j as e,w as de,r as m,x as Xe,L as Z,v as ee,q as xe,o as oe,y as se,e as te,u as Se,z as Dt,A as $t,B as Pt,C as _t}from"./index-CJ5aoQpT.js";import{u as Ft}from"./userStore-BgTMZPH0.js";import{C as T}from"./CustomIcon-DrVbLm7Q.js";import{s as Te}from"./shop1Store-DiGO47YW.js";import{a as Re,c as Ge,H as At}from"./Header-YhUUJ_NO.js";import{a as ue,s as G,M as dt}from"./Modal-DNeHRUq-.js";import{b as ce}from"./bannerStore-d6RSEf0u.js";import"./XMarkIcon-Dsnfe7eh.js";const Lt="_wrapper_35b4n_1",Mt="_wrapper_title_35b4n_4",Wt="_content_35b4n_10",Et="_content_left_35b4n_16",Ut="_content_right_35b4n_19",Bt="_tools_35b4n_45",zt="_tools_link_35b4n_50",Tt="_tools_link_active_35b4n_63",Rt="_settings_35b4n_86",Vt="_settings_title_35b4n_89",qt="_settings_content_35b4n_94",Kt="_settings_content_top_35b4n_97",Ht="_settings_content_buttons_35b4n_100",Xt="_settings_content_btn_35b4n_110",Gt="_settings_content_btn_cancel_35b4n_122",Zt="_settings_content_btn_save_35b4n_125",Jt="_settings_tools_35b4n_128",Yt="_settings_tools_link_35b4n_133",Qt="_settings_tools_link_active_35b4n_148",es="_wrapperModules_35b4n_153",ts="_item_35b4n_160",ss="_item_top_35b4n_165",ns="_item_top_title_35b4n_176",os="_item_top_arrow_35b4n_180",rs="_item_top_arrow_active_35b4n_188",as="_item_block_35b4n_191",is="_item_block_item_35b4n_202",cs="_item_block_open_35b4n_205",ls="_item_onOff_35b4n_211",_s="_item_delivery_35b4n_211",ds="_versions_block_35b4n_217",ps="_versions_block_top_35b4n_222",us="_versions_block_top_title_35b4n_232",ms="_versions_block_top_arrow_35b4n_237",hs="_versions_block_top_arrow_active_35b4n_246",bs="_versions_block_dropdown_35b4n_249",vs="_versions_block_dropdown_item_35b4n_260",gs="_versions_block_dropdown_open_35b4n_271",xs="_versions_block_onOff_35b4n_277",fs="_versions_block_delivery_35b4n_277",ks="_categoriesDropDown_title_35b4n_283",ys="_categoriesDropDown_item_35b4n_286",js="_categoriesDropDown_item_top_35b4n_292",ws="_categoriesDropDown_item_top_title_35b4n_303",Cs="_categoriesDropDown_item_top_arrow_35b4n_307",Ns="_categoriesDropDown_item_top_arrow_active_35b4n_314",Ss="_categoriesDropDown_item_block_35b4n_317",Is="_categoriesDropDown_item_block_line_35b4n_326",Os="_categoriesDropDown_item_block_active_35b4n_338",Ds="_categoriesDropDown_item_block_open_35b4n_341",$s="_categoriesDropDown_item_onOff_35b4n_346",Ps="_categoriesDropDown_item_delivery_35b4n_346",Fs="_products_buttons_35b4n_352",As="_products_btn_35b4n_358",Ls="_products_btn_active_35b4n_369",Ms="_productItem_title_35b4n_374",Ws="_productItem_basePhoto_35b4n_379",Es="_productItem_photos_35b4n_385",Us="_productItem_photos_desc_35b4n_391",Bs="_productItem_photo_35b4n_385",zs="_productItem_photo_img_35b4n_406",Ts="_productItem_photo_close_35b4n_417",Rs="_productItem_photo_active_35b4n_429",Vs="_productItem_add_35b4n_433",qs="_productItem_add_text_35b4n_441",Ks="_productItem_settings_35b4n_446",Hs="_productItem_left_info_35b4n_450",Xs="_productItem_left_item_35b4n_458",Gs="_productItem_left_item_top_35b4n_462",Zs="_productItem_left_item_top_input_35b4n_483",Js="_productItem_left_item_bottom_35b4n_489",Ys="_productItem_left_form_35b4n_502",Qs="_productItem_left_form_label_35b4n_509",en="_productItem_left_form_title_35b4n_513",tn="_productItem_left_form_input_35b4n_519",sn="_productItem_left_form_textarea_35b4n_527",nn="_productItem_left_form_size_35b4n_535",on="_productItem_right_35b4n_543",rn="_productItem_right_item_35b4n_550",an="_productItem_right_top_35b4n_555",cn="_productItem_right_title_35b4n_562",ln="_productItem_right_bottom_items_35b4n_568",_n="_productItem_right_bottom_items_active_35b4n_577",dn="_productItem_right_bottom_item_35b4n_568",pn="_productItem_right_bottom_row_35b4n_603",un="_productItem_right_bottom_del_35b4n_608",mn="_banner_nav_list_35b4n_619",hn="_banner_nav_link_35b4n_625",bn="_banner_nav_link_active_35b4n_640",vn="_addingWrapper_title_35b4n_645",gn="_addingWrapper_form_35b4n_650",xn="_addingWrapper_form_btn_35b4n_655",fn="_addingWrapper_search_35b4n_672",kn="_addingWrapper_search_input_35b4n_678",yn="_addingWrapper_search_icon_35b4n_686",jn="_addingWrapper_table_35b4n_689",wn="_addingWrapper_table_error_35b4n_692",Cn="_addingWrapper_thead_tr_35b4n_696",Nn="_addingWrapper_thead_th_35b4n_700",Sn="_addingWrapper_tbody_tr_35b4n_708",In="_addingWrapper_tbody_td_35b4n_711",On="_addingWrapper_tbody_buttons_35b4n_725",Dn="_addingWrapper_tbody_add_35b4n_730",$n="_addingWrapper_tbody_del_35b4n_737",Pn="_errorWrapper_35b4n_745",Fn="_errorWrapper_block_35b4n_754",An="_errorWrapper_block_close_35b4n_764",Ln="_layout_title_35b4n_775",Mn="_layout_buttons_35b4n_780",Wn="_layout_btn_35b4n_786",En="_layout_btn_active_35b4n_800",Un="_editBlock_35b4n_805",Bn="_articleModal_35b4n_817",zn="_articleModal_block_35b4n_826",Tn="_articleModal_block_nav_35b4n_833",Rn="_articleModal_block_title_35b4n_840",Vn="_articleModal_block_info_35b4n_845",qn="_articleModal_block_info_item_35b4n_848",Kn="_articleModal_block_recommended_35b4n_863",Hn="_articleModal_block_recommended_title_35b4n_866",Xn="_articleModal_block_recommended_item_35b4n_872",Gn="_articleModal_block_recommended_item_title_35b4n_876",Zn="_articleModal_block_recommended_content_35b4n_882",Jn="_articleModal_block_recommended_img_35b4n_887",Yn="_articleModal_block_recommended_info_35b4n_897",Qn="_articleModal_block_recommended_desc_35b4n_902",eo="_articleModal_block_recommended_article_35b4n_916",to="_articleModal_block_search_35b4n_921",so="_articleModal_block_search_box_35b4n_924",no="_articleModal_block_search_input_35b4n_929",oo="_articleModal_block_search_btn_35b4n_941",ro="_articleModal_block_found_35b4n_951",ao="_articleModal_block_buttonBox_35b4n_957",io="_articleModal_block_button_35b4n_957",_={wrapper:Lt,wrapper_title:Mt,content:Wt,content_left:Et,content_right:Ut,tools:Bt,tools_link:zt,tools_link_active:Tt,settings:Rt,settings_title:Vt,settings_content:qt,settings_content_top:Kt,settings_content_buttons:Ht,settings_content_btn:Xt,settings_content_btn_cancel:Gt,settings_content_btn_save:Zt,settings_tools:Jt,settings_tools_link:Yt,settings_tools_link_active:Qt,wrapperModules:es,item:ts,item_top:ss,item_top_title:ns,item_top_arrow:os,item_top_arrow_active:rs,item_block:as,item_block_item:is,item_block_open:cs,item_onOff:ls,item_delivery:_s,versions_block:ds,versions_block_top:ps,versions_block_top_title:us,versions_block_top_arrow:ms,versions_block_top_arrow_active:hs,versions_block_dropdown:bs,versions_block_dropdown_item:vs,versions_block_dropdown_open:gs,versions_block_onOff:xs,versions_block_delivery:fs,categoriesDropDown_title:ks,categoriesDropDown_item:ys,categoriesDropDown_item_top:js,categoriesDropDown_item_top_title:ws,categoriesDropDown_item_top_arrow:Cs,categoriesDropDown_item_top_arrow_active:Ns,categoriesDropDown_item_block:Ss,categoriesDropDown_item_block_line:Is,categoriesDropDown_item_block_active:Os,categoriesDropDown_item_block_open:Ds,categoriesDropDown_item_onOff:$s,categoriesDropDown_item_delivery:Ps,products_buttons:Fs,products_btn:As,products_btn_active:Ls,productItem_title:Ms,productItem_basePhoto:Ws,productItem_photos:Es,productItem_photos_desc:Us,productItem_photo:Bs,productItem_photo_img:zs,productItem_photo_close:Ts,productItem_photo_active:Rs,productItem_add:Vs,productItem_add_text:qs,productItem_settings:Ks,productItem_left_info:Hs,productItem_left_item:Xs,productItem_left_item_top:Gs,productItem_left_item_top_input:Zs,productItem_left_item_bottom:Js,productItem_left_form:Ys,productItem_left_form_label:Qs,productItem_left_form_title:en,productItem_left_form_input:tn,productItem_left_form_textarea:sn,productItem_left_form_size:nn,productItem_right:on,productItem_right_item:rn,productItem_right_top:an,productItem_right_title:cn,productItem_right_bottom_items:ln,productItem_right_bottom_items_active:_n,productItem_right_bottom_item:dn,productItem_right_bottom_row:pn,productItem_right_bottom_del:un,banner_nav_list:mn,banner_nav_link:hn,banner_nav_link_active:bn,addingWrapper_title:vn,addingWrapper_form:gn,addingWrapper_form_btn:xn,addingWrapper_search:fn,addingWrapper_search_input:kn,addingWrapper_search_icon:yn,addingWrapper_table:jn,addingWrapper_table_error:wn,addingWrapper_thead_tr:Cn,addingWrapper_thead_th:Nn,addingWrapper_tbody_tr:Sn,addingWrapper_tbody_td:In,addingWrapper_tbody_buttons:On,addingWrapper_tbody_add:Dn,addingWrapper_tbody_del:$n,errorWrapper:Pn,errorWrapper_block:Fn,errorWrapper_block_close:An,layout_title:Ln,layout_buttons:Mn,layout_btn:Wn,layout_btn_active:En,editBlock:Un,articleModal:Bn,articleModal_block:zn,articleModal_block_nav:Tn,articleModal_block_title:Rn,articleModal_block_info:Vn,articleModal_block_info_item:qn,articleModal_block_recommended:Kn,articleModal_block_recommended_title:Hn,articleModal_block_recommended_item:Xn,articleModal_block_recommended_item_title:Gn,articleModal_block_recommended_content:Zn,articleModal_block_recommended_img:Jn,articleModal_block_recommended_info:Yn,articleModal_block_recommended_desc:Qn,articleModal_block_recommended_article:eo,articleModal_block_search:to,articleModal_block_search_box:so,articleModal_block_search_input:no,articleModal_block_search_btn:oo,articleModal_block_found:ro,articleModal_block_buttonBox:ao,articleModal_block_button:io};function Ce({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:o=500,scale:l=1.1,status:d=!1}){const i={width:`${n}px`,height:`${n/2-n/20}px`,background:d?s:r,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},c={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${d?s:r}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${l}) translateX(${d?"110%":"0"})`};return e.jsx("div",{style:i,children:e.jsx("div",{style:c})})}const co="_versions_1cgvq_1",lo="_versions_block_1cgvq_6",_o="_versions_block_top_1cgvq_11",po="_versions_block_top_title_1cgvq_21",uo="_versions_block_top_arrow_1cgvq_25",mo="_versions_block_top_arrow_active_1cgvq_34",ho="_versions_block_dropdown_1cgvq_37",bo="_versions_block_dropdown_item_1cgvq_49",vo="_versions_block_dropdown_open_1cgvq_60",go="_versions_block_onOff_1cgvq_66",xo="_versions_block_delivery_1cgvq_66",fo="_versions2_1cgvq_72",ko="_versions2_block_1cgvq_77",yo="_versions2_block_top_1cgvq_82",jo="_versions2_block_top_title_1cgvq_92",wo="_versions2_block_top_arrow_1cgvq_96",Co="_versions2_block_top_arrow_active_1cgvq_105",No="_versions2_block_dropdown_1cgvq_108",So="_versions2_block_dropdown_item_1cgvq_119",Io="_versions2_block_dropdown_open_1cgvq_130",Oo="_versions2_block_onOff_1cgvq_136",Do="_versions2_block_delivery_1cgvq_136",$o="_version3_1cgvq_142",Po="_version3_title_1cgvq_147",Fo="_version3_block_1cgvq_153",Ao="_version3_block_top_1cgvq_158",Lo="_version3_block_top_title_1cgvq_169",Mo="_version3_block_top_arrow_1cgvq_173",Wo="_version3_block_top_arrow_active_1cgvq_183",Eo="_version3_block_dropdown_1cgvq_186",Uo="_version3_block_dropdown_item_1cgvq_197",Bo="_version3_block_dropdown_open_1cgvq_213",zo="_version3_block_onOff_1cgvq_237",To="_version3_block_delivery_1cgvq_237",Ro="_versionExtraOptions_1cgvq_243",Vo="_versionExtraOptions_title_1cgvq_248",qo="_versionExtraOptions_block_1cgvq_254",Ko="_versionExtraOptions_block_top_1cgvq_259",Ho="_versionExtraOptions_block_top_title_1cgvq_270",Xo="_versionExtraOptions_block_top_arrow_1cgvq_275",Go="_versionExtraOptions_block_top_arrow_active_1cgvq_285",Zo="_versionExtraOptions_block_dropdown_1cgvq_288",Jo="_versionExtraOptions_block_dropdown_item_1cgvq_299",Yo="_versionExtraOptions_block_dropdown_open_1cgvq_316",Qo="_versionExtraOptions_block_onOff_1cgvq_340",er="_versionExtraOptions_block_delivery_1cgvq_340",z={versions:co,versions_block:lo,versions_block_top:_o,versions_block_top_title:po,versions_block_top_arrow:uo,versions_block_top_arrow_active:mo,versions_block_dropdown:ho,versions_block_dropdown_item:bo,versions_block_dropdown_open:vo,versions_block_onOff:go,versions_block_delivery:xo,versions2:fo,versions2_block:ko,versions2_block_top:yo,versions2_block_top_title:jo,versions2_block_top_arrow:wo,versions2_block_top_arrow_active:Co,versions2_block_dropdown:No,versions2_block_dropdown_item:So,versions2_block_dropdown_open:Io,versions2_block_onOff:Oo,versions2_block_delivery:Do,version3:$o,version3_title:Po,version3_block:Fo,version3_block_top:Ao,version3_block_top_title:Lo,version3_block_top_arrow:Mo,version3_block_top_arrow_active:Wo,version3_block_dropdown:Eo,version3_block_dropdown_item:Uo,version3_block_dropdown_open:Bo,version3_block_onOff:zo,version3_block_delivery:To,versionExtraOptions:Ro,versionExtraOptions_title:Vo,versionExtraOptions_block:qo,versionExtraOptions_block_top:Ko,versionExtraOptions_block_top_title:Ho,versionExtraOptions_block_top_arrow:Xo,versionExtraOptions_block_top_arrow_active:Go,versionExtraOptions_block_dropdown:Zo,versionExtraOptions_block_dropdown_item:Jo,versionExtraOptions_block_dropdown_open:Yo,versionExtraOptions_block_onOff:Qo,versionExtraOptions_block_delivery:er};function tt({color:n="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:r,openBlock:o,currentVersion:l,setOpenBlock:d,setCurrentVersion:i,setVersionList:c}){const a=p=>{i(p.title);const u=s.map(v=>({id:v.id,title:v.title,isActive:!1})),h=u.find(v=>v.id==p.id),b=u.findIndex(v=>v.id==p.id);h&&(h.isActive=!0,u.splice(b,1,h),c(u))};return e.jsxs("div",{className:r??z.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:z.versions_block,children:[e.jsxs("div",{className:z.versions_block_top,children:[e.jsx("h2",{className:z.versions_block_top_title,style:{color:n},children:l}),e.jsx("button",{className:z.versions_block_top_btn,onClick:()=>d(!o),children:e.jsx("div",{className:`${z.versions_block_top_arrow} ${o?z.versions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.versions_block_dropdown} ${o?z.versions_block_dropdown_open:""}`,children:s.map(p=>e.jsx("span",{className:z.versions_block_dropdown_item,onClick:()=>a(p),children:p.title},p.id))})]})]})}function tr(){const{modulesCashRegisterStatus:n,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:r,openBlockCashRegister:o,openBlockCashRegisterVersion:l,openBlockCart:d,cartVersionList:i,modulesCartStatus:c,cartCurrentVersion:a,openBlockCartVersion:p,setCartVersionList:u,setCartCurrentVersion:h,setModulesCartStatus:b,setOpenBlockCart:v,setOpenBlockCartVersion:I,setDeliveryStatus:$,setOpenBlockCashRegister:F,setCashRegisterVersionList:j,setModulesCashRegisterStatus:w,setCashRegisterCurrentVersion:f,setOpenBlockCashRegisterVersion:y}=de(),x=()=>{v(!d)},g=()=>{F(!o)};return e.jsxs("div",{className:_.wrapperModules,children:[e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>x(),children:[e.jsx("h2",{className:_.item_top_title,children:"Корзина"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>x(),children:e.jsx("div",{className:`${_.item_top_arrow} ${d?_.item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${d?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>b(!c),children:e.jsx(Ce,{status:c,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(tt,{color:"rgb(137, 250, 135)",openBlock:p,setOpenBlock:I,title:"Выберите версию",versionList:i,currentVersion:a,setCurrentVersion:h,setVersionList:u}),e.jsxs("div",{className:_.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:_.item_shell,onClick:()=>$(!t),children:e.jsx(Ce,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>g(),children:[e.jsx("h2",{className:_.item_top_title,children:"Кacca"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>g(),children:e.jsx("div",{className:`${_.item_top_arrow} ${o?_.item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${o?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>w(!n),children:e.jsx(Ce,{status:n,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(tt,{color:"rgb(137, 250, 135)",openBlock:l,setOpenBlock:y,title:"Выберите версию",versionList:s,currentVersion:r,setCurrentVersion:f,setVersionList:j})]})]})]})}function sr(){const{templates:n,setTemplates:t}=de(),[s,r]=m.useState([...n]);m.useEffect(()=>{r([...n])},[n]);const o=i=>{const c=s.map(a=>a.id===i?{...a,open:!a.open}:a);r(c)},l=(i,c)=>{const a=s.map(p=>p.id===i?{...p,isActive:!0,templateThemes:p.templateThemes.map(u=>u.id===c?{...u,isActive:!0}:{...u,isActive:!1})}:{...p,isActive:!1,templateThemes:p.templateThemes.map(u=>({...u,isActive:!1}))});r(a)};function d(){t(s)}return e.jsxs("div",{className:_.wrapperModules,children:[s.map(i=>e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>o(i.id),children:[e.jsx("h2",{className:_.item_top_title,children:i.title}),e.jsx("button",{className:_.item_top_btn,onClick:()=>o(i.id),children:e.jsx("div",{className:`${_.item_top_arrow} ${i.open?_.item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.item_block} ${i.open?_.item_block_open:""}`,children:i.templateThemes.map(c=>e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:c.title}),e.jsx("div",{className:_.item_shell,onClick:()=>l(i.id,c.id),children:e.jsx(Ce,{status:c.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},c.id))})]},i.id)),e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>d(),children:"Сохранить"})]})]})}function nr({title:n,setOpenModal:t}){const{currentCategory:s}=de(),[r,o]=m.useState(""),{selectedSuperCategory:l,selectedCategory:d}=Re();m.useEffect(()=>{s=="Котегории"&&l&&i(l),s=="Подкотегории"&&d&&i(d)},[s,l,d]);const i=async a=>{try{const u=await(await Xe.get(`https://api.mcrm.uz/api/categories/${a}`)).data;o(u.name.ru)}catch(p){console.error("Ошибка произошла при получении названия варианта категории",p)}},c=()=>{t&&t(!0)};return e.jsxs("div",{className:_.editBlock,onClick:c,children:[r||n,e.jsx(T,{name:"PencilIcon"})]})}const or="_modalCategory_xzv82_1",rr="_modalCategory_block_xzv82_10",ar="_modalCategory_nav_xzv82_16",ir="_modalCategory_nav_title_xzv82_23",cr="_modalCategory_content_xzv82_29",lr="_modalCategory_content_message_xzv82_36",_r="_modalCategory_content_link_xzv82_44",dr="_modalCategory_content_link_active_xzv82_72",pr="_modalCategory_content_item_xzv82_82",ur="_modalCategory_content_block_xzv82_104",mr="_modalCategory_content_block_title_xzv82_108",hr="_settings_xzv82_115",br="_settings_title_xzv82_118",vr="_settings_content_xzv82_123",gr="_settings_content_top_xzv82_126",xr="_settings_content_buttons_xzv82_129",fr="_settings_content_btn_xzv82_139",kr="_settings_content_btn_cancel_xzv82_151",yr="_settings_content_btn_save_xzv82_154",jr="_settings_tools_xzv82_157",wr="_settings_tools_link_xzv82_162",Cr="_settings_tools_link_active_xzv82_177",Q={modalCategory:or,modalCategory_block:rr,modalCategory_nav:ar,modalCategory_nav_title:ir,modalCategory_content:cr,modalCategory_content_message:lr,modalCategory_content_link:_r,modalCategory_content_link_active:dr,modalCategory_content_item:pr,modalCategory_content_block:ur,modalCategory_content_block_title:mr,settings:hr,settings_title:br,settings_content:vr,settings_content_top:gr,settings_content_buttons:xr,settings_content_btn:fr,settings_content_btn_cancel:kr,settings_content_btn_save:yr,settings_tools:jr,settings_tools_link:wr,settings_tools_link_active:Cr};function Nr({setCancel:n}){return e.jsxs("div",{className:Q.modalCategory_nav,children:[e.jsx("h2",{className:Q.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:Q.modalCategory_nav_close,onClick:n,children:e.jsx(T,{width:24,height:24,name:"XMarkIcon"})})]})}function Sr({superCategory:n,category:t,setMessageStatus:s,fetchCategories:r}){const{currentCategory:o}=de(),{selectedSuperCategory:l,setSelectedSuperCategory:d}=Re(),{setCurrentCategory:i}=ue(),[c,a]=m.useState(10),p=(h,b)=>{if(h.preventDefault(),o==="Подкотегории"){r("category",1,10,b.id);const v=t.filter(I=>I.parentId==b.id);i(v),d(b.id),s(!1)}d(b.id)},u=h=>{h.preventDefault();const b=c+10;a(b),r("super",1,b)};return e.jsxs("div",{className:Q.modalCategory_content_block,children:[e.jsx("h2",{className:Q.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:Q.modalCategory_content_item,children:[n.map(h=>e.jsxs(Z,{to:"#",className:`${Q.modalCategory_content_link} ${h.id==l?Q.modalCategory_content_link_active:""} `,onClick:b=>p(b,h),children:[h.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),e.jsx(Z,{to:"#",className:Q.modalCategory_content_link,onClick:h=>u(h),children:"Ещё..."})]})]})}function Ir({categoryId:n,category:t,setCategoryId:s,setSubCategory:r,fetchCategories:o}){const{selectedSuperCategory:l}=Re(),[d,i]=m.useState(10),c=p=>{p.preventDefault();const u=d+10;i(u),o("category",1,u,l)},a=(p,u)=>{r(p,u),s(u.id)};return t.length>0&&e.jsxs("div",{className:Q.modalCategory_content_block,children:[e.jsx("h2",{className:Q.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:Q.modalCategory_content_item,children:[t==null?void 0:t.map(p=>e.jsxs(Z,{to:"#",className:`${Q.modalCategory_content_link} ${p.id==n?Q.modalCategory_content_link_active:""} `,onClick:u=>a(u,p),children:[p.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},p.id)),e.jsx(Z,{to:"#",className:Q.modalCategory_content_link,onClick:p=>c(p),children:"Ещё..."})]})]})}function Or({setSettings:n,setCancel:t}){return e.jsxs("div",{className:Q.settings_content_buttons,children:[e.jsx("button",{className:`${Q.settings_content_btn} ${Q.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(Z,{to:"#",className:`${Q.settings_content_btn} ${Q.settings_content_btn_save}`,onClick:n,children:"Сохранить"})]})}function Dr({setOpenModal:n}){const{currentCategory:t}=de(),{selectedSuperCategory:s,setSelectedSuperCategory:r,selectedCategory:o,setSelectedCategory:l}=Re(),[d,i]=m.useState(0),[c,a]=m.useState(!1),[p,u]=m.useState("Выберите категорию"),[h,b]=m.useState([]),[v,I]=m.useState([]);m.useEffect(()=>{w("super",1,10),o&&i(o)},[]);const $=(y,x)=>{y.preventDefault(),w("subCategory",1,10,x.id),a(!1)},F=()=>{t=="Котегории"?r(s):t=="Подкотегории"&&l(d),j()},j=()=>{a(!1),u("Выберите категорию"),n(!1)},w=async(y,x,g,O)=>{try{const C=y=="super"?`https://api.mcrm.uz/api/categories?&page=${x}&perPage=${g}`:`https://api.mcrm.uz/api/categories?parentId=${O}&page=${x}&perPage=${g}`,W=(await Xe.get(C)).data.data.map(E=>({...E,label:y==="super"?"Супер категория":y==="category"?"Категория":"Субкатегория"}));y==="super"&&b([...W]),y==="category"&&I([...W])}catch(C){console.error(`Ошибка произошла при получении ${y} категорий`,C)}},f=()=>{n(!1)};return e.jsx("div",{className:Q.modalCategory,onClick:f,children:e.jsxs("div",{className:Q.modalCategory_block,onClick:y=>y.stopPropagation(),children:[e.jsx(Nr,{setCancel:j}),e.jsx("p",{className:Q.modalCategory_content_message,children:c?p:""}),e.jsxs("div",{className:Q.modalCategory_content,children:[e.jsx(Sr,{superCategory:h,category:v,setMessageStatus:a,fetchCategories:w}),t==="Подкотегории"&&e.jsx(Ir,{categoryId:d,category:v,setCategoryId:i,setSubCategory:$,fetchCategories:w}),e.jsx(Or,{setSettings:F,setCancel:j})]})]})})}function $r(){const[n,t]=m.useState(!1),[s,r]=m.useState(!1),{currentCategory:o,categoriesStatus:l,categories:d,setCategoriesStatus:i,setCurrentCategory:c}=de();m.useEffect(()=>{t(o==="Котегории"||o==="Подкотегории")},[o]);const a=p=>{c(p.title),p.title==="Котегории"||p.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:_.categoriesDropDown,children:[e.jsx("h2",{className:_.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(Dr,{setOpenModal:r}),e.jsxs("div",{className:_.categoriesDropDown_item,children:[e.jsxs("div",{className:_.categoriesDropDown_item_top,onClick:()=>i(!l),children:[e.jsx("h2",{className:_.categoriesDropDown_item_top_title,children:o}),e.jsx("button",{className:_.categoriesDropDown_item_top_btn,onClick:()=>i(!l),children:e.jsx("div",{className:`${_.categoriesDropDown_item_top_arrow} ${l?_.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.categoriesDropDown_item_block} ${l?_.categoriesDropDown_item_block_open:""}`,children:d.map(p=>e.jsx("div",{className:`${_.categoriesDropDown_item_block_line} ${p.title==o?_.categoriesDropDown_item_block_active:""}`,onClick:()=>a(p),children:p.title},p.id))})]}),n&&e.jsx(nr,{title:"Выберите вариант",setOpenModal:r})]})}const Pr="_banner_1eodh_1",Fr="_banner_title_1eodh_5",Ar="_products_banner_1eodh_10",Lr="_products_banner_wrap_1eodh_13",Mr="_products_banner_wrap_btn_1eodh_19",Wr="_products_banner_wrap_filter_1eodh_30",Er="_products_banner_wrap_filter_text_1eodh_40",Ur="_products_banner_form_1eodh_48",Br="_products_banner_form_wrap_1eodh_53",zr="_products_banner_form_wrap_btn_1eodh_59",Tr="_products_banner_form_wrap_input_1eodh_75",Rr="_products_banner_form_wrap_icon_1eodh_83",Vr="_table_1eodh_87",qr="_table_tbody_1eodh_92",Kr="_table_tbody_tr_1eodh_97",Hr="_table_tbody_tr_active_1eodh_100",Xr="_table_tbody_img_1eodh_103",Gr="_table_tr_1eodh_108",Zr="_table_th_1eodh_111",Jr="_table_td_1eodh_122",Yr="_table_td_edit_1eodh_130",Qr="_table_btn_1eodh_136",ea="_versions_1eodh_144",ta="_versions_block_1eodh_149",sa="_versions_block_top_1eodh_154",na="_versions_block_top_title_1eodh_164",oa="_versions_block_top_arrow_1eodh_168",ra="_versions_block_top_arrow_active_1eodh_177",aa="_versions_block_dropdown_1eodh_180",ia="_versions_block_dropdown_item_1eodh_195",ca="_versions_block_dropdown_open_1eodh_206",la="_add_banner_1eodh_213",_a="_add_banner_header_1eodh_221",da="_add_banner_header_title_1eodh_225",pa="_add_banner_content_1eodh_229",ua="_add_banner_content_product_1eodh_232",ma="_add_banner_content_link_1eodh_254",ha="_add_banner_content_info_1eodh_262",ba="_add_banner_content_info_text_1eodh_266",va="_add_banner_content_download_1eodh_272",ga="_add_banner_content_download_link_1eodh_281",xa="_add_banner_content_btns_1eodh_293",fa="_add_banner_content_btn_1eodh_293",ka="_category_wrap_1eodh_311",ya="_modalCategory_1eodh_315",ja="_modalCategory_block_1eodh_323",wa="_modalCategory_nav_1eodh_328",Ca="_modalCategory_nav_title_1eodh_335",Na="_modalCategory_content_1eodh_341",Sa="_modalCategory_content_message_1eodh_348",Ia="_modalCategory_content_link_1eodh_356",Oa="_modalCategory_content_link_active_1eodh_384",Da="_modalCategory_content_item_1eodh_394",$a="_modalCategory_content_block_1eodh_416",Pa="_modalCategory_content_block_title_1eodh_420",Fa="_add_link_1eodh_427",Aa="_add_link_title_1eodh_430",La="_add_link_input_1eodh_434",Ma="_modal_btn_1eodh_443",P={banner:Pr,banner_title:Fr,products_banner:Ar,products_banner_wrap:Lr,products_banner_wrap_btn:Mr,products_banner_wrap_filter:Wr,products_banner_wrap_filter_text:Er,products_banner_form:Ur,products_banner_form_wrap:Br,products_banner_form_wrap_btn:zr,products_banner_form_wrap_input:Tr,products_banner_form_wrap_icon:Rr,table:Vr,table_tbody:qr,table_tbody_tr:Kr,table_tbody_tr_active:Hr,table_tbody_img:Xr,table_tr:Gr,table_th:Zr,table_td:Jr,table_td_edit:Yr,table_btn:Qr,versions:ea,versions_block:ta,versions_block_top:sa,versions_block_top_title:na,versions_block_top_arrow:oa,versions_block_top_arrow_active:ra,versions_block_dropdown:aa,versions_block_dropdown_item:ia,versions_block_dropdown_open:ca,add_banner:la,add_banner_header:_a,add_banner_header_title:da,add_banner_content:pa,add_banner_content_product:ua,add_banner_content_link:ma,add_banner_content_info:ha,add_banner_content_info_text:ba,add_banner_content_download:va,add_banner_content_download_link:ga,add_banner_content_btns:xa,add_banner_content_btn:fa,category_wrap:ka,modalCategory:ya,modalCategory_block:ja,modalCategory_nav:wa,modalCategory_nav_title:Ca,modalCategory_content:Na,modalCategory_content_message:Sa,modalCategory_content_link:Ia,modalCategory_content_link_active:Oa,modalCategory_content_item:Da,modalCategory_content_block:$a,modalCategory_content_block_title:Pa,add_link:Fa,add_link_title:Aa,add_link_input:La,modal_btn:Ma};function pt({color:n="black",title:t="",versionList:s=[],className:r,openBlock:o,setOpenBlock:l,setVersionList:d}){const[i,c]=m.useState(s[0].title),{setChangeCategoryStyles:a}=ce(),p=u=>{const h=s.map(b=>({...b,isOpen:b.id===u.id}));u.title=="Категория"&&a(!0),c(u.title),d(h),l(!1)};return e.jsxs("div",{className:r??P.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:P.versions_block,children:[e.jsxs("div",{className:P.versions_block_top,children:[e.jsx("h2",{className:P.versions_block_top_title,style:{color:n},children:i}),e.jsx("button",{className:P.versions_block_top_btn,onClick:()=>l(!o),children:e.jsx("div",{className:`${P.versions_block_top_arrow} ${o?P.versions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${P.versions_block_dropdown} ${o?P.versions_block_dropdown_open:""}`,children:s.map(u=>e.jsx("span",{className:P.versions_block_dropdown_item,onClick:()=>p(u),children:u.title},u.id))})]})]})}function He({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:o=500,scale:l=1.1,status:d=!1,disabled:i=!1}){const c={width:`${n}px`,height:`${n/2-n/20}px`,background:d?s:r,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer",opacity:i?1:.3},a={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${d?s:r}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${l}) translateX(${d?"110%":"0"})`};return e.jsx("div",{style:c,children:e.jsx("div",{style:a})})}const We=({arr:n=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:r=!1,isEdit:o=!1,isCategory:l,isLinks:d,setPickedProduct:i,setPickedProductActive:c})=>{const{bannersArr:a,selectedProductEdit:p,imageUrlEditBanner:u,bannersArrProduct:h,bannersArrLink:b,setBannersArrLink:v,setSelectedProductEdit:I,setImageUrlEditBanner:$,setCurrentProductOpen:F,clearPickedProductsArr:j,setBannersArrProduct:w,setBannersArr:f,setBannersArrCategory:y}=ce(),[x,g]=m.useState("");m.useState(new Set);const O=k=>a.some(U=>U.title===k&&U.isBannerActive),C=(k,U)=>{if(s==="byId"&&(i==null||i(k)),o&&U){const V={id:ee(),bannerUrl:u,title:U.title,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};V.title!=null&&!O(V.title)?(w(h.map(L=>L.id===p?V:L)),f(a.map(L=>L.id===p?V:L)),F(!1)):console.warn("Объект с таким brandName уже существует.")}g(k)},D=(k,U)=>{s==="productId"&&(c==null||c(k),C==null||C(k),g(k),j(),U.id&&I(U.id),U.bannerUrl&&$(U.bannerUrl))},W=(k,U,V)=>{if(k.stopPropagation(),V.isBannerActive)r&&(w(t.map(L=>L.id===U?{...L,toggleSwitcher:!L.toggleSwitcher}:L)),f(a.map(L=>L.id===U?{...L,toggleSwitcher:!L.toggleSwitcher}:L))),l&&(y(t.map(L=>L.id===U?{...L,toggleSwitcher:!L.toggleSwitcher}:L)),f(a.map(L=>L.id===U?{...L,toggleSwitcher:!L.toggleSwitcher}:L))),d&&(v(t.map(L=>L.id===U?{...L,toggleSwitcher:!L.toggleSwitcher}:L)),f(a.map(L=>L.id===U?{...L,toggleSwitcher:!L.toggleSwitcher}:L)));else return},E=k=>k.id!==void 0,q=(k,U)=>{k.stopPropagation(),w(t.map(V=>V.id===U.id?{...V,isBannerActive:!1,title:"-"}:V)),f(a.map(V=>V.id===U.id?{...V,isBannerActive:!1,title:"-"}:V))};return e.jsxs("table",{className:P.table,children:[e.jsx("thead",{className:P.table_thead,children:e.jsx("tr",{className:P.table_tr,children:n.map(k=>e.jsx("th",{className:P.table_th,children:k.title},k.id))})}),e.jsx("tbody",{className:P.table_tbody,children:t==null?void 0:t.map(k=>{var U;return e.jsxs("tr",{className:`${P.table_tbody_tr} ${!o&&x==k.id?P.table_tbody_tr_active:""}`,style:{cursor:r||l||d?"pointer":"default"},onClick:()=>D(k.id,k),children:[e.jsxs("td",{className:P.table_td,children:[s==="byId"&&(k==null?void 0:k.title),o?k.title:"",r&&e.jsx("img",{className:P.table_tbody_img,src:k.bannerUrl??"",alt:"Banner"}),l&&e.jsx("img",{className:P.table_tbody_img,src:k.bannerUrl??"",alt:"Banner"}),d&&e.jsx("img",{className:P.table_tbody_img,src:k.bannerUrl??"",alt:"Banner"})]}),e.jsxs("td",{className:P.table_td,children:[l?k.categoryTitle:"",r?k.title:(U=k.nomenclature)==null?void 0:U.price,d&&k.title]}),e.jsx("td",{className:P.table_td,children:r?"":k.crmAmount}),e.jsx("td",{className:P.table_td,children:l?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:V=>{const L=k;L.id&&W(V,L.id,k)},children:e.jsx(He,{width:62,status:E(k)&&k.toggleSwitcher&&k.isBannerActive,disabled:E(k)&&k.isBannerActive})}):r?e.jsxs("div",{className:P.table_td_edit,children:[k.brandName!=="-"&&e.jsx("button",{className:P.table_btn,style:{width:"156px",background:"#FFB5B5"},onClick:V=>q(V,k),children:"Открепить продукт"}),e.jsx("div",{onClick:V=>{const L=k;L.id&&W(V,L.id,k)},children:e.jsx(He,{width:62,status:E(k)&&k.toggleSwitcher&&k.isBannerActive,disabled:E(k)&&k.isBannerActive})})]}):d?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:V=>{const L=k;L.id&&W(V,L.id,k)},children:e.jsx(He,{width:62,status:E(k)&&k.toggleSwitcher&&k.isBannerActive,disabled:E(k)&&k.isBannerActive})}):e.jsx("button",{className:P.table_btn,onClick:()=>C(k.id,k),children:o?"Заменить":"Выбрать"})})]},(E(k),k.id))})})]})};function Wa({setCancel:n}){return e.jsxs("div",{className:G.modalCategory_nav,children:[e.jsx("h2",{className:G.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:G.modalCategory_nav_close,onClick:n,children:e.jsx(T,{width:24,height:24,name:"XMarkIcon"})})]})}function Ea({superCategory:n,category:t,superId:s,setLocalPicked:r,setSuperId:o,setMessageStatus:l,setSubCategories:d,fetchCategories:i,setSuperCategoryObj:c}){const{changeCategoryStyles:a,categoriesArr:p,setCategoriesArr:u,setActiveCategory:h,setActiveCategoryTitle:b}=ce(),{setCurrentCategory:v}=ue(),[I,$]=m.useState(10),F=(w,f)=>{w.preventDefault(),i("category",1,10,f.id),d([]);const y=t.filter(x=>x.parentId==f.id);if(v(y),r(f),o(f.id),l(!1),a&&f.label&&(h(f.label),b(f.name.ru)),a){const x=p.filter(g=>g.label!==f.label);x.push(f),u(x)}c==null||c(f)},j=()=>{const w=I+10;$(w),i("super",1,w),console.log("addPage",w)};return e.jsxs("div",{className:G.modalCategory_content_block,children:[e.jsx("h2",{className:G.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:G.modalCategory_content_item,children:[n.map(w=>e.jsxs(Z,{to:"#",className:`${G.modalCategory_content_link} ${w.id==s?G.modalCategory_content_link_active:""} `,onClick:f=>F(f,w),children:[w.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},w.id)),e.jsx(Z,{to:"#",className:G.modalCategory_content_link,onClick:()=>j(),children:"Ещё..."})]})]})}function Ua({superId:n,categoryId:t,category:s,setSubCategory:r,fetchCategories:o}){const[l,d]=m.useState(10),i=()=>{const a=l+10;d(a),o("category",1,a,n),console.log("addPage",a,n)},c=(a,p)=>{r(a,p)};return s.length>0&&e.jsxs("div",{className:G.modalCategory_content_block,children:[e.jsx("h2",{className:G.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:G.modalCategory_content_item,children:[s==null?void 0:s.map(a=>e.jsxs(Z,{to:"#",className:`${G.modalCategory_content_link} ${a.id==t?G.modalCategory_content_link_active:""} `,onClick:p=>c(p,a),children:[a.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},a.id)),e.jsx(Z,{to:"#",className:G.modalCategory_content_link,onClick:()=>i(),children:"Ещё..."})]})]})}function Ba({subId:n,categoryId:t,subCategories:s,setSubProductsList:r,fetchCategories:o}){const[l,d]=m.useState(10),i=()=>{const c=l+10;d(c),o("subCategory",1,c,t),console.log("addPage",c)};return s.length>0&&e.jsxs("div",{className:G.modalCategory_content_block,children:[e.jsx("h2",{className:G.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:G.modalCategory_content_item,children:[s==null?void 0:s.map(c=>e.jsxs(Z,{to:"#",className:`${G.modalCategory_content_link} ${c.id==n?G.modalCategory_content_link_active:""} `,onClick:a=>r(a,c),children:[c.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},c.id)),e.jsx(Z,{to:"#",className:G.modalCategory_content_link,onClick:()=>i(),children:"Ещё..."})]})]})}function za({setSettings:n,setCancel:t}){return e.jsxs("div",{className:G.settings_content_buttons,children:[e.jsx("button",{className:`${G.settings_content_btn} ${G.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${G.settings_content_btn} ${G.settings_content_btn_save}`,onClick:n,children:"Сохранить"})]})}function Ve({isProduct:n,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:r,setCurrentCategory:o,setCurrentSubCategory:l}=ue(),{changeCategoryStyles:d,categoriesArr:i,pickedProducts:c,setCategoriesArr:a,setPickedProducts:p,setActiveCategory:u,setActiveCategoryTitle:h,setOpenModalCategoryBanner:b}=ce(),v=d?P:G;Te();const[I,$]=m.useState(0),[F,j]=m.useState(0),[w,f]=m.useState(0),[y,x]=m.useState({}),[g,O]=m.useState(!1),[C,D]=m.useState("Выберите категорию"),[W,E]=m.useState([]),[q,k]=m.useState([]),[U,V]=m.useState([]),[L,ve]=m.useState(null),[me,ge]=m.useState(null),[fe,we]=m.useState(null);m.useEffect(()=>{console.log("pickedProducts",c)},[c]),m.useEffect(()=>{ke("super",1,10)},[]);const[S]=m.useState(1),[N]=m.useState(10);m.useState([]);const K=(ne,X)=>{ne.preventDefault(),ke("subCategory",1,10,X.id);const le=U.filter(he=>he.parentId==X.id);if(l(le),x(X),j(X.id),O(!1),d&&X.label&&(u(X.label),h(X.name.ru)),d){const he=i.filter(Ae=>Ae.label!==X.label);he.push(X),a(he)}ge(X)},Y=(ne,X)=>{if(ne.preventDefault(),x(X),f(X.id),O(!1),d&&X.label&&(u(X.label),h(X.name.ru)),d){const le=i.filter(he=>he.name.ru!==X.name.ru);le.push(X),console.log("newCategories",le),a(le)}we(X)};async function re(ne){const X=xe.get("multi-store");try{const le=await oe.get(`web-nomenclatures?multiStoreId=${X}&categoryId=${ne}&page=${S}&perPage=${N}`);p(le.data.data)}catch(le){console.log("error",le)}}const De=()=>{if(Object.keys(y).length===0){O(!0),D("Выберите Суперкотегорию");return}if(q.length>0&&F===0){O(!0),D("Выберите Категорию");return}if(U.length>0&&w===0){O(!0),D("Выберите Подкотегорию");return}console.log(y),re(y.id);const ne=[];L&&ne.push(L),me&&ne.push(me),fe&&ne.push(fe),a(ne),$e()},$e=()=>{r(y),s(!1),$(0),j(0),f(0),x({}),o([]),l([]),O(!1),D("Выберите категорию"),b(!1)},ke=async(ne,X,le,he)=>{try{const Ae=ne=="super"?`https://api.mcrm.uz/api/categories?&page=${X}&perPage=${le}`:`https://api.mcrm.uz/api/categories?parentId=${he}&page=${X}&perPage=${le}`,Ke=(await Xe.get(Ae)).data.data.map(Ot=>({...Ot,label:ne==="super"?"Супер категория":ne==="category"?"Категория":"Субкатегория"}));ne==="super"&&E([...Ke]),ne==="category"&&k([...Ke]),ne==="subCategory"&&V([...Ke])}catch(Ae){console.error(`Ошибка произошла при получении ${ne} категорий`,Ae)}};return e.jsx("div",{className:v.modalCategory,children:e.jsxs("div",{className:v.modalCategory_block,children:[!d&&e.jsx(Wa,{setCancel:$e}),e.jsx("p",{className:v.modalCategory_content_message,children:g?C:""}),e.jsxs("div",{className:v.modalCategory_content,children:[e.jsx(Ea,{superId:I,superCategory:W,category:q,setLocalPicked:x,setSuperId:$,setMessageStatus:O,fetchCategories:ke,setSubCategories:V,setSuperCategoryObj:ve}),e.jsx(Ua,{superId:I,categoryId:F,category:q,setSubCategory:K,fetchCategories:ke}),e.jsx(Ba,{subId:w,categoryId:F,subCategories:U,setSubProductsList:Y,fetchCategories:ke}),!t&&e.jsx(za,{setSettings:De,setCancel:$e})]})]})})}const Pe=({title:n,currentProductEdit:t,isEdit:s,isCategory:r,isLinks:o,linkTextEdit:l,deleteBanner:d,isProduct:i})=>{const{currentProductTable:c,changeCategoryStyles:a,categoriesArr:p,bannersArr:u,linksPageBannerText:h,openLinksPage:b,openProductsPage:v,activeCategory:I,activeCategoryTitle:$,bannersArrProduct:F,bannersArrCategory:j,bannersArrLink:w,setBannersArrLink:f,setCurrentProductOpen:y,clearCategoriesArr:x,addBannerToArr:g,setLinksPageBannerText:O,setBannersArrProduct:C,setBannersArr:D,setBannersArrCategory:W}=ce(),[E,q]=m.useState(null),[k,U]=m.useState(null),[V,L]=m.useState(""),ve=S=>{if(S.target.files&&S.target.files[0]){const N=S.target.files[0];console.log("file",N),U(N);const K=new FileReader;K.onloadend=()=>{const Y=K.result;q(Y)},K.readAsDataURL(N)}},me=()=>{document.getElementById("upload").click()},ge=()=>{if(!k)return;const S=()=>{switch(I){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}};if(k&&c&&v){const N={id:ee(),bannerUrl:E||"",title:c.title,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(re=>re.title===N.title)||g(N),y(!1),q(null),U(null);const Y=document.getElementById("upload");Y&&(Y.value="")}if(a&&b==!1){const N=S(),K={id:ee(),bannerUrl:E||"",categoryLabel:N,categoryTitle:$,isCategoryBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(De=>De.categoryTitle===K.categoryTitle)||g(K),q(null),U(null);const re=document.getElementById("upload");re&&(re.value="")}if(b&&h){const N={id:ee(),bannerUrl:E||"",title:h,isLinkBanner:!0,isBannerActive:!0,toggleSwitcher:!0};u.some(re=>re.title===N.title)||(g(N),console.log("bannersArr",u)),q(null),U(null),O("");const Y=document.getElementById("upload");Y&&(Y.value="")}},fe=()=>{E===null?(console.log("bannersArrProduct",F),console.log("bannersArr",u),s&&(r&&(L((()=>{switch(I){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}})()),W(j.map(N=>N.id===(c==null?void 0:c.id)?{...N,categoryTitle:$,activeCategoryEdit:V}:N))),o&&(f(w.map(S=>S.id===(t==null?void 0:t.id)?{...S,title:l}:S)),D(u.map(S=>S.id===(t==null?void 0:t.id)?{...S,title:l}:S))),y(!1))):s&&(i&&(C(F.map(S=>S.id===(t==null?void 0:t.id)?{...S,bannerUrl:E}:S)),D(u.map(S=>S.id===(t==null?void 0:t.id)?{...S,bannerUrl:E}:S))),r&&(W(j.map(S=>S.id===(t==null?void 0:t.id)?{...S,bannerUrl:E,categoryTitle:$}:S)),D(u.map(S=>S.id===(t==null?void 0:t.id)?{...S,bannerUrl:E,categoryTitle:$}:S))),o&&(f(w.map(S=>S.id===(t==null?void 0:t.id)?{...S,bannerUrl:E,title:l}:S)),D(u.map(S=>S.id===(t==null?void 0:t.id)?{...S,bannerUrl:E,title:l}:S))),y(!1))},we=()=>{d==null||d(t==null?void 0:t.id),y(!1)};return e.jsxs("div",{className:P.add_banner,children:[e.jsx("div",{className:P.add_banner_header,children:e.jsx("h3",{className:P.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:P.add_banner_content,children:[a?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:P.add_banner_content_product,children:[n,":",r&&e.jsxs("span",{children:[" ",t==null?void 0:t.categoryTitle]}),o&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),p==null?void 0:p.map(S=>e.jsx("span",{className:P.add_banner_content_product,children:S.name.ru},S.name.ru))]}):e.jsx("p",{className:P.add_banner_content_product,children:b?`${n}: ${h}`:`${n}: ${c==null?void 0:c.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:ve}),e.jsx("label",{htmlFor:"upload",className:P.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:P.add_banner_content_info,children:e.jsx("p",{className:P.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:P.add_banner_content_download,children:e.jsx("img",{src:E||(t==null?void 0:t.bannerUrl),alt:"",style:{width:"555px",height:"229px",objectFit:"cover"}})}):e.jsx("div",{className:P.add_banner_content_download,children:E?e.jsx("img",{src:E,alt:"Uploaded",className:P.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:P.add_banner_content_download_link,onClick:()=>me(),children:[e.jsx(T,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:P.add_banner_content_btns,children:[e.jsx("button",{className:P.add_banner_content_btn,onClick:we,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:P.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>fe(),children:"Изменить"})]}):e.jsxs("div",{className:P.add_banner_content_btns,children:[e.jsx("button",{className:P.add_banner_content_btn,onClick:()=>y(!1),children:"Отмена"}),e.jsx("button",{className:P.add_banner_content_btn,onClick:()=>ge(),children:"Сохранить"})]})]})]})};function ut({inputText:n,setInputText:t,filteredUsers:s,isProductEdit:r}){const{categoriesArr:o,filteredSubCategory:l,filteredCategory:d,filteredSuperCategory:i,setCurrentProductOpen:c,setChangeCategoryStyles:a,setOpenModalCategoryBanner:p,clearCategoriesArr:u,setFilteredSubCategory:h,setFilteredCategory:b,setFilteredSuperCategory:v}=ce(),I=()=>{r&&c(!1),a(!1),p(!0),u()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:P.products_banner_wrap,children:[e.jsx("button",{className:P.products_banner_wrap_btn,onClick:I,children:e.jsx(T,{name:"FunnelIcon",width:20})}),(o==null?void 0:o.length)!==0&&e.jsx("div",{className:P.products_banner_wrap_filter,children:o==null?void 0:o.map($=>e.jsx("span",{className:P.products_banner_wrap_filter_text,children:$.name.ru},$.id))}),e.jsxs("form",{action:"",className:P.products_banner_form,onSubmit:$=>s==null?void 0:s($),children:[e.jsxs("div",{className:P.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:P.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:n,onChange:$=>t==null?void 0:t($.target.value)}),e.jsx(T,{className:P.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:P.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const Ta=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],Ra=()=>{const{openModalCategoryBanner:n,currentProductOpen:t,searchTextBanner:s,pickedProducts:r,webProductsArr:o,setCurrentProductTable:l,clearCategoriesArr:d,setSearchTextBanner:i,clearPickedProductsArr:c,setOpenLinksPage:a,setOpenProductsPage:p,setCurrentProductOpen:u,setOpenModalCategoryBanner:h}=ce(),[b,v]=m.useState(""),I=f=>{f.preventDefault(),i(b),d()},$=f=>{const y=o.find(x=>x.id===f);y&&(console.log("currentProduct",y),l(y),u(!0))},[F,j]=m.useState([]);m.useEffect(()=>{let f=o;f=f==null?void 0:f.filter(y=>{var x;return(x=y.title)==null?void 0:x.toLowerCase().includes(s.toLowerCase())}),j(f)},[s,o]);const w=s?F:r;return m.useEffect(()=>{b===""&&(i(""),c(),u(!1)),n&&v("")},[b,n]),m.useEffect(()=>{u(!1),a(!1),p(!0),h(!1),d()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:P.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(ut,{inputText:b,setInputText:v,filteredUsers:I}),e.jsx(We,{arrToUse:w,arr:Ta,setPickedProduct:$,selectionMode:"byId"})]}),n&&e.jsx(Ve,{isProduct:!0}),t&&e.jsx(Pe,{title:"Товар"})]})},Va=()=>{const{categoriesArr:n,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:r}=ce();return m.useEffect(()=>{t(!1),s(!0),r(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:P.category_wrap,children:e.jsx(Ve,{isCategory:!0})}),e.jsx(Pe,{title:"Каталог",categories:n})]})},qa=()=>{const{linksPageBannerText:n,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:r,setOpenProductsPage:o}=ce();return m.useEffect(()=>{s(!0),r(!1),t(""),o(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:P.add_link,children:[e.jsx("h3",{className:P.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:P.add_link_input,type:"text",value:n,onChange:l=>t(l.target.value)})]}),e.jsx(Pe,{title:"Страница"})]})};function Ka(){const{bannerDropdownOptions:n,openBannerDropdown:t,setBannerDropdownOptions:s,setOpenBannerDropdown:r,resetDropdownToDefault:o}=ce(),l=()=>{const d=n.find(i=>i.isOpen);if(!d)return null;switch(d.title){case"Продукт":return e.jsx(Ra,{});case"Категория":return e.jsx(Va,{});case"Страница":return e.jsx(qa,{});default:return null}};return m.useEffect(()=>{o()},[]),e.jsxs("div",{className:P.banner,children:[e.jsx("h3",{className:P.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(pt,{openBlock:t,setOpenBlock:r,versionList:n,setVersionList:s}),e.jsx("div",{className:P.banner_content,children:l()})]})}const Ha=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Xa=()=>{const{pickedProducts:n,currentProductOpen:t,openModalCategoryBanner:s,bannersArr:r,searchTextBanner:o,currentProductTable:l,bannersArrProduct:d,webProductsArr:i,clearPickedProductsArr:c,clearCategoriesArr:a,setCurrentProductOpen:p,setCurrentProductTable:u,setSearchTextBanner:h,setOpenLinksPage:b,setOpenProductsPage:v,setOpenModalCategoryBanner:I,setBannersArrProduct:$,setBannersArr:F}=ce(),[j,w]=m.useState(""),[f,y]=m.useState([]),x=D=>{D.preventDefault(),h(j),a()},g=D=>{const W=d.find(E=>E.id===D);W&&(u(W),p(!0))};m.useEffect(()=>{let D=i;D=D==null?void 0:D.filter(W=>{var E;return(E=W.title)==null?void 0:E.toLowerCase().includes(o.toLowerCase())}),y(D)},[o,i]);const O=D=>{$(d.filter(W=>W.id!=D)),F(r.filter(W=>W.id!==D))},C=o?f:n;return m.useEffect(()=>{p(!1),b(!1),v(!0),I(!1),a()},[p,b,v,I,a]),m.useEffect(()=>{j===""&&(h(""),c())},[j]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arrToUse:d,arr:Ha,setPickedProductActive:g,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(ut,{filteredUsers:x,setInputText:w}),e.jsx(We,{arrToUse:C,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Pe,{title:"Продукт",currentProductEdit:l,isEdit:!0,isProduct:!0,deleteBanner:O})]})]}),s&&e.jsx(Ve,{})]})},Ga=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Za=()=>{const{bannersArr:n,bannersArrCategory:t,currentProductTable:s,currentProductOpen:r,setCurrentProductOpen:o,setBannersArr:l,setCurrentProductTable:d,setBannersArrCategory:i}=ce(),c=p=>{const u=t.find(h=>h.id===p);u&&(d(u),o(!0),console.log("currentProductTable",s))},a=p=>{i(t.filter(u=>u.id!=p)),l(n.filter(u=>u.id!==p))};return m.useEffect(()=>{o(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arr:Ga,arrToUse:t,selectionMode:"productId",isCategory:!0,setPickedProductActive:c}),r&&e.jsx(Ve,{isCategory:!0}),r&&e.jsx(Pe,{title:"Каталог",currentProductEdit:s,isEdit:!0,isCategory:!0,deleteBanner:a})]})},Ja=({setLinkText:n,currentProductEdit:t})=>{ce();const[s,r]=m.useState(t.brandName||""),o=l=>{r(l),n(l)};return m.useEffect(()=>{r(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:P.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:P.add_link_input,type:"text",onChange:l=>o(l.target.value),value:s})]})},Ya=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Qa=()=>{const{bannersArr:n,bannersArrLink:t,currentProductOpen:s,currentProductTable:r,setBannersArr:o,setBannersArrLink:l,setCurrentProductTable:d,setCurrentProductOpen:i}=ce(),[c,a]=m.useState(""),p=h=>{const b=t.find(v=>v.id===h);b&&(d(b),console.log("currentProductTable",r),i(!0))},u=h=>{l(t.filter(b=>b.id!=h)),o(n.filter(b=>b.id!==h))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(We,{arr:Ya,arrToUse:t,selectionMode:"productId",setPickedProductActive:p,isLinks:!0}),s&&e.jsxs(e.Fragment,{children:[e.jsx(Ja,{setLinkText:a,currentProductEdit:r}),e.jsx(Pe,{title:"Страница",currentProductEdit:r,deleteBanner:u,isLinks:!0,isEdit:!0,linkTextEdit:c})]})]})};function ei(){const{bannerDropdownOptions:n,openBannerDropdown:t,bannersArr:s,bannersArrProduct:r,bannersArrCategory:o,bannersArrLink:l,setBannerDropdownOptions:d,setOpenBannerDropdown:i,resetDropdownToDefault:c,setBannersArrProduct:a,setBannersArrCategory:p,setBannersArrLink:u}=ce();m.useEffect(()=>{a(s.filter(b=>b.isProductBanner===!0)),p(s.filter(b=>b.isCategoryBanner===!0)),u(s.filter(b=>b.isLinkBanner===!0))},[]);const h=()=>{const b=n.find(v=>v.isOpen);if(!b)return null;switch(b.title){case"Продукт":return e.jsx(Xa,{});case"Категория":return e.jsx(Za,{});case"Страница":return e.jsx(Qa,{});default:return null}};return m.useEffect(()=>{c()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:P.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(pt,{openBlock:t,setOpenBlock:i,versionList:n,setVersionList:d})]}),e.jsx("div",{className:P.banner_content,children:h()})]})}const ti=[{id:1,title:"Новый",href:"/admin/settings/banner"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner"}];function si(){const[n]=m.useState(1),[t]=m.useState(10),r=se().pathname,{setCurrentProductOpen:o,setWebProductsArr:l}=ce();m.useEffect(()=>{o(!1)},[]);async function d(){const i=xe.get("multi-store");try{const c=await oe.get(`web-nomenclatures?multiStoreId=${i}&page=${n}&perPage=${t}`);l(c.data.data)}catch(c){console.log("error",c)}}return m.useEffect(()=>{d()},[]),e.jsx("div",{className:_.banner,children:e.jsxs("div",{className:_.banner_nav,children:[e.jsx("ul",{className:_.banner_nav_list,children:ti.map(i=>e.jsx("li",{children:e.jsx(Z,{to:i.href,className:`${_.banner_nav_link} ${i.href==r?_.banner_nav_link_active:""}`,children:i.title})},i.id))}),r.startsWith("/admin/settings/banner")&&e.jsxs("div",{className:_.settings_content_base,children:[r=="/admin/settings/banner"&&e.jsx(Ka,{}),r=="/admin/settings/banner/activeBanner"&&e.jsx(ei,{})]})]})})}const ni="_contacts_mxkpi_1",oi="_contacts_content_mxkpi_4",ri="_contacts_nav_mxkpi_7",ai="_contacts_nav_list_mxkpi_10",ii="_contacts_nav_link_mxkpi_15",ci="_contacts_nav_link_active_mxkpi_30",li="_contacts_btn_mxkpi_34",_i="_socials_mxkpi_55",di="_socials_title_mxkpi_60",pi="_socials_content_mxkpi_65",ui="_socials_content_wrap_mxkpi_70",mi="_socials_content_wrap_input_mxkpi_75",hi="_aboutUs_mxkpi_84",bi="_aboutUs_add_image_mxkpi_87",vi="_aboutUs_content_mxkpi_90",gi="_aboutUs_image_wrap_mxkpi_95",xi="_aboutUs_download_mxkpi_104",fi="_aboutUs_text_mxkpi_112",ki="_aboutUs_inputs_mxkpi_120",yi="_aboutUs_inputs_wrap_mxkpi_126",ji="_aboutUs_inputs_wrap_title_mxkpi_130",wi="_aboutUs_inputs_wrap_input_mxkpi_136",Ci="_aboutUs_inputs_wrap_textarea_mxkpi_144",Ni="_aboutUs_btn_mxkpi_152",Si="_aboutUs_week_info_mxkpi_172",Ii="_aboutUs_week_info_text_mxkpi_178",Oi="_aboutUs_week_content_mxkpi_183",Di="_aboutUs_week_wrap_mxkpi_189",$i="_aboutUs_week_wrap_colored_mxkpi_193",Pi="_aboutUs_week_wrap_colored_active_mxkpi_203",Fi="_aboutUs_week_wrap_colored_last_mxkpi_206",Ai="_aboutUs_week_wrap_day_mxkpi_209",Li="_aboutUs_week_wrap_schedule_mxkpi_215",Mi="_aboutUs_week_wrap_input_mxkpi_221",Wi="_custom_checkbox_mxkpi_241",Ei="_custom_checkbox_input_mxkpi_247",Ui="_custom_checkbox_box_mxkpi_252",Bi="_custom_checkbox_box_icon_mxkpi_261",B={contacts:ni,contacts_content:oi,contacts_nav:ri,contacts_nav_list:ai,contacts_nav_link:ii,contacts_nav_link_active:ci,contacts_btn:li,socials:_i,socials_title:di,socials_content:pi,socials_content_wrap:ui,socials_content_wrap_input:mi,aboutUs:hi,aboutUs_add_image:bi,aboutUs_content:vi,aboutUs_image_wrap:gi,aboutUs_download:xi,aboutUs_text:fi,aboutUs_inputs:ki,aboutUs_inputs_wrap:yi,aboutUs_inputs_wrap_title:ji,aboutUs_inputs_wrap_input:wi,aboutUs_inputs_wrap_textarea:Ci,aboutUs_btn:Ni,aboutUs_week_info:Si,aboutUs_week_info_text:Ii,aboutUs_week_content:Oi,aboutUs_week_wrap:Di,aboutUs_week_wrap_colored:$i,aboutUs_week_wrap_colored_active:Pi,aboutUs_week_wrap_colored_last:Fi,aboutUs_week_wrap_day:Ai,aboutUs_week_wrap_schedule:Li,aboutUs_week_wrap_input:Mi,custom_checkbox:Wi,custom_checkbox_input:Ei,custom_checkbox_box:Ui,custom_checkbox_box_icon:Bi},zi=({temporaryImageUrl:n,setTemporaryImageUrl:t})=>{Ge();const[s,r]=m.useState(null),[o,l]=m.useState(null);m.useEffect(()=>{const c=localStorage.getItem("savedLogoImageUrl");c&&(r(c),t(c))},[t]);const d=c=>{if(c.target.files&&c.target.files[0]){const a=c.target.files[0];l(a);const p=new FileReader;p.onloadend=()=>{const u=p.result;r(u),t(u),localStorage.setItem("savedLogoImageUrl",u)},p.readAsDataURL(a)}},i=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:B.aboutUs_add_image,children:[e.jsx("div",{className:B.aboutUs_image_wrap,children:s||n?e.jsx("img",{src:n||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>i(),children:e.jsx(T,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:d}),e.jsx("label",{htmlFor:"upload",className:B.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:B.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function Ne(){return Ne=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},Ne.apply(this,arguments)}const mt=(n,t)=>{const s={};for(const r in n)t.indexOf(r)===-1&&(s[r]=n[r]);return s},ht=te.createContext(null),qe=te.createContext(null),Ti=n=>t=>te.createElement(qe.Consumer,null,s=>te.createElement(n,Ne({parent:s},t))),Ri=(n=[])=>{const[t,s]=m.useState(!1),r=m.useRef(n),o=(()=>{const d=m.useContext(ht);if(d===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return d})(),l=o.getApi();return m.useEffect(()=>{o.load().then(()=>Promise.all(r.current.map(o.loadModule))).then(()=>s(!0))},[]),t&&l?l:null},Vi=()=>{},qi=["onLoad","onError","modules","apiLoader"];function bt(n,t=!1,s=[]){return r=>{const{width:o,height:l,modules:d=[],onLoad:i=Vi}=r,c=Ri(s.concat(d)),a=!t||!!c,p=mt(r,qi);return m.useEffect(()=>c?i(c):void 0,[c]),a?te.createElement(n,Ne({ymaps:c},p)):te.createElement("div",{style:{width:o,height:l}})}}const Ki=typeof window<"u",st={lang:"ru_RU",load:"",ns:"",mode:"release"},Hi=n=>{const{version:t="2.1",enterprise:s=!1,query:r={lang:"ru_RU",load:"",ns:""},preload:o=!1,children:l}=n,d=m.useRef((i=>{const{query:c=st}=i,a=Date.now().toString(32),p=c.ns||"",u="__yandex-maps-api-onload__$$"+a,h="__yandex-maps-api-onerror__$$"+a,b=Ki?window:{},v={};let I;const $=()=>p?b[p]:I,F=()=>{delete b[u],delete b[h]};return{load:()=>{if($())return Promise.resolve(I);if(v[p])return v[p];const j={onload:u,onerror:h,...st,...c},w=Object.keys(j).map(y=>`${y}=${j[y]}`).join("&"),f=[`https://${i.enterprise?"enterprise.":""}api-maps.yandex.ru`,i.version,"?"+w].join("/");return v[p]=new Promise((y,x)=>{b[u]=g=>{F(),g.ready(()=>{I=g,y(g)})},b[h]=g=>{F(),x(g)},(g=>new Promise((O,C)=>{const D=document.createElement("script");D.type="text/javascript",D.onload=O,D.onerror=C,D.src=g,D.async=!0,document.head.appendChild(D)}))(f).catch(b[h])}),v[p]},getApi:$,loadModule:j=>new Promise((w,f)=>{I.modules.require(j).done(y=>{y.forEach(x=>{((g,O,C,D=!1)=>{const W=typeof O=="string"?O.split("."):O.slice();let E,q=g;for(;W.length>1;)E=W.shift(),q[E]||(q[E]={}),q=q[E];const k=W[0];q[k]=D===!0&&q[k]||C})(I,j,x,!0)}),w(I)},f)})}})({version:t,enterprise:s,query:r,preload:o}));return m.useEffect(()=>{o&&d.current.load()},[d.current]),te.createElement(ht.Provider,{value:d.current},l)},nt=/^on(?=[A-Z])/;function J(n){return Object.keys(n).reduce((t,s)=>{if(nt.test(s)){const r=s.replace(nt,"").toLowerCase();t._events[r]=n[s]}else t[s]=n[s];return t},{_events:{}})}function Ie(n,t,s){typeof s=="function"&&n.events.add(t,s)}function Oe(n,t,s){typeof s=="function"&&n.events.remove(t,s)}function Fe(n,t,s){Object.keys(Object.assign({},t,s)).forEach(r=>{t[r]!==s[r]&&(Oe(n,r,t[r]),Ie(n,r,s[r]))})}const vt=n=>"default"+n.charAt(0).toUpperCase()+n.slice(1);function ae(n,t){return n[t]!==void 0||n[vt(t)]===void 0}function A(n,t,s){return(ae(n,t)?n[t]:n[vt(t)])||s}function ie(n,t,s=null){if(n!==t){if(n&&("current"in n?n.current=null:typeof n=="function"&&n(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function gt(n){const{width:t,height:s,style:r,className:o}=n;return r!==void 0||o!==void 0?Object.assign({},r&&{style:r},o&&{className:o}):{style:{width:t,height:s}}}class Xi extends te.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:r=()=>{}}=this.props;r(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const xt=n=>({onError:t,...s})=>te.createElement(Xi,{onError:t},te.createElement(n,s));class Le extends te.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Le.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Le.updateObject(this.instance,t,this.props)}componentWillUnmount(){Le.unmountObject(this.instance,this.props)}render(){const t=gt(this.props),s=J(this.props),r=mt(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return te.createElement(qe.Provider,{value:this.state.instance},te.createElement("div",Ne({ref:this._getRef},t,r),this.props.children))}static mountObject(t,s,r){const{instanceRef:o,_events:l}=J(r),d=new s(t,A(r,"state"),A(r,"options"));return Object.keys(l).forEach(i=>Ie(d,i,l[i])),ie(null,o,d),d}static updateObject(t,s,r){const{_events:o,instanceRef:l}=J(r),{_events:d,instanceRef:i}=J(s);if(ae(r,"state")){const c=A(s,"state",{}),a=A(r,"state",{});c.type!==a.type&&t.setType(a.type),c.behaviors!==a.behaviors&&(c.behaviors&&t.behaviors.disable(c.behaviors),a.behaviors&&t.behaviors.enable(a.behaviors)),a.zoom&&c.zoom!==a.zoom&&t.setZoom(a.zoom),a.center&&c.center!==a.center&&t.setCenter(a.center),a.bounds&&c.bounds!==a.bounds&&t.setBounds(a.bounds)}if(ae(r,"options")){const c=A(s,"options"),a=A(r,"options",{});c!==a&&t.options.set(a)}A(s,"width")===A(r,"width")&&A(s,"height")===A(r,"height")||t.container.fitToViewport(),Fe(t,d,o),ie(i,l,t)}static unmountObject(t,s){const{instanceRef:r,_events:o}=J(s);t!==null&&(Object.keys(o).forEach(l=>Oe(t,l,o[l])),t.destroy(),ie(r))}}const ft=xt(bt(Le,!0,["Map"]));ft.defaultProps={width:320,height:240};class Ee extends te.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&Ee.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&Ee.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,Ee.unmountObject(this.state.instance,this.props)}render(){const t=gt(this.props);return te.createElement("div",Ne({ref:this._getRef},t))}static mountObject(t,s,r){const{instanceRef:o,_events:l}=J(r),d=A(r,"point"),i=A(r,"locateOptions"),c=A(r,"options");return new Promise((a,p)=>{s.locate(d,i).done(u=>{if(u.length>0){const h=new s.Player(t,u[0],c);ie(null,o,h),Object.keys(l).forEach(b=>Ie(h,b,l[b])),a(h)}},p)})}static updateObject(t,s,r){const{_events:o,instanceRef:l}=J(r),{_events:d,instanceRef:i}=J(s);if(ae(r,"options")){const c=A(s,"options"),a=A(r,"options");c!==a&&t.options.set(a)}if(ae(r,"point")){const c=A(r,"point"),a=A(s,"point"),p=A(r,"locateOptions");c!==a&&t.moveTo(c,p)}Fe(t,d,o),ie(i,l,t)}static unmountObject(t,s){const{instanceRef:r,_events:o}=J(s);t!==null&&(Object.keys(o).forEach(l=>Oe(t,l,o[l])),ie(r))}}class Me extends te.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Me.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Me.updateControl(this.instance,t,this.props)}componentWillUnmount(){Me.unmountControl(this.instance,this.props)}render(){return te.createElement(qe.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:r,parent:o,lazy:l,_events:d}=J(s),i=new t({data:A(s,"data"),options:A(s,"options"),state:A(s,"state"),mapTypes:A(s,"mapTypes"),lazy:l});if(Object.keys(d).forEach(c=>Ie(i,c,d[c])),o&&o.controls&&typeof o.controls.add=="function")o.controls.add(i);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${s.name}`);o.add(i)}return ie(null,r,i),i}static updateControl(t,s,r){const{_events:o,instanceRef:l}=J(r),{_events:d,instanceRef:i}=J(s);if(ae(r,"options")){const c=A(s,"options"),a=A(r,"options");c!==a&&t.options.set(a)}if(ae(r,"data")){const c=A(s,"data"),a=A(r,"data");c!==a&&t.data.set(a)}if(ae(r,"state")){const c=A(s,"state"),a=A(r,"state");c!==a&&t.state.set(a)}if(ae(r,"mapTypes")){const c=A(s,"mapTypes"),a=A(r,"mapTypes");c!==a&&(t.removeAllMapTypes(),a.forEach(p=>t.addMapType(p)))}Fe(t,d,o),ie(i,l,t)}static unmountControl(t,s){const{instanceRef:r,parent:o,_events:l}=J(s);t!==null&&(Object.keys(l).forEach(d=>Oe(t,d,l[d])),o.controls&&typeof o.controls.remove=="function"?o.controls.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ie(r))}}var Gi=xt(Ti(bt(n=>te.createElement(Me,Ne({},n,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ue extends te.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ue.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ue.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ue.unmountObject(this.instance,this.props)}render(){return te.createElement(qe.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:r,parent:o,_events:l}=J(s),d=new t(A(s,"options"));if(Object.keys(l).forEach(i=>Ie(d,i,l[i])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(d);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount Clusterer");o.add(d)}return ie(null,r,d),d}static updateObject(t,s,r){const{_events:o,instanceRef:l}=J(r),{_events:d,instanceRef:i}=J(s);if(ae(r,"options")){const c=A(s,"options"),a=A(r,"options");c!==a&&t.options.set(a)}Fe(t,d,o),ie(i,l,t)}static unmountObject(t,s){const{instanceRef:r,parent:o,_events:l}=J(s);t!==null&&(Object.keys(l).forEach(d=>Oe(t,d,l[d])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ie(r))}}class Be extends te.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Be.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Be.updateObject(this.instance,t,this.props)}componentWillUnmount(){Be.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:r,parent:o,_events:l}=J(s),d=A(s,"options",{}),i=A(s,"features",{}),c=A(s,"filter",null),a=A(s,"objects",{}),p=A(s,"clusters",{}),u=new t(d);if(u.add(i||[]),u.setFilter(c),u.objects.options.set(a),u.clusters.options.set(p),Object.keys(l).forEach(h=>Ie(u,h,l[h])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(u);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount ObjectManager");o.add(u)}return ie(null,r,u),u}static updateObject(t,s,r){const{_events:o,instanceRef:l}=J(r),{_events:d,instanceRef:i}=J(s);if(ae(r,"options")){const c=A(s,"options"),a=A(r,"options");c!==a&&t.options.set(a)}if(ae(r,"objects")){const c=A(s,"objects"),a=A(r,"objects");c!==a&&t.objects.options.set(a)}if(ae(r,"clusters")){const c=A(s,"clusters"),a=A(r,"clusters");c!==a&&t.clusters.options.set(a)}if(ae(r,"filter")){const c=A(s,"filter"),a=A(r,"filter");c!==a&&t.setFilter(a)}if(ae(r,"features")){const c=A(s,"features"),a=A(r,"features");c!==a&&(t.remove(c),t.add(a))}Fe(t,d,o),ie(i,l,t)}static unmountObject(t,s){const{instanceRef:r,parent:o,_events:l}=J(s);t!==null&&(Object.keys(l).forEach(d=>Oe(t,d,l[d])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ie(r))}}class ze extends te.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:r}=this.props,o=ze.mountObject(r&&typeof r.modifyConstructor=="function"?r.modifyConstructor(s[t]):s[t],this.props);this.instance=o,this.setState({instance:o})}componentDidUpdate(t){this.instance!==null&&ze.updateObject(this.instance,t,this.props)}componentWillUnmount(){ze.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:r,parent:o,_events:l}=J(s),d=new t(A(s,"geometry"),A(s,"properties"),A(s,"options"));if(Object.keys(l).forEach(i=>Ie(d,i,l[i])),o&&o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(d);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${s.name}`);o.add(d)}return ie(null,r,d),d}static updateObject(t,s,r){const{_events:o,instanceRef:l}=J(r),{_events:d,instanceRef:i}=J(s);if(ae(r,"geometry")){const c=A(s,"geometry",{}),a=A(r,"geometry",{});Array.isArray(a)&&a!==c?Array.isArray(a[0])&&typeof a[1]=="number"?(t.geometry.setCoordinates(a[0]),t.geometry.setRadius(a[1])):t.geometry.setCoordinates(a):typeof a=="object"&&(a.coordinates!==c.coordinates&&t.geometry.setCoordinates(a.coordinates),a.radius!==c.radius&&t.geometry.setRadius(a.radius))}if(ae(r,"properties")){const c=A(s,"properties"),a=A(r,"properties");c!==a&&t.properties.set(a)}if(ae(r,"options")){const c=A(s,"options"),a=A(r,"options");c!==a&&t.options.set(a)}Fe(t,d,o),ie(i,l,t)}static unmountObject(t,s){const{instanceRef:r,parent:o,_events:l}=J(s);t!==null&&(Object.keys(l).forEach(d=>Oe(t,d,l[d])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ie(r))}}const Zi=()=>{const n=m.useRef(null);return e.jsx(Hi,{children:e.jsx("div",{children:e.jsx(ft,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{n.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(Gi,{options:{position:{bottom:20,right:20}}})})})})},Ji=({temporarySocialPlatforms:n,setTemporarySocialPlatforms:t})=>{const s=(r,o)=>{t(l=>l.map(d=>d.id===o?{...d,text:r}:d))};return e.jsxs("div",{className:B.aboutUs_inputs,children:[n.map(r=>e.jsx("div",{className:B.aboutUs_inputs_wrap,children:r.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:B.aboutUs_inputs_wrap_title,children:r.title}),e.jsx("textarea",{className:B.aboutUs_inputs_wrap_textarea,onChange:o=>s(o.target.value,r.id),value:r.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:B.aboutUs_inputs_wrap_title,children:r.title}),e.jsx("input",{className:B.aboutUs_inputs_wrap_input,type:r.type==="isPhone"?"number":r.type==="isEmail"?"email":"text",onChange:o=>s(o.target.value,r.id),value:r.text})]})},r.id)),e.jsx(Zi,{})]})},Yi=({id:n,checked:t,onChange:s})=>{const r=o=>{s(n,o.target.checked)};return e.jsxs("label",{className:B.custom_checkbox,children:[e.jsx("input",{className:B.custom_checkbox_input,type:"checkbox",checked:t,onChange:r}),e.jsx("span",{className:B.custom_checkbox_box,children:e.jsx(T,{name:"CheckIcon",width:18,height:18,className:B.custom_checkbox_box_icon})})]})},Qi=({temporaryContactsSchedule:n,setTemporaryContactsSchedule:t})=>{const s=i=>{const c=i.replace(/\D/g,"");return c.length<=2?c:`${c.slice(0,2)}:${c.slice(2,4)}`},r=(i,c,a,p)=>{if(!p.isActive)return;const u=s(a);t(h=>h.map(b=>b.id===i?{...b,workHours:{...b.workHours,[c]:u}}:b))},o=(i,c)=>{t(a=>a.map(p=>p.id===i?{...p,isActive:c,workHours:c?p.workHours:{start:"",end:""}}:p))},l=m.useRef({}),d=m.useRef({});return m.useEffect(()=>{n.forEach(i=>{var c;i.isActive&&l.current[i.id]&&!d.current[i.id]&&((c=l.current[i.id])==null||c.focus(),d.current[i.id]=!0)})},[n]),e.jsxs("div",{className:B.aboutUs_week,children:[e.jsxs("div",{className:B.aboutUs_week_info,children:[e.jsx("span",{className:B.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:B.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:B.aboutUs_week_content,children:n.map((i,c)=>{const a=c===n.length-1,p=a&&i.isActive?B.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:B.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${B.aboutUs_week_wrap_colored} 
                  ${i.isActive?B.aboutUs_week_wrap_colored_active:""} 
                  ${a?B.aboutUs_week_wrap_colored_last:""} 
                  ${p}
                `,children:[e.jsx("span",{className:B.aboutUs_week_wrap_day,children:i.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:B.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:u=>l.current[i.id]=u,className:B.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>r(i.id,"start",u.target.value,i),value:i.workHours.start}),e.jsx("span",{className:B.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:B.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>r(i.id,"end",u.target.value,i),value:i.workHours.end})]})]}),e.jsx(Yi,{id:i.id,checked:i.isActive,onChange:o})]},i.id)})})]})},ec=()=>{const{contactsFormInputsArr:n,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:r,setImageUrlLogo:o}=Ge(),[l,d]=m.useState(n),[i,c]=m.useState(""),[a,p]=m.useState(s),u=()=>{t(l),o(i);const h=a.map(b=>b.workHours&&b.workHours.start===""&&b.workHours.end===""?{...b,isActive:!1}:b);r(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:B.aboutUs,children:[e.jsx(zi,{temporaryImageUrl:i,setTemporaryImageUrl:c}),e.jsxs("div",{className:B.aboutUs_content,children:[e.jsx(Ji,{temporarySocialPlatforms:l,setTemporarySocialPlatforms:d}),e.jsx(Qi,{temporaryContactsSchedule:a,setTemporaryContactsSchedule:p})]})]}),e.jsx("button",{className:B.aboutUs_btn,onClick:u,children:"Сохранить"})]})};function tc({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:o=500,scale:l=1.1,status:d=!1,disabled:i=!1}){const c={width:`${n}px`,height:`${n/2-n/20}px`,background:d?s:r,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},a={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${d?s:r}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${l}) translateX(${d?"110%":"0"})`};return e.jsx("div",{style:c,children:e.jsx("div",{style:a})})}const sc=({temporarySocialPlatforms:n,setTemporarySocialPlatforms:t})=>{const s=(o,l)=>{t(d=>d.map(i=>i.id===o?{...i,url:l,isActive:l===""?!1:i.isActive}:i))},r=(o,l)=>{o.url!==""&&t(d=>d.map(i=>i.id===l?{...i,isActive:!i.isActive,url:o.isActive?"":o.url}:i))};return e.jsx(e.Fragment,{children:n.map(o=>e.jsxs("div",{className:B.socials_content_wrap,children:[e.jsx("img",{src:o.icon,alt:o.alt}),e.jsx("input",{type:"text",className:B.socials_content_wrap_input,value:o.url||"",onChange:l=>s(o.id,l.target.value)}),e.jsx("div",{onClick:()=>r(o,o.id),children:e.jsx(tc,{status:o.isActive})})]},o.id))})},nc=()=>{const{socialPlatforms:n,setSocialPlatforms:t,setActiveSocials:s}=Ge(),[r,o]=m.useState(n);async function l(){const i=xe.get("multi-store"),c=await oe.get(`web-credentials/${i}`);if(c){const a=Object.entries(c.data.social).filter(([u,h])=>h.isActive).map(([u,h])=>({name:u,...h})),p=n.filter(u=>a.some(h=>h.name===u.name)).map(u=>{const h=a.find(b=>b.name===u.name);return{...u,...h,isActive:!0}});s(p)}}async function d(){t(r);const i=xe.get("multi-store"),c=r.reduce((a,p)=>(a[p.name]={url:p.url,isActive:p.isActive},a),{});try{const a=await oe.patch(`web-credentials/${i}`,{social:c});l()}catch(a){console.log("error",a)}}return e.jsxs("div",{className:B.socials,children:[e.jsx("h3",{className:B.socials_title,children:"Соц-сети"}),e.jsx("div",{className:B.socials_content,children:e.jsx(sc,{temporarySocialPlatforms:r,setTemporarySocialPlatforms:o})}),e.jsx("button",{className:B.contacts_btn,onClick:d,children:"Сохранить"})]})},oc=[{id:ee(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:ee(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function rc(){const t=se().pathname;return e.jsx("div",{className:B.contacts,children:e.jsxs("div",{className:B.contacts_content,children:[e.jsx("div",{className:B.contacts_nav,children:e.jsx("ul",{className:B.contacts_nav_list,children:oc.map(s=>e.jsx(Z,{to:s.href,className:`${B.contacts_nav_link} ${s.href==t?B.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(nc,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(ec,{})]})})}const ac="_radioLabel_1w8t1_1",ic="_radioLabel_selected_1w8t1_7",cc="_radioLabel_radio_1w8t1_7",lc="_radioLabel_input_1w8t1_15",_c="_radioLabel_text_1w8t1_28",dc="_storeBtn_1w8t1_34",pc="_storeBtn_active_1w8t1_48",uc="_deliveryInput_text_1w8t1_53",mc="_deliveryInput_wrap_1w8t1_58",hc="_deliveryInput_wrap_input_1w8t1_66",bc="_version3_1w8t1_74",vc="_version3_title_1w8t1_79",gc="_version3_block_1w8t1_85",xc="_version3_block_top_1w8t1_90",fc="_version3_block_top_title_1w8t1_102",kc="_version3_block_top_arrow_1w8t1_106",yc="_version3_block_top_arrow_active_1w8t1_119",jc="_version3_block_dropdown_1w8t1_122",wc="_version3_block_dropdown_item_1w8t1_133",Cc="_version3_block_dropdown_open_1w8t1_149",Nc="_version3_block_onOff_1w8t1_173",Sc="_version3_block_delivery_1w8t1_173",Ic="_version3_pickedWrap_1w8t1_178",Oc="_version3_pickedWrap_item_1w8t1_189",Dc="_kilometerPricing_1w8t1_205",$c="_kilometerPricing_wrap_1w8t1_210",Pc="_kilometerPricing_wrap_input_1w8t1_219",Fc="_textarea_1w8t1_225",Ac="_textarea_title_1w8t1_230",Lc="_textarea_text_1w8t1_236",Mc="_textarea_count_1w8t1_243",R={radioLabel:ac,radioLabel_selected:ic,radioLabel_radio:cc,radioLabel_input:lc,radioLabel_text:_c,storeBtn:dc,storeBtn_active:pc,deliveryInput_text:uc,deliveryInput_wrap:mc,deliveryInput_wrap_input:hc,version3:bc,version3_title:vc,version3_block:gc,version3_block_top:xc,version3_block_top_title:fc,version3_block_top_arrow:kc,version3_block_top_arrow_active:yc,version3_block_dropdown:jc,version3_block_dropdown_item:wc,version3_block_dropdown_open:Cc,version3_block_onOff:Nc,version3_block_delivery:Sc,version3_pickedWrap:Ic,version3_pickedWrap_item:Oc,kilometerPricing:Dc,kilometerPricing_wrap:$c,kilometerPricing_wrap_input:Pc,textarea:Fc,textarea_title:Ac,textarea_text:Lc,textarea_count:Mc},be=({id:n,value:t,checked:s,onChange:r,label:o})=>e.jsxs("label",{className:`${R.radioLabel} ${s?R.radioLabel_selected:""}`,children:[e.jsx("input",{type:"radio",id:n,value:t,checked:s,onChange:r,className:R.radioLabel_input}),e.jsx("span",{className:R.radioLabel_radio}),e.jsx("span",{className:R.radioLabel_text,children:o})]}),Ze=(n,t)=>{const s=Se();return se(),{handleChange:m.useCallback(o=>{const l=o.target.value;n(l);const d=t[l];d&&s(d)},[s,t,n])}},Wc="_delivery_vkjtc_1",Ec="_delivery_title_vkjtc_5",Uc="_delivery_main_vkjtc_10",Bc="_delivery_btn_vkjtc_16",zc="_deliveryOrg_vkjtc_28",Tc="_deliveryOrg_radios_vkjtc_31",Rc="_deliveryOrg_children_vkjtc_37",Vc="_deliveryOrg_children_wrap_vkjtc_40",qc="_storeDelivery_vkjtc_46",Kc="_storeDelivery_stores_vkjtc_49",Hc="_storeDelivery_radios_vkjtc_55",H={delivery:Wc,delivery_title:Ec,delivery_main:Uc,delivery_btn:Bc,deliveryOrg:zc,deliveryOrg_radios:Tc,deliveryOrg_children:Rc,deliveryOrg_children_wrap:Vc,storeDelivery:qc,storeDelivery_stores:Kc,storeDelivery_radios:Hc},pe=({text:n,placeholder:t,value:s,setValue:r})=>e.jsxs("div",{className:R.deliveryInput,children:[e.jsx("p",{className:R.deliveryInput_text,children:n}),e.jsxs("div",{className:R.deliveryInput_wrap,children:[e.jsx("input",{className:R.deliveryInput_wrap_input,type:"number",placeholder:t,value:s,onChange:o=>r(o.target.value)}),e.jsx("span",{className:R.deliveryInput_wrap_input_text,children:"UZS"})]})]}),_e=Dt()($t(Pt(n=>({deliveryStoresArr:[{id:ee(),name:"Магазин1",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:ee(),name:"Магазин2",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]},{id:ee(),name:"Магазин3",location:"",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}],setDeliveryStoresArr:t=>n({deliveryStoresArr:t}),isActiveStoreId:"",setIsActiveStoreId:t=>n({isActiveStoreId:t}),citiesDelivery:[{id:ee(),city:"Ташкент"},{id:ee(),city:"Бухара"},{id:ee(),city:"Самарканд"}],setCitiesDelivery:t=>n({citiesDelivery:t}),selectedOption:"",setSelectedOption:t=>n({selectedOption:t}),selectedOrganizationOption:"",setSelectedOrganizationOption:t=>n({selectedOrganizationOption:t}),selectedStoreOption:"",setSelectedStoreOption:t=>n({selectedStoreOption:t}),saveLocation:"",setSaveLocation:t=>n({saveLocation:t}),savePathStore:"",setSavePathStore:t=>n({savePathStore:t}),saveLocationStore:[],setSaveLocationStore:t=>n({saveLocationStore:t}),pickedCitiesFreeDelivery:[],setPickedCitiesFreeDelivery:t=>n({pickedCitiesFreeDelivery:t}),inputSumFree:"",setInputSumFree:t=>n({inputSumFree:t}),pickedCitiesFixedDelivery:[],setPickedCitiesFixedDelivery:t=>n({pickedCitiesFixedDelivery:t}),inputSumFixed:"",setInputSumFixed:t=>n({inputSumFixed:t}),inputFixedPrice:"",setInputFixedPrice:t=>n({inputFixedPrice:t}),pickedCitiesFlexibleDelivery:[],setPickedCitiesFlexibleDelivery:t=>n({pickedCitiesFlexibleDelivery:t}),inputSumFlexible:"",setInputSumFlexible:t=>n({inputSumFlexible:t}),inputFirstKm:"",setInputFirstKm:t=>n({inputFirstKm:t}),inputLastKm:"",setInputLastKm:t=>n({inputLastKm:t}),inputExtraKm:"",setInputExtraKm:t=>n({inputExtraKm:t}),pickedCitiesOwnDelivery:[],setPickedCitiesOwnDelivery:t=>n({pickedCitiesOwnDelivery:t}),inputSumOwn:"",setInputSumOwn:t=>n({inputSumOwn:t}),textareaVal:"",setTextareaVal:t=>n({textareaVal:t}),openCountriesDropdown:!1,setOpenCountriesDropdown:t=>n({openCountriesDropdown:t})}),{name:"delivery-store",partialize:n=>({...n})})));function ye({citiesArrDelivery:n,setCitiesArrDelivery:t,pickedCities:s,setPickedCities:r}){const{openCountriesDropdown:o,setOpenCountriesDropdown:l}=_e(),d=c=>{s.some(a=>a.id===c.id)||r([...s,c]),l(!1)},i=(c,a)=>{a.stopPropagation(),r(s.filter(p=>p.id!==c.id))};return e.jsxs("div",{className:R.version3,children:[e.jsx("span",{className:R.version3_title,children:"Города"}),e.jsxs("div",{className:R.version3_block,children:[e.jsxs("div",{className:`${s.length>0?R.version3_pickedWrap:R.version3_block_top}`,onClick:()=>l(!o),children:[s.length>0?s.map(c=>e.jsxs("div",{className:R.version3_pickedWrap_item,children:[e.jsx("h2",{className:R.version3_block_top_title,children:c.city}),e.jsx("button",{onClick:a=>i(c,a),children:e.jsx(T,{name:"XMarkIcon",width:15})})]},c.id)):e.jsx("h2",{className:R.version3_block_top_title,children:"Выберите город"}),e.jsx("button",{className:R.version3_block_top_btn,onClick:()=>l(!o),children:e.jsx("div",{className:`${R.version3_block_top_arrow} ${o&&n.length>0?R.version3_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${R.version3_block_dropdown} ${o&&n.length>0?R.version3_block_dropdown_open:""}`,children:n==null?void 0:n.map(c=>e.jsx("span",{className:R.version3_block_dropdown_item,onClick:()=>d(c),children:c.city},c.id))})]})]})}const je=()=>{const{setPickedCitiesFreeDelivery:n,setInputSumFree:t,setPickedCitiesFixedDelivery:s,setInputSumFixed:r,setInputFixedPrice:o,setPickedCitiesFlexibleDelivery:l,setInputSumFlexible:d,setInputFirstKm:i,setInputLastKm:c,setInputExtraKm:a,setPickedCitiesOwnDelivery:p,setInputSumOwn:u,setTextareaVal:h}=_e();return{resetOrg:v=>{v!=="free"&&(n([]),t("")),v!=="fixed"&&(s([]),r(""),o("")),v!=="flexible"&&(l([]),d(""),i(""),c(""),a("")),v!=="own"&&(p([]),u(""),h("")),v==="all"&&(n([]),t(""),s([]),r(""),o(""),l([]),d(""),i(""),c(""),a(""),p([]),u(""),h(""))}}},Xc=()=>{const{setInputSumFree:n,citiesDelivery:t,setCitiesDelivery:s,pickedCitiesFreeDelivery:r,inputSumFree:o,setPickedCitiesFreeDelivery:l,deliveryStoresArr:d,setDeliveryStoresArr:i,setOpenCountriesDropdown:c,setSaveLocation:a,setSaveLocationStore:p}=_e(),u=se(),[h,b]=m.useState(r),[v,I]=m.useState(o);m.useEffect(()=>{c(!1)},[]);const{resetOrg:$}=je(),F=()=>{$("free");const j=h,w=v;l(j),n(w);const f=[{cities:j,minPrice:w}],y=d.map(x=>({...x,location:"storeFreeDelivery",deliveryFree:f,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}));console.log("deliveryStoresArr",d),i(y),a(u.pathname),p([]),c(!1)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:v,setValue:I}),e.jsx(ye,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:h,setPickedCities:b}),e.jsx("button",{className:H.delivery_btn,onClick:()=>F(),children:"Сохранить"})]})},Gc=()=>{const{resetOrg:n}=je(),{inputSumFixed:t,setInputSumFixed:s,inputFixedPrice:r,setInputFixedPrice:o,citiesDelivery:l,setCitiesDelivery:d,pickedCitiesFixedDelivery:i,setPickedCitiesFixedDelivery:c,deliveryStoresArr:a,setDeliveryStoresArr:p,setOpenCountriesDropdown:u,setSaveLocation:h,setSaveLocationStore:b}=_e(),[v,I]=m.useState(i),[$,F]=m.useState(t),[j,w]=m.useState(r);m.useEffect(()=>{u(!1)},[]);const f=()=>{n("fixed");const y=v,x=$,g=j;c(y),s(x),o(g);const O=[{cities:y,minPrice:x,fixedPrice:g}],C=a.map(D=>({...D,location:"storeFixedPriceDelivery",deliveryFree:[],deliveryFixed:O,deliveryFlexible:[],deliveryOwn:[]}));p(C),h(location.pathname),b([]),console.log("deliveryStoresArr",a),u(!1)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:$,setValue:F}),e.jsx(pe,{text:"Цена за доставку",placeholder:"0",value:j,setValue:w}),e.jsx(ye,{citiesArrDelivery:l,setCitiesArrDelivery:d,pickedCities:v,setPickedCities:I}),e.jsx("button",{className:H.delivery_btn,onClick:()=>f(),children:"Сохранить"})]})},kt=({valueFirst:n,setValueFirst:t,valueLast:s,setValueLast:r})=>e.jsxs("div",{className:R.kilometerPricing,children:[e.jsx("span",{className:R.deliveryInput_text,children:"Первые"}),e.jsxs("div",{className:R.kilometerPricing_wrap,children:[e.jsx("input",{className:R.kilometerPricing_wrap_input,type:"number",value:n,placeholder:"0",onChange:o=>t(o.target.value)}),e.jsx("span",{children:"KM"})]}),e.jsx("span",{className:R.deliveryInput_text,children:"по"}),e.jsxs("div",{className:R.kilometerPricing_wrap,children:[e.jsx("input",{className:R.kilometerPricing_wrap_input,type:"number",value:s,placeholder:"0",onChange:o=>r(o.target.value)}),e.jsx("span",{children:"KM"})]})]}),Zc=()=>{const{deliveryStoresArr:n,citiesDelivery:t,setCitiesDelivery:s,setDeliveryStoresArr:r,pickedCitiesFlexibleDelivery:o,setPickedCitiesFlexibleDelivery:l,inputSumFlexible:d,setInputSumFlexible:i,inputFirstKm:c,setInputFirstKm:a,inputLastKm:p,setInputLastKm:u,inputExtraKm:h,setInputExtraKm:b,setOpenCountriesDropdown:v,setSaveLocation:I,setSaveLocationStore:$}=_e(),[F,j]=m.useState(o),[w,f]=m.useState(d),[y,x]=m.useState(c),[g,O]=m.useState(p),[C,D]=m.useState(h),{resetOrg:W}=je(),E=()=>{W("flexible");const q=F,k=w,U=y,V=g,L=C;l(q),i(k),a(U),u(V),b(L);const ve=[{cities:q,minPrice:k,pricingPerKm:{firstKm:U,lastKm:V},extraPricing:L}],me=n.map(ge=>({...ge,location:"storeFlexibleDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:ve,deliveryOwn:[]}));r(me),I(location.pathname),$([]),v(!1)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:w,setValue:f}),e.jsx(kt,{valueFirst:y,setValueFirst:x,valueLast:g,setValueLast:O}),e.jsx(pe,{text:"За каждый следующий км",placeholder:"0",value:C,setValue:D}),e.jsx(ye,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:F,setPickedCities:j}),e.jsx("button",{className:H.delivery_btn,onClick:()=>E(),children:"Сохранить"})]})},yt=({value:n,setValue:t})=>{const[r,o]=m.useState(400),l=d=>{const i=d.target.value;t(i),i.length<=400&&o(400-i.length)};return e.jsxs("div",{className:R.textarea,children:[e.jsx("span",{className:R.textarea_title,children:"Текст для пояснения"}),e.jsx("textarea",{className:R.textarea_text,maxLength:400,onChange:l,value:n}),e.jsxs("span",{className:R.textarea_count,children:[r,"/",400]})]})},Jc=()=>{const{deliveryStoresArr:n,citiesDelivery:t,setCitiesDelivery:s,setDeliveryStoresArr:r,pickedCitiesOwnDelivery:o,setPickedCitiesOwnDelivery:l,inputSumOwn:d,setInputSumOwn:i,textareaVal:c,setTextareaVal:a,setSaveLocation:p,setSaveLocationStore:u}=_e(),[h,b]=m.useState(o),[v,I]=m.useState(d),[$,F]=m.useState(c),{resetOrg:j}=je(),w=()=>{j("own");const f=h,y=v,x=$;l(f),i(y),a(x);const g=[{cities:f,minPrice:y,description:x}],O=n.map(C=>({...C,location:"storeOwnVersionDelivery",deliveryFree:[],deliveryFixed:[],deliveryFlexible:[],deliveryOwn:g}));r(O),p(location.pathname),u([])};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:v,setValue:I}),e.jsx(yt,{value:$,setValue:F}),e.jsx(ye,{citiesArrDelivery:t,setCitiesArrDelivery:s,pickedCities:h,setPickedCities:b}),e.jsx("button",{className:H.delivery_btn,onClick:()=>w(),children:"Сохранить"})]})},Yc=()=>{const{selectedOrganizationOption:n,saveLocation:t,setSelectedOrganizationOption:s}=_e(),r=se(),o=Se(),l={freeDelivery:"/admin/settings/delivery/forOrganization/freeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forOrganization/fixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forOrganization/flexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forOrganization/ownVersionDelivery"};m.useEffect(()=>{t?o(t):s("")},[t,o]),m.useEffect(()=>{const i=r.pathname,c=Object.keys(l).find(a=>l[a]===i);c&&s(c)},[r.pathname,s]);const{handleChange:d}=Ze(s,l);return e.jsxs("div",{className:H.deliveryOrg,children:[e.jsx("h4",{className:H.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:H.deliveryOrg_radios,children:[e.jsx(be,{id:"freeDelivery",value:"freeDelivery",checked:n==="freeDelivery",onChange:d,label:"Бесплатная доставка"}),e.jsx(be,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:n==="fixedPriceDelivery",onChange:d,label:"Фиксированная цена"}),e.jsx(be,{id:"flexibleDelivery",value:"flexibleDelivery",checked:n==="flexibleDelivery",onChange:d,label:"Гибкая доставка"}),e.jsx(be,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:n==="ownVersionDelivery",onChange:d,label:"Свой вариант"})]}),e.jsxs("div",{className:H.deliveryOrg_children,children:[r.pathname.startsWith("/admin/settings/delivery/forOrganization/freeDelivery")&&e.jsx(Xc,{}),r.pathname.startsWith("/admin/settings/delivery/forOrganization/fixedPriceDelivery")&&e.jsx(Gc,{}),r.pathname.startsWith("/admin/settings/delivery/forOrganization/flexibleDelivery")&&e.jsx(Zc,{}),r.pathname.startsWith("/admin/settings/delivery/forOrganization/ownVersionDelivery")&&e.jsx(Jc,{})]})]})},Qc=({text:n,isActive:t,onClick:s,href:r})=>e.jsx(Z,{className:`${R.storeBtn} ${t?R.storeBtn_active:""}`,onClick:s,to:`settings/delivery/forStore/${r}/settingsSave`,children:n}),el=()=>{const{isActiveStoreId:n,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:r,setCitiesDelivery:o,saveLocationStore:l,setSaveLocationStore:d,setSaveLocation:i,setSavePathStore:c}=_e(),a=se(),[p,u]=m.useState([]),[h,b]=m.useState("");m.useEffect(()=>{var F,j;const $=t.find(w=>w.id===n);$&&$.deliveryFree?(u(((F=$.deliveryFree[0])==null?void 0:F.cities)||[]),b(((j=$.deliveryFree[0])==null?void 0:j.minPrice)||"")):(u([]),b(""))},[n]);const{resetOrg:v}=je(),I=()=>{v("all");const j=[{cities:p,minPrice:h}],w=t.map(x=>x.id===n?{...x,deliveryFree:j,deliveryFixed:[],deliveryFlexible:[],deliveryOwn:[]}:x);s(w);const f=[...l],y=f.findIndex(x=>x.id===n);y>=0?f[y].location=a.pathname:f.push({id:n,location:a.pathname}),d(f),console.log("saveLocationStore",l),i(""),c(a.pathname)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:b}),e.jsx(ye,{citiesArrDelivery:r,setCitiesArrDelivery:o,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:H.delivery_btn,onClick:()=>I(),children:"Сохранить"})]})},tl=()=>{const{isActiveStoreId:n,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:r,setCitiesDelivery:o,saveLocationStore:l,setSaveLocationStore:d,setSaveLocation:i,setSavePathStore:c}=_e(),a=se(),[p,u]=m.useState([]),[h,b]=m.useState(""),[v,I]=m.useState("");m.useEffect(()=>{var w,f,y;const j=t.find(x=>x.id===n);j&&j.deliveryFixed?(u(((w=j.deliveryFixed[0])==null?void 0:w.cities)||[]),b(((f=j.deliveryFixed[0])==null?void 0:f.minPrice)||""),I(((y=j.deliveryFixed[0])==null?void 0:y.fixedPrice)||"")):(u([]),b(""),I(""))},[n]);const{resetOrg:$}=je(),F=()=>{$("all");const y=[{cities:p,minPrice:h,fixedPrice:v}],x=t.map(C=>C.id===n?{...C,deliveryFixed:y,deliveryFree:[],deliveryFlexible:[],deliveryOwn:[]}:C);s(x);const g=[...l],O=g.findIndex(C=>C.id===n);O>=0?g[O].location=a.pathname:g.push({id:n,location:a.pathname}),d(g),i(""),c(a.pathname)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:b}),e.jsx(pe,{text:"Цена за доставку",placeholder:"0",value:v,setValue:I}),e.jsx(ye,{citiesArrDelivery:r,setCitiesArrDelivery:o,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:H.delivery_btn,onClick:()=>F(),children:"Сохранить"})]})},sl=()=>{const{isActiveStoreId:n,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:r,setCitiesDelivery:o,saveLocationStore:l,setSaveLocationStore:d,setSaveLocation:i,setSavePathStore:c}=_e(),a=se(),[p,u]=m.useState([]),[h,b]=m.useState(""),[v,I]=m.useState(""),[$,F]=m.useState(""),[j,w]=m.useState("");m.useEffect(()=>{var g,O,C,D,W,E,q;const x=t.find(k=>k.id===n);x&&x.deliveryFlexible?(u(((g=x.deliveryFlexible[0])==null?void 0:g.cities)||[]),b(((O=x.deliveryFlexible[0])==null?void 0:O.minPrice)||""),I(((D=(C=x.deliveryFlexible[0])==null?void 0:C.pricingPerKm)==null?void 0:D.firstKm)||""),F(((E=(W=x.deliveryFlexible[0])==null?void 0:W.pricingPerKm)==null?void 0:E.lastKm)||""),w(((q=x.deliveryFlexible[0])==null?void 0:q.extraPricing)||"")):(u([]),b(""),I(""),F(""),w(""))},[n]);const{resetOrg:f}=je(),y=()=>{f("all");const W=[{cities:p,minPrice:h,pricingPerKm:{firstKm:v,lastKm:$},extraPricing:j}],E=t.map(U=>U.id===n?{...U,deliveryFlexible:W,deliveryFree:[],deliveryFixed:[],deliveryOwn:[]}:U);s(E);const q=[...l],k=q.findIndex(U=>U.id===n);k>=0?q[k].location=a.pathname:q.push({id:n,location:a.pathname}),d(q),i(""),c(a.pathname)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:b}),e.jsx(kt,{valueFirst:v,setValueFirst:I,valueLast:$,setValueLast:F}),e.jsx(pe,{text:"За каждый следующий км",placeholder:"0",value:j,setValue:w}),e.jsx(ye,{citiesArrDelivery:r,setCitiesArrDelivery:o,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:H.delivery_btn,onClick:()=>y(),children:"Сохранить"})]})},nl=()=>{const{isActiveStoreId:n,deliveryStoresArr:t,setDeliveryStoresArr:s,citiesDelivery:r,setCitiesDelivery:o,saveLocationStore:l,setSaveLocationStore:d,setSaveLocation:i,setSavePathStore:c}=_e(),a=se(),[p,u]=m.useState([]),[h,b]=m.useState(""),[v,I]=m.useState("");m.useEffect(()=>{var w,f,y;const j=t.find(x=>x.id===n);j&&j.deliveryOwn?(u(((w=j.deliveryOwn[0])==null?void 0:w.cities)||[]),b(((f=j.deliveryOwn[0])==null?void 0:f.minPrice)||""),I(((y=j.deliveryOwn[0])==null?void 0:y.description)||"")):(u([]),b(""),I(""))},[n]);const{resetOrg:$}=je(),F=()=>{$("all");const y=[{cities:p,minPrice:h,description:v}],x=t.map(C=>C.id===n?{...C,deliveryOwn:y,deliveryFree:[],deliveryFixed:[],deliveryFlexible:[]}:C);s(x);const g=[...l],O=g.findIndex(C=>C.id===n);O>=0?g[O].location=a.pathname:g.push({id:n,location:a.pathname}),d(g),i(""),c(a.pathname)};return e.jsxs("div",{className:H.deliveryOrg_children_wrap,children:[e.jsx(pe,{text:"Минимальная сумма заказа",placeholder:"0",value:h,setValue:b}),e.jsx(yt,{value:v,setValue:I}),e.jsx(ye,{citiesArrDelivery:r,setCitiesArrDelivery:o,pickedCities:p,setPickedCities:u}),e.jsx("button",{className:H.delivery_btn,onClick:()=>F(),children:"Сохранить"})]})},ol=()=>{const{deliveryStoresArr:n,selectedStoreOption:t,isActiveStoreId:s,saveLocationStore:r,setSelectedStoreOption:o}=_e(),l=se(),d=Se(),i={storeFreeDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFreeDelivery`,storeFixedPriceDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFixedPriceDelivery`,storeFlexibleDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeFlexibleDelivery`,storeOwnVersionDelivery:`/admin/settings/delivery/forStore/${s}/settingsSave/storeOwnVersionDelivery`},{handleChange:c}=Ze(o,i);return m.useEffect(()=>{const a=r.find(h=>h.id===s),p=Object.keys(i).find(h=>i[h]===(a==null?void 0:a.location)),u=n[0].location;console.log("option",p),r.length>0&&a?(d(a.location),o(p)):(d(`/admin/settings/delivery/forStore/${s}/settingsSave/${u}`),o(u))},[s,r]),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h4",{className:H.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:H.storeDelivery_radios,children:[e.jsx(be,{id:"storeFreeDelivery",value:"storeFreeDelivery",checked:t==="storeFreeDelivery",onChange:c,label:"Бесплатная доставка"}),e.jsx(be,{id:"storeFixedPriceDelivery",value:"storeFixedPriceDelivery",checked:t==="storeFixedPriceDelivery",onChange:c,label:"Фиксированная цена"}),e.jsx(be,{id:"storeFlexibleDelivery",value:"storeFlexibleDelivery",checked:t==="storeFlexibleDelivery",onChange:c,label:"Гибкая доставка"}),e.jsx(be,{id:"storeOwnVersionDelivery",value:"storeOwnVersionDelivery",checked:t==="storeOwnVersionDelivery",onChange:c,label:"Свой вариант"})]})]}),e.jsxs("div",{className:H.deliveryOrg_children,children:[l.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFreeDelivery`)&&e.jsx(el,{}),l.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFixedPriceDelivery`)&&e.jsx(tl,{}),l.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeFlexibleDelivery`)&&e.jsx(sl,{}),l.pathname.startsWith(`/admin/settings/delivery/forStore/${s}/settingsSave/storeOwnVersionDelivery`)&&e.jsx(nl,{})]})]})},rl=()=>{const{deliveryStoresArr:n,isActiveStoreId:t,setIsActiveStoreId:s,savePathStore:r}=_e(),o=i=>{s(i)};m.useEffect(()=>{r&&d(r)},[]);const l=se(),d=Se();return e.jsxs("div",{className:H.storeDelivery,children:[e.jsx("h4",{className:H.delivery_title,children:"Выберите магазин "}),e.jsx("div",{className:H.storeDelivery_stores,children:n.map(i=>e.jsx(Qc,{text:i.name,isActive:i.id===t,onClick:()=>o(i.id),href:i.id},i.id))}),l.pathname.startsWith(`/admin/settings/delivery/forStore/${t}/settingsSave`)&&e.jsx(ol,{})]})},al=()=>{const{selectedOption:n,setSelectedOption:t,saveLocationStore:s,savePathStore:r,saveLocation:o}=_e(),l=se(),d=Se(),i={forOrganization:"/admin/settings/delivery/forOrganization",forStore:"/admin/settings/delivery/forStore"};m.useEffect(()=>{o!==""?(d(o),t("forOrganization")):s.some(a=>a.location)&&(d(r),t(s[0].location),t("forStore"))},[]);const{handleChange:c}=Ze(t,i);return e.jsxs("div",{className:H.delivery,children:[e.jsx("h3",{className:H.delivery_title,children:"Выберите версию настройки доставки"}),e.jsxs("div",{className:H.delivery_main,children:[e.jsx(be,{id:"forOrganization",value:"forOrganization",checked:n==="forOrganization",onChange:c,label:"Для организации"}),e.jsx(be,{id:"forStore",value:"forStore",checked:n==="forStore",onChange:c,label:"Для каждого магазина"})]}),l.pathname.startsWith("/admin/settings/delivery/forOrganization")&&e.jsx(Yc,{}),l.pathname.startsWith("/admin/settings/delivery/forStore")&&e.jsx(rl,{})]})},il=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"}];function cl(){const t=se().pathname;return e.jsx("div",{className:_.settings,children:e.jsxs("div",{className:_.settings_content,children:[e.jsx("div",{className:_.settings_content_top,children:e.jsx("ul",{className:_.settings_tools,children:il.map(s=>e.jsx("li",{children:e.jsx(Z,{to:s.href,className:`${_.settings_tools_link} ${t.startsWith(s.href)?_.settings_tools_link_active:""}`,children:s.label})},s.id))})}),t=="/admin/settings/modules"&&e.jsx(tr,{}),t=="/admin/settings/templates"&&e.jsx(sr,{}),t=="/admin/settings/categories"&&e.jsx($r,{}),t.startsWith("/admin/settings/banner")&&e.jsx(si,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(rc,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(al,{})]})})}const ot=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function ll(){const[n,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[o,l]=m.useState({status:!1,message:""}),[d,i]=m.useState([]);m.useEffect(()=>{n||(i([]),l({status:!1,message:""}))},[n]);async function c(a){a.preventDefault();const p=xe.get("multi-store");try{const h=await(await oe.get(`nomenclatures?multiStoreId=${p}&name=${n}&page=${s}&perPage=${r}`)).data.data;h.length>0?(i([...h]),l({status:!1,message:""})):(i([]),l({status:!0,message:"Совпадений не найдено"}))}catch(u){console.log("Ошибка произошла при поиске продуктов на складе",u)}}return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:a=>c(a),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:a=>t(a.target.value),value:n}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:ot.map(a=>e.jsx("th",{className:_.addingWrapper_thead_th,children:a.title},a.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:d==null?void 0:d.map(a=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[ot.map(p=>{var u;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[p.title=="Наименование"?e.jsx("span",{children:(u=a==null?void 0:a.name)==null?void 0:u.ru}):"",p.title=="Штрих-код"?e.jsx("span",{children:a.mxik}):"",p.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},p.id)}),!a.hasWebNomenclature&&e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsx(Z,{to:`/admin/stock-product/${a.id}`,className:_.addingWrapper_tbody_add,children:"Добавить"})})]},a==null?void 0:a.mxik))})]}),o.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:o.message})]})}const rt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function _l(){const[n,t]=m.useState(""),[s,r]=m.useState({status:!1,message:""}),[o,l]=m.useState([]),[d]=m.useState(1),[i]=m.useState(10);m.useEffect(()=>{n||(l([]),r({status:!1,message:""}))},[n]);async function c(){const h=xe.get("multi-store");try{console.log(222,"searchText",n);const v=(await oe.get(`web-nomenclatures?multiStoreId=${h}&title=${n}&page=${d}&perPage=${i}`)).data.data;console.log(999,"data",v),v.length>0?(l([...v]),r({status:!1,message:""})):(l([]),r({status:!0,message:"Совпадений не найдено"}))}catch(b){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",b)}}async function a(h,b){h.preventDefault();try{const v=await oe.patch(`web-nomenclatures/${b}`,{isActive:!1});t(""),l([]),console.log("Продукт успешно отключен с веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}async function p(h,b){h.preventDefault();try{const v=await oe.patch(`web-nomenclatures/${b}`,{isActive:!0});t(""),l([]),console.log("Продукт успешно включен на веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}const u=async h=>{h.preventDefault(),c()};return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:h=>u(h),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:h=>t(h.target.value),value:n}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsxs("tr",{className:_.addingWrapper_thead_tr,children:[rt.map(h=>e.jsx("th",{className:_.addingWrapper_thead_th,children:h.title},h.id)),e.jsx("th",{className:_.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:o==null?void 0:o.map(h=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[rt.map(b=>e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[b.title=="Наименование"?e.jsx("span",{children:h.title}):"",b.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},b.id)),e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsxs("div",{className:_.addingWrapper_tbody_buttons,children:[h.isActive&&e.jsx(Z,{to:"#",className:_.addingWrapper_tbody_del,onClick:b=>a(b,h.id),children:"Отключить"}),!h.isActive&&e.jsx(Z,{to:"#",className:_.addingWrapper_tbody_del,onClick:b=>p(b,h.id),children:"Включить"}),e.jsx(Z,{to:`/admin/website-product/${h.id}`,className:_.addingWrapper_tbody_add,children:"Изменить"})]})})]},h==null?void 0:h.id))})]}),s.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:s.message})]})}const dl=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function pl(){const t=se().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:dl.map(s=>e.jsx(Z,{to:s.href,className:`${_.products_btn} ${s.href==t?_.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(ll,{}),t=="/admin/product/adding/website"&&e.jsx(_l,{})]})}const ul=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function ml(){const t=se().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:ul.map(s=>e.jsx(Z,{to:s.href,className:`${_.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?_.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(pl,{})]})}const hl="_user_title_1uizv_1",bl="_user_list_1uizv_6",vl="_user_list_link_1uizv_12",gl="_user_list_link_active_1uizv_26",xl="_user_form_1uizv_30",fl="_user_form_btn_1uizv_35",kl="_user_form_wrap_1uizv_51",yl="_user_form_input_1uizv_57",jl="_user_form_icon_1uizv_65",wl="_user_table_1uizv_68",Cl="_user_table_tbody_1uizv_71",Nl="_user_table_tr_1uizv_74",Sl="_user_table_th_1uizv_77",Il="_user_table_td_1uizv_85",Ol="_user_table_btns_1uizv_89",Dl="_user_table_btn_1uizv_89",$l="_user_table_btn_blocked_1uizv_107",Pl="_modal_1uizv_111",Fl="_modal_active_1uizv_120",Al="_modal_wrap_1uizv_123",Ll="_modal_wrap_header_1uizv_131",Ml="_modal_wrap_stores_1uizv_143",Wl="_modal_wrap_stores_text_1uizv_165",El="_modal_btns_1uizv_169",Ul="_modal_btn_1uizv_169",Bl="_modal_content_1uizv_193",zl="_modal_content_text_1uizv_197",Tl="_versions_1uizv_206",Rl="_versions_block_1uizv_211",Vl="_versions_block_top_1uizv_216",ql="_versions_block_top_title_1uizv_226",Kl="_versions_block_top_arrow_1uizv_230",Hl="_versions_block_top_arrow_active_1uizv_239",Xl="_versions_block_dropdown_1uizv_242",Gl="_versions_block_dropdown_item_1uizv_257",Zl="_versions_block_dropdown_open_1uizv_268",Jl="_shop_header_1uizv_275",Yl="_shop_header_title_1uizv_282",M={user_title:hl,user_list:bl,user_list_link:vl,user_list_link_active:gl,user_form:xl,user_form_btn:fl,user_form_wrap:kl,user_form_input:yl,user_form_icon:jl,user_table:wl,user_table_tbody:Cl,user_table_tr:Nl,user_table_th:Sl,user_table_td:Il,user_table_btns:Ol,user_table_btn:Dl,user_table_btn_blocked:$l,modal:Pl,modal_active:Fl,modal_wrap:Al,modal_wrap_header:Ll,modal_wrap_stores:Ml,modal_wrap_stores_text:Wl,modal_btns:El,modal_btn:Ul,modal_content:Bl,modal_content_text:zl,versions:Tl,versions_block:Rl,versions_block_top:Vl,versions_block_top_title:ql,versions_block_top_arrow:Kl,versions_block_top_arrow_active:Hl,versions_block_dropdown:Xl,versions_block_dropdown_item:Gl,versions_block_dropdown_open:Zl,shop_header:Jl,shop_header_title:Yl},Je=({headers:n})=>e.jsx("thead",{className:M.user_table_thead,children:e.jsx("tr",{className:M.user_table_tr,children:n.map(t=>e.jsx("th",{className:M.user_table_th,children:t.title},t.id))})}),Ye=()=>{const[n,t]=m.useState(""),{setUserSearch:s}=de(),r=o=>{o.preventDefault(),s(n)};return m.useEffect(()=>{n==""&&s("")},[n]),e.jsxs("form",{action:"",className:M.user_form,children:[e.jsxs("div",{className:M.user_form_wrap,children:[e.jsx("input",{type:"text",className:M.user_form_input,placeholder:"Поиск пользователей",onChange:o=>t(o.target.value),value:n}),e.jsx(T,{className:M.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:M.user_form_btn,onClick:o=>r(o),children:"Найти"})]})},Qe=({arr:n,showStore:t})=>{const{usersList:s,userSearch:r,openModalAdmin:o,openAppointUser:l,shopListAdmin:d,setOpenAppointUser:i,setOpenModalAdmin:c,setUsersList:a,setEditUserAdmin:p,setShopListDropdownAdmin:u,setCloseBlock:h,setFilteredShopListAdmin:b}=de(),I=se().pathname,[$,F]=m.useState([]);m.useEffect(()=>{let x=n;I==="/clients"?x=n.filter(g=>g.isUser):I==="/employees"&&(x=n.filter(g=>!g.isUser)),x=x==null?void 0:x.filter(g=>g.name.toLowerCase().includes(r.toLowerCase())),F(x)},[r,s,n,I]);const j=x=>{const g=s.map(O=>O.id===x?{...O,isBlocked:!O.isBlocked}:O);a(g)},w=x=>{c(!0),h(!0);const g=s.find(D=>D.id==x),O=[{id:ee(),title:"Магазин 1",order:1},{id:ee(),title:"Магазин 2",order:2},{id:ee(),title:"Магазин 3",order:3}],C=O.filter(D=>!(g!=null&&g.shopList.some(W=>W.title===D.title)));console.log("editUser",g),console.log("shopListAdminArr",O),g&&(u(g.shopList),p(g),b(C))},f=x=>{i(!0),h(!0),u([]),b(d);const g=s.find(O=>O.id==x);g&&p(g)},y=o||l;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:M.user_table_tbody,children:$.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:M.user_table_td,children:x.name}),e.jsx("td",{className:M.user_table_td,children:t?x.shopList.map(g=>e.jsxs("p",{children:[g.title," ",`(${g.position})`]},g.id)):e.jsx("p",{children:x.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:M.user_table_td,children:t?"Админ 1":x.registerDate}),e.jsx("td",{className:M.user_table_btns,children:x!=null&&x.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${M.user_table_btn} ${x.isBlocked?M.user_table_btn_blocked:""}`,onClick:()=>j(x.id),children:x.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:M.user_table_btn,onClick:()=>f(x.id),disabled:y,children:"Назначить"})]}):e.jsx("button",{className:M.user_table_btn,onClick:()=>w(x.id),style:{background:"#B5FFC7"},disabled:y,children:"Изменить"})})]},x.id))})})};function at({color:n="black",className:t,header:s,isEnabled:r,dropdownItem:o,margin:l,versionList:d,closeBlock:i}){const{shopListAdmin:c,shopListDropdownAdmin:a,filteredShopListAdmin:p,setShopListDropdownAdmin:u,setShopListAdmin:h}=de(),[b,v]=m.useState("Выберете должность"),[I,$]=m.useState("Выберете магазин"),[F,j]=m.useState(!1);m.useEffect(()=>{o!=null&&o.position?v(o.position):v("Выберете должность")},[o==null?void 0:o.position]),m.useEffect(()=>{i||j(!1)},[i]);const w=(g,O)=>{if(o){v(g.title);const C=a.filter(W=>W.title==o.title),D=a.findIndex(W=>W.title==o.title);C[0].position=g.title,a.splice(D,1,C[0]),u(a)}else $(g.title);if(r&&!a.some(C=>C.title==g.title)){v("Выберете должность");const C={...g,originalIndex:O};u([...a,C]),h(p.filter((D,W)=>W!==O))}j(!1)},f=g=>{const O=a.filter(C=>C.id!==g.id);if(u(O),g.originalIndex!==void 0){const C=[...c];C.splice(g.originalIndex,0,g),h(C)}else{const C=[...p,g].sort((D,W)=>D.order!==void 0&&W.order!==void 0?D.order-W.order:0);h(C),console.log("arr",C)}},y=()=>{j(!F)};function x(g,O){return g.order&&O.order&&(g==null?void 0:g.order)>(O==null?void 0:O.order)?1:-1}return e.jsx("div",{className:t??M.versions,style:{marginBottom:l},children:e.jsxs("div",{className:M.versions_block,children:[s&&e.jsxs("div",{className:M.shop_header,children:[e.jsx("p",{className:M.shop_header_title,children:o==null?void 0:o.title}),e.jsx("button",{onClick:()=>o&&f(o),children:e.jsx(T,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:M.versions_block_top,children:[e.jsx("h2",{className:M.versions_block_top_title,style:{color:n},children:o?b:I}),e.jsx("button",{className:M.versions_block_top_btn,onClick:()=>y(),children:e.jsx("div",{className:`${M.versions_block_top_arrow} ${F?M.versions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${M.versions_block_dropdown} ${F?M.versions_block_dropdown_open:""}`,children:d==null?void 0:d.sort(x).map((g,O)=>e.jsx("span",{className:M.versions_block_dropdown_item,onClick:()=>w(g,O),children:g.title},O))})]})})}const et=()=>{const{currentShopModal:n,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:r,openModalAdmin:o,editUserAdmin:l,shopListAdmin:d,usersList:i,openAppointUser:c,closeBlock:a,filteredShopListAdmin:p,setCurrentShopModal:u,setShopListPositionAdmin:h,setCurrentShopPosition:b,setOpenModalAdmin:v,setShopListAdmin:I,setUsersList:$,setOpenAppointUser:F,setCloseBlock:j,setFilteredShopListAdmin:w}=de();m.useEffect(()=>{},[p]);const f=()=>{const C=i.findIndex(D=>D.id==(l==null?void 0:l.id));l&&t.every(D=>"position"in D)&&(l.shopList=t,i.splice(C,1,l),$(i),I(d),console.log("filteredShopListAdmin",p)),console.log("shopListAdmin",d),g(),t.length==0&&y()},y=()=>{if(l){l.isUser=!0,l.isEmployes=!1,l.shopList=[];const C={id:ee(),title:"",position:"пользователь"};l.shopList=[{...C}]}g()},x=()=>{const C=i.findIndex(D=>D.id==(l==null?void 0:l.id));if(l&&(l.shopList=t,i.splice(C,1,l),l.isUser=!1,l.isEmployes=!0,$(i),F(!1),!(l!=null&&l.shopList.some(D=>"position"in D)))){l.isUser=!0,l.shopList=[];const D={id:ee(),title:"",position:"пользователь"};l.shopList=[{...D}]}},g=()=>{I(d),w([]),v(!1),F(!1),j(!1),console.log("close modal")},O=m.useRef(null);return m.useEffect(()=>{const C=D=>{var W;O.current&&!((W=O==null?void 0:O.current)!=null&&W.contains(D.target))&&g()};return o||c?document.addEventListener("mousedown",C):document.removeEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[o,c]),e.jsx("div",{className:`${M.modal} ${o?M.modal_active:""} ${c?M.modal_active:""}`,children:e.jsxs("div",{ref:O,className:M.modal_wrap,children:[e.jsxs("div",{className:M.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>g(),children:e.jsx(T,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:M.modal_content,children:[e.jsxs("p",{className:M.modal_content_text,children:["Логин: ",l==null?void 0:l.name]}),e.jsxs("p",{className:M.modal_content_text,children:["Статус:",l==null?void 0:l.shopList.map(C=>e.jsx("span",{children:C.position},C.id))]}),e.jsx(at,{color:"#717171",setVersionList:I,currentVersion:n,setCurrentVersion:u,isEnabled:r,versionList:p||d,closeBlock:a}),e.jsxs("div",{className:M.modal_wrap_stores,children:[e.jsx("p",{className:M.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((C,D)=>e.jsx(at,{dropdownItem:C,margin:"12px",color:"#717171",versionList:s,setVersionList:h,setCurrentVersion:b,header:!0,closeBlock:a},D))]}),e.jsx("div",{className:M.modal_btns,children:c?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>g(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:M.modal_btn,onClick:()=>x(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:M.modal_btn,onClick:()=>y(),children:"Уволить"}),e.jsx("button",{className:M.modal_btn,onClick:()=>f(),children:"Сохранить"})]})})]})]})})},Ql=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],e_=()=>{const{usersList:n}=de();return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(Je,{headers:Ql}),e.jsx(Qe,{arr:n})]}),e.jsx(et,{})]})},t_=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],s_=()=>{const{usersList:n}=de(),t=n.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(Je,{headers:t_}),e.jsx(Qe,{arr:t})]}),e.jsx(et,{})]})},n_=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],o_=()=>{const{usersList:n}=de(),t=n.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("table",{className:M.user_table,children:[e.jsx(Je,{headers:n_}),e.jsx(Qe,{arr:t,showStore:!0})]}),e.jsx(et,{})]})},r_=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],a_=()=>{const t=se().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:M.users,children:e.jsxs("div",{className:M.users_header,children:[e.jsx("h2",{className:M.user_title,children:"Пользователи"}),e.jsx("ul",{className:M.user_list,children:r_.map(s=>e.jsx("li",{children:e.jsx(Z,{className:`${M.user_list_link} ${t==s.href?M.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(e_,{}),t=="/admin/users/clients"&&e.jsx(s_,{}),t=="/admin/users/employees"&&e.jsx(o_,{})]})]})},it=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function i_(){const[n,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[o,l]=m.useState([]);m.useEffect(()=>{d()},[n]);async function d(){const i=xe.get("multi-store");try{const c=await oe.get(`nomenclatures?multiStoreId=${i}&page=${s}&perPage=${r}`),a=await c.data.data;console.log("res",c),l([...a])}catch(c){console.log("Ошибка произошла при получении всх продуктов со склада",c)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:n}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:it.map(i=>e.jsx("th",{className:_.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:o&&(o==null?void 0:o.map(i=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:it.map(c=>{var a,p;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[c.title=="Наименование"?e.jsx("span",{children:((a=i==null?void 0:i.name)==null?void 0:a.ru)&&((p=i==null?void 0:i.name)==null?void 0:p.ru)}):"",c.title=="Штрих-код"?e.jsx("span",{children:i==null?void 0:i.barcode}):""]},c.id)})},i==null?void 0:i.id)))})]})]})})}const ct=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function c_(){const[n,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[o,l]=m.useState([]);m.useEffect(()=>{d()},[n]);async function d(){const i=xe.get("multi-store");try{const c=await oe.get(`web-nomenclatures?multiStoreId=${i}&page=${s}&perPage=${r}`),a=await c.data.data;console.log("res",c),l([...a])}catch(c){console.log("Ошибка произошла при получении всх продуктов со склада",c)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:n}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:ct.map(i=>e.jsx("th",{className:_.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:o==null?void 0:o.map(i=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:ct.map(c=>e.jsx("td",{className:_.addingWrapper_tbody_td,children:c.title=="Наименование"?e.jsx("span",{children:i==null?void 0:i.title}):""},c.id))},i==null?void 0:i.id))})]})]})})}function l_(){const t=se().pathname,{shopsStocks:s}=Te();return e.jsxs("div",{className:_.layout,children:[e.jsx("ul",{className:_.layout_buttons,children:s.map(r=>e.jsx("li",{children:e.jsx(Z,{to:`/admin/shops/shop/${r.url}`,className:`${_.layout_btn} ${t==`/admin/shops/shop/${r.url}`?_.layout_btn_active:""}`,children:r.title})},r.id))}),e.jsxs("div",{className:_.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(i_,{}),t==="/admin/shops/shop/website"&&e.jsx(c_,{})]})]})}function __(){const{shopsAmount:n,currentShop:t,setCurrentShop:s}=Te(),o=se().pathname;return e.jsxs("div",{className:_.layout,children:[e.jsx("h2",{className:_.layout_title,children:"Магазины"}),e.jsx("ul",{className:_.layout_buttons,children:n.map(l=>e.jsx("li",{children:e.jsx(Z,{to:"/admin/shops/shop",className:`${_.layout_btn} ${t==l.url?_.layout_btn_active:""}`,onClick:()=>s(l.url),children:l.title})},l.id))}),o.startsWith("/admin/shops/shop")&&e.jsx("div",{className:_.layout_content,children:e.jsx(l_,{})})]})}function d_({item:n}){const{setErrorModal:t}=ue(),s=r=>{r.stopPropagation()};return e.jsx("div",{className:_.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:_.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:_.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(T,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:n.message})]})})}function p_({localNewImage:n,setLocalNewImage:t}){const[s,r]=m.useState(null);function o(p,u){return p.order>u.order?1:-1}function l(p,u){r(u)}function d(p){p.target.style.background="white"}function i(p){p.preventDefault(),p.target.style.background="lightgray"}function c(p,u){p.preventDefault(),p.target.style.background="white";const h=n&&n.map(b=>b.id===u.id?{...b,order:(s==null?void 0:s.order)||b.order}:b.id===(s==null?void 0:s.id)?{...b,order:u.order}:b).sort((b,v)=>b.order-v.order);console.log(555,"newImages",h),h&&t(h),r(null)}const a=p=>{const u=n.filter(h=>h.id!==p);t([...u])};return m.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:n&&n.sort(o).map((p,u)=>e.jsxs("div",{className:`${_.productItem_photo} ${u==0?_.productItem_photo_active:""}`,draggable:!0,onDragStart:h=>l(h,p),onDragLeave:h=>d(h),onDragEnd:h=>d(h),onDragOver:h=>i(h),onDrop:h=>c(h,p),children:[e.jsx("div",{className:_.productItem_photo_img,children:e.jsx("img",{src:p.src?`https://api.mcrm.uz/${p.src}`:p.localSrc?p.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:_.productItem_photo_close,onClick:()=>a(p.id),children:e.jsx(T,{width:18,height:18,name:"XMarkIcon"})})]},p.id))})}function jt({stockName:n,myMxikCode:t,localNewImage:s,setLocalNewImage:r,setLocalFormData:o,localFormData:l}){const{errorModal:d}=ue(),i=m.useRef(null),c=()=>{i.current!=null&&i.current.click()},a=async p=>{var h,b;const u=(b=(h=p==null?void 0:p.target)==null?void 0:h.files)==null?void 0:b[0];if(u&&["image/jpeg","image/png","image/webp"].includes(u.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",u);const v=new FormData;v.append("files[]",u),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",v),u&&o([...l,u]);const I=s&&(s==null?void 0:s.length)>0?s.reduce((F,j)=>j.order>F?j.order:F,-1/0):1,$=new FileReader;$.onload=F=>{var j;if((j=F.target)!=null&&j.result){const w={id:ee(),order:I?I+1:1,localSrc:URL.createObjectURL(u)},f=[...s,w];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",f),r&&r([...f]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},$.readAsDataURL(u),console.log(6,"отрисовал выбранную картинку files",u),i.current&&(i.current.value="")}};return e.jsxs("div",{className:_.productItem_top,children:[d.status&&e.jsx(d_,{item:d}),e.jsx("h1",{className:_.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:_.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:_.productItem_photos,children:[e.jsx(p_,{stockName:n,myMxikCode:t,localNewImage:s,setLocalNewImage:r}),e.jsxs("div",{className:`${_.productItem_photo} ${_.productItem_add}`,onClick:c,children:[e.jsx(T,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:_.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:a,ref:i})]})]}),e.jsx("p",{className:_.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function wt({localCategory:n,productName:t,productDescription:s,setProductDescription:r,setProductName:o,myBarcode:l,vendorCode:d,setVendorCode:i,myPrice:c}){var $,F,j,w;const{pickedCategory:a,currentProduct:p,setArticleModal:u,setOpenModalCategory:h}=ue();m.useEffect(()=>{(a||n)&&I()},[a,n]);const[b,v]=m.useState(""),I=async()=>{try{const y=(await oe.get(`categories/${a.id?a.id:n}`)).data;v(y.name.ru)}catch(f){console.log("Ошибка произошла при получении категонии по id",f)}};return e.jsxs("div",{className:_.productItem_left,children:[e.jsxs("div",{className:_.productItem_left_info,children:[e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:_.productItem_left_item_top_input,value:d||"",onChange:f=>i(Number(f.target.value))})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,onClick:()=>u(!0),children:"Изменить"})})]}),e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:b||((F=($=p==null?void 0:p.category)==null?void 0:$.name)!=null&&F.ru?(w=(j=p==null?void 0:p.category)==null?void 0:j.name)==null?void 0:w.ru:"")})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,onClick:()=>h(!0),children:a!=null&&a.name||p!=null&&p.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:l})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:c})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:_.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:_.productItem_left_form,children:[e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:_.productItem_left_form_input,type:"text",value:t||"",onChange:f=>o(f.target.value)})]}),e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:f=>r(f.target.value),value:s||"",className:_.productItem_left_form_textarea}),e.jsx("p",{className:_.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function u_({color:n="black",title:t="",extraOptionsList:s,className:r,openBlock:o,setOpenBlock:l,setExtraOptionsList:d}){const i=m.useRef([]);m.useEffect(()=>{i.current.length>0&&c()},[s]);const c=()=>{s&&s.forEach(p=>{i.current.forEach(u=>{u.name==p.title&&(u.checked=p.isActive)})})},a=(p,u)=>{const h=JSON.parse(JSON.stringify(s));h.forEach(b=>{b.title==u&&(b.isActive=!b.isActive)}),d&&d(h)};return e.jsxs("div",{className:r??z.versionExtraOptions,children:[t&&e.jsx("span",{className:z.versionExtraOptions_title,children:t}),e.jsxs("div",{className:z.versionExtraOptions_block,children:[e.jsxs("div",{className:z.versionExtraOptions_block_top,onClick:()=>l&&l(!o),children:[e.jsx("h2",{className:z.versionExtraOptions_block_top_title,style:{color:n},children:t||"Выберите параметры"}),e.jsx("button",{className:z.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${z.versionExtraOptions_block_top_arrow} ${o?z.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.versionExtraOptions_block_dropdown} ${o?z.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((p,u)=>e.jsxs("label",{className:z.versionExtraOptions_block_dropdown_item,children:[p.title,e.jsx("input",{ref:h=>{h&&(i.current[u]=h)},type:"checkbox",name:p.title,"data-type":p.title,onChange:h=>a(h,p.title)})]},p.id))})]})]})}function m_({color:n="black",title:t="",versionList:s,className:r}){const[o,l]=m.useState(!1),[d,i]=m.useState("");m.useEffect(()=>{s==null||s.forEach(p=>{p.isActive&&i(p.title)})},[]);const c=()=>{l(!o)},a=p=>{s==null||s.forEach(u=>u.isActive=!1),s==null||s.forEach(u=>{u.title==p.title&&(u.isActive=!0,i(u.title))}),c()};return e.jsxs("div",{className:r??z.version3,children:[e.jsx("span",{className:z.version3_title,children:t}),e.jsxs("div",{className:z.version3_block,children:[e.jsxs("div",{className:z.version3_block_top,onClick:()=>c(),children:[e.jsx("h2",{className:z.version3_block_top_title,style:{color:n},children:d||"Выбрать"}),e.jsx("button",{className:z.version3_block_top_btn,children:e.jsx("div",{className:`${z.version3_block_top_arrow} ${o?z.version3_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.version3_block_dropdown} ${o?z.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(p=>e.jsx("span",{className:z.version3_block_dropdown_item,onClick:()=>a(p),children:s.length>1?p.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},p.id))})]})]})}function h_({extraOptionsStatus:n,localCategory:t,setExtraOptionsStatus:s,extraOptions:r}){const[o,l]=m.useState(!1);return m.useEffect(()=>{},[t]),e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>s(!n),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Доп. параметры"}),e.jsx(Ce,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:n})]}),e.jsxs("div",{className:`${_.productItem_right_bottom_items} ${n?_.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:_.productItem_right_bottom_item,children:e.jsx(u_,{color:"",extraOptionsList:r,openBlock:o,setOpenBlock:l})}),r.map(d=>{if(d.isActive)return e.jsxs("div",{className:_.productItem_right_bottom_item,children:[e.jsx(m_,{color:"",title:d.title,versionList:d.type}),e.jsx("button",{className:_.productItem_right_bottom_del,children:"Удалить"})]},d.id)})]})]})}function lt({color:n="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:r,openBlock:o,currentVersion:l,setOpenBlock:d,setCurrentVersion:i,setVersionList:c}){const a=p=>{i&&i(p.title);const u=s.map(v=>({id:v.id,title:v.title,isActive:!1})),h=u.find(v=>v.id==p.id),b=u.findIndex(v=>v.id==p.id);h&&(h.isActive=!0,u.splice(b,1,h),c&&c(u))};return e.jsxs("div",{className:r??z.version3,children:[e.jsx("span",{className:z.version3_title,children:t}),e.jsxs("div",{className:z.version3_block,children:[e.jsxs("div",{className:z.version3_block_top,children:[e.jsx("h2",{className:z.version3_block_top_title,style:{color:n},children:l}),e.jsx("button",{className:z.version3_block_top_btn,onClick:()=>d&&d(!o),children:e.jsx("div",{className:`${z.version3_block_top_arrow} ${o?z.version3_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.version3_block_dropdown} ${o?z.version3_block_dropdown_open:""}`,children:s.map(p=>e.jsx("span",{className:z.version3_block_dropdown_item,onClick:()=>a(p),children:p.title},p.id))})]})]})}function b_({brieflyProductStatus:n,setBrieflyProductStatus:t}){return e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>t(!n),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коротко о товаре"}),e.jsx(Ce,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:n})]}),e.jsx("div",{className:`${_.productItem_right_bottom_items} ${n?_.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${_.productItem_right_bottom_item} ${_.productItem_right_bottom_row}`,children:[e.jsx(lt,{color:"",title:"Объем, л"}),e.jsx(lt,{color:"",title:"Кол-во в упаковке"})]})})]})}function Ct({currentProduct:n,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:r,setBrieflyProductStatus:o,localCategory:l,extraOptions:d,setExtraOptions:i}){return e.jsxs("div",{className:_.productItem_right,children:[e.jsx("div",{className:_.productItem_right_item,children:e.jsxs("div",{className:_.productItem_right_top,children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коментарии"}),e.jsx(Ce,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(h_,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:l,extraOptions:d,setExtraOptions:i,currentProduct:n}),e.jsx(b_,{brieflyProductStatus:r,setBrieflyProductStatus:o})]})}function Nt({stockName:n,setAdminSettings:t}){return e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx(Z,{to:n=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>t(),children:n=="website"?"Сохранить":"Добавить"})]})}function v_(){const{setArticleModal:n}=ue();return e.jsxs("div",{className:_.articleModal_block_nav,children:[e.jsx("h2",{className:_.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(T,{name:"XMarkIcon"})})]})}function g_({productName:n}){const[t]=m.useState(""),[s]=m.useState("");return e.jsxs("div",{className:_.articleModal_block_info,children:[e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:n})]}),e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[s,"1%"]})]})]})}function St({item:n}){return e.jsxs("div",{className:_.articleModal_block_recommended_item,children:[e.jsx("h3",{className:_.articleModal_block_recommended_item_title,children:n.title}),e.jsxs("div",{className:_.articleModal_block_recommended_content,children:[e.jsx("div",{className:_.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:_.articleModal_block_recommended_info,children:[e.jsxs("div",{className:_.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:_.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:_.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:_.articleModal_block_recommended_article,children:n.article})]})]})}const x_=[{id:ee(),title:"Молоко Nestle",article:"#DF262515"}];function f_(){return e.jsxs("div",{className:_.articleModal_block_recommended,children:[e.jsx("h2",{className:_.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:_.articleModal_block_recommended_list,children:x_.map(n=>e.jsx(St,{item:n},n.id))})]})}function k_(){return e.jsx("div",{className:_.articleModal_block_search,children:e.jsxs("div",{className:_.articleModal_block_search_box,children:[e.jsxs("div",{className:_.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(T,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:_.articleModal_block_search_btn,children:"Найти"})]})})}const y_=[{id:ee(),title:"Молоко Nestle",article:"#DF262515"},{id:ee(),title:"Молоко Nestle",article:"#DF262515"},{id:ee(),title:"Молоко Nestle",article:"#DF262515"}];function j_(){return e.jsx("div",{className:_.articleModal_block_found,children:y_.map(n=>e.jsx(St,{item:n},n.id))})}function It({productName:n}){return e.jsx("div",{className:_.articleModal,children:e.jsxs("div",{className:_.articleModal_block,children:[e.jsx(v_,{}),e.jsx(g_,{productName:n}),e.jsx(f_,{}),e.jsx(k_,{}),e.jsx(j_,{}),e.jsx("div",{className:_.articleModal_block_buttonBox,children:e.jsx("button",{className:_.articleModal_block_button,children:"Выбрать"})})]})})}function w_(){const n=Se(),t=se(),{id:s}=_t(),{openModalCategory:r}=ue(),{pickedCategory:o,currentProduct:l,setErrorModal:d,setCurrentProduct:i,setPickedCategory:c,articleModal:a}=ue(),[p,u]=m.useState(""),[h,b]=m.useState(0),[v,I]=m.useState(0),[$,F]=m.useState(Number(s)),[j,w]=m.useState(!1),[f,y]=m.useState([]),[x,g]=m.useState(!1),[O,C]=m.useState(0),[D,W]=m.useState(""),[E,q]=m.useState([]),[k,U]=m.useState([]);async function V(){try{return await(await oe.get(`nomenclatures/${s}`)).data}catch(S){console.log("Ошибка произошла при получении продукта со склада по id",S)}}m.useEffect(()=>{c({})},[t.pathname]),m.useEffect(()=>{L()},[s,o]);async function L(){var N;const S=await V();S&&(u((N=S==null?void 0:S.name)==null?void 0:N.ru),i({...S}),F(S==null?void 0:S.categoryId),b(S==null?void 0:S.barcode),I(S==null?void 0:S.price))}const ve=async()=>{if(l){o.id&&(await ge(),F(o.id));const S=await fe(k),N=O||await we(),K={nomenclatureId:l.id,title:p,article:N,images:[...S],description:D,document:"string"};await me(K),c({}),y([]),n("/admin/product/adding/stock",{replace:!0})}else d({status:!0,message:'"Выберите категорию"'})};async function me(S){try{await oe.post("web-nomenclatures",S)}catch(N){console.log("Ошибка произошла при добавлении web nomenclatures",N)}}async function ge(){try{await oe.patch(`nomenclatures/${s}`,{categoryId:o.id}),F(o.id)}catch(S){console.log("Ошибка произошла при изменении котегории на складе",S)}}const fe=async S=>{if(S){const N=new FormData;S.forEach((K,Y)=>{N.append(`files[${Y}]`,K)});try{return await(await oe.post("media-objects/uploads",N)).data}catch(K){console.error("Ошибка при добавлении картинок на сервер",K)}}},we=async()=>{const S=xe.get("multi-store");try{const N=await oe.get(`web-credentials/${S}`);return console.log("fetchArticle res",N),N.data.article}catch(N){console.log("Ошибка при получении артикля",N)}};return e.jsxs("div",{className:_.productItem,children:[r&&e.jsx(dt,{}),e.jsx(jt,{stockName:"stock",myMxikCode:s,localFormData:k,setLocalFormData:U,localNewImage:E,setLocalNewImage:q}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(wt,{myPrice:v,setMyPrice:I,myBarcode:h,setMyBarcode:b,localCategory:$,productName:p,productDescription:D,setProductDescription:W,setProductName:u,vendorCode:O,setVendorCode:C}),e.jsx(Ct,{extraOptionsStatus:j,setExtraOptionsStatus:w,brieflyProductStatus:x,setBrieflyProductStatus:g,localCategory:$,extraOptions:f,setExtraOptions:y,currentProduct:l})]}),e.jsx(Nt,{stockName:"stock",setAdminSettings:ve}),a&&e.jsx(It,{productName:p})]})}function C_(){const n=Se(),t=se(),{id:s}=_t(),{openModalCategory:r}=ue(),{pickedCategory:o,webCurrentProduct:l,setWebCurrentProduct:d,setErrorModal:i,setPickedCategory:c,articleModal:a}=ue(),[p,u]=m.useState(""),[h,b]=m.useState(0),[v,I]=m.useState(0),[$,F]=m.useState(0),[j,w]=m.useState(Number(s)),[f,y]=m.useState(!1),[x,g]=m.useState([]),[O,C]=m.useState(!1),[D,W]=m.useState(0),[E,q]=m.useState(""),[k,U]=m.useState([]),[V,L]=m.useState([]);async function ve(){try{return await(await oe.get(`web-nomenclatures/${s}`)).data}catch(N){console.log("Ошибка произошла при получении продукта с сайта по id",N)}}m.useEffect(()=>{c({})},[t.pathname]),m.useEffect(()=>{me()},[s]);async function me(){var K,Y,re,De,$e,ke,ne;const N=await ve();if(N){I((K=N==null?void 0:N.nomenclature)==null?void 0:K.price),b((Y=N==null?void 0:N.nomenclature)==null?void 0:Y.barcode),F((re=N==null?void 0:N.nomenclature)==null?void 0:re.id),W(N==null?void 0:N.article),u(N!=null&&N.title?N==null?void 0:N.title:($e=(De=N==null?void 0:N.nomenclature)==null?void 0:De.name)==null?void 0:$e.ru),d({...N}),w((ne=(ke=N==null?void 0:N.nomenclature)==null?void 0:ke.category)==null?void 0:ne.id);let X=1;const le=N.images?N.images.map(he=>({id:ee(),order:X++,src:he})):[];U(le),X=1,q(N.description?N.description:"")}}const ge=async()=>{if(l||o.label){o.id&&await we();const N=await S(V);console.log(15,"получил ответ от функции fetchPhotos() images",N),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const K=k.filter(re=>re.src).map(re=>{if(re.src)return re.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",K);const Y={nomenclatureId:l.id,title:p,article:D,images:[...K,...N],description:E,document:"string"};console.log(18,"создал новый объект продукта newProduct",Y),console.log(18,"localNewImage",k),fe(Y),c({}),g([]),n("/admin/product/adding/website",{replace:!0})}else i({status:!0,message:'"Выберите категорию"'})};async function fe(N){try{await oe.patch(`web-nomenclatures/${s}`,N)}catch(K){console.log("Ошибка произошла при добавлении web nomenclatures",K)}}async function we(){try{await oe.patch(`nomenclatures/${$}`,{categoryId:o.id}),w(o.id)}catch(N){console.log("Ошибка произошла при изменении котегории на сайте",N)}}const S=async N=>{if(N){const K=new FormData;N.forEach((Y,re)=>{K.append(`files[${re}]`,Y)});try{return await(await oe.post("media-objects/uploads",K)).data}catch(Y){console.error("Ошибка при добавлении картинок на сервер",Y)}}};return e.jsxs("div",{className:_.productItem,children:[r&&e.jsx(dt,{}),e.jsx(jt,{stockName:"website",myMxikCode:s,localNewImage:k,setLocalNewImage:U,localFormData:V,setLocalFormData:L}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(wt,{myPrice:v,setMyPrice:I,myBarcode:h,setMyBarcode:b,localCategory:j,productName:p,productDescription:E,setProductDescription:q,setProductName:u,vendorCode:D,setVendorCode:W}),e.jsx(Ct,{extraOptionsStatus:f,setExtraOptionsStatus:y,brieflyProductStatus:O,setBrieflyProductStatus:C,localCategory:j,extraOptions:x,setExtraOptions:g,currentProduct:l})]}),e.jsx(Nt,{stockName:"website",setAdminSettings:ge}),a&&e.jsx(It,{productName:p})]})}function L_(){const{user:n}=Ft(),{setCurrentShop:t}=Te(),r=se().pathname;m.useEffect(()=>{r.startsWith("/admin/shops")||t("0")},[r]);const o=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(T,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(T,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(T,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(T,{name:"BuildingStorefrontIcon"}),isActive:!1}],[l,d]=m.useState(o),i=c=>{const a=l.map(u=>({id:u.id,label:u.label,href:u.href,icon:u.icon,isActive:!1})),p=a.find(u=>u.id==c);p&&(p.isActive=!0),d(a)};return e.jsxs(e.Fragment,{children:[e.jsx(At,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:_.wrapper,children:[e.jsx("h1",{className:_.wrapper_title,children:n==null?void 0:n.username}),e.jsxs("div",{className:_.content,children:[e.jsx("div",{className:_.content_left,children:e.jsx("ul",{className:_.tools,children:l.map(c=>e.jsx("li",{children:e.jsxs(Z,{to:c.href,className:`${_.tools_link} ${r.startsWith(c.href)?_.tools_link_active:""}`,onClick:()=>i(c.id),children:[c.icon,c.label]})},c.id))})}),r.startsWith("/admin")&&e.jsxs("div",{className:_.content_right,children:[r.startsWith("/admin/settings")&&e.jsx(cl,{}),r.startsWith("/admin/users")&&e.jsx(a_,{}),r.startsWith("/admin/shops")&&e.jsx(__,{}),r.startsWith("/admin/product")&&e.jsx(ml,{}),r.startsWith("/admin/stock-product")&&e.jsx(w_,{}),r.startsWith("/admin/website-product")&&e.jsx(C_,{})]})]})]})})]})}export{L_ as default};
