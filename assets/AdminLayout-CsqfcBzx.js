import{j as e,v as pe,r as m,w as Re,L as Z,x as se,y as ae,e as ee,q as ke,o as oe,z as wt,A as Ct,B as Nt,u as Ue,C as it}from"./index-FOhuYs8g.js";import{u as It}from"./userStore-HQ7Q9WEv.js";import{C as M}from"./CustomIcon-CmXS3TTJ.js";import{s as Ne}from"./shop1Store-CyRYKPsz.js";import{a as Be,c as qe,H as St}from"./Header-SAnTHHXD.js";import{a as he,s as H,M as ct}from"./Modal-CcIoSZq_.js";import{b as ie}from"./bannerStore-D5lDtJWc.js";import"./XMarkIcon-DF-GIsgt.js";const Dt="_wrapper_xl0j6_1",$t="_wrapper_title_xl0j6_4",Ot="_content_xl0j6_10",Pt="_content_left_xl0j6_16",At="_content_right_xl0j6_19",Wt="_tools_xl0j6_45",Et="_tools_link_xl0j6_50",Ut="_tools_link_active_xl0j6_63",Bt="_settings_xl0j6_86",Ft="_settings_title_xl0j6_89",Lt="_settings_content_xl0j6_94",Mt="_settings_content_top_xl0j6_97",zt="_settings_content_buttons_xl0j6_100",Tt="_settings_content_btn_xl0j6_110",Rt="_settings_content_btn_cancel_xl0j6_122",qt="_settings_content_btn_save_xl0j6_125",Vt="_settings_tools_xl0j6_128",Ht="_settings_tools_link_xl0j6_133",Xt="_settings_tools_link_active_xl0j6_148",Kt="_wrapperModules_xl0j6_153",Zt="_item_xl0j6_160",Gt="_item_top_xl0j6_165",Jt="_item_top_title_xl0j6_176",Yt="_item_top_arrow_xl0j6_180",Qt="_item_top_arrow_active_xl0j6_188",es="_item_block_xl0j6_191",ts="_item_block_item_xl0j6_202",ss="_item_block_open_xl0j6_205",os="_item_onOff_xl0j6_211",ns="_item_delivery_xl0j6_211",rs="_versions_block_xl0j6_217",as="_versions_block_top_xl0j6_222",is="_versions_block_top_title_xl0j6_232",cs="_versions_block_top_arrow_xl0j6_237",ls="_versions_block_top_arrow_active_xl0j6_246",_s="_versions_block_dropdown_xl0j6_249",ds="_versions_block_dropdown_item_xl0j6_260",ps="_versions_block_dropdown_open_xl0j6_271",us="_versions_block_onOff_xl0j6_277",ms="_versions_block_delivery_xl0j6_277",hs="_categoriesDropDown_title_xl0j6_283",bs="_categoriesDropDown_item_xl0j6_286",gs="_categoriesDropDown_item_top_xl0j6_292",vs="_categoriesDropDown_item_top_title_xl0j6_303",xs="_categoriesDropDown_item_top_arrow_xl0j6_307",fs="_categoriesDropDown_item_top_arrow_active_xl0j6_314",js="_categoriesDropDown_item_block_xl0j6_317",ks="_categoriesDropDown_item_block_line_xl0j6_326",ys="_categoriesDropDown_item_block_active_xl0j6_338",ws="_categoriesDropDown_item_block_open_xl0j6_341",Cs="_categoriesDropDown_item_onOff_xl0j6_346",Ns="_categoriesDropDown_item_delivery_xl0j6_346",Is="_products_buttons_xl0j6_352",Ss="_products_btn_xl0j6_358",Ds="_products_btn_active_xl0j6_369",$s="_productItem_title_xl0j6_374",Os="_productItem_basePhoto_xl0j6_379",Ps="_productItem_photos_xl0j6_385",As="_productItem_photos_desc_xl0j6_391",Ws="_productItem_photo_xl0j6_385",Es="_productItem_photo_img_xl0j6_406",Us="_productItem_photo_close_xl0j6_417",Bs="_productItem_photo_active_xl0j6_429",Fs="_productItem_add_xl0j6_433",Ls="_productItem_add_text_xl0j6_441",Ms="_productItem_settings_xl0j6_446",zs="_productItem_left_info_xl0j6_450",Ts="_productItem_left_item_xl0j6_458",Rs="_productItem_left_item_top_xl0j6_462",qs="_productItem_left_item_top_input_xl0j6_483",Vs="_productItem_left_item_bottom_xl0j6_489",Hs="_productItem_left_form_xl0j6_502",Xs="_productItem_left_form_label_xl0j6_509",Ks="_productItem_left_form_title_xl0j6_513",Zs="_productItem_left_form_input_xl0j6_519",Gs="_productItem_left_form_textarea_xl0j6_527",Js="_productItem_left_form_size_xl0j6_535",Ys="_productItem_right_xl0j6_543",Qs="_productItem_right_item_xl0j6_550",eo="_productItem_right_top_xl0j6_555",to="_productItem_right_title_xl0j6_562",so="_productItem_right_bottom_items_xl0j6_568",oo="_productItem_right_bottom_items_active_xl0j6_577",no="_productItem_right_bottom_item_xl0j6_568",ro="_productItem_right_bottom_row_xl0j6_603",ao="_productItem_right_bottom_del_xl0j6_608",io="_banner_nav_list_xl0j6_619",co="_banner_nav_link_xl0j6_625",lo="_banner_nav_link_active_xl0j6_640",_o="_addingWrapper_title_xl0j6_645",po="_addingWrapper_form_xl0j6_650",uo="_addingWrapper_form_btn_xl0j6_655",mo="_addingWrapper_search_xl0j6_672",ho="_addingWrapper_search_input_xl0j6_678",bo="_addingWrapper_search_icon_xl0j6_686",go="_addingWrapper_table_xl0j6_689",vo="_addingWrapper_table_error_xl0j6_692",xo="_addingWrapper_thead_tr_xl0j6_696",fo="_addingWrapper_thead_th_xl0j6_700",jo="_addingWrapper_tbody_tr_xl0j6_708",ko="_addingWrapper_tbody_td_xl0j6_711",yo="_addingWrapper_tbody_buttons_xl0j6_725",wo="_addingWrapper_tbody_add_xl0j6_730",Co="_addingWrapper_tbody_del_xl0j6_737",No="_errorWrapper_xl0j6_745",Io="_errorWrapper_block_xl0j6_754",So="_errorWrapper_block_close_xl0j6_764",Do="_layout_title_xl0j6_775",$o="_layout_buttons_xl0j6_780",Oo="_layout_btn_xl0j6_786",Po="_layout_btn_active_xl0j6_800",Ao="_editBlock_xl0j6_805",Wo="_articleModal_xl0j6_817",Eo="_articleModal_block_xl0j6_826",Uo="_articleModal_block_nav_xl0j6_833",Bo="_articleModal_block_title_xl0j6_840",Fo="_articleModal_block_info_xl0j6_845",Lo="_articleModal_block_info_item_xl0j6_848",Mo="_articleModal_block_button_xl0j6_858",_={wrapper:Dt,wrapper_title:$t,content:Ot,content_left:Pt,content_right:At,tools:Wt,tools_link:Et,tools_link_active:Ut,settings:Bt,settings_title:Ft,settings_content:Lt,settings_content_top:Mt,settings_content_buttons:zt,settings_content_btn:Tt,settings_content_btn_cancel:Rt,settings_content_btn_save:qt,settings_tools:Vt,settings_tools_link:Ht,settings_tools_link_active:Xt,wrapperModules:Kt,item:Zt,item_top:Gt,item_top_title:Jt,item_top_arrow:Yt,item_top_arrow_active:Qt,item_block:es,item_block_item:ts,item_block_open:ss,item_onOff:os,item_delivery:ns,versions_block:rs,versions_block_top:as,versions_block_top_title:is,versions_block_top_arrow:cs,versions_block_top_arrow_active:ls,versions_block_dropdown:_s,versions_block_dropdown_item:ds,versions_block_dropdown_open:ps,versions_block_onOff:us,versions_block_delivery:ms,categoriesDropDown_title:hs,categoriesDropDown_item:bs,categoriesDropDown_item_top:gs,categoriesDropDown_item_top_title:vs,categoriesDropDown_item_top_arrow:xs,categoriesDropDown_item_top_arrow_active:fs,categoriesDropDown_item_block:js,categoriesDropDown_item_block_line:ks,categoriesDropDown_item_block_active:ys,categoriesDropDown_item_block_open:ws,categoriesDropDown_item_onOff:Cs,categoriesDropDown_item_delivery:Ns,products_buttons:Is,products_btn:Ss,products_btn_active:Ds,productItem_title:$s,productItem_basePhoto:Os,productItem_photos:Ps,productItem_photos_desc:As,productItem_photo:Ws,productItem_photo_img:Es,productItem_photo_close:Us,productItem_photo_active:Bs,productItem_add:Fs,productItem_add_text:Ls,productItem_settings:Ms,productItem_left_info:zs,productItem_left_item:Ts,productItem_left_item_top:Rs,productItem_left_item_top_input:qs,productItem_left_item_bottom:Vs,productItem_left_form:Hs,productItem_left_form_label:Xs,productItem_left_form_title:Ks,productItem_left_form_input:Zs,productItem_left_form_textarea:Gs,productItem_left_form_size:Js,productItem_right:Ys,productItem_right_item:Qs,productItem_right_top:eo,productItem_right_title:to,productItem_right_bottom_items:so,productItem_right_bottom_items_active:oo,productItem_right_bottom_item:no,productItem_right_bottom_row:ro,productItem_right_bottom_del:ao,banner_nav_list:io,banner_nav_link:co,banner_nav_link_active:lo,addingWrapper_title:_o,addingWrapper_form:po,addingWrapper_form_btn:uo,addingWrapper_search:mo,addingWrapper_search_input:ho,addingWrapper_search_icon:bo,addingWrapper_table:go,addingWrapper_table_error:vo,addingWrapper_thead_tr:xo,addingWrapper_thead_th:fo,addingWrapper_tbody_tr:jo,addingWrapper_tbody_td:ko,addingWrapper_tbody_buttons:yo,addingWrapper_tbody_add:wo,addingWrapper_tbody_del:Co,errorWrapper:No,errorWrapper_block:Io,errorWrapper_block_close:So,layout_title:Do,layout_buttons:$o,layout_btn:Oo,layout_btn_active:Po,editBlock:Ao,articleModal:Wo,articleModal_block:Eo,articleModal_block_nav:Uo,articleModal_block_title:Bo,articleModal_block_info:Fo,articleModal_block_info_item:Lo,articleModal_block_button:Mo};function je({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:o=500,scale:a=1.1,status:p=!1}){const c={width:`${n}px`,height:`${n/2-n/20}px`,background:p?s:r,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},l={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${p?s:r}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${a}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:c,children:e.jsx("div",{style:l})})}const zo="_versions_1cgvq_1",To="_versions_block_1cgvq_6",Ro="_versions_block_top_1cgvq_11",qo="_versions_block_top_title_1cgvq_21",Vo="_versions_block_top_arrow_1cgvq_25",Ho="_versions_block_top_arrow_active_1cgvq_34",Xo="_versions_block_dropdown_1cgvq_37",Ko="_versions_block_dropdown_item_1cgvq_49",Zo="_versions_block_dropdown_open_1cgvq_60",Go="_versions_block_onOff_1cgvq_66",Jo="_versions_block_delivery_1cgvq_66",Yo="_versions2_1cgvq_72",Qo="_versions2_block_1cgvq_77",en="_versions2_block_top_1cgvq_82",tn="_versions2_block_top_title_1cgvq_92",sn="_versions2_block_top_arrow_1cgvq_96",on="_versions2_block_top_arrow_active_1cgvq_105",nn="_versions2_block_dropdown_1cgvq_108",rn="_versions2_block_dropdown_item_1cgvq_119",an="_versions2_block_dropdown_open_1cgvq_130",cn="_versions2_block_onOff_1cgvq_136",ln="_versions2_block_delivery_1cgvq_136",_n="_version3_1cgvq_142",dn="_version3_title_1cgvq_147",pn="_version3_block_1cgvq_153",un="_version3_block_top_1cgvq_158",mn="_version3_block_top_title_1cgvq_169",hn="_version3_block_top_arrow_1cgvq_173",bn="_version3_block_top_arrow_active_1cgvq_183",gn="_version3_block_dropdown_1cgvq_186",vn="_version3_block_dropdown_item_1cgvq_197",xn="_version3_block_dropdown_open_1cgvq_213",fn="_version3_block_onOff_1cgvq_237",jn="_version3_block_delivery_1cgvq_237",kn="_versionExtraOptions_1cgvq_243",yn="_versionExtraOptions_title_1cgvq_248",wn="_versionExtraOptions_block_1cgvq_254",Cn="_versionExtraOptions_block_top_1cgvq_259",Nn="_versionExtraOptions_block_top_title_1cgvq_270",In="_versionExtraOptions_block_top_arrow_1cgvq_275",Sn="_versionExtraOptions_block_top_arrow_active_1cgvq_285",Dn="_versionExtraOptions_block_dropdown_1cgvq_288",$n="_versionExtraOptions_block_dropdown_item_1cgvq_299",On="_versionExtraOptions_block_dropdown_open_1cgvq_316",Pn="_versionExtraOptions_block_onOff_1cgvq_340",An="_versionExtraOptions_block_delivery_1cgvq_340",F={versions:zo,versions_block:To,versions_block_top:Ro,versions_block_top_title:qo,versions_block_top_arrow:Vo,versions_block_top_arrow_active:Ho,versions_block_dropdown:Xo,versions_block_dropdown_item:Ko,versions_block_dropdown_open:Zo,versions_block_onOff:Go,versions_block_delivery:Jo,versions2:Yo,versions2_block:Qo,versions2_block_top:en,versions2_block_top_title:tn,versions2_block_top_arrow:sn,versions2_block_top_arrow_active:on,versions2_block_dropdown:nn,versions2_block_dropdown_item:rn,versions2_block_dropdown_open:an,versions2_block_onOff:cn,versions2_block_delivery:ln,version3:_n,version3_title:dn,version3_block:pn,version3_block_top:un,version3_block_top_title:mn,version3_block_top_arrow:hn,version3_block_top_arrow_active:bn,version3_block_dropdown:gn,version3_block_dropdown_item:vn,version3_block_dropdown_open:xn,version3_block_onOff:fn,version3_block_delivery:jn,versionExtraOptions:kn,versionExtraOptions_title:yn,versionExtraOptions_block:wn,versionExtraOptions_block_top:Cn,versionExtraOptions_block_top_title:Nn,versionExtraOptions_block_top_arrow:In,versionExtraOptions_block_top_arrow_active:Sn,versionExtraOptions_block_dropdown:Dn,versionExtraOptions_block_dropdown_item:$n,versionExtraOptions_block_dropdown_open:On,versionExtraOptions_block_onOff:Pn,versionExtraOptions_block_delivery:An};function Ye({color:n="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:r,openBlock:o,currentVersion:a,setOpenBlock:p,setCurrentVersion:c,setVersionList:l}){const i=d=>{c(d.title);const u=s.map(v=>({id:v.id,title:v.title,isActive:!1})),h=u.find(v=>v.id==d.id),b=u.findIndex(v=>v.id==d.id);h&&(h.isActive=!0,u.splice(b,1,h),l(u))};return e.jsxs("div",{className:r??F.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:F.versions_block,children:[e.jsxs("div",{className:F.versions_block_top,children:[e.jsx("h2",{className:F.versions_block_top_title,style:{color:n},children:a}),e.jsx("button",{className:F.versions_block_top_btn,onClick:()=>p(!o),children:e.jsx("div",{className:`${F.versions_block_top_arrow} ${o?F.versions_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${F.versions_block_dropdown} ${o?F.versions_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:F.versions_block_dropdown_item,onClick:()=>i(d),children:d.title},d.id))})]})]})}function Wn(){const{modulesCashRegisterStatus:n,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:r,openBlockCashRegister:o,openBlockCashRegisterVersion:a,openBlockCart:p,cartVersionList:c,modulesCartStatus:l,cartCurrentVersion:i,openBlockCartVersion:d,setCartVersionList:u,setCartCurrentVersion:h,setModulesCartStatus:b,setOpenBlockCart:v,setOpenBlockCartVersion:S,setDeliveryStatus:P,setOpenBlockCashRegister:W,setCashRegisterVersionList:D,setModulesCashRegisterStatus:C,setCashRegisterCurrentVersion:y,setOpenBlockCashRegisterVersion:A}=pe(),j=()=>{v(!p)},x=()=>{W(!o)};return e.jsxs("div",{className:_.wrapperModules,children:[e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>j(),children:[e.jsx("h2",{className:_.item_top_title,children:"Корзина"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>j(),children:e.jsx("div",{className:`${_.item_top_arrow} ${p?_.item_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${p?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>b(!l),children:e.jsx(je,{status:l,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(Ye,{color:"rgb(137, 250, 135)",openBlock:d,setOpenBlock:S,title:"Выберите версию",versionList:c,currentVersion:i,setCurrentVersion:h,setVersionList:u}),e.jsxs("div",{className:_.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:_.item_shell,onClick:()=>P(!t),children:e.jsx(je,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>x(),children:[e.jsx("h2",{className:_.item_top_title,children:"Кacca"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>x(),children:e.jsx("div",{className:`${_.item_top_arrow} ${o?_.item_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${o?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>C(!n),children:e.jsx(je,{status:n,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(Ye,{color:"rgb(137, 250, 135)",openBlock:a,setOpenBlock:A,title:"Выберите версию",versionList:s,currentVersion:r,setCurrentVersion:y,setVersionList:D})]})]})]})}function En(){const{templates:n,setTemplates:t}=pe(),[s,r]=m.useState([...n]);m.useEffect(()=>{r([...n])},[n]);const o=c=>{const l=s.map(i=>i.id===c?{...i,open:!i.open}:i);r(l)},a=(c,l)=>{const i=s.map(d=>d.id===c?{...d,isActive:!0,templateThemes:d.templateThemes.map(u=>u.id===l?{...u,isActive:!0}:{...u,isActive:!1})}:{...d,isActive:!1,templateThemes:d.templateThemes.map(u=>({...u,isActive:!1}))});r(i)};function p(){t(s)}return e.jsxs("div",{className:_.wrapperModules,children:[s.map(c=>e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>o(c.id),children:[e.jsx("h2",{className:_.item_top_title,children:c.title}),e.jsx("button",{className:_.item_top_btn,onClick:()=>o(c.id),children:e.jsx("div",{className:`${_.item_top_arrow} ${c.open?_.item_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.item_block} ${c.open?_.item_block_open:""}`,children:c.templateThemes.map(l=>e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:l.title}),e.jsx("div",{className:_.item_shell,onClick:()=>a(c.id,l.id),children:e.jsx(je,{status:l.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},l.id))})]},c.id)),e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>p(),children:"Сохранить"})]})]})}function Un({title:n,setOpenModal:t}){const{currentCategory:s}=pe(),[r,o]=m.useState(""),{selectedSuperCategory:a,selectedCategory:p}=Be();m.useEffect(()=>{s=="Котегории"&&a&&c(a),s=="Подкотегории"&&p&&c(p)},[s,a,p]);const c=async i=>{try{const u=await(await Re.get(`https://api.mcrm.uz/api/categories/${i}`)).data;o(u.name.ru)}catch(d){console.error("Ошибка произошла при получении названия варианта категории",d)}},l=()=>{t&&t(!0)};return e.jsxs("div",{className:_.editBlock,onClick:l,children:[r||n,e.jsx(M,{name:"PencilIcon"})]})}const Bn="_modalCategory_xzv82_1",Fn="_modalCategory_block_xzv82_10",Ln="_modalCategory_nav_xzv82_16",Mn="_modalCategory_nav_title_xzv82_23",zn="_modalCategory_content_xzv82_29",Tn="_modalCategory_content_message_xzv82_36",Rn="_modalCategory_content_link_xzv82_44",qn="_modalCategory_content_link_active_xzv82_72",Vn="_modalCategory_content_item_xzv82_82",Hn="_modalCategory_content_block_xzv82_104",Xn="_modalCategory_content_block_title_xzv82_108",Kn="_settings_xzv82_115",Zn="_settings_title_xzv82_118",Gn="_settings_content_xzv82_123",Jn="_settings_content_top_xzv82_126",Yn="_settings_content_buttons_xzv82_129",Qn="_settings_content_btn_xzv82_139",er="_settings_content_btn_cancel_xzv82_151",tr="_settings_content_btn_save_xzv82_154",sr="_settings_tools_xzv82_157",or="_settings_tools_link_xzv82_162",nr="_settings_tools_link_active_xzv82_177",Y={modalCategory:Bn,modalCategory_block:Fn,modalCategory_nav:Ln,modalCategory_nav_title:Mn,modalCategory_content:zn,modalCategory_content_message:Tn,modalCategory_content_link:Rn,modalCategory_content_link_active:qn,modalCategory_content_item:Vn,modalCategory_content_block:Hn,modalCategory_content_block_title:Xn,settings:Kn,settings_title:Zn,settings_content:Gn,settings_content_top:Jn,settings_content_buttons:Yn,settings_content_btn:Qn,settings_content_btn_cancel:er,settings_content_btn_save:tr,settings_tools:sr,settings_tools_link:or,settings_tools_link_active:nr};function rr({setCancel:n}){return e.jsxs("div",{className:Y.modalCategory_nav,children:[e.jsx("h2",{className:Y.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:Y.modalCategory_nav_close,onClick:n,children:e.jsx(M,{width:24,height:24,name:"XMarkIcon"})})]})}function ar({superCategory:n,category:t,setMessageStatus:s,fetchCategories:r}){const{currentCategory:o}=pe(),{selectedSuperCategory:a,setSelectedSuperCategory:p}=Be(),{setCurrentCategory:c}=he(),[l,i]=m.useState(10),d=(h,b)=>{if(h.preventDefault(),o==="Подкотегории"){r("category",1,10,b.id);const v=t.filter(S=>S.parentId==b.id);c(v),p(b.id),s(!1)}p(b.id)},u=h=>{h.preventDefault();const b=l+10;i(b),r("super",1,b)};return e.jsxs("div",{className:Y.modalCategory_content_block,children:[e.jsx("h2",{className:Y.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:Y.modalCategory_content_item,children:[n.map(h=>e.jsxs(Z,{to:"#",className:`${Y.modalCategory_content_link} ${h.id==a?Y.modalCategory_content_link_active:""} `,onClick:b=>d(b,h),children:[h.name.ru,e.jsx(M,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),e.jsx(Z,{to:"#",className:Y.modalCategory_content_link,onClick:h=>u(h),children:"Ещё..."})]})]})}function ir({categoryId:n,category:t,setCategoryId:s,setSubCategory:r,fetchCategories:o}){const{selectedSuperCategory:a}=Be(),[p,c]=m.useState(10),l=d=>{d.preventDefault();const u=p+10;c(u),o("category",1,u,a)},i=(d,u)=>{r(d,u),s(u.id)};return t.length>0&&e.jsxs("div",{className:Y.modalCategory_content_block,children:[e.jsx("h2",{className:Y.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:Y.modalCategory_content_item,children:[t==null?void 0:t.map(d=>e.jsxs(Z,{to:"#",className:`${Y.modalCategory_content_link} ${d.id==n?Y.modalCategory_content_link_active:""} `,onClick:u=>i(u,d),children:[d.name.ru,e.jsx(M,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},d.id)),e.jsx(Z,{to:"#",className:Y.modalCategory_content_link,onClick:d=>l(d),children:"Ещё..."})]})]})}function cr({setSettings:n,setCancel:t}){return e.jsxs("div",{className:Y.settings_content_buttons,children:[e.jsx("button",{className:`${Y.settings_content_btn} ${Y.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(Z,{to:"#",className:`${Y.settings_content_btn} ${Y.settings_content_btn_save}`,onClick:n,children:"Сохранить"})]})}function lr({setOpenModal:n}){const{currentCategory:t}=pe(),{selectedSuperCategory:s,setSelectedSuperCategory:r,selectedCategory:o,setSelectedCategory:a}=Be(),[p,c]=m.useState(0),[l,i]=m.useState(!1),[d,u]=m.useState("Выберите категорию"),[h,b]=m.useState([]),[v,S]=m.useState([]);m.useEffect(()=>{C("super",1,10),o&&c(o)},[]);const P=(A,j)=>{A.preventDefault(),C("subCategory",1,10,j.id),i(!1)},W=()=>{t=="Котегории"?r(s):t=="Подкотегории"&&a(p),D()},D=()=>{i(!1),u("Выберите категорию"),n(!1)},C=async(A,j,x,$)=>{try{const N=A=="super"?`https://api.mcrm.uz/api/categories?&page=${j}&perPage=${x}`:`https://api.mcrm.uz/api/categories?parentId=${$}&page=${j}&perPage=${x}`,E=(await Re.get(N)).data.data.map(z=>({...z,label:A==="super"?"Супер категория":A==="category"?"Категория":"Субкатегория"}));A==="super"&&b([...E]),A==="category"&&S([...E])}catch(N){console.error(`Ошибка произошла при получении ${A} категорий`,N)}},y=()=>{n(!1)};return e.jsx("div",{className:Y.modalCategory,onClick:y,children:e.jsxs("div",{className:Y.modalCategory_block,onClick:A=>A.stopPropagation(),children:[e.jsx(rr,{setCancel:D}),e.jsx("p",{className:Y.modalCategory_content_message,children:l?d:""}),e.jsxs("div",{className:Y.modalCategory_content,children:[e.jsx(ar,{superCategory:h,category:v,setMessageStatus:i,fetchCategories:C}),t==="Подкотегории"&&e.jsx(ir,{categoryId:p,category:v,setCategoryId:c,setSubCategory:P,fetchCategories:C}),e.jsx(cr,{setSettings:W,setCancel:D})]})]})})}function _r(){const[n,t]=m.useState(!1),[s,r]=m.useState(!1),{currentCategory:o,categoriesStatus:a,categories:p,setCategoriesStatus:c,setCurrentCategory:l}=pe();m.useEffect(()=>{t(o==="Котегории"||o==="Подкотегории")},[o]);const i=d=>{l(d.title),d.title==="Котегории"||d.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:_.categoriesDropDown,children:[e.jsx("h2",{className:_.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(lr,{setOpenModal:r}),e.jsxs("div",{className:_.categoriesDropDown_item,children:[e.jsxs("div",{className:_.categoriesDropDown_item_top,onClick:()=>c(!a),children:[e.jsx("h2",{className:_.categoriesDropDown_item_top_title,children:o}),e.jsx("button",{className:_.categoriesDropDown_item_top_btn,onClick:()=>c(!a),children:e.jsx("div",{className:`${_.categoriesDropDown_item_top_arrow} ${a?_.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.categoriesDropDown_item_block} ${a?_.categoriesDropDown_item_block_open:""}`,children:p.map(d=>e.jsx("div",{className:`${_.categoriesDropDown_item_block_line} ${d.title==o?_.categoriesDropDown_item_block_active:""}`,onClick:()=>i(d),children:d.title},d.id))})]}),n&&e.jsx(Un,{title:"Выберите вариант",setOpenModal:r})]})}const dr="_banner_1eodh_1",pr="_banner_title_1eodh_5",ur="_products_banner_1eodh_10",mr="_products_banner_wrap_1eodh_13",hr="_products_banner_wrap_btn_1eodh_19",br="_products_banner_wrap_filter_1eodh_30",gr="_products_banner_wrap_filter_text_1eodh_40",vr="_products_banner_form_1eodh_48",xr="_products_banner_form_wrap_1eodh_53",fr="_products_banner_form_wrap_btn_1eodh_59",jr="_products_banner_form_wrap_input_1eodh_75",kr="_products_banner_form_wrap_icon_1eodh_83",yr="_table_1eodh_87",wr="_table_tbody_1eodh_92",Cr="_table_tbody_tr_1eodh_97",Nr="_table_tbody_tr_active_1eodh_100",Ir="_table_tbody_img_1eodh_103",Sr="_table_tr_1eodh_108",Dr="_table_th_1eodh_111",$r="_table_td_1eodh_122",Or="_table_td_edit_1eodh_130",Pr="_table_btn_1eodh_136",Ar="_versions_1eodh_144",Wr="_versions_block_1eodh_149",Er="_versions_block_top_1eodh_154",Ur="_versions_block_top_title_1eodh_164",Br="_versions_block_top_arrow_1eodh_168",Fr="_versions_block_top_arrow_active_1eodh_177",Lr="_versions_block_dropdown_1eodh_180",Mr="_versions_block_dropdown_item_1eodh_195",zr="_versions_block_dropdown_open_1eodh_206",Tr="_add_banner_1eodh_213",Rr="_add_banner_header_1eodh_221",qr="_add_banner_header_title_1eodh_225",Vr="_add_banner_content_1eodh_229",Hr="_add_banner_content_product_1eodh_232",Xr="_add_banner_content_link_1eodh_254",Kr="_add_banner_content_info_1eodh_262",Zr="_add_banner_content_info_text_1eodh_266",Gr="_add_banner_content_download_1eodh_272",Jr="_add_banner_content_download_link_1eodh_281",Yr="_add_banner_content_btns_1eodh_293",Qr="_add_banner_content_btn_1eodh_293",ea="_category_wrap_1eodh_311",ta="_modalCategory_1eodh_315",sa="_modalCategory_block_1eodh_323",oa="_modalCategory_nav_1eodh_328",na="_modalCategory_nav_title_1eodh_335",ra="_modalCategory_content_1eodh_341",aa="_modalCategory_content_message_1eodh_348",ia="_modalCategory_content_link_1eodh_356",ca="_modalCategory_content_link_active_1eodh_384",la="_modalCategory_content_item_1eodh_394",_a="_modalCategory_content_block_1eodh_416",da="_modalCategory_content_block_title_1eodh_420",pa="_add_link_1eodh_427",ua="_add_link_title_1eodh_430",ma="_add_link_input_1eodh_434",ha="_modal_btn_1eodh_443",k={banner:dr,banner_title:pr,products_banner:ur,products_banner_wrap:mr,products_banner_wrap_btn:hr,products_banner_wrap_filter:br,products_banner_wrap_filter_text:gr,products_banner_form:vr,products_banner_form_wrap:xr,products_banner_form_wrap_btn:fr,products_banner_form_wrap_input:jr,products_banner_form_wrap_icon:kr,table:yr,table_tbody:wr,table_tbody_tr:Cr,table_tbody_tr_active:Nr,table_tbody_img:Ir,table_tr:Sr,table_th:Dr,table_td:$r,table_td_edit:Or,table_btn:Pr,versions:Ar,versions_block:Wr,versions_block_top:Er,versions_block_top_title:Ur,versions_block_top_arrow:Br,versions_block_top_arrow_active:Fr,versions_block_dropdown:Lr,versions_block_dropdown_item:Mr,versions_block_dropdown_open:zr,add_banner:Tr,add_banner_header:Rr,add_banner_header_title:qr,add_banner_content:Vr,add_banner_content_product:Hr,add_banner_content_link:Xr,add_banner_content_info:Kr,add_banner_content_info_text:Zr,add_banner_content_download:Gr,add_banner_content_download_link:Jr,add_banner_content_btns:Yr,add_banner_content_btn:Qr,category_wrap:ea,modalCategory:ta,modalCategory_block:sa,modalCategory_nav:oa,modalCategory_nav_title:na,modalCategory_content:ra,modalCategory_content_message:aa,modalCategory_content_link:ia,modalCategory_content_link_active:ca,modalCategory_content_item:la,modalCategory_content_block:_a,modalCategory_content_block_title:da,add_link:pa,add_link_title:ua,add_link_input:ma,modal_btn:ha};function lt({color:n="black",title:t="",versionList:s=[],className:r,openBlock:o,setOpenBlock:a,setVersionList:p}){const[c,l]=m.useState(s[0].title),{setChangeCategoryStyles:i}=ie(),d=u=>{const h=s.map(b=>({...b,isOpen:b.id===u.id}));u.title=="Категория"&&i(!0),l(u.title),p(h),a(!1)};return e.jsxs("div",{className:r??k.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:k.versions_block,children:[e.jsxs("div",{className:k.versions_block_top,children:[e.jsx("h2",{className:k.versions_block_top_title,style:{color:n},children:c}),e.jsx("button",{className:k.versions_block_top_btn,onClick:()=>a(!o),children:e.jsx("div",{className:`${k.versions_block_top_arrow} ${o?k.versions_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${k.versions_block_dropdown} ${o?k.versions_block_dropdown_open:""}`,children:s.map(u=>e.jsx("span",{className:k.versions_block_dropdown_item,onClick:()=>d(u),children:u.title},u.id))})]})]})}function ze({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:o=500,scale:a=1.1,status:p=!1,disabled:c=!1}){const l={width:`${n}px`,height:`${n/2-n/20}px`,background:p?s:r,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer",opacity:c?1:.3},i={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${p?s:r}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${a}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:l,children:e.jsx("div",{style:i})})}const Oe=({arr:n=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:r=!1,isEdit:o=!1,isCategory:a,isLinks:p,setPickedProduct:c,setPickedProductActive:l})=>{const{bannersArr:i,selectedProductEdit:d,imageUrlEditBanner:u,bannersArrProduct:h,bannersArrLink:b,setBannersArrLink:v,setSelectedProductEdit:S,setImageUrlEditBanner:P,setCurrentProductOpen:W,clearPickedProductsArr:D,setBannersArrProduct:C,setBannersArr:y,setBannersArrCategory:A}=ie(),[j,x]=m.useState(null);m.useState(new Set);const $=f=>i.some(L=>L.brandName===f&&L.isBannerActive),N=(f,L)=>{if(s==="mxikCode"&&(c==null||c(f)),o&&L){const R={productId:se(),bannerUrl:u,brandName:L.brandName,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};R.brandName!=null&&!$(R.brandName)?(C(h.map(U=>U.productId===d?R:U)),y(i.map(U=>U.productId===d?R:U)),W(!1)):console.warn("Объект с таким brandName уже существует.")}x(f)},w=(f,L)=>{s==="productId"&&(l==null||l(f),N==null||N(f),x(f),D(),L.productId&&S(L.productId),L.bannerUrl&&P(L.bannerUrl))},E=(f,L,R)=>{if(f.stopPropagation(),R.isBannerActive)r&&(C(t.map(U=>U.productId===L?{...U,toggleSwitcher:!U.toggleSwitcher}:U)),y(i.map(U=>U.productId===L?{...U,toggleSwitcher:!U.toggleSwitcher}:U))),a&&(A(t.map(U=>U.productId===L?{...U,toggleSwitcher:!U.toggleSwitcher}:U)),y(i.map(U=>U.productId===L?{...U,toggleSwitcher:!U.toggleSwitcher}:U))),p&&(v(t.map(U=>U.productId===L?{...U,toggleSwitcher:!U.toggleSwitcher}:U)),y(i.map(U=>U.productId===L?{...U,toggleSwitcher:!U.toggleSwitcher}:U)));else return},z=f=>f.productId!==void 0,G=(f,L)=>{f.stopPropagation(),C(t.map(R=>R.productId===L.productId?{...R,isBannerActive:!1,brandName:"-"}:R)),y(i.map(R=>R.productId===L.productId?{...R,isBannerActive:!1,brandName:"-"}:R))};return e.jsxs("table",{className:k.table,children:[e.jsx("thead",{className:k.table_thead,children:e.jsx("tr",{className:k.table_tr,children:n.map(f=>e.jsx("th",{className:k.table_th,children:f.title},f.id))})}),e.jsx("tbody",{className:k.table_tbody,children:t==null?void 0:t.map(f=>e.jsxs("tr",{className:`${k.table_tbody_tr} ${!o&&j==(s==="mxikCode"?f.mxikCode:f.productId)?k.table_tbody_tr_active:""}`,style:{cursor:r||a||p?"pointer":"default"},onClick:()=>w(f.productId,f),children:[e.jsxs("td",{className:k.table_td,children:[s==="mxikCode"&&f.brandName,r&&e.jsx("img",{className:k.table_tbody_img,src:f.bannerUrl??"",alt:"Banner"}),a&&e.jsx("img",{className:k.table_tbody_img,src:f.bannerUrl??"",alt:"Banner"}),p&&e.jsx("img",{className:k.table_tbody_img,src:f.bannerUrl??"",alt:"Banner"})]}),e.jsxs("td",{className:k.table_td,children:[a?f.categoryTitle:"",r?f.brandName:f.crmSellingPrice,p&&f.brandName]}),e.jsx("td",{className:k.table_td,children:r?"":f.crmAmount}),e.jsx("td",{className:k.table_td,children:a?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:L=>{const R=f;R.productId&&E(L,R.productId,f)},children:e.jsx(ze,{width:62,status:z(f)&&f.toggleSwitcher&&f.isBannerActive,disabled:z(f)&&f.isBannerActive})}):r?e.jsxs("div",{className:k.table_td_edit,children:[f.brandName!=="-"&&e.jsx("button",{className:k.table_btn,style:{width:"156px",background:"#FFB5B5"},onClick:L=>G(L,f),children:"Открепить продукт"}),e.jsx("div",{onClick:L=>{const R=f;R.productId&&E(L,R.productId,f)},children:e.jsx(ze,{width:62,status:z(f)&&f.toggleSwitcher&&f.isBannerActive,disabled:z(f)&&f.isBannerActive})})]}):p?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:L=>{const R=f;R.productId&&E(L,R.productId,f)},children:e.jsx(ze,{width:62,status:z(f)&&f.toggleSwitcher&&f.isBannerActive,disabled:z(f)&&f.isBannerActive})}):e.jsx("button",{className:k.table_btn,onClick:()=>N(f.mxikCode,f),children:o?"Заменить":"Выбрать"})})]},z(f)?f.productId:f.mxikCode))})]})};function ba({setCancel:n}){return e.jsxs("div",{className:H.modalCategory_nav,children:[e.jsx("h2",{className:H.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:H.modalCategory_nav_close,onClick:n,children:e.jsx(M,{width:24,height:24,name:"XMarkIcon"})})]})}function ga({superCategory:n,category:t,superId:s,setLocalPicked:r,setSuperId:o,setMessageStatus:a,setSubCategories:p,fetchCategories:c,setSuperCategoryObj:l}){const{changeCategoryStyles:i,categoriesArr:d,setCategoriesArr:u,setActiveCategory:h,setActiveCategoryTitle:b}=ie(),{setCurrentCategory:v}=he(),[S,P]=m.useState(10),W=(C,y)=>{C.preventDefault(),c("category",1,10,y.id),p([]);const A=t.filter(j=>j.parentId==y.id);if(v(A),r(y),o(y.id),a(!1),i&&y.label&&(h(y.label),b(y.name.ru)),i){const j=d.filter(x=>x.label!==y.label);j.push(y),u(j)}l==null||l(y),console.log("super",y)},D=()=>{const C=S+10;P(C),c("super",1,C),console.log("addPage",C)};return e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[n.map(C=>e.jsxs(Z,{to:"#",className:`${H.modalCategory_content_link} ${C.id==s?H.modalCategory_content_link_active:""} `,onClick:y=>W(y,C),children:[C.name.ru,e.jsx(M,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},C.id)),e.jsx(Z,{to:"#",className:H.modalCategory_content_link,onClick:()=>D(),children:"Ещё..."})]})]})}function va({superId:n,categoryId:t,category:s,setSubCategory:r,fetchCategories:o}){const[a,p]=m.useState(10),c=()=>{const i=a+10;p(i),o("category",1,i,n),console.log("addPage",i,n)},l=(i,d)=>{r(i,d)};return s.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[s==null?void 0:s.map(i=>e.jsxs(Z,{to:"#",className:`${H.modalCategory_content_link} ${i.id==t?H.modalCategory_content_link_active:""} `,onClick:d=>l(d,i),children:[i.name.ru,e.jsx(M,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},i.id)),e.jsx(Z,{to:"#",className:H.modalCategory_content_link,onClick:()=>c(),children:"Ещё..."})]})]})}function xa({subId:n,categoryId:t,subCategories:s,setSubProductsList:r,fetchCategories:o}){const[a,p]=m.useState(10),c=()=>{const l=a+10;p(l),o("subCategory",1,l,t),console.log("addPage",l)};return s.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[s==null?void 0:s.map(l=>e.jsxs(Z,{to:"#",className:`${H.modalCategory_content_link} ${l.id==n?H.modalCategory_content_link_active:""} `,onClick:i=>r(i,l),children:[l.name.ru,e.jsx(M,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id)),e.jsx(Z,{to:"#",className:H.modalCategory_content_link,onClick:()=>c(),children:"Ещё..."})]})]})}function fa({setSettings:n,setCancel:t}){return e.jsxs("div",{className:H.settings_content_buttons,children:[e.jsx("button",{className:`${H.settings_content_btn} ${H.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${H.settings_content_btn} ${H.settings_content_btn_save}`,onClick:n,children:"Сохранить"})]})}function Fe({isProduct:n,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:r,setCurrentCategory:o,setCurrentSubCategory:a}=he(),{changeCategoryStyles:p,categoriesArr:c,setCategoriesArr:l,setPickedProducts:i,setActiveCategory:d,setActiveCategoryTitle:u,setOpenModalCategoryBanner:h}=ie(),b=p?k:H,{websiteProducts:v}=Ne(),[S,P]=m.useState(0),[W,D]=m.useState(0),[C,y]=m.useState(0),[A,j]=m.useState({}),[x,$]=m.useState(!1),[N,w]=m.useState("Выберите категорию"),[E,z]=m.useState([]),[G,f]=m.useState([]),[L,R]=m.useState([]),[U,xe]=m.useState(null),[be,fe]=m.useState(null),[ge,q]=m.useState(null);m.useEffect(()=>{ce("super",1,10)},[]);const g=(te,V)=>{te.preventDefault(),ce("subCategory",1,10,V.id);const _e=L.filter(de=>de.parentId==V.id);if(a(_e),j(V),D(V.id),$(!1),p&&V.label&&(d(V.label),u(V.name.ru)),p){const de=c.filter(ue=>ue.label!==V.label);de.push(V),l(de)}fe(V),console.log("category",V.id)},T=(te,V)=>{if(te.preventDefault(),j(V),y(V.id),$(!1),p&&V.label&&(d(V.label),u(V.name.ru)),p){const _e=c.filter(de=>de.name.ru!==V.name.ru);_e.push(V),console.log("newCategories",_e),l(_e)}q(V),console.log("item",V)},J=()=>{if(Object.keys(A).length===0){$(!0),w("Выберите Суперкотегорию");return}if(G.length>0&&W===0){$(!0),w("Выберите Категорию");return}if(L.length>0&&C===0){$(!0),w("Выберите Подкотегорию");return}if(console.log("localPicked",A),A){const V=A.id,_e=v.filter(de=>{var ue;return((ue=de.crmCategoryParentId)==null?void 0:ue.id)==V});i(_e)}const te=[];U&&te.push(U),be&&te.push(be),ge&&te.push(ge),l(te),Q()},Q=()=>{r(A),s(!1),P(0),D(0),y(0),j({}),o([]),a([]),$(!1),w("Выберите категорию"),h(!1)},ce=async(te,V,_e,de)=>{try{const ue=te=="super"?`https://api.mcrm.uz/api/categories?&page=${V}&perPage=${_e}`:`https://api.mcrm.uz/api/categories?parentId=${de}&page=${V}&perPage=${_e}`,Me=(await Re.get(ue)).data.data.map(yt=>({...yt,label:te==="super"?"Супер категория":te==="category"?"Категория":"Субкатегория"}));te==="super"&&z([...Me]),te==="category"&&f([...Me]),te==="subCategory"&&R([...Me])}catch(ue){console.error(`Ошибка произошла при получении ${te} категорий`,ue)}};return e.jsx("div",{className:b.modalCategory,children:e.jsxs("div",{className:b.modalCategory_block,children:[!p&&e.jsx(ba,{setCancel:Q}),e.jsx("p",{className:b.modalCategory_content_message,children:x?N:""}),e.jsxs("div",{className:b.modalCategory_content,children:[e.jsx(ga,{superId:S,superCategory:E,category:G,setLocalPicked:j,setSuperId:P,setMessageStatus:$,fetchCategories:ce,setSubCategories:R,setSuperCategoryObj:xe}),e.jsx(va,{superId:S,categoryId:W,category:G,setSubCategory:g,fetchCategories:ce}),e.jsx(xa,{subId:C,categoryId:W,subCategories:L,setSubProductsList:T,fetchCategories:ce}),!t&&e.jsx(fa,{setSettings:J,setCancel:Q})]})]})})}const Ie=({title:n,currentProductEdit:t,isEdit:s,isCategory:r,isLinks:o,linkTextEdit:a,deleteBanner:p})=>{const{currentProductTable:c,changeCategoryStyles:l,categoriesArr:i,bannersArr:d,linksPageBannerText:u,openLinksPage:h,openProductsPage:b,activeCategory:v,activeCategoryTitle:S,bannersArrProduct:P,bannersArrCategory:W,bannersArrLink:D,setBannersArrLink:C,setCurrentProductOpen:y,clearCategoriesArr:A,addBannerToArr:j,setLinksPageBannerText:x,setBannersArrProduct:$,setBannersArr:N,setBannersArrCategory:w}=ie(),E=c,[z,G]=m.useState(null),[f,L]=m.useState(null),[R,U]=m.useState(""),xe=g=>{if(g.target.files&&g.target.files[0]){const T=g.target.files[0];L(T);const J=new FileReader;J.onloadend=()=>{const Q=J.result;G(Q)},J.readAsDataURL(T)}},be=()=>{document.getElementById("upload").click()},fe=()=>{if(!f)return;const g=()=>{switch(v){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}};if(f&&E&&b){const T={productId:se(),bannerUrl:z||"",brandName:E.brandName,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};d.some(ce=>ce.brandName===T.brandName)||j(T),y(!1),G(null),L(null);const Q=document.getElementById("upload");Q&&(Q.value="")}if(l&&h==!1){const T=g(),J={productId:se(),bannerUrl:z||"",categoryLabel:T,categoryTitle:S,isCategoryBanner:!0,isBannerActive:!0,toggleSwitcher:!0};d.some(te=>te.categoryTitle===J.categoryTitle)||j(J),G(null),L(null);const ce=document.getElementById("upload");ce&&(ce.value="")}if(h&&u){const T={productId:se(),bannerUrl:z||"",brandName:u,isLinkBanner:!0,isBannerActive:!0,toggleSwitcher:!0};d.some(ce=>ce.brandName===T.brandName)||(j(T),console.log("bannersArr",d)),G(null),L(null),x("");const Q=document.getElementById("upload");Q&&(Q.value="")}},ge=()=>{z===null?s&&(r&&(U((()=>{switch(v){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}})()),w(W.map(T=>T.productId===(c==null?void 0:c.productId)?{...T,categoryTitle:S,activeCategoryEdit:R}:T))),o&&C(D.map(g=>g.productId===(t==null?void 0:t.productId)?{...g,brandName:a}:g)),N(d.map(g=>g.productId===(c==null?void 0:c.productId)?{...g,categoryTitle:S,activeCategoryEdit:R}:g)),y(!1)):s&&(r&&w(W.map(g=>g.productId===(t==null?void 0:t.productId)?{...g,bannerUrl:z}:g)),o&&C(D.map(g=>g.productId===(t==null?void 0:t.productId)?{...g,bannerUrl:z,brandName:a}:g)),N(d.map(g=>g.productId===(t==null?void 0:t.productId)?{...g,bannerUrl:z,brandName:a,categoryTitle:S,activeCategoryEdit:R}:g)),y(!1))},q=()=>{p==null||p(t==null?void 0:t.productId),y(!1)};return e.jsxs("div",{className:k.add_banner,children:[e.jsx("div",{className:k.add_banner_header,children:e.jsx("h3",{className:k.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:k.add_banner_content,children:[l?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:k.add_banner_content_product,children:[n,":",r&&e.jsxs("span",{children:[" ",t==null?void 0:t.categoryTitle]}),o&&e.jsxs("span",{children:[" ",t==null?void 0:t.brandName]})]}),i==null?void 0:i.map(g=>e.jsx("span",{className:k.add_banner_content_product,children:g.name.ru},g.name.ru))]}):e.jsx("p",{className:k.add_banner_content_product,children:h?`${n}: ${u}`:`${n}: ${E==null?void 0:E.brandName}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:xe}),e.jsx("label",{htmlFor:"upload",className:k.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:k.add_banner_content_info,children:e.jsx("p",{className:k.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:k.add_banner_content_download,children:e.jsx("img",{src:z||(t==null?void 0:t.bannerUrl),alt:"",style:{width:"555px",height:"229px",objectFit:"cover"}})}):e.jsx("div",{className:k.add_banner_content_download,children:z?e.jsx("img",{src:z,alt:"Uploaded",className:k.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:k.add_banner_content_download_link,onClick:()=>be(),children:[e.jsx(M,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:k.add_banner_content_btns,children:[e.jsx("button",{className:k.add_banner_content_btn,onClick:q,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:k.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>ge(),children:"Изменить"})]}):e.jsxs("div",{className:k.add_banner_content_btns,children:[e.jsx("button",{className:k.add_banner_content_btn,onClick:()=>y(!1),children:"Отмена"}),e.jsx("button",{className:k.add_banner_content_btn,onClick:()=>fe(),children:"Сохранить"})]})]})]})};function _t({inputText:n,setInputText:t,filteredUsers:s,isProductEdit:r}){const{categoriesArr:o,filteredSubCategory:a,filteredCategoty:p,filteredSuperCategory:c,setCurrentProductOpen:l,setChangeCategoryStyles:i,setOpenModalCategoryBanner:d,clearCategoriesArr:u,setFilteredSubCategory:h,setFilteredCategoty:b,setFilteredSuperCategory:v}=ie(),S=()=>{r&&l(!1),i(!1),d(!0),u()};return m.useEffect(()=>{console.log("categoriesArr",o)},[o]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:k.products_banner_wrap,children:[e.jsx("button",{className:k.products_banner_wrap_btn,onClick:S,children:e.jsx(M,{name:"FunnelIcon",width:20})}),(o==null?void 0:o.length)!==0&&e.jsx("div",{className:k.products_banner_wrap_filter,children:o==null?void 0:o.map(P=>e.jsx("span",{className:k.products_banner_wrap_filter_text,children:P.name.ru},P.id))}),e.jsxs("form",{action:"",className:k.products_banner_form,onSubmit:P=>s==null?void 0:s(P),children:[e.jsxs("div",{className:k.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:k.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:n,onChange:P=>t==null?void 0:t(P.target.value)}),e.jsx(M,{className:k.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:k.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const ja=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],ka=()=>{const{websiteProducts:n}=Ne(),[t,s]=m.useState(""),{openModalCategoryBanner:r,currentProductOpen:o,searchTextBannner:a,pickedProducts:p,setCurrentProductTable:c,clearCategoriesArr:l,setSearchTextBannner:i,clearPickedProductsArr:d,setOpenLinksPage:u,setOpenProductsPage:h,setCurrentProductOpen:b,setOpenModalCategoryBanner:v}=ie(),S=y=>{y.preventDefault(),i(t),l()},P=y=>{const A=n.find(j=>j.mxikCode===y);A&&(c(A),b(!0))},[W,D]=m.useState([]);m.useEffect(()=>{let y=n;y=y==null?void 0:y.filter(A=>{var j;return(j=A.className)==null?void 0:j.toLowerCase().includes(a.toLowerCase())}),D(y)},[a,n]);const C=a?W:p;return m.useEffect(()=>{t===""&&(i(""),d(),b(!1))},[t]),m.useEffect(()=>{b(!1),u(!1),h(!0),v(!1),l()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:k.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(_t,{inputText:t,setInputText:s,filteredUsers:S}),e.jsx(Oe,{arrToUse:C,arr:ja,setPickedProduct:P,selectionMode:"mxikCode"})]}),r&&e.jsx(Fe,{isProduct:!0}),o&&e.jsx(Ie,{title:"Товар"})]})},ya=()=>{const{categoriesArr:n,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:r}=ie();return m.useEffect(()=>{t(!1),s(!0),r(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:k.category_wrap,children:e.jsx(Fe,{isCategory:!0})}),e.jsx(Ie,{title:"Каталог",categories:n})]})},wa=()=>{const{linksPageBannerText:n,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:r,setOpenProductsPage:o}=ie();return m.useEffect(()=>{s(!0),r(!1),t(""),o(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:k.add_link,children:[e.jsx("h3",{className:k.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:k.add_link_input,type:"text",value:n,onChange:a=>t(a.target.value)})]}),e.jsx(Ie,{title:"Страница"})]})};function Ca(){const{bannerDropdownOptions:n,openBannerDropdown:t,setBannerDropdownOptions:s,setOpenBannerDropdown:r,resetDropdownToDefault:o}=ie(),a=()=>{const p=n.find(c=>c.isOpen);if(!p)return null;switch(p.title){case"Продукт":return e.jsx(ka,{});case"Категория":return e.jsx(ya,{});case"Страница":return e.jsx(wa,{});default:return null}};return m.useEffect(()=>{o()},[]),e.jsxs("div",{className:k.banner,children:[e.jsx("h3",{className:k.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(lt,{openBlock:t,setOpenBlock:r,versionList:n,setVersionList:s}),e.jsx("div",{className:k.banner_content,children:a()})]})}const Na=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ia=()=>{const{websiteProducts:n}=Ne(),{pickedProducts:t,currentProductOpen:s,openModalCategoryBanner:r,bannersArr:o,searchTextBannner:a,currentProductTable:p,bannersArrProduct:c,clearPickedProductsArr:l,clearCategoriesArr:i,setCurrentProductOpen:d,setCurrentProductTable:u,setSearchTextBannner:h,setOpenLinksPage:b,setOpenProductsPage:v,setOpenModalCategoryBanner:S,setBannersArrProduct:P,setBannersArr:W}=ie(),[D,C]=m.useState(""),[y,A]=m.useState([]),j=w=>{w.preventDefault(),h(D),i()},x=w=>{const E=c.find(z=>z.productId===w);E&&(u(E),d(!0))};m.useEffect(()=>{let w=n;w=w==null?void 0:w.filter(E=>{var z;return(z=E.className)==null?void 0:z.toLowerCase().includes(a.toLowerCase())}),A(w)},[a,n]);const $=w=>{P(c.filter(E=>E.productId!=w)),W(o.filter(E=>E.productId!==w))},N=a?y:t;return m.useEffect(()=>{d(!1),b(!1),S(!1),i()},[d,b,v,S,i]),m.useEffect(()=>{D===""&&(h(""),l())},[D]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Oe,{arrToUse:c,arr:Na,setPickedProductActive:x,selectionMode:"productId",isActive:!0}),s&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(_t,{filteredUsers:j,setInputText:C}),e.jsx(Oe,{arrToUse:N,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Ie,{title:"Продукт",currentProductEdit:p,isEdit:!0,deleteBanner:$})]})]}),r&&e.jsx(Fe,{})]})},Sa=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Da=()=>{const{bannersArr:n,bannersArrCategory:t,currentProductTable:s,currentProductOpen:r,setCurrentProductOpen:o,setBannersArr:a,setCurrentProductTable:p,setBannersArrCategory:c}=ie(),l=d=>{const u=t.find(h=>h.productId===d);u&&(p(u),o(!0),console.log("currentProductTable",s))},i=d=>{c(t.filter(u=>u.productId!=d)),a(n.filter(u=>u.productId!==d))};return m.useEffect(()=>{o(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Oe,{arr:Sa,arrToUse:t,selectionMode:"productId",isCategory:!0,setPickedProductActive:l}),r&&e.jsx(Fe,{isCategory:!0}),r&&e.jsx(Ie,{title:"Каталог",currentProductEdit:s,isEdit:!0,isCategory:!0,deleteBanner:i})]})},$a=({setLinkText:n,currentProductEdit:t})=>{ie();const[s,r]=m.useState(t.brandName||""),o=a=>{r(a),n(a)};return m.useEffect(()=>{r(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:k.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:k.add_link_input,type:"text",onChange:a=>o(a.target.value),value:s})]})},Oa=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Pa=()=>{const{bannersArr:n,bannersArrLink:t,currentProductOpen:s,currentProductTable:r,setBannersArr:o,setBannersArrLink:a,setCurrentProductTable:p,setCurrentProductOpen:c}=ie(),[l,i]=m.useState("");m.useEffect(()=>{console.log(l)},[l]);const d=h=>{const b=t.find(v=>v.productId===h);b&&(p(b),console.log("currentProductTable",r),c(!0))},u=h=>{a(t.filter(b=>b.productId!=h)),o(n.filter(b=>b.productId!==h))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Oe,{arr:Oa,arrToUse:t,selectionMode:"productId",setPickedProductActive:d,isLinks:!0}),s&&e.jsxs(e.Fragment,{children:[e.jsx($a,{setLinkText:i,currentProductEdit:r}),e.jsx(Ie,{title:"Страница",currentProductEdit:r,deleteBanner:u,isLinks:!0,isEdit:!0,linkTextEdit:l})]})]})};function Aa(){const{bannerDropdownOptions:n,openBannerDropdown:t,bannersArr:s,bannersArrProduct:r,bannersArrCategory:o,bannersArrLink:a,setBannerDropdownOptions:p,setOpenBannerDropdown:c,resetDropdownToDefault:l,setBannersArrProduct:i,setBannersArrCategory:d,setBannersArrLink:u}=ie();m.useEffect(()=>{i(s.filter(b=>b.isProductBanner===!0)),d(s.filter(b=>b.isCategoryBanner===!0)),u(s.filter(b=>b.isLinkBanner===!0))},[]);const h=()=>{const b=n.find(v=>v.isOpen);if(!b)return null;switch(b.title){case"Продукт":return e.jsx(Ia,{});case"Категория":return e.jsx(Da,{});case"Страница":return e.jsx(Pa,{});default:return null}};return m.useEffect(()=>{l()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:k.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(lt,{openBlock:t,setOpenBlock:c,versionList:n,setVersionList:p})]}),e.jsx("div",{className:k.banner_content,children:h()})]})}const Wa=[{id:1,title:"Новый",href:"/admin/settings/banner"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner"}];function Ea(){const t=ae().pathname,{setCurrentProductOpen:s}=ie();return m.useEffect(()=>{s(!1)},[]),e.jsx("div",{className:_.banner,children:e.jsxs("div",{className:_.banner_nav,children:[e.jsx("ul",{className:_.banner_nav_list,children:Wa.map(r=>e.jsx("li",{children:e.jsx(Z,{to:r.href,className:`${_.banner_nav_link} ${r.href==t?_.banner_nav_link_active:""}`,children:r.title})},r.id))}),t.startsWith("/admin/settings/banner")&&e.jsxs("div",{className:_.settings_content_base,children:[t=="/admin/settings/banner"&&e.jsx(Ca,{}),t=="/admin/settings/banner/activeBanner"&&e.jsx(Aa,{})]})]})})}const Ua="_contacts_mxkpi_1",Ba="_contacts_content_mxkpi_4",Fa="_contacts_nav_mxkpi_7",La="_contacts_nav_list_mxkpi_10",Ma="_contacts_nav_link_mxkpi_15",za="_contacts_nav_link_active_mxkpi_30",Ta="_contacts_btn_mxkpi_34",Ra="_socials_mxkpi_55",qa="_socials_title_mxkpi_60",Va="_socials_content_mxkpi_65",Ha="_socials_content_wrap_mxkpi_70",Xa="_socials_content_wrap_input_mxkpi_75",Ka="_aboutUs_mxkpi_84",Za="_aboutUs_add_image_mxkpi_87",Ga="_aboutUs_content_mxkpi_90",Ja="_aboutUs_image_wrap_mxkpi_95",Ya="_aboutUs_download_mxkpi_104",Qa="_aboutUs_text_mxkpi_112",ei="_aboutUs_inputs_mxkpi_120",ti="_aboutUs_inputs_wrap_mxkpi_126",si="_aboutUs_inputs_wrap_title_mxkpi_130",oi="_aboutUs_inputs_wrap_input_mxkpi_136",ni="_aboutUs_inputs_wrap_textarea_mxkpi_144",ri="_aboutUs_btn_mxkpi_152",ai="_aboutUs_week_info_mxkpi_172",ii="_aboutUs_week_info_text_mxkpi_178",ci="_aboutUs_week_content_mxkpi_183",li="_aboutUs_week_wrap_mxkpi_189",_i="_aboutUs_week_wrap_colored_mxkpi_193",di="_aboutUs_week_wrap_colored_active_mxkpi_203",pi="_aboutUs_week_wrap_colored_last_mxkpi_206",ui="_aboutUs_week_wrap_day_mxkpi_209",mi="_aboutUs_week_wrap_schedule_mxkpi_215",hi="_aboutUs_week_wrap_input_mxkpi_221",bi="_custom_checkbox_mxkpi_241",gi="_custom_checkbox_input_mxkpi_247",vi="_custom_checkbox_box_mxkpi_252",xi="_custom_checkbox_box_icon_mxkpi_261",B={contacts:Ua,contacts_content:Ba,contacts_nav:Fa,contacts_nav_list:La,contacts_nav_link:Ma,contacts_nav_link_active:za,contacts_btn:Ta,socials:Ra,socials_title:qa,socials_content:Va,socials_content_wrap:Ha,socials_content_wrap_input:Xa,aboutUs:Ka,aboutUs_add_image:Za,aboutUs_content:Ga,aboutUs_image_wrap:Ja,aboutUs_download:Ya,aboutUs_text:Qa,aboutUs_inputs:ei,aboutUs_inputs_wrap:ti,aboutUs_inputs_wrap_title:si,aboutUs_inputs_wrap_input:oi,aboutUs_inputs_wrap_textarea:ni,aboutUs_btn:ri,aboutUs_week_info:ai,aboutUs_week_info_text:ii,aboutUs_week_content:ci,aboutUs_week_wrap:li,aboutUs_week_wrap_colored:_i,aboutUs_week_wrap_colored_active:di,aboutUs_week_wrap_colored_last:pi,aboutUs_week_wrap_day:ui,aboutUs_week_wrap_schedule:mi,aboutUs_week_wrap_input:hi,custom_checkbox:bi,custom_checkbox_input:gi,custom_checkbox_box:vi,custom_checkbox_box_icon:xi},fi=({temporaryImageUrl:n,setTemporaryImageUrl:t})=>{qe();const[s,r]=m.useState(null),[o,a]=m.useState(null);m.useEffect(()=>{const l=localStorage.getItem("savedLogoImageUrl");l&&(r(l),t(l))},[t]);const p=l=>{if(l.target.files&&l.target.files[0]){const i=l.target.files[0];a(i);const d=new FileReader;d.onloadend=()=>{const u=d.result;r(u),t(u),localStorage.setItem("savedLogoImageUrl",u)},d.readAsDataURL(i)}},c=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:B.aboutUs_add_image,children:[e.jsx("div",{className:B.aboutUs_image_wrap,children:s||n?e.jsx("img",{src:n||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>c(),children:e.jsx(M,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:p}),e.jsx("label",{htmlFor:"upload",className:B.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:B.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function ye(){return ye=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}return n},ye.apply(this,arguments)}const dt=(n,t)=>{const s={};for(const r in n)t.indexOf(r)===-1&&(s[r]=n[r]);return s},pt=ee.createContext(null),Le=ee.createContext(null),ji=n=>t=>ee.createElement(Le.Consumer,null,s=>ee.createElement(n,ye({parent:s},t))),ki=(n=[])=>{const[t,s]=m.useState(!1),r=m.useRef(n),o=(()=>{const p=m.useContext(pt);if(p===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return p})(),a=o.getApi();return m.useEffect(()=>{o.load().then(()=>Promise.all(r.current.map(o.loadModule))).then(()=>s(!0))},[]),t&&a?a:null},yi=()=>{},wi=["onLoad","onError","modules","apiLoader"];function ut(n,t=!1,s=[]){return r=>{const{width:o,height:a,modules:p=[],onLoad:c=yi}=r,l=ki(s.concat(p)),i=!t||!!l,d=dt(r,wi);return m.useEffect(()=>l?c(l):void 0,[l]),i?ee.createElement(n,ye({ymaps:l},d)):ee.createElement("div",{style:{width:o,height:a}})}}const Ci=typeof window<"u",Qe={lang:"ru_RU",load:"",ns:"",mode:"release"},Ni=n=>{const{version:t="2.1",enterprise:s=!1,query:r={lang:"ru_RU",load:"",ns:""},preload:o=!1,children:a}=n,p=m.useRef((c=>{const{query:l=Qe}=c,i=Date.now().toString(32),d=l.ns||"",u="__yandex-maps-api-onload__$$"+i,h="__yandex-maps-api-onerror__$$"+i,b=Ci?window:{},v={};let S;const P=()=>d?b[d]:S,W=()=>{delete b[u],delete b[h]};return{load:()=>{if(P())return Promise.resolve(S);if(v[d])return v[d];const D={onload:u,onerror:h,...Qe,...l},C=Object.keys(D).map(A=>`${A}=${D[A]}`).join("&"),y=[`https://${c.enterprise?"enterprise.":""}api-maps.yandex.ru`,c.version,"?"+C].join("/");return v[d]=new Promise((A,j)=>{b[u]=x=>{W(),x.ready(()=>{S=x,A(x)})},b[h]=x=>{W(),j(x)},(x=>new Promise(($,N)=>{const w=document.createElement("script");w.type="text/javascript",w.onload=$,w.onerror=N,w.src=x,w.async=!0,document.head.appendChild(w)}))(y).catch(b[h])}),v[d]},getApi:P,loadModule:D=>new Promise((C,y)=>{S.modules.require(D).done(A=>{A.forEach(j=>{((x,$,N,w=!1)=>{const E=typeof $=="string"?$.split("."):$.slice();let z,G=x;for(;E.length>1;)z=E.shift(),G[z]||(G[z]={}),G=G[z];const f=E[0];G[f]=w===!0&&G[f]||N})(S,D,j,!0)}),C(S)},y)})}})({version:t,enterprise:s,query:r,preload:o}));return m.useEffect(()=>{o&&p.current.load()},[p.current]),ee.createElement(pt.Provider,{value:p.current},a)},et=/^on(?=[A-Z])/;function K(n){return Object.keys(n).reduce((t,s)=>{if(et.test(s)){const r=s.replace(et,"").toLowerCase();t._events[r]=n[s]}else t[s]=n[s];return t},{_events:{}})}function we(n,t,s){typeof s=="function"&&n.events.add(t,s)}function Ce(n,t,s){typeof s=="function"&&n.events.remove(t,s)}function Se(n,t,s){Object.keys(Object.assign({},t,s)).forEach(r=>{t[r]!==s[r]&&(Ce(n,r,t[r]),we(n,r,s[r]))})}const mt=n=>"default"+n.charAt(0).toUpperCase()+n.slice(1);function ne(n,t){return n[t]!==void 0||n[mt(t)]===void 0}function I(n,t,s){return(ne(n,t)?n[t]:n[mt(t)])||s}function re(n,t,s=null){if(n!==t){if(n&&("current"in n?n.current=null:typeof n=="function"&&n(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function ht(n){const{width:t,height:s,style:r,className:o}=n;return r!==void 0||o!==void 0?Object.assign({},r&&{style:r},o&&{className:o}):{style:{width:t,height:s}}}class Ii extends ee.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:r=()=>{}}=this.props;r(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const bt=n=>({onError:t,...s})=>ee.createElement(Ii,{onError:t},ee.createElement(n,s));class De extends ee.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=De.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&De.updateObject(this.instance,t,this.props)}componentWillUnmount(){De.unmountObject(this.instance,this.props)}render(){const t=ht(this.props),s=K(this.props),r=dt(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return ee.createElement(Le.Provider,{value:this.state.instance},ee.createElement("div",ye({ref:this._getRef},t,r),this.props.children))}static mountObject(t,s,r){const{instanceRef:o,_events:a}=K(r),p=new s(t,I(r,"state"),I(r,"options"));return Object.keys(a).forEach(c=>we(p,c,a[c])),re(null,o,p),p}static updateObject(t,s,r){const{_events:o,instanceRef:a}=K(r),{_events:p,instanceRef:c}=K(s);if(ne(r,"state")){const l=I(s,"state",{}),i=I(r,"state",{});l.type!==i.type&&t.setType(i.type),l.behaviors!==i.behaviors&&(l.behaviors&&t.behaviors.disable(l.behaviors),i.behaviors&&t.behaviors.enable(i.behaviors)),i.zoom&&l.zoom!==i.zoom&&t.setZoom(i.zoom),i.center&&l.center!==i.center&&t.setCenter(i.center),i.bounds&&l.bounds!==i.bounds&&t.setBounds(i.bounds)}if(ne(r,"options")){const l=I(s,"options"),i=I(r,"options",{});l!==i&&t.options.set(i)}I(s,"width")===I(r,"width")&&I(s,"height")===I(r,"height")||t.container.fitToViewport(),Se(t,p,o),re(c,a,t)}static unmountObject(t,s){const{instanceRef:r,_events:o}=K(s);t!==null&&(Object.keys(o).forEach(a=>Ce(t,a,o[a])),t.destroy(),re(r))}}const gt=bt(ut(De,!0,["Map"]));gt.defaultProps={width:320,height:240};class Pe extends ee.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&Pe.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&Pe.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,Pe.unmountObject(this.state.instance,this.props)}render(){const t=ht(this.props);return ee.createElement("div",ye({ref:this._getRef},t))}static mountObject(t,s,r){const{instanceRef:o,_events:a}=K(r),p=I(r,"point"),c=I(r,"locateOptions"),l=I(r,"options");return new Promise((i,d)=>{s.locate(p,c).done(u=>{if(u.length>0){const h=new s.Player(t,u[0],l);re(null,o,h),Object.keys(a).forEach(b=>we(h,b,a[b])),i(h)}},d)})}static updateObject(t,s,r){const{_events:o,instanceRef:a}=K(r),{_events:p,instanceRef:c}=K(s);if(ne(r,"options")){const l=I(s,"options"),i=I(r,"options");l!==i&&t.options.set(i)}if(ne(r,"point")){const l=I(r,"point"),i=I(s,"point"),d=I(r,"locateOptions");l!==i&&t.moveTo(l,d)}Se(t,p,o),re(c,a,t)}static unmountObject(t,s){const{instanceRef:r,_events:o}=K(s);t!==null&&(Object.keys(o).forEach(a=>Ce(t,a,o[a])),re(r))}}class $e extends ee.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=$e.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&$e.updateControl(this.instance,t,this.props)}componentWillUnmount(){$e.unmountControl(this.instance,this.props)}render(){return ee.createElement(Le.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:r,parent:o,lazy:a,_events:p}=K(s),c=new t({data:I(s,"data"),options:I(s,"options"),state:I(s,"state"),mapTypes:I(s,"mapTypes"),lazy:a});if(Object.keys(p).forEach(l=>we(c,l,p[l])),o&&o.controls&&typeof o.controls.add=="function")o.controls.add(c);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${s.name}`);o.add(c)}return re(null,r,c),c}static updateControl(t,s,r){const{_events:o,instanceRef:a}=K(r),{_events:p,instanceRef:c}=K(s);if(ne(r,"options")){const l=I(s,"options"),i=I(r,"options");l!==i&&t.options.set(i)}if(ne(r,"data")){const l=I(s,"data"),i=I(r,"data");l!==i&&t.data.set(i)}if(ne(r,"state")){const l=I(s,"state"),i=I(r,"state");l!==i&&t.state.set(i)}if(ne(r,"mapTypes")){const l=I(s,"mapTypes"),i=I(r,"mapTypes");l!==i&&(t.removeAllMapTypes(),i.forEach(d=>t.addMapType(d)))}Se(t,p,o),re(c,a,t)}static unmountControl(t,s){const{instanceRef:r,parent:o,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(p=>Ce(t,p,a[p])),o.controls&&typeof o.controls.remove=="function"?o.controls.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),re(r))}}var Si=bt(ji(ut(n=>ee.createElement($e,ye({},n,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ae extends ee.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ae.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ae.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ae.unmountObject(this.instance,this.props)}render(){return ee.createElement(Le.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:r,parent:o,_events:a}=K(s),p=new t(I(s,"options"));if(Object.keys(a).forEach(c=>we(p,c,a[c])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(p);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount Clusterer");o.add(p)}return re(null,r,p),p}static updateObject(t,s,r){const{_events:o,instanceRef:a}=K(r),{_events:p,instanceRef:c}=K(s);if(ne(r,"options")){const l=I(s,"options"),i=I(r,"options");l!==i&&t.options.set(i)}Se(t,p,o),re(c,a,t)}static unmountObject(t,s){const{instanceRef:r,parent:o,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(p=>Ce(t,p,a[p])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),re(r))}}class We extends ee.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=We.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&We.updateObject(this.instance,t,this.props)}componentWillUnmount(){We.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:r,parent:o,_events:a}=K(s),p=I(s,"options",{}),c=I(s,"features",{}),l=I(s,"filter",null),i=I(s,"objects",{}),d=I(s,"clusters",{}),u=new t(p);if(u.add(c||[]),u.setFilter(l),u.objects.options.set(i),u.clusters.options.set(d),Object.keys(a).forEach(h=>we(u,h,a[h])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(u);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount ObjectManager");o.add(u)}return re(null,r,u),u}static updateObject(t,s,r){const{_events:o,instanceRef:a}=K(r),{_events:p,instanceRef:c}=K(s);if(ne(r,"options")){const l=I(s,"options"),i=I(r,"options");l!==i&&t.options.set(i)}if(ne(r,"objects")){const l=I(s,"objects"),i=I(r,"objects");l!==i&&t.objects.options.set(i)}if(ne(r,"clusters")){const l=I(s,"clusters"),i=I(r,"clusters");l!==i&&t.clusters.options.set(i)}if(ne(r,"filter")){const l=I(s,"filter"),i=I(r,"filter");l!==i&&t.setFilter(i)}if(ne(r,"features")){const l=I(s,"features"),i=I(r,"features");l!==i&&(t.remove(l),t.add(i))}Se(t,p,o),re(c,a,t)}static unmountObject(t,s){const{instanceRef:r,parent:o,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(p=>Ce(t,p,a[p])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),re(r))}}class Ee extends ee.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:r}=this.props,o=Ee.mountObject(r&&typeof r.modifyConstructor=="function"?r.modifyConstructor(s[t]):s[t],this.props);this.instance=o,this.setState({instance:o})}componentDidUpdate(t){this.instance!==null&&Ee.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ee.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:r,parent:o,_events:a}=K(s),p=new t(I(s,"geometry"),I(s,"properties"),I(s,"options"));if(Object.keys(a).forEach(c=>we(p,c,a[c])),o&&o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(p);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${s.name}`);o.add(p)}return re(null,r,p),p}static updateObject(t,s,r){const{_events:o,instanceRef:a}=K(r),{_events:p,instanceRef:c}=K(s);if(ne(r,"geometry")){const l=I(s,"geometry",{}),i=I(r,"geometry",{});Array.isArray(i)&&i!==l?Array.isArray(i[0])&&typeof i[1]=="number"?(t.geometry.setCoordinates(i[0]),t.geometry.setRadius(i[1])):t.geometry.setCoordinates(i):typeof i=="object"&&(i.coordinates!==l.coordinates&&t.geometry.setCoordinates(i.coordinates),i.radius!==l.radius&&t.geometry.setRadius(i.radius))}if(ne(r,"properties")){const l=I(s,"properties"),i=I(r,"properties");l!==i&&t.properties.set(i)}if(ne(r,"options")){const l=I(s,"options"),i=I(r,"options");l!==i&&t.options.set(i)}Se(t,p,o),re(c,a,t)}static unmountObject(t,s){const{instanceRef:r,parent:o,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(p=>Ce(t,p,a[p])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),re(r))}}const Di=()=>{const n=m.useRef(null);return e.jsx(Ni,{children:e.jsx("div",{children:e.jsx(gt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{n.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(Si,{options:{position:{bottom:20,right:20}}})})})})},$i=({temporarySocialPlatforms:n,setTemporarySocialPlatforms:t})=>{const s=(r,o)=>{t(a=>a.map(p=>p.id===o?{...p,text:r}:p))};return e.jsxs("div",{className:B.aboutUs_inputs,children:[n.map(r=>e.jsx("div",{className:B.aboutUs_inputs_wrap,children:r.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:B.aboutUs_inputs_wrap_title,children:r.title}),e.jsx("textarea",{className:B.aboutUs_inputs_wrap_textarea,onChange:o=>s(o.target.value,r.id),value:r.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:B.aboutUs_inputs_wrap_title,children:r.title}),e.jsx("input",{className:B.aboutUs_inputs_wrap_input,type:r.type==="isPhone"?"number":r.type==="isEmail"?"email":"text",onChange:o=>s(o.target.value,r.id),value:r.text})]})},r.id)),e.jsx(Di,{})]})},Oi=({id:n,checked:t,onChange:s})=>{const r=o=>{s(n,o.target.checked)};return e.jsxs("label",{className:B.custom_checkbox,children:[e.jsx("input",{className:B.custom_checkbox_input,type:"checkbox",checked:t,onChange:r}),e.jsx("span",{className:B.custom_checkbox_box,children:e.jsx(M,{name:"CheckIcon",width:18,height:18,className:B.custom_checkbox_box_icon})})]})},Pi=({temporaryContactsSchedule:n,setTemporaryContactsSchedule:t})=>{const s=c=>{const l=c.replace(/\D/g,"");return l.length<=2?l:`${l.slice(0,2)}:${l.slice(2,4)}`},r=(c,l,i,d)=>{if(!d.isActive)return;const u=s(i);t(h=>h.map(b=>b.id===c?{...b,workHours:{...b.workHours,[l]:u}}:b))},o=(c,l)=>{t(i=>i.map(d=>d.id===c?{...d,isActive:l,workHours:l?d.workHours:{start:"",end:""}}:d))},a=m.useRef({}),p=m.useRef({});return m.useEffect(()=>{n.forEach(c=>{var l;c.isActive&&a.current[c.id]&&!p.current[c.id]&&((l=a.current[c.id])==null||l.focus(),p.current[c.id]=!0)})},[n]),e.jsxs("div",{className:B.aboutUs_week,children:[e.jsxs("div",{className:B.aboutUs_week_info,children:[e.jsx("span",{className:B.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:B.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:B.aboutUs_week_content,children:n.map((c,l)=>{const i=l===n.length-1,d=i&&c.isActive?B.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:B.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${B.aboutUs_week_wrap_colored} 
                  ${c.isActive?B.aboutUs_week_wrap_colored_active:""} 
                  ${i?B.aboutUs_week_wrap_colored_last:""} 
                  ${d}
                `,children:[e.jsx("span",{className:B.aboutUs_week_wrap_day,children:c.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:B.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:u=>a.current[c.id]=u,className:B.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>r(c.id,"start",u.target.value,c),value:c.workHours.start}),e.jsx("span",{className:B.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:B.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>r(c.id,"end",u.target.value,c),value:c.workHours.end})]})]}),e.jsx(Oi,{id:c.id,checked:c.isActive,onChange:o})]},c.id)})})]})},Ai=()=>{const{contactsFormInputsArr:n,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:r,setImageUrlLogo:o}=qe(),[a,p]=m.useState(n),[c,l]=m.useState(""),[i,d]=m.useState(s),u=()=>{t(a),o(c);const h=i.map(b=>b.workHours&&b.workHours.start===""&&b.workHours.end===""?{...b,isActive:!1}:b);r(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:B.aboutUs,children:[e.jsx(fi,{temporaryImageUrl:c,setTemporaryImageUrl:l}),e.jsxs("div",{className:B.aboutUs_content,children:[e.jsx($i,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:p}),e.jsx(Pi,{temporaryContactsSchedule:i,setTemporaryContactsSchedule:d})]})]}),e.jsx("button",{className:B.aboutUs_btn,onClick:u,children:"Сохранить"})]})};function Wi({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:o=500,scale:a=1.1,status:p=!1,disabled:c=!1}){const l={width:`${n}px`,height:`${n/2-n/20}px`,background:p?s:r,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},i={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${p?s:r}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${a}) translateX(${p?"110%":"0"})`};return e.jsx("div",{style:l,children:e.jsx("div",{style:i})})}const Ei=({temporarySocialPlatforms:n,setTemporarySocialPlatforms:t})=>{const s=(o,a)=>{t(p=>p.map(c=>c.id===o?{...c,url:a,isActive:a===""?!1:c.isActive}:c))},r=(o,a)=>{o.url!==""&&t(p=>p.map(c=>c.id===a?{...c,isActive:!c.isActive,url:o.isActive?"":o.url}:c))};return e.jsx(e.Fragment,{children:n.map(o=>e.jsxs("div",{className:B.socials_content_wrap,children:[e.jsx("img",{src:o.icon,alt:o.alt}),e.jsx("input",{type:"text",className:B.socials_content_wrap_input,value:o.url||"",onChange:a=>s(o.id,a.target.value)}),e.jsx("div",{onClick:()=>r(o,o.id),children:e.jsx(Wi,{status:o.isActive})})]},o.id))})},Ui=()=>{const{socialPlatforms:n,setSocialPlatforms:t}=qe();async function s(){const p=ke.get("multi-store");try{const c=await oe.post("web-credentials",{multiStoreId:Number(p)});c.data&&console.log("response-data",c.data)}catch(c){console.log("error",c)}}m.useEffect(()=>{s()},[]);const[r,o]=m.useState(n);async function a(){t(r);const p=ke.get("multi-store"),c=r.reduce((l,i)=>(l[i.name]={url:i.url,isActive:i.isActive},l),{});try{const l=await oe.patch(`web-credentials/${p}`,{social:c});l.data&&console.log("response-data",l.data)}catch(l){console.log("error",l)}}return e.jsxs("div",{className:B.socials,children:[e.jsx("h3",{className:B.socials_title,children:"Соц-сети"}),e.jsx("div",{className:B.socials_content,children:e.jsx(Ei,{temporarySocialPlatforms:r,setTemporarySocialPlatforms:o})}),e.jsx("button",{className:B.contacts_btn,onClick:a,children:"Сохранить"})]})},Bi=[{id:se(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:se(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function Fi(){const t=ae().pathname;return e.jsx("div",{className:B.contacts,children:e.jsxs("div",{className:B.contacts_content,children:[e.jsx("div",{className:B.contacts_nav,children:e.jsx("ul",{className:B.contacts_nav_list,children:Bi.map(s=>e.jsx(Z,{to:s.href,className:`${B.contacts_nav_link} ${s.href==t?B.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(Ui,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Ai,{})]})})}const Li="_radioLabel_dhgqa_1",Mi="_radioLabel_selected_dhgqa_7",zi="_radioLabel_radio_dhgqa_7",Ti="_radioLabel_input_dhgqa_15",Ri="_radioLabel_text_dhgqa_28",qi="_storeBtn_dhgqa_34",Vi="_storeBtn_active_dhgqa_48",Hi="_deliveryInput_text_dhgqa_53",Xi="_deliveryInput_wrap_dhgqa_58",Ki="_deliveryInput_wrap_input_dhgqa_66",Zi="_version3_dhgqa_74",Gi="_version3_title_dhgqa_79",Ji="_version3_block_dhgqa_85",Yi="_version3_block_top_dhgqa_90",Qi="_version3_block_top_title_dhgqa_102",ec="_version3_block_top_arrow_dhgqa_106",tc="_version3_block_top_arrow_active_dhgqa_119",sc="_version3_block_dropdown_dhgqa_122",oc="_version3_block_dropdown_item_dhgqa_133",nc="_version3_block_dropdown_open_dhgqa_149",rc="_version3_block_onOff_dhgqa_173",ac="_version3_block_delivery_dhgqa_173",ic="_version3_pickedWrap_dhgqa_178",cc="_version3_pickedWrap_item_dhgqa_189",X={radioLabel:Li,radioLabel_selected:Mi,radioLabel_radio:zi,radioLabel_input:Ti,radioLabel_text:Ri,storeBtn:qi,storeBtn_active:Vi,deliveryInput_text:Hi,deliveryInput_wrap:Xi,deliveryInput_wrap_input:Ki,version3:Zi,version3_title:Gi,version3_block:Ji,version3_block_top:Yi,version3_block_top_title:Qi,version3_block_top_arrow:ec,version3_block_top_arrow_active:tc,version3_block_dropdown:sc,version3_block_dropdown_item:oc,version3_block_dropdown_open:nc,version3_block_onOff:rc,version3_block_delivery:ac,version3_pickedWrap:ic,version3_pickedWrap_item:cc},me=({id:n,value:t,checked:s,onChange:r,label:o})=>e.jsxs("label",{className:`${X.radioLabel} ${s?X.radioLabel_selected:""}`,children:[e.jsx("input",{type:"radio",id:n,value:t,checked:s,onChange:r,className:X.radioLabel_input}),e.jsx("span",{className:X.radioLabel_radio}),e.jsx("span",{className:X.radioLabel_text,children:o})]}),ve=wt()(Ct(Nt(n=>({deliveryStoresArr:[{id:se(),name:"Магазин1"},{id:se(),name:"Магазин2"},{id:se(),name:"Магазин3"}],setDeliveryStoresArr:t=>n({deliveryStoresArr:t}),citiesDelivery:[{id:se(),city:"Ташкент"},{id:se(),city:"Бухара"},{id:se(),city:"Самарканд"}],setCitiesDelivery:t=>n({citiesDelivery:t}),settingsDeliveryAll:[],setSettingsDeliveryAll:t=>n({settingsDeliveryAll:t}),selectedOption:"",setSelectedOption:t=>n({selectedOption:t}),selectedOrganizationOption:"",setSelectedOrganizationOption:t=>n({selectedOrganizationOption:t}),selectedStoreOption:"",setSelectedStoreOption:t=>n({selectedStoreOption:t}),lastLocation:"",setLastLocation:t=>n({lastLocation:t}),pickedCitiesFreeDelivery:[],setPickedCitiesFreeDelivery:t=>n({pickedCitiesFreeDelivery:t}),inputSumFree:"",setInputSumFree:t=>n({inputSumFree:t}),pickedCitiesFixedDelivery:[],setPickedCitiesFixedDelivery:t=>n({pickedCitiesFixedDelivery:t}),inputSumFixed:"",setInputSumFixed:t=>n({inputSumFixed:t}),inputFixedPrice:"",setInputFixedPrice:t=>n({inputFixedPrice:t}),pickedCitiesFlexibleDelivery:[],setPickedCitiesFlexibleDelivery:t=>n({pickedCitiesFlexibleDelivery:t}),inputSumFlexible:"",setInputSumFlexible:t=>n({inputSumFlexible:t}),inputFirstKm:"",setInputFirstKm:t=>n({inputFirstKm:t}),inputLastKm:"",setInputLastKm:t=>n({inputLastKm:t}),inputExtraKm:"",setInputExtraKm:t=>n({inputExtraKm:t}),openCountriesDropdown:!1,setOpenCountriesDropdown:t=>n({openCountriesDropdown:t})}),{name:"delivery-store",partialize:n=>({...n})}))),Ve=(n,t)=>{const{setLastLocation:s}=ve(),r=Ue();return ae(),{handleChange:m.useCallback(a=>{const p=a.target.value;n(p);const c=t[p];c&&r(c),s(c)},[r,t,n])}},lc="_delivery_ud2pv_1",_c="_delivery_title_ud2pv_5",dc="_delivery_main_ud2pv_10",pc="_delivery_btn_ud2pv_16",uc="_deliveryOrg_ud2pv_28",mc="_deliveryOrg_radios_ud2pv_31",hc="_storeDelivery_ud2pv_38",bc="_storeDelivery_stores_ud2pv_41",gc="_storeDelivery_radios_ud2pv_47",le={delivery:lc,delivery_title:_c,delivery_main:dc,delivery_btn:pc,deliveryOrg:uc,deliveryOrg_radios:mc,storeDelivery:hc,storeDelivery_stores:bc,storeDelivery_radios:gc},Te=({text:n,placeholder:t,value:s,setValue:r})=>e.jsxs("div",{className:X.deliveryInput,children:[e.jsx("p",{className:X.deliveryInput_text,children:n}),e.jsxs("div",{className:X.deliveryInput_wrap,children:[e.jsx("input",{className:X.deliveryInput_wrap_input,type:"number",placeholder:t,value:s,onChange:o=>r(o.target.value)}),e.jsx("span",{className:X.deliveryInput_wrap_input_text,children:"UZS"})]})]});function He({citiesArrDelivery:n,setCitiesArrDelivery:t,pickedCities:s,setPickedCities:r}){const{openCountriesDropdown:o,setOpenCountriesDropdown:a}=ve(),p=l=>{s.some(i=>i.id===l.id)||r([...s,l]),a(!1)},c=(l,i)=>{i.stopPropagation(),r(s.filter(d=>d.id!==l.id))};return e.jsxs("div",{className:X.version3,children:[e.jsx("span",{className:X.version3_title,children:"Города"}),e.jsxs("div",{className:X.version3_block,children:[e.jsxs("div",{className:`${s.length>0?X.version3_pickedWrap:X.version3_block_top}`,onClick:()=>a(!o),children:[s.length>0?s.map(l=>e.jsxs("div",{className:X.version3_pickedWrap_item,children:[e.jsx("h2",{className:X.version3_block_top_title,children:l.city}),e.jsx("button",{onClick:i=>c(l,i),children:e.jsx(M,{name:"XMarkIcon",width:15})})]},l.id)):e.jsx("h2",{className:X.version3_block_top_title,children:"Выберите город"}),e.jsx("button",{className:X.version3_block_top_btn,onClick:()=>a(!o),children:e.jsx("div",{className:`${X.version3_block_top_arrow} ${o&&n.length>0?X.version3_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${X.version3_block_dropdown} ${o&&n.length>0?X.version3_block_dropdown_open:""}`,children:n==null?void 0:n.map(l=>e.jsx("span",{className:X.version3_block_dropdown_item,onClick:()=>p(l),children:l.city},l.id))})]})]})}const vc=()=>{const{inputSumFree:n,setInputSumFree:t,citiesDelivery:s,setCitiesDelivery:r,pickedCitiesFreeDelivery:o,setPickedCitiesFreeDelivery:a,deliveryStoresArr:p,setDeliveryStoresArr:c,setInputSumFixed:l,setInputFixedPrice:i,setPickedCitiesFixedDelivery:d,settingsDeliveryAll:u,setSettingsDeliveryAll:h,setOpenCountriesDropdown:b}=ve(),[v,S]=m.useState(o),[P,W]=m.useState(n);m.useEffect(()=>{b(!1)},[]);const D=()=>{h([]),l(""),i(""),d([]),a(v),t(P),n.length!==0&&o.length!==0?(h([{stores:p,minPrice:n}]),console.log("settingsDeliveryAll",u)):h([]),b(!1)};return e.jsxs("div",{children:[e.jsx(Te,{text:"Минимальная сумма заказа",placeholder:"0",value:P,setValue:W}),e.jsx(He,{citiesArrDelivery:s,setCitiesArrDelivery:r,pickedCities:v,setPickedCities:S}),e.jsx("button",{className:le.delivery_btn,onClick:()=>D(),children:"Сохранить"})]})},xc=()=>{const{inputSumFixed:n,setInputSumFixed:t,inputFixedPrice:s,setInputFixedPrice:r,citiesDelivery:o,setCitiesDelivery:a,pickedCitiesFixedDelivery:p,setPickedCitiesFixedDelivery:c,deliveryStoresArr:l,setPickedCitiesFreeDelivery:i,setInputSumFree:d,setSettingsDeliveryAll:u,settingsDeliveryAll:h,setOpenCountriesDropdown:b}=ve(),[v,S]=m.useState(p),[P,W]=m.useState(n),[D,C]=m.useState(s);m.useEffect(()=>{b(!1)},[]);const y=()=>{u([]),i([]),d(""),c(v),t(P),r(D),n.length!==0&&p.length!==0&&s.length!==0?(u([{stores:l,minPrice:n,fixedPrise:s}]),console.log("settingsDeliveryAll",h)):u([]),b(!1)};return e.jsxs("div",{children:[e.jsx(Te,{text:"Минимальная сумма заказа",placeholder:"0",value:P,setValue:W}),e.jsx(Te,{text:"Цена за доставку",placeholder:"0",value:D,setValue:C}),e.jsx(He,{citiesArrDelivery:o,setCitiesArrDelivery:a,pickedCities:v,setPickedCities:S}),e.jsx("button",{className:le.delivery_btn,onClick:()=>y(),children:"Сохранить"})]})},fc=()=>e.jsxs("div",{children:[e.jsx("span",{children:"Первые"}),e.jsx("input",{type:"number"}),e.jsx("span",{children:"по"}),e.jsx("input",{type:"number"})]}),jc=()=>{const{citiesDelivery:n,setCitiesDelivery:t,pickedCitiesFlexibleDelivery:s,setPickedCitiesFlexibleDelivery:r}=ve(),[o,a]=m.useState(s);return e.jsxs("div",{children:[e.jsx(fc,{}),e.jsx(He,{citiesArrDelivery:n,setCitiesArrDelivery:t,pickedCities:o,setPickedCities:a}),e.jsx("button",{className:le.delivery_btn,children:"Сохранить"})]})},kc=()=>e.jsx("div",{children:"OwnVersionDelivery"}),yc=()=>{const{selectedOrganizationOption:n,lastLocation:t,setSelectedOrganizationOption:s}=ve(),r=ae(),o={freeDelivery:"/admin/settings/delivery/forOrganization/freeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forOrganization/fixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forOrganization/flexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forOrganization/ownVersionDelivery"},{handleChange:a}=Ve(s,o);return e.jsxs("div",{className:le.deliveryOrg,children:[e.jsx("h4",{className:le.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:le.deliveryOrg_radios,children:[e.jsx(me,{id:"freeDelivery",value:"freeDelivery",checked:n==="freeDelivery",onChange:a,label:"Бесплатная доставка"}),e.jsx(me,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:n==="fixedPriceDelivery",onChange:a,label:"Фиксированная цена"}),e.jsx(me,{id:"flexibleDelivery",value:"flexibleDelivery",checked:n==="flexibleDelivery",onChange:a,label:"Гибкая доставка"}),e.jsx(me,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:n==="ownVersionDelivery",onChange:a,label:"Свой вариант"})]}),e.jsxs("div",{children:[r.pathname==="/admin/settings/delivery/forOrganization/freeDelivery"&&e.jsx(vc,{}),r.pathname==="/admin/settings/delivery/forOrganization/fixedPriceDelivery"&&e.jsx(xc,{}),r.pathname==="/admin/settings/delivery/forOrganization/flexibleDelivery"&&e.jsx(jc,{}),r.pathname==="/admin/settings/delivery/forOrganization/ownVersionDelivery"&&e.jsx(kc,{})]})]})},wc=({text:n,isActive:t,onClick:s})=>e.jsx("button",{className:`${X.storeBtn} ${t?X.storeBtn_active:""}`,onClick:s,children:n}),Cc=()=>e.jsx("div",{children:"StoreFreeDelivery"}),Nc=()=>e.jsx("div",{children:"StoreFixedPriceDelivery"}),Ic=()=>e.jsx("div",{children:"StoreFlexibleDelivery"}),Sc=()=>e.jsx("div",{children:"StoreOwnVersionDelivery"}),Dc=()=>{const{deliveryStoresArr:n,selectedStoreOption:t,lastLocation:s,setSelectedStoreOption:r}=ve(),[o,a]=m.useState(null),p=ae(),c={freeDelivery:"/admin/settings/delivery/forStore/storeFreeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forStore/storeFixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forStore/storeFlexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forStore/storeOwnVersionDelivery"},{handleChange:l}=Ve(r,c),i=d=>{a(d),p.pathname="/admin/settings/delivery/forStore/storeFreeDelivery",r("freeDelivery")};return e.jsxs("div",{className:le.storeDelivery,children:[e.jsx("h4",{className:le.delivery_title,children:"Выберите магазин "}),e.jsx("div",{className:le.storeDelivery_stores,children:n.map(d=>e.jsx(wc,{text:d.name,isActive:d.id===o,onClick:()=>i(d.id)},d.id))}),e.jsxs("div",{children:[e.jsx("h4",{className:le.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:le.storeDelivery_radios,children:[e.jsx(me,{id:"freeDelivery",value:"freeDelivery",checked:t==="freeDelivery",onChange:l,label:"Бесплатная доставка"}),e.jsx(me,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:t==="fixedPriceDelivery",onChange:l,label:"Фиксированная цена"}),e.jsx(me,{id:"flexibleDelivery",value:"flexibleDelivery",checked:t==="flexibleDelivery",onChange:l,label:"Гибкая доставка"}),e.jsx(me,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:t==="ownVersionDelivery",onChange:l,label:"Свой вариант"})]})]}),e.jsxs("div",{children:[p.pathname==="/admin/settings/delivery/forStore/storeFreeDelivery"&&e.jsx(Cc,{}),p.pathname==="/admin/settings/delivery/forStore/storeFixedPriceDelivery"&&e.jsx(Nc,{}),p.pathname==="/admin/settings/delivery/forStore/storeFlexibleDelivery"&&e.jsx(Ic,{}),p.pathname==="/admin/settings/delivery/forStore/storeOwnVersionDelivery"&&e.jsx(Sc,{})]})]})},$c=()=>{const{selectedOption:n,setSelectedOption:t,lastLocation:s}=ve(),r=ae(),o=Ue(),a={forOrganization:"/admin/settings/delivery/forOrganization",forStore:"/admin/settings/delivery/forStore"},{handleChange:p}=Ve(t,a);return m.useEffect(()=>{o(s)},[s]),e.jsxs("div",{className:le.delivery,children:[e.jsx("h3",{className:le.delivery_title,children:"Выберите версию настройки доставки"}),e.jsxs("div",{className:le.delivery_main,children:[e.jsx(me,{id:"forOrganization",value:"forOrganization",checked:n==="forOrganization",onChange:p,label:"Для организации"}),e.jsx(me,{id:"forStore",value:"forStore",checked:n==="forStore",onChange:p,label:"Для каждого магазина"})]}),r.pathname.startsWith("/admin/settings/delivery/forOrganization")&&e.jsx(yc,{}),r.pathname.startsWith("/admin/settings/delivery/forStore")&&e.jsx(Dc,{})]})},Oc=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"}];function Pc(){const t=ae().pathname;return e.jsx("div",{className:_.settings,children:e.jsxs("div",{className:_.settings_content,children:[e.jsx("div",{className:_.settings_content_top,children:e.jsx("ul",{className:_.settings_tools,children:Oc.map(s=>e.jsx("li",{children:e.jsx(Z,{to:s.href,className:`${_.settings_tools_link} ${t.startsWith(s.href)?_.settings_tools_link_active:""}`,children:s.label})},s.id))})}),t=="/admin/settings/modules"&&e.jsx(Wn,{}),t=="/admin/settings/templates"&&e.jsx(En,{}),t=="/admin/settings/categories"&&e.jsx(_r,{}),t.startsWith("/admin/settings/banner")&&e.jsx(Ea,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(Fi,{}),t.startsWith("/admin/settings/delivery")&&e.jsx($c,{})]})})}const tt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function Ac(){const[n,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[o,a]=m.useState({status:!1,message:""}),[p,c]=m.useState([]);m.useEffect(()=>{n||(c([]),a({status:!1,message:""}))},[n]);async function l(i){i.preventDefault();const d=ke.get("multi-store");try{const h=await(await oe.get(`nomenclatures?multiStoreId=${d}&name=${n}&page=${s}&perPage=${r}`)).data.data;h.length>0?(c([...h]),a({status:!1,message:""})):(c([]),a({status:!0,message:"Совпадений не найдено"}))}catch(u){console.log("Ошибка произошла при поиске продуктов на складе",u)}}return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:i=>l(i),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:n}),e.jsx(M,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:tt.map(i=>e.jsx("th",{className:_.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:p==null?void 0:p.map(i=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[tt.map(d=>{var u;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[d.title=="Наименование"?e.jsx("span",{children:(u=i==null?void 0:i.name)==null?void 0:u.ru}):"",d.title=="Штрих-код"?e.jsx("span",{children:i.mxik}):"",d.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},d.id)}),!i.hasWebNomenclature&&e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsx(Z,{to:`/admin/stock-product/${i.id}`,className:_.addingWrapper_tbody_add,children:"Добавить"})})]},i==null?void 0:i.mxik))})]}),o.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:o.message})]})}const st=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function Wc(){const[n,t]=m.useState(""),[s,r]=m.useState({status:!1,message:""}),[o,a]=m.useState([]),[p]=m.useState(1),[c]=m.useState(10);m.useEffect(()=>{n||(a([]),r({status:!1,message:""}))},[n]);async function l(){const h=ke.get("multi-store");try{console.log(222,"searchText",n);const v=(await oe.get(`web-nomenclatures?multiStoreId=${h}&title=${n}&page=${p}&perPage=${c}`)).data.data;console.log(999,"data",v),v.length>0?(a([...v]),r({status:!1,message:""})):(a([]),r({status:!0,message:"Совпадений не найдено"}))}catch(b){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",b)}}async function i(h,b){h.preventDefault();try{const v=await oe.patch(`web-nomenclatures/${b}`,{isActive:!1});t(""),a([]),console.log("Продукт успешно отключен с веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}async function d(h,b){h.preventDefault();try{const v=await oe.patch(`web-nomenclatures/${b}`,{isActive:!0});t(""),a([]),console.log("Продукт успешно включен на веб сайта",v)}catch(v){console.log("Ошибка произошла при удалении продукта с вебсайта",v)}}const u=async h=>{h.preventDefault(),l()};return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:h=>u(h),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:h=>t(h.target.value),value:n}),e.jsx(M,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsxs("tr",{className:_.addingWrapper_thead_tr,children:[st.map(h=>e.jsx("th",{className:_.addingWrapper_thead_th,children:h.title},h.id)),e.jsx("th",{className:_.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:o==null?void 0:o.map(h=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[st.map(b=>e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[b.title=="Наименование"?e.jsx("span",{children:h.title}):"",b.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},b.id)),e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsxs("div",{className:_.addingWrapper_tbody_buttons,children:[h.isActive&&e.jsx(Z,{to:"#",className:_.addingWrapper_tbody_del,onClick:b=>i(b,h.id),children:"Отключить"}),!h.isActive&&e.jsx(Z,{to:"#",className:_.addingWrapper_tbody_del,onClick:b=>d(b,h.id),children:"Включить"}),e.jsx(Z,{to:`/admin/website-product/${h.id}`,className:_.addingWrapper_tbody_add,children:"Изменить"})]})})]},h==null?void 0:h.id))})]}),s.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:s.message})]})}const Ec=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function Uc(){const t=ae().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:Ec.map(s=>e.jsx(Z,{to:s.href,className:`${_.products_btn} ${s.href==t?_.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(Ac,{}),t=="/admin/product/adding/website"&&e.jsx(Wc,{})]})}const Bc=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function Fc(){const t=ae().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:Bc.map(s=>e.jsx(Z,{to:s.href,className:`${_.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?_.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(Uc,{})]})}const Lc="_user_title_1uizv_1",Mc="_user_list_1uizv_6",zc="_user_list_link_1uizv_12",Tc="_user_list_link_active_1uizv_26",Rc="_user_form_1uizv_30",qc="_user_form_btn_1uizv_35",Vc="_user_form_wrap_1uizv_51",Hc="_user_form_input_1uizv_57",Xc="_user_form_icon_1uizv_65",Kc="_user_table_1uizv_68",Zc="_user_table_tbody_1uizv_71",Gc="_user_table_tr_1uizv_74",Jc="_user_table_th_1uizv_77",Yc="_user_table_td_1uizv_85",Qc="_user_table_btns_1uizv_89",el="_user_table_btn_1uizv_89",tl="_user_table_btn_blocked_1uizv_107",sl="_modal_1uizv_111",ol="_modal_active_1uizv_120",nl="_modal_wrap_1uizv_123",rl="_modal_wrap_header_1uizv_131",al="_modal_wrap_stores_1uizv_143",il="_modal_wrap_stores_text_1uizv_165",cl="_modal_btns_1uizv_169",ll="_modal_btn_1uizv_169",_l="_modal_content_1uizv_193",dl="_modal_content_text_1uizv_197",pl="_versions_1uizv_206",ul="_versions_block_1uizv_211",ml="_versions_block_top_1uizv_216",hl="_versions_block_top_title_1uizv_226",bl="_versions_block_top_arrow_1uizv_230",gl="_versions_block_top_arrow_active_1uizv_239",vl="_versions_block_dropdown_1uizv_242",xl="_versions_block_dropdown_item_1uizv_257",fl="_versions_block_dropdown_open_1uizv_268",jl="_shop_header_1uizv_275",kl="_shop_header_title_1uizv_282",O={user_title:Lc,user_list:Mc,user_list_link:zc,user_list_link_active:Tc,user_form:Rc,user_form_btn:qc,user_form_wrap:Vc,user_form_input:Hc,user_form_icon:Xc,user_table:Kc,user_table_tbody:Zc,user_table_tr:Gc,user_table_th:Jc,user_table_td:Yc,user_table_btns:Qc,user_table_btn:el,user_table_btn_blocked:tl,modal:sl,modal_active:ol,modal_wrap:nl,modal_wrap_header:rl,modal_wrap_stores:al,modal_wrap_stores_text:il,modal_btns:cl,modal_btn:ll,modal_content:_l,modal_content_text:dl,versions:pl,versions_block:ul,versions_block_top:ml,versions_block_top_title:hl,versions_block_top_arrow:bl,versions_block_top_arrow_active:gl,versions_block_dropdown:vl,versions_block_dropdown_item:xl,versions_block_dropdown_open:fl,shop_header:jl,shop_header_title:kl},Xe=({headers:n})=>e.jsx("thead",{className:O.user_table_thead,children:e.jsx("tr",{className:O.user_table_tr,children:n.map(t=>e.jsx("th",{className:O.user_table_th,children:t.title},t.id))})}),Ke=()=>{const[n,t]=m.useState(""),{setUserSearch:s}=pe(),r=o=>{o.preventDefault(),s(n)};return m.useEffect(()=>{n==""&&s("")},[n]),e.jsxs("form",{action:"",className:O.user_form,children:[e.jsxs("div",{className:O.user_form_wrap,children:[e.jsx("input",{type:"text",className:O.user_form_input,placeholder:"Поиск пользователей",onChange:o=>t(o.target.value),value:n}),e.jsx(M,{className:O.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:O.user_form_btn,onClick:o=>r(o),children:"Найти"})]})},Ze=({arr:n,showStore:t})=>{const{usersList:s,userSearch:r,openModalAdmin:o,openAppointUser:a,shopListAdmin:p,setOpenAppointUser:c,setOpenModalAdmin:l,setUsersList:i,setEditUserAdmin:d,setShopListDropdownAdmin:u,setCloseBlock:h,setFilteredShopListAdmin:b}=pe(),S=ae().pathname,[P,W]=m.useState([]);m.useEffect(()=>{let j=n;S==="/clients"?j=n.filter(x=>x.isUser):S==="/employees"&&(j=n.filter(x=>!x.isUser)),j=j==null?void 0:j.filter(x=>x.name.toLowerCase().includes(r.toLowerCase())),W(j)},[r,s,n,S]);const D=j=>{const x=s.map($=>$.id===j?{...$,isBlocked:!$.isBlocked}:$);i(x)},C=j=>{l(!0),h(!0);const x=s.find(w=>w.id==j),$=[{id:se(),title:"Магазин 1",order:1},{id:se(),title:"Магазин 2",order:2},{id:se(),title:"Магазин 3",order:3}],N=$.filter(w=>!(x!=null&&x.shopList.some(E=>E.title===w.title)));console.log("editUser",x),console.log("shopListAdminArr",$),x&&(u(x.shopList),d(x),b(N))},y=j=>{c(!0),h(!0),u([]),b(p);const x=s.find($=>$.id==j);x&&d(x)},A=o||a;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:O.user_table_tbody,children:P.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:O.user_table_td,children:j.name}),e.jsx("td",{className:O.user_table_td,children:t?j.shopList.map(x=>e.jsxs("p",{children:[x.title," ",`(${x.position})`]},x.id)):e.jsx("p",{children:j.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:O.user_table_td,children:t?"Админ 1":j.registerDate}),e.jsx("td",{className:O.user_table_btns,children:j!=null&&j.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${O.user_table_btn} ${j.isBlocked?O.user_table_btn_blocked:""}`,onClick:()=>D(j.id),children:j.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:O.user_table_btn,onClick:()=>y(j.id),disabled:A,children:"Назначить"})]}):e.jsx("button",{className:O.user_table_btn,onClick:()=>C(j.id),style:{background:"#B5FFC7"},disabled:A,children:"Изменить"})})]},j.id))})})};function ot({color:n="black",className:t,header:s,isEnabled:r,dropdownItem:o,margin:a,versionList:p,closeBlock:c}){const{shopListAdmin:l,shopListDropdownAdmin:i,filteredShopListAdmin:d,setShopListDropdownAdmin:u,setShopListAdmin:h}=pe(),[b,v]=m.useState("Выберете должность"),[S,P]=m.useState("Выберете магазин"),[W,D]=m.useState(!1);m.useEffect(()=>{o!=null&&o.position?v(o.position):v("Выберете должность")},[o==null?void 0:o.position]),m.useEffect(()=>{c||D(!1)},[c]);const C=(x,$)=>{if(o){v(x.title);const N=i.filter(E=>E.title==o.title),w=i.findIndex(E=>E.title==o.title);N[0].position=x.title,i.splice(w,1,N[0]),u(i)}else P(x.title);if(r&&!i.some(N=>N.title==x.title)){v("Выберете должность");const N={...x,originalIndex:$};u([...i,N]),h(d.filter((w,E)=>E!==$))}D(!1)},y=x=>{const $=i.filter(N=>N.id!==x.id);if(u($),x.originalIndex!==void 0){const N=[...l];N.splice(x.originalIndex,0,x),h(N)}else{const N=[...d,x].sort((w,E)=>w.order!==void 0&&E.order!==void 0?w.order-E.order:0);h(N),console.log("arr",N)}},A=()=>{D(!W)};function j(x,$){return x.order&&$.order&&(x==null?void 0:x.order)>($==null?void 0:$.order)?1:-1}return e.jsx("div",{className:t??O.versions,style:{marginBottom:a},children:e.jsxs("div",{className:O.versions_block,children:[s&&e.jsxs("div",{className:O.shop_header,children:[e.jsx("p",{className:O.shop_header_title,children:o==null?void 0:o.title}),e.jsx("button",{onClick:()=>o&&y(o),children:e.jsx(M,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:O.versions_block_top,children:[e.jsx("h2",{className:O.versions_block_top_title,style:{color:n},children:o?b:S}),e.jsx("button",{className:O.versions_block_top_btn,onClick:()=>A(),children:e.jsx("div",{className:`${O.versions_block_top_arrow} ${W?O.versions_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${O.versions_block_dropdown} ${W?O.versions_block_dropdown_open:""}`,children:p==null?void 0:p.sort(j).map((x,$)=>e.jsx("span",{className:O.versions_block_dropdown_item,onClick:()=>C(x,$),children:x.title},$))})]})})}const Ge=()=>{const{currentShopModal:n,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:r,openModalAdmin:o,editUserAdmin:a,shopListAdmin:p,usersList:c,openAppointUser:l,closeBlock:i,filteredShopListAdmin:d,setCurrentShopModal:u,setShopListPositionAdmin:h,setCurrentShopPosition:b,setOpenModalAdmin:v,setShopListAdmin:S,setUsersList:P,setOpenAppointUser:W,setCloseBlock:D,setFilteredShopListAdmin:C}=pe();m.useEffect(()=>{},[d]);const y=()=>{const N=c.findIndex(w=>w.id==(a==null?void 0:a.id));a&&t.every(w=>"position"in w)&&(a.shopList=t,c.splice(N,1,a),P(c),S(p),console.log("filteredShopListAdmin",d)),console.log("shopListAdmin",p),x(),t.length==0&&A()},A=()=>{if(a){a.isUser=!0,a.isEmployes=!1,a.shopList=[];const N={id:se(),title:"",position:"пользователь"};a.shopList=[{...N}]}x()},j=()=>{const N=c.findIndex(w=>w.id==(a==null?void 0:a.id));if(a&&(a.shopList=t,c.splice(N,1,a),a.isUser=!1,a.isEmployes=!0,P(c),W(!1),!(a!=null&&a.shopList.some(w=>"position"in w)))){a.isUser=!0,a.shopList=[];const w={id:se(),title:"",position:"пользователь"};a.shopList=[{...w}]}},x=()=>{S(p),C([]),v(!1),W(!1),D(!1),console.log("close modal")},$=m.useRef(null);return m.useEffect(()=>{const N=w=>{var E;$.current&&!((E=$==null?void 0:$.current)!=null&&E.contains(w.target))&&x()};return o||l?document.addEventListener("mousedown",N):document.removeEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[o,l]),e.jsx("div",{className:`${O.modal} ${o?O.modal_active:""} ${l?O.modal_active:""}`,children:e.jsxs("div",{ref:$,className:O.modal_wrap,children:[e.jsxs("div",{className:O.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>x(),children:e.jsx(M,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:O.modal_content,children:[e.jsxs("p",{className:O.modal_content_text,children:["Логин: ",a==null?void 0:a.name]}),e.jsxs("p",{className:O.modal_content_text,children:["Статус:",a==null?void 0:a.shopList.map(N=>e.jsx("span",{children:N.position},N.id))]}),e.jsx(ot,{color:"#717171",setVersionList:S,currentVersion:n,setCurrentVersion:u,isEnabled:r,versionList:d||p,closeBlock:i}),e.jsxs("div",{className:O.modal_wrap_stores,children:[e.jsx("p",{className:O.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((N,w)=>e.jsx(ot,{dropdownItem:N,margin:"12px",color:"#717171",versionList:s,setVersionList:h,setCurrentVersion:b,header:!0,closeBlock:i},w))]}),e.jsx("div",{className:O.modal_btns,children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:O.modal_btn,onClick:()=>x(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:O.modal_btn,onClick:()=>j(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:O.modal_btn,onClick:()=>A(),children:"Уволить"}),e.jsx("button",{className:O.modal_btn,onClick:()=>y(),children:"Сохранить"})]})})]})]})})},yl=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],wl=()=>{const{usersList:n}=pe();return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(Xe,{headers:yl}),e.jsx(Ze,{arr:n})]}),e.jsx(Ge,{})]})},Cl=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],Nl=()=>{const{usersList:n}=pe(),t=n.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(Xe,{headers:Cl}),e.jsx(Ze,{arr:t})]}),e.jsx(Ge,{})]})},Il=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],Sl=()=>{const{usersList:n}=pe(),t=n.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(Xe,{headers:Il}),e.jsx(Ze,{arr:t,showStore:!0})]}),e.jsx(Ge,{})]})},Dl=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],$l=()=>{const t=ae().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O.users,children:e.jsxs("div",{className:O.users_header,children:[e.jsx("h2",{className:O.user_title,children:"Пользователи"}),e.jsx("ul",{className:O.user_list,children:Dl.map(s=>e.jsx("li",{children:e.jsx(Z,{className:`${O.user_list_link} ${t==s.href?O.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(wl,{}),t=="/admin/users/clients"&&e.jsx(Nl,{}),t=="/admin/users/employees"&&e.jsx(Sl,{})]})]})},nt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function Ol(){const[n,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[o,a]=m.useState([]);m.useEffect(()=>{p()},[n]);async function p(){const c=ke.get("multi-store");try{const l=await oe.get(`nomenclatures?multiStoreId=${c}&page=${s}&perPage=${r}`),i=await l.data.data;console.log("res",l),a([...i])}catch(l){console.log("Ошибка произошла при получении всх продуктов со склада",l)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:c=>t(c.target.value),value:n}),e.jsx(M,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:nt.map(c=>e.jsx("th",{className:_.addingWrapper_thead_th,children:c.title},c.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:o&&(o==null?void 0:o.map(c=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:nt.map(l=>{var i,d;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[l.title=="Наименование"?e.jsx("span",{children:((i=c==null?void 0:c.name)==null?void 0:i.ru)&&((d=c==null?void 0:c.name)==null?void 0:d.ru)}):"",l.title=="Штрих-код"?e.jsx("span",{children:c==null?void 0:c.barcode}):""]},l.id)})},c==null?void 0:c.id)))})]})]})})}const rt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function Pl(){const[n,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[o,a]=m.useState([]);m.useEffect(()=>{p()},[n]);async function p(){const c=ke.get("multi-store");try{const l=await oe.get(`web-nomenclatures?multiStoreId=${c}&page=${s}&perPage=${r}`),i=await l.data.data;console.log("res",l),a([...i])}catch(l){console.log("Ошибка произошла при получении всх продуктов со склада",l)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:c=>t(c.target.value),value:n}),e.jsx(M,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:rt.map(c=>e.jsx("th",{className:_.addingWrapper_thead_th,children:c.title},c.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:o==null?void 0:o.map(c=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:rt.map(l=>e.jsx("td",{className:_.addingWrapper_tbody_td,children:l.title=="Наименование"?e.jsx("span",{children:c==null?void 0:c.title}):""},l.id))},c==null?void 0:c.id))})]})]})})}function Al(){const t=ae().pathname,{shopsStocks:s}=Ne();return e.jsxs("div",{className:_.layout,children:[e.jsx("ul",{className:_.layout_buttons,children:s.map(r=>e.jsx("li",{children:e.jsx(Z,{to:`/admin/shops/shop/${r.url}`,className:`${_.layout_btn} ${t==`/admin/shops/shop/${r.url}`?_.layout_btn_active:""}`,children:r.title})},r.id))}),e.jsxs("div",{className:_.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(Ol,{}),t==="/admin/shops/shop/website"&&e.jsx(Pl,{})]})]})}function Wl(){const{shopsAmount:n,currentShop:t,setCurrentShop:s}=Ne(),o=ae().pathname;return e.jsxs("div",{className:_.layout,children:[e.jsx("h2",{className:_.layout_title,children:"Магазины"}),e.jsx("ul",{className:_.layout_buttons,children:n.map(a=>e.jsx("li",{children:e.jsx(Z,{to:"/admin/shops/shop",className:`${_.layout_btn} ${t==a.url?_.layout_btn_active:""}`,onClick:()=>s(a.url),children:a.title})},a.id))}),o.startsWith("/admin/shops/shop")&&e.jsx("div",{className:_.layout_content,children:e.jsx(Al,{})})]})}function El({item:n}){const{setErrorModal:t}=he(),s=r=>{r.stopPropagation()};return e.jsx("div",{className:_.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:_.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:_.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(M,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:n.message})]})})}function Ul({localNewImage:n,setLocalNewImage:t}){const[s,r]=m.useState(null);function o(d,u){return d.order>u.order?1:-1}function a(d,u){r(u)}function p(d){d.target.style.background="white"}function c(d){d.preventDefault(),d.target.style.background="lightgray"}function l(d,u){d.preventDefault(),d.target.style.background="white";const h=n&&n.map(b=>b.id===u.id?{...b,order:(s==null?void 0:s.order)||b.order}:b.id===(s==null?void 0:s.id)?{...b,order:u.order}:b).sort((b,v)=>b.order-v.order);console.log(555,"newImages",h),h&&t(h),r(null)}const i=d=>{const u=n.filter(h=>h.id!==d);t([...u])};return m.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:n&&n.sort(o).map((d,u)=>e.jsxs("div",{className:`${_.productItem_photo} ${u==0?_.productItem_photo_active:""}`,draggable:!0,onDragStart:h=>a(h,d),onDragLeave:h=>p(h),onDragEnd:h=>p(h),onDragOver:h=>c(h),onDrop:h=>l(h,d),children:[e.jsx("div",{className:_.productItem_photo_img,children:e.jsx("img",{src:d.src?`https://api.mcrm.uz/${d.src}`:d.localSrc?d.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:_.productItem_photo_close,onClick:()=>i(d.id),children:e.jsx(M,{width:18,height:18,name:"XMarkIcon"})})]},d.id))})}function vt({stockName:n,myMxikCode:t,localNewImage:s,setLocalNewImage:r,setLocalFormData:o,localFormData:a}){const{errorModal:p}=he(),c=m.useRef(null),l=()=>{c.current!=null&&c.current.click()},i=async d=>{var h,b;const u=(b=(h=d==null?void 0:d.target)==null?void 0:h.files)==null?void 0:b[0];if(u&&["image/jpeg","image/png","image/webp"].includes(u.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",u);const v=new FormData;v.append("files[]",u),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",v),u&&o([...a,u]);const S=s&&(s==null?void 0:s.length)>0?s.reduce((W,D)=>D.order>W?D.order:W,-1/0):1,P=new FileReader;P.onload=W=>{var D;if((D=W.target)!=null&&D.result){const C={id:se(),order:S?S+1:1,localSrc:URL.createObjectURL(u)},y=[...s,C];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",y),r&&r([...y]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},P.readAsDataURL(u),console.log(6,"отрисовал выбранную картинку files",u),c.current&&(c.current.value="")}};return e.jsxs("div",{className:_.productItem_top,children:[p.status&&e.jsx(El,{item:p}),e.jsx("h1",{className:_.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:_.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:_.productItem_photos,children:[e.jsx(Ul,{stockName:n,myMxikCode:t,localNewImage:s,setLocalNewImage:r}),e.jsxs("div",{className:`${_.productItem_photo} ${_.productItem_add}`,onClick:l,children:[e.jsx(M,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:_.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:i,ref:c})]})]}),e.jsx("p",{className:_.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function xt({localCategory:n,productName:t,productDescription:s,setProductDescription:r,setProductName:o,myBarcode:a,vendorCode:p,setVendorCode:c,myPrice:l}){var S,P,W,D;const{pickedCategory:i,currentProduct:d,setOpenModalCategory:u}=he();m.useEffect(()=>{(i||n)&&v()},[i,n]);const[h,b]=m.useState(""),v=async()=>{try{const y=(await oe.get(`categories/${i.id?i.id:n}`)).data;b(y.name.ru)}catch(C){console.log("Ошибка произошла при получении категонии по id",C)}};return e.jsxs("div",{className:_.productItem_left,children:[e.jsxs("div",{className:_.productItem_left_info,children:[e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:_.productItem_left_item_top_input,value:p,onChange:C=>c(Number(C.target.value))})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,children:"Изменить"})})]}),e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:h||((P=(S=d==null?void 0:d.category)==null?void 0:S.name)!=null&&P.ru?(D=(W=d==null?void 0:d.category)==null?void 0:W.name)==null?void 0:D.ru:"")})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,onClick:()=>u(!0),children:i!=null&&i.name||d!=null&&d.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:a})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:l})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:_.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:_.productItem_left_form,children:[e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:_.productItem_left_form_input,type:"text",value:t,onChange:C=>o(C.target.value)})]}),e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:C=>r(C.target.value),value:s,className:_.productItem_left_form_textarea}),e.jsx("p",{className:_.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function Bl({color:n="black",title:t="",extraOptionsList:s,className:r,openBlock:o,setOpenBlock:a,setExtraOptionsList:p}){const c=m.useRef([]);m.useEffect(()=>{c.current.length>0&&l()},[s]);const l=()=>{s&&s.forEach(d=>{c.current.forEach(u=>{u.name==d.title&&(u.checked=d.isActive)})})},i=(d,u)=>{const h=JSON.parse(JSON.stringify(s));h.forEach(b=>{b.title==u&&(b.isActive=!b.isActive)}),p&&p(h)};return e.jsxs("div",{className:r??F.versionExtraOptions,children:[t&&e.jsx("span",{className:F.versionExtraOptions_title,children:t}),e.jsxs("div",{className:F.versionExtraOptions_block,children:[e.jsxs("div",{className:F.versionExtraOptions_block_top,onClick:()=>a&&a(!o),children:[e.jsx("h2",{className:F.versionExtraOptions_block_top_title,style:{color:n},children:t||"Выберите параметры"}),e.jsx("button",{className:F.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${F.versionExtraOptions_block_top_arrow} ${o?F.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${F.versionExtraOptions_block_dropdown} ${o?F.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((d,u)=>e.jsxs("label",{className:F.versionExtraOptions_block_dropdown_item,children:[d.title,e.jsx("input",{ref:h=>{h&&(c.current[u]=h)},type:"checkbox",name:d.title,"data-type":d.title,onChange:h=>i(h,d.title)})]},d.id))})]})]})}function Fl({color:n="black",title:t="",versionList:s,className:r}){const[o,a]=m.useState(!1),[p,c]=m.useState("");m.useEffect(()=>{s==null||s.forEach(d=>{d.isActive&&c(d.title)})},[]);const l=()=>{a(!o)},i=d=>{s==null||s.forEach(u=>u.isActive=!1),s==null||s.forEach(u=>{u.title==d.title&&(u.isActive=!0,c(u.title))}),l()};return e.jsxs("div",{className:r??F.version3,children:[e.jsx("span",{className:F.version3_title,children:t}),e.jsxs("div",{className:F.version3_block,children:[e.jsxs("div",{className:F.version3_block_top,onClick:()=>l(),children:[e.jsx("h2",{className:F.version3_block_top_title,style:{color:n},children:p||"Выбрать"}),e.jsx("button",{className:F.version3_block_top_btn,children:e.jsx("div",{className:`${F.version3_block_top_arrow} ${o?F.version3_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${F.version3_block_dropdown} ${o?F.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(d=>e.jsx("span",{className:F.version3_block_dropdown_item,onClick:()=>i(d),children:s.length>1?d.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},d.id))})]})]})}function Ll({extraOptionsStatus:n,localCategory:t,setExtraOptionsStatus:s,extraOptions:r}){const[o,a]=m.useState(!1);return m.useEffect(()=>{},[t]),e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>s(!n),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Доп. параметры"}),e.jsx(je,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:n})]}),e.jsxs("div",{className:`${_.productItem_right_bottom_items} ${n?_.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:_.productItem_right_bottom_item,children:e.jsx(Bl,{color:"",extraOptionsList:r,openBlock:o,setOpenBlock:a})}),r.map(p=>{if(p.isActive)return e.jsxs("div",{className:_.productItem_right_bottom_item,children:[e.jsx(Fl,{color:"",title:p.title,versionList:p.type}),e.jsx("button",{className:_.productItem_right_bottom_del,children:"Удалить"})]},p.id)})]})]})}function at({color:n="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:r,openBlock:o,currentVersion:a,setOpenBlock:p,setCurrentVersion:c,setVersionList:l}){const i=d=>{c&&c(d.title);const u=s.map(v=>({id:v.id,title:v.title,isActive:!1})),h=u.find(v=>v.id==d.id),b=u.findIndex(v=>v.id==d.id);h&&(h.isActive=!0,u.splice(b,1,h),l&&l(u))};return e.jsxs("div",{className:r??F.version3,children:[e.jsx("span",{className:F.version3_title,children:t}),e.jsxs("div",{className:F.version3_block,children:[e.jsxs("div",{className:F.version3_block_top,children:[e.jsx("h2",{className:F.version3_block_top_title,style:{color:n},children:a}),e.jsx("button",{className:F.version3_block_top_btn,onClick:()=>p&&p(!o),children:e.jsx("div",{className:`${F.version3_block_top_arrow} ${o?F.version3_block_top_arrow_active:""}`,children:e.jsx(M,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${F.version3_block_dropdown} ${o?F.version3_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:F.version3_block_dropdown_item,onClick:()=>i(d),children:d.title},d.id))})]})]})}function Ml({brieflyProductStatus:n,setBrieflyProductStatus:t}){return e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>t(!n),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коротко о товаре"}),e.jsx(je,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:n})]}),e.jsx("div",{className:`${_.productItem_right_bottom_items} ${n?_.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${_.productItem_right_bottom_item} ${_.productItem_right_bottom_row}`,children:[e.jsx(at,{color:"",title:"Объем, л"}),e.jsx(at,{color:"",title:"Кол-во в упаковке"})]})})]})}function ft({currentProduct:n,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:r,setBrieflyProductStatus:o,localCategory:a,extraOptions:p,setExtraOptions:c}){return e.jsxs("div",{className:_.productItem_right,children:[e.jsx("div",{className:_.productItem_right_item,children:e.jsxs("div",{className:_.productItem_right_top,children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коментарии"}),e.jsx(je,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(Ll,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:a,extraOptions:p,setExtraOptions:c,currentProduct:n}),e.jsx(Ml,{brieflyProductStatus:r,setBrieflyProductStatus:o})]})}function jt({stockName:n,setAdminSettings:t}){return e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx(Z,{to:n=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>t(),children:n=="website"?"Сохранить":"Добавить"})]})}function zl(){return e.jsxs("div",{className:_.articleModal_block_nav,children:[e.jsx("h2",{className:_.articleModal_block_title,children:"Артикул"}),e.jsx(M,{name:"XMarkIcon"})]})}function Tl(){const[n,t]=m.useState(""),[s,r]=m.useState(""),[o,a]=m.useState("");return e.jsxs("div",{className:_.articleModal_block_info,children:[e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:n})]}),e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsx("span",{children:s})]}),e.jsxs("div",{className:_.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsx("span",{children:o})]})]})}function Rl(){return e.jsx("div",{children:"ArticleModalRecommended"})}function ql(){return e.jsx("div",{children:"ArticleModalSearch"})}function Vl(){return e.jsx("div",{children:"ArticleModalFound"})}function kt(){return e.jsx("div",{className:_.articleModal,children:e.jsxs("div",{className:_.articleModal_block,children:[e.jsx(zl,{}),e.jsx(Tl,{}),e.jsx(Rl,{}),e.jsx(ql,{}),e.jsx(Vl,{}),e.jsx("button",{className:_.articleModal_block_button,children:"Выбрать"})]})})}function Hl(){const n=Ue(),t=ae(),{id:s}=it(),{openModalCategory:r}=he(),{pickedCategory:o,currentProduct:a,setErrorModal:p,setCurrentProduct:c,setPickedCategory:l}=he(),[i,d]=m.useState(""),[u,h]=m.useState(0),[b,v]=m.useState(0),[S,P]=m.useState(Number(s)),[W,D]=m.useState(!1),[C,y]=m.useState([]),[A,j]=m.useState(!1),[x,$]=m.useState(0),[N,w]=m.useState(""),[E,z]=m.useState([]),[G,f]=m.useState([]);async function L(){try{return await(await oe.get(`nomenclatures/${s}`)).data}catch(q){console.log("Ошибка произошла при получении продукта со склада по id",q)}}m.useEffect(()=>{l({})},[t.pathname]),m.useEffect(()=>{R()},[s,o]);async function R(){var g;const q=await L();q&&(d((g=q==null?void 0:q.name)==null?void 0:g.ru),c({...q}),P(q==null?void 0:q.categoryId),h(q==null?void 0:q.barcode),v(q==null?void 0:q.price))}const U=async()=>{if(a){o.id&&(await be(),P(o.id));const q=await fe(G),g=x||await ge(),T={nomenclatureId:a.id,title:i,article:g,images:[...q],description:N,document:"string"};await xe(T),l({}),y([]),n("/admin/product/adding/stock",{replace:!0})}else p({status:!0,message:'"Выберите категорию"'})};async function xe(q){try{await oe.post("web-nomenclatures",q)}catch(g){console.log("Ошибка произошла при добавлении web nomenclatures",g)}}async function be(){try{await oe.patch(`nomenclatures/${s}`,{categoryId:o.id}),P(o.id)}catch(q){console.log("Ошибка произошла при изменении котегории на складе",q)}}const fe=async q=>{if(q){const g=new FormData;q.forEach((T,J)=>{g.append(`files[${J}]`,T)});try{return await(await oe.post("media-objects/uploads",g)).data}catch(T){console.error("Ошибка при добавлении картинок на сервер",T)}}},ge=async()=>{const q=ke.get("multi-store");try{const g=await oe.get(`web-credentials/${q}`);return console.log("fetchArticle res",g),g.data.article}catch(g){console.log("Ошибка при получении артикля",g)}};return e.jsxs("div",{className:_.productItem,children:[r&&e.jsx(ct,{}),e.jsx(vt,{stockName:"stock",myMxikCode:s,localFormData:G,setLocalFormData:f,localNewImage:E,setLocalNewImage:z}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(xt,{myPrice:b,setMyPrice:v,myBarcode:u,setMyBarcode:h,localCategory:S,productName:i,productDescription:N,setProductDescription:w,setProductName:d,vendorCode:x,setVendorCode:$}),e.jsx(ft,{extraOptionsStatus:W,setExtraOptionsStatus:D,brieflyProductStatus:A,setBrieflyProductStatus:j,localCategory:S,extraOptions:C,setExtraOptions:y,currentProduct:a})]}),e.jsx(jt,{stockName:"stock",setAdminSettings:U}),e.jsx(kt,{})]})}function Xl(){const n=Ue(),t=ae(),{id:s}=it(),{openModalCategory:r}=he(),{pickedCategory:o,webCurrentProduct:a,setWebCurrentProduct:p,setErrorModal:c,setPickedCategory:l}=he(),[i,d]=m.useState(""),[u,h]=m.useState(0),[b,v]=m.useState(0),[S,P]=m.useState(0),[W,D]=m.useState(Number(s)),[C,y]=m.useState(!1),[A,j]=m.useState([]),[x,$]=m.useState(!1),[N,w]=m.useState(0),[E,z]=m.useState(""),[G,f]=m.useState([]),[L,R]=m.useState([]);async function U(){try{return await(await oe.get(`web-nomenclatures/${s}`)).data}catch(g){console.log("Ошибка произошла при получении продукта с сайта по id",g)}}m.useEffect(()=>{l({})},[t.pathname]),m.useEffect(()=>{xe()},[s]);async function xe(){var T,J,Q,ce,te,V,_e;const g=await U();if(g){v((T=g==null?void 0:g.nomenclature)==null?void 0:T.price),h((J=g==null?void 0:g.nomenclature)==null?void 0:J.barcode),P((Q=g==null?void 0:g.nomenclature)==null?void 0:Q.id),w(g==null?void 0:g.article),d(g!=null&&g.title?g==null?void 0:g.title:(te=(ce=g==null?void 0:g.nomenclature)==null?void 0:ce.name)==null?void 0:te.ru),p({...g}),D((_e=(V=g==null?void 0:g.nomenclature)==null?void 0:V.category)==null?void 0:_e.id);let de=1;const ue=g.images?g.images.map(Je=>({id:se(),order:de++,src:Je})):[];f(ue),de=1,z(g.description?g.description:"")}}const be=async()=>{if(a||o.label){o.id&&await ge();const g=await q(L);console.log(15,"получил ответ от функции fetchPhotos() images",g),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const T=G.filter(Q=>Q.src).map(Q=>{if(Q.src)return Q.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",T);const J={nomenclatureId:a.id,title:i,article:N,images:[...T,...g],description:E,document:"string"};console.log(18,"создал новый объект продукта newProduct",J),console.log(18,"localNewImage",G),fe(J),l({}),j([]),n("/admin/product/adding/website",{replace:!0})}else c({status:!0,message:'"Выберите категорию"'})};async function fe(g){try{await oe.patch(`web-nomenclatures/${s}`,g)}catch(T){console.log("Ошибка произошла при добавлении web nomenclatures",T)}}async function ge(){try{await oe.patch(`nomenclatures/${S}`,{categoryId:o.id}),D(o.id)}catch(g){console.log("Ошибка произошла при изменении котегории на сайте",g)}}const q=async g=>{if(g){const T=new FormData;g.forEach((J,Q)=>{T.append(`files[${Q}]`,J)});try{return await(await oe.post("media-objects/uploads",T)).data}catch(J){console.error("Ошибка при добавлении картинок на сервер",J)}}};return e.jsxs("div",{className:_.productItem,children:[r&&e.jsx(ct,{}),e.jsx(vt,{stockName:"website",myMxikCode:s,localNewImage:G,setLocalNewImage:f,localFormData:L,setLocalFormData:R}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(xt,{myPrice:b,setMyPrice:v,myBarcode:u,setMyBarcode:h,localCategory:W,productName:i,productDescription:E,setProductDescription:z,setProductName:d,vendorCode:N,setVendorCode:w}),e.jsx(ft,{extraOptionsStatus:C,setExtraOptionsStatus:y,brieflyProductStatus:x,setBrieflyProductStatus:$,localCategory:W,extraOptions:A,setExtraOptions:j,currentProduct:a})]}),e.jsx(jt,{stockName:"website",setAdminSettings:be}),e.jsx(kt,{})]})}function s_(){const{user:n}=It(),{setCurrentShop:t}=Ne(),r=ae().pathname;m.useEffect(()=>{r.startsWith("/admin/shops")||t("0")},[r]);const o=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(M,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(M,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(M,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(M,{name:"BuildingStorefrontIcon"}),isActive:!1}],[a,p]=m.useState(o),c=l=>{const i=a.map(u=>({id:u.id,label:u.label,href:u.href,icon:u.icon,isActive:!1})),d=i.find(u=>u.id==l);d&&(d.isActive=!0),p(i)};return e.jsxs(e.Fragment,{children:[e.jsx(St,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:_.wrapper,children:[e.jsx("h1",{className:_.wrapper_title,children:n==null?void 0:n.username}),e.jsxs("div",{className:_.content,children:[e.jsx("div",{className:_.content_left,children:e.jsx("ul",{className:_.tools,children:a.map(l=>e.jsx("li",{children:e.jsxs(Z,{to:l.href,className:`${_.tools_link} ${r.startsWith(l.href)?_.tools_link_active:""}`,onClick:()=>c(l.id),children:[l.icon,l.label]})},l.id))})}),r.startsWith("/admin")&&e.jsxs("div",{className:_.content_right,children:[r.startsWith("/admin/settings")&&e.jsx(Pc,{}),r.startsWith("/admin/users")&&e.jsx($l,{}),r.startsWith("/admin/shops")&&e.jsx(Wl,{}),r.startsWith("/admin/product")&&e.jsx(Fc,{}),r.startsWith("/admin/stock-product")&&e.jsx(Hl,{}),r.startsWith("/admin/website-product")&&e.jsx(Xl,{})]})]})]})})]})}export{s_ as default};
