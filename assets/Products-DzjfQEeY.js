import{j as o,u as d,r as m}from"./index-BbdDCsGs.js";import{C as j}from"./CustomIcon-CscvTZki.js";import{p}from"./Header-rgnsHATz.js";const x="_block_products_1jejc_1",g="_block_product_1jejc_1",u="_block_img_1jejc_14",v="_block_imgBox_1jejc_17",B="_block_image_1jejc_28",h="_block_image_active_1jejc_35",f="_block_content_1jejc_44",N="_block_content_title_1jejc_49",C="_block_pagination_1jejc_58",$="_block_span_1jejc_63",P="_block_span_active_1jejc_70",w="_block_priceBlock_1jejc_76",A="_block_priceBlock_price_1jejc_81",I="_block_cartBox_1jejc_84",L="_block_cartBox_cart_1jejc_97",S="_block_likeBox_1jejc_100",y="_block_likeBox_like_1jejc_103",E="_block_likeBox_like_active_1jejc_116",e={block_products:x,block_product:g,block_img:u,block_imgBox:v,block_image:B,block_image_active:h,block_content:f,block_content_title:N,block_pagination:C,block_span:$,block_span_active:P,block_priceBlock:w,block_priceBlock_price:A,block_cartBox:I,block_cartBox_cart:L,block_likeBox:S,block_likeBox_like:y,block_likeBox_like_active:E};function M({item:c}){var l;function _(s){return s.toLocaleString("ru-RU")}return o.jsxs("div",{className:e.block_priceBlock,children:[o.jsxs("p",{className:e.block_priceBlock_price,children:[_(Number((l=c.nomenclature)==null?void 0:l.price))," сум"]}),o.jsx("div",{className:e.block_cartBox,children:o.jsx(j,{name:"ShoppingCartIcon"})})]})}function F({item:c}){const{favoriteActive:_,setFavoriteActive:l}=p(),s=i=>{if(i.stopPropagation(),Array.isArray(_)&&_.some(n=>n.mxikCode==c.mxikCode)){const n=_.filter(k=>k.mxikCode!=c.mxikCode);l(n)}else l([..._,c])};return o.jsx("div",{className:e.block_likeBox,onClick:i=>s(i),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`${e.block_likeBox_like} ${_[_.findIndex(i=>i.mxikCode==c.mxikCode)]?e.block_likeBox_like_active:""}`,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})})})}function H({item:c}){var r,b;const _=d(),[l,s]=m.useState(0),i=()=>{s(0)},n=t=>{t.currentTarget.tagName!="SVG"&&_(`/productInfo/${c.id}`)},k=t=>{s(t)};return o.jsxs("div",{className:e.block_product,onMouseLeave:i,onClick:t=>n(t),children:[o.jsxs("div",{className:e.block_imgBox,children:[o.jsx(F,{item:c}),c.images?(r=c.images)==null?void 0:r.map((t,a)=>o.jsx("div",{className:e.block_img,onMouseOver:()=>k(a),children:o.jsx("img",{width:50,height:50,src:`https://api.mcrm.uz/${t}`,alt:"product",className:`${e.block_image} ${l===a?e.block_image_active:""}`})},a)):o.jsx("img",{width:50,height:50,src:"/add.webp",alt:"product",className:`${e.block_image} ${e.block_image_active}`})]}),o.jsxs("div",{className:e.block_content,children:[o.jsx("div",{className:e.block_pagination,style:{gridTemplateColumns:`repeat(${c.images&&c.images.length>0?c.images.length:1}, 1fr)`},children:c.images&&((b=c.images)==null?void 0:b.map((t,a)=>o.jsx("span",{className:`${e.block_span} ${l===a?e.block_span_active:""}`},a)))}),o.jsx("h1",{className:e.block_content_title,children:c.title}),o.jsx(M,{item:c})]})]})}function G({products:c}){return m.useEffect(()=>{console.log("products",c)},[]),o.jsx("div",{className:e.block_products,children:c==null?void 0:c.map(_=>o.jsx(H,{item:_},_.mxikCode))})}export{G as P};
