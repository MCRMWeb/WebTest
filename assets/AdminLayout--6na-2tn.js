import{j as e,v as de,r as m,w as Re,L as Z,x as ee,y as re,e as J,q as we,o as ne,z as jt,A as wt,B as Ct,u as Ue,C as it}from"./index-V5Nbvfos.js";import{u as Nt}from"./userStore-DnjaQeIK.js";import{C as T}from"./CustomIcon--ptcx1Vp.js";import{s as Ce}from"./shop1Store-CEV7YU3S.js";import{a as Be,c as qe,H as It}from"./Header-FbQBuhUF.js";import{a as he,s as H,M as ct}from"./Modal-DfeDJnKM.js";import{b as ae}from"./bannerStore-CEd6B4KD.js";import"./XMarkIcon-BWUFmvda.js";const St="_wrapper_1y56l_1",Dt="_wrapper_title_1y56l_4",$t="_content_1y56l_10",Ot="_content_left_1y56l_16",Pt="_content_right_1y56l_19",At="_tools_1y56l_45",Et="_tools_link_1y56l_50",Wt="_tools_link_active_1y56l_63",Ut="_settings_1y56l_86",Bt="_settings_title_1y56l_89",Ft="_settings_content_1y56l_94",Lt="_settings_content_top_1y56l_97",zt="_settings_content_buttons_1y56l_100",Mt="_settings_content_btn_1y56l_110",Tt="_settings_content_btn_cancel_1y56l_122",Rt="_settings_content_btn_save_1y56l_125",qt="_settings_tools_1y56l_128",Vt="_settings_tools_link_1y56l_133",Ht="_settings_tools_link_active_1y56l_148",Xt="_wrapperModules_1y56l_153",Kt="_item_1y56l_160",Zt="_item_top_1y56l_165",Gt="_item_top_title_1y56l_176",Jt="_item_top_arrow_1y56l_180",Yt="_item_top_arrow_active_1y56l_188",Qt="_item_block_1y56l_191",es="_item_block_item_1y56l_202",ts="_item_block_open_1y56l_205",ss="_item_onOff_1y56l_211",os="_item_delivery_1y56l_211",ns="_versions_block_1y56l_217",rs="_versions_block_top_1y56l_222",as="_versions_block_top_title_1y56l_232",is="_versions_block_top_arrow_1y56l_237",cs="_versions_block_top_arrow_active_1y56l_246",ls="_versions_block_dropdown_1y56l_249",_s="_versions_block_dropdown_item_1y56l_260",ds="_versions_block_dropdown_open_1y56l_271",ps="_versions_block_onOff_1y56l_277",us="_versions_block_delivery_1y56l_277",ms="_categoriesDropDown_title_1y56l_283",hs="_categoriesDropDown_item_1y56l_286",bs="_categoriesDropDown_item_top_1y56l_292",gs="_categoriesDropDown_item_top_title_1y56l_303",vs="_categoriesDropDown_item_top_arrow_1y56l_307",xs="_categoriesDropDown_item_top_arrow_active_1y56l_314",fs="_categoriesDropDown_item_block_1y56l_317",ys="_categoriesDropDown_item_block_line_1y56l_326",ks="_categoriesDropDown_item_block_active_1y56l_338",js="_categoriesDropDown_item_block_open_1y56l_341",ws="_categoriesDropDown_item_onOff_1y56l_346",Cs="_categoriesDropDown_item_delivery_1y56l_346",Ns="_products_buttons_1y56l_352",Is="_products_btn_1y56l_358",Ss="_products_btn_active_1y56l_369",Ds="_productItem_title_1y56l_374",$s="_productItem_basePhoto_1y56l_379",Os="_productItem_photos_1y56l_385",Ps="_productItem_photos_desc_1y56l_391",As="_productItem_photo_1y56l_385",Es="_productItem_photo_img_1y56l_406",Ws="_productItem_photo_close_1y56l_417",Us="_productItem_photo_active_1y56l_429",Bs="_productItem_add_1y56l_433",Fs="_productItem_add_text_1y56l_441",Ls="_productItem_settings_1y56l_446",zs="_productItem_left_info_1y56l_450",Ms="_productItem_left_item_1y56l_458",Ts="_productItem_left_item_top_1y56l_462",Rs="_productItem_left_item_top_input_1y56l_483",qs="_productItem_left_item_bottom_1y56l_489",Vs="_productItem_left_form_1y56l_502",Hs="_productItem_left_form_label_1y56l_509",Xs="_productItem_left_form_title_1y56l_513",Ks="_productItem_left_form_input_1y56l_519",Zs="_productItem_left_form_textarea_1y56l_527",Gs="_productItem_left_form_size_1y56l_535",Js="_productItem_right_1y56l_543",Ys="_productItem_right_item_1y56l_550",Qs="_productItem_right_top_1y56l_555",eo="_productItem_right_title_1y56l_562",to="_productItem_right_bottom_items_1y56l_568",so="_productItem_right_bottom_items_active_1y56l_577",oo="_productItem_right_bottom_item_1y56l_568",no="_productItem_right_bottom_row_1y56l_603",ro="_productItem_right_bottom_del_1y56l_608",ao="_banner_nav_list_1y56l_619",io="_banner_nav_link_1y56l_625",co="_banner_nav_link_active_1y56l_640",lo="_addingWrapper_title_1y56l_645",_o="_addingWrapper_form_1y56l_650",po="_addingWrapper_form_btn_1y56l_655",uo="_addingWrapper_search_1y56l_672",mo="_addingWrapper_search_input_1y56l_678",ho="_addingWrapper_search_icon_1y56l_686",bo="_addingWrapper_table_1y56l_689",go="_addingWrapper_table_error_1y56l_692",vo="_addingWrapper_thead_tr_1y56l_696",xo="_addingWrapper_thead_th_1y56l_700",fo="_addingWrapper_tbody_tr_1y56l_708",yo="_addingWrapper_tbody_td_1y56l_711",ko="_addingWrapper_tbody_buttons_1y56l_725",jo="_addingWrapper_tbody_add_1y56l_730",wo="_addingWrapper_tbody_del_1y56l_737",Co="_errorWrapper_1y56l_745",No="_errorWrapper_block_1y56l_754",Io="_errorWrapper_block_close_1y56l_764",So="_layout_title_1y56l_775",Do="_layout_buttons_1y56l_780",$o="_layout_btn_1y56l_786",Oo="_layout_btn_active_1y56l_800",Po="_editBlock_1y56l_805",_={wrapper:St,wrapper_title:Dt,content:$t,content_left:Ot,content_right:Pt,tools:At,tools_link:Et,tools_link_active:Wt,settings:Ut,settings_title:Bt,settings_content:Ft,settings_content_top:Lt,settings_content_buttons:zt,settings_content_btn:Mt,settings_content_btn_cancel:Tt,settings_content_btn_save:Rt,settings_tools:qt,settings_tools_link:Vt,settings_tools_link_active:Ht,wrapperModules:Xt,item:Kt,item_top:Zt,item_top_title:Gt,item_top_arrow:Jt,item_top_arrow_active:Yt,item_block:Qt,item_block_item:es,item_block_open:ts,item_onOff:ss,item_delivery:os,versions_block:ns,versions_block_top:rs,versions_block_top_title:as,versions_block_top_arrow:is,versions_block_top_arrow_active:cs,versions_block_dropdown:ls,versions_block_dropdown_item:_s,versions_block_dropdown_open:ds,versions_block_onOff:ps,versions_block_delivery:us,categoriesDropDown_title:ms,categoriesDropDown_item:hs,categoriesDropDown_item_top:bs,categoriesDropDown_item_top_title:gs,categoriesDropDown_item_top_arrow:vs,categoriesDropDown_item_top_arrow_active:xs,categoriesDropDown_item_block:fs,categoriesDropDown_item_block_line:ys,categoriesDropDown_item_block_active:ks,categoriesDropDown_item_block_open:js,categoriesDropDown_item_onOff:ws,categoriesDropDown_item_delivery:Cs,products_buttons:Ns,products_btn:Is,products_btn_active:Ss,productItem_title:Ds,productItem_basePhoto:$s,productItem_photos:Os,productItem_photos_desc:Ps,productItem_photo:As,productItem_photo_img:Es,productItem_photo_close:Ws,productItem_photo_active:Us,productItem_add:Bs,productItem_add_text:Fs,productItem_settings:Ls,productItem_left_info:zs,productItem_left_item:Ms,productItem_left_item_top:Ts,productItem_left_item_top_input:Rs,productItem_left_item_bottom:qs,productItem_left_form:Vs,productItem_left_form_label:Hs,productItem_left_form_title:Xs,productItem_left_form_input:Ks,productItem_left_form_textarea:Zs,productItem_left_form_size:Gs,productItem_right:Js,productItem_right_item:Ys,productItem_right_top:Qs,productItem_right_title:eo,productItem_right_bottom_items:to,productItem_right_bottom_items_active:so,productItem_right_bottom_item:oo,productItem_right_bottom_row:no,productItem_right_bottom_del:ro,banner_nav_list:ao,banner_nav_link:io,banner_nav_link_active:co,addingWrapper_title:lo,addingWrapper_form:_o,addingWrapper_form_btn:po,addingWrapper_search:uo,addingWrapper_search_input:mo,addingWrapper_search_icon:ho,addingWrapper_table:bo,addingWrapper_table_error:go,addingWrapper_thead_tr:vo,addingWrapper_thead_th:xo,addingWrapper_tbody_tr:fo,addingWrapper_tbody_td:yo,addingWrapper_tbody_buttons:ko,addingWrapper_tbody_add:jo,addingWrapper_tbody_del:wo,errorWrapper:Co,errorWrapper_block:No,errorWrapper_block_close:Io,layout_title:So,layout_buttons:Do,layout_btn:$o,layout_btn_active:Oo,editBlock:Po};function xe({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:n=500,scale:a=1.1,status:d=!1}){const l={width:`${o}px`,height:`${o/2-o/20}px`,background:d?s:r,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},c={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${d?s:r}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${a}) translateX(${d?"110%":"0"})`};return e.jsx("div",{style:l,children:e.jsx("div",{style:c})})}const Ao="_versions_1cgvq_1",Eo="_versions_block_1cgvq_6",Wo="_versions_block_top_1cgvq_11",Uo="_versions_block_top_title_1cgvq_21",Bo="_versions_block_top_arrow_1cgvq_25",Fo="_versions_block_top_arrow_active_1cgvq_34",Lo="_versions_block_dropdown_1cgvq_37",zo="_versions_block_dropdown_item_1cgvq_49",Mo="_versions_block_dropdown_open_1cgvq_60",To="_versions_block_onOff_1cgvq_66",Ro="_versions_block_delivery_1cgvq_66",qo="_versions2_1cgvq_72",Vo="_versions2_block_1cgvq_77",Ho="_versions2_block_top_1cgvq_82",Xo="_versions2_block_top_title_1cgvq_92",Ko="_versions2_block_top_arrow_1cgvq_96",Zo="_versions2_block_top_arrow_active_1cgvq_105",Go="_versions2_block_dropdown_1cgvq_108",Jo="_versions2_block_dropdown_item_1cgvq_119",Yo="_versions2_block_dropdown_open_1cgvq_130",Qo="_versions2_block_onOff_1cgvq_136",en="_versions2_block_delivery_1cgvq_136",tn="_version3_1cgvq_142",sn="_version3_title_1cgvq_147",on="_version3_block_1cgvq_153",nn="_version3_block_top_1cgvq_158",rn="_version3_block_top_title_1cgvq_169",an="_version3_block_top_arrow_1cgvq_173",cn="_version3_block_top_arrow_active_1cgvq_183",ln="_version3_block_dropdown_1cgvq_186",_n="_version3_block_dropdown_item_1cgvq_197",dn="_version3_block_dropdown_open_1cgvq_213",pn="_version3_block_onOff_1cgvq_237",un="_version3_block_delivery_1cgvq_237",mn="_versionExtraOptions_1cgvq_243",hn="_versionExtraOptions_title_1cgvq_248",bn="_versionExtraOptions_block_1cgvq_254",gn="_versionExtraOptions_block_top_1cgvq_259",vn="_versionExtraOptions_block_top_title_1cgvq_270",xn="_versionExtraOptions_block_top_arrow_1cgvq_275",fn="_versionExtraOptions_block_top_arrow_active_1cgvq_285",yn="_versionExtraOptions_block_dropdown_1cgvq_288",kn="_versionExtraOptions_block_dropdown_item_1cgvq_299",jn="_versionExtraOptions_block_dropdown_open_1cgvq_316",wn="_versionExtraOptions_block_onOff_1cgvq_340",Cn="_versionExtraOptions_block_delivery_1cgvq_340",z={versions:Ao,versions_block:Eo,versions_block_top:Wo,versions_block_top_title:Uo,versions_block_top_arrow:Bo,versions_block_top_arrow_active:Fo,versions_block_dropdown:Lo,versions_block_dropdown_item:zo,versions_block_dropdown_open:Mo,versions_block_onOff:To,versions_block_delivery:Ro,versions2:qo,versions2_block:Vo,versions2_block_top:Ho,versions2_block_top_title:Xo,versions2_block_top_arrow:Ko,versions2_block_top_arrow_active:Zo,versions2_block_dropdown:Go,versions2_block_dropdown_item:Jo,versions2_block_dropdown_open:Yo,versions2_block_onOff:Qo,versions2_block_delivery:en,version3:tn,version3_title:sn,version3_block:on,version3_block_top:nn,version3_block_top_title:rn,version3_block_top_arrow:an,version3_block_top_arrow_active:cn,version3_block_dropdown:ln,version3_block_dropdown_item:_n,version3_block_dropdown_open:dn,version3_block_onOff:pn,version3_block_delivery:un,versionExtraOptions:mn,versionExtraOptions_title:hn,versionExtraOptions_block:bn,versionExtraOptions_block_top:gn,versionExtraOptions_block_top_title:vn,versionExtraOptions_block_top_arrow:xn,versionExtraOptions_block_top_arrow_active:fn,versionExtraOptions_block_dropdown:yn,versionExtraOptions_block_dropdown_item:kn,versionExtraOptions_block_dropdown_open:jn,versionExtraOptions_block_onOff:wn,versionExtraOptions_block_delivery:Cn};function Je({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:r,openBlock:n,currentVersion:a,setOpenBlock:d,setCurrentVersion:l,setVersionList:c}){const i=p=>{l(p.title);const u=s.map(g=>({id:g.id,title:g.title,isActive:!1})),h=u.find(g=>g.id==p.id),b=u.findIndex(g=>g.id==p.id);h&&(h.isActive=!0,u.splice(b,1,h),c(u))};return e.jsxs("div",{className:r??z.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:z.versions_block,children:[e.jsxs("div",{className:z.versions_block_top,children:[e.jsx("h2",{className:z.versions_block_top_title,style:{color:o},children:a}),e.jsx("button",{className:z.versions_block_top_btn,onClick:()=>d(!n),children:e.jsx("div",{className:`${z.versions_block_top_arrow} ${n?z.versions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.versions_block_dropdown} ${n?z.versions_block_dropdown_open:""}`,children:s.map(p=>e.jsx("span",{className:z.versions_block_dropdown_item,onClick:()=>i(p),children:p.title},p.id))})]})]})}function Nn(){const{modulesCashRegisterStatus:o,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:r,openBlockCashRegister:n,openBlockCashRegisterVersion:a,openBlockCart:d,cartVersionList:l,modulesCartStatus:c,cartCurrentVersion:i,openBlockCartVersion:p,setCartVersionList:u,setCartCurrentVersion:h,setModulesCartStatus:b,setOpenBlockCart:g,setOpenBlockCartVersion:S,setDeliveryStatus:A,setOpenBlockCashRegister:W,setCashRegisterVersionList:D,setModulesCashRegisterStatus:j,setCashRegisterCurrentVersion:k,setOpenBlockCashRegisterVersion:P}=de(),x=()=>{g(!d)},v=()=>{W(!n)};return e.jsxs("div",{className:_.wrapperModules,children:[e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>x(),children:[e.jsx("h2",{className:_.item_top_title,children:"Корзина"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>x(),children:e.jsx("div",{className:`${_.item_top_arrow} ${d?_.item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${d?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>b(!c),children:e.jsx(xe,{status:c,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(Je,{color:"rgb(137, 250, 135)",openBlock:p,setOpenBlock:S,title:"Выберите версию",versionList:l,currentVersion:i,setCurrentVersion:h,setVersionList:u}),e.jsxs("div",{className:_.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:_.item_shell,onClick:()=>A(!t),children:e.jsx(xe,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>v(),children:[e.jsx("h2",{className:_.item_top_title,children:"Кacca"}),e.jsx("button",{className:_.item_top_btn,onClick:()=>v(),children:e.jsx("div",{className:`${_.item_top_arrow} ${n?_.item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${_.item_block} ${n?_.item_block_open:""}`,children:[e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:_.item_shell,onClick:()=>j(!o),children:e.jsx(xe,{status:o,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(Je,{color:"rgb(137, 250, 135)",openBlock:a,setOpenBlock:P,title:"Выберите версию",versionList:s,currentVersion:r,setCurrentVersion:k,setVersionList:D})]})]})]})}function In(){const{templates:o,setTemplates:t}=de(),[s,r]=m.useState([...o]);m.useEffect(()=>{r([...o])},[o]);const n=l=>{const c=s.map(i=>i.id===l?{...i,open:!i.open}:i);r(c)},a=(l,c)=>{const i=s.map(p=>p.id===l?{...p,isActive:!0,templateThemes:p.templateThemes.map(u=>u.id===c?{...u,isActive:!0}:{...u,isActive:!1})}:{...p,isActive:!1,templateThemes:p.templateThemes.map(u=>({...u,isActive:!1}))});r(i)};function d(){t(s)}return e.jsxs("div",{className:_.wrapperModules,children:[s.map(l=>e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.item_top,onClick:()=>n(l.id),children:[e.jsx("h2",{className:_.item_top_title,children:l.title}),e.jsx("button",{className:_.item_top_btn,onClick:()=>n(l.id),children:e.jsx("div",{className:`${_.item_top_arrow} ${l.open?_.item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.item_block} ${l.open?_.item_block_open:""}`,children:l.templateThemes.map(c=>e.jsxs("div",{className:_.item_onOff,children:[e.jsx("span",{children:c.title}),e.jsx("div",{className:_.item_shell,onClick:()=>a(l.id,c.id),children:e.jsx(xe,{status:c.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},c.id))})]},l.id)),e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>d(),children:"Сохранить"})]})]})}function Sn({title:o,setOpenModal:t}){const{currentCategory:s}=de(),[r,n]=m.useState(""),{selectedSuperCategory:a,selectedCategory:d}=Be();m.useEffect(()=>{s=="Котегории"&&a&&l(a),s=="Подкотегории"&&d&&l(d)},[s,a,d]);const l=async i=>{try{const u=await(await Re.get(`https://api.mcrm.uz/api/categories/${i}`)).data;n(u.name.ru)}catch(p){console.error("Ошибка произошла при получении названия варианта категории",p)}},c=()=>{t&&t(!0)};return e.jsxs("div",{className:_.editBlock,onClick:c,children:[r||o,e.jsx(T,{name:"PencilIcon"})]})}const Dn="_modalCategory_xzv82_1",$n="_modalCategory_block_xzv82_10",On="_modalCategory_nav_xzv82_16",Pn="_modalCategory_nav_title_xzv82_23",An="_modalCategory_content_xzv82_29",En="_modalCategory_content_message_xzv82_36",Wn="_modalCategory_content_link_xzv82_44",Un="_modalCategory_content_link_active_xzv82_72",Bn="_modalCategory_content_item_xzv82_82",Fn="_modalCategory_content_block_xzv82_104",Ln="_modalCategory_content_block_title_xzv82_108",zn="_settings_xzv82_115",Mn="_settings_title_xzv82_118",Tn="_settings_content_xzv82_123",Rn="_settings_content_top_xzv82_126",qn="_settings_content_buttons_xzv82_129",Vn="_settings_content_btn_xzv82_139",Hn="_settings_content_btn_cancel_xzv82_151",Xn="_settings_content_btn_save_xzv82_154",Kn="_settings_tools_xzv82_157",Zn="_settings_tools_link_xzv82_162",Gn="_settings_tools_link_active_xzv82_177",G={modalCategory:Dn,modalCategory_block:$n,modalCategory_nav:On,modalCategory_nav_title:Pn,modalCategory_content:An,modalCategory_content_message:En,modalCategory_content_link:Wn,modalCategory_content_link_active:Un,modalCategory_content_item:Bn,modalCategory_content_block:Fn,modalCategory_content_block_title:Ln,settings:zn,settings_title:Mn,settings_content:Tn,settings_content_top:Rn,settings_content_buttons:qn,settings_content_btn:Vn,settings_content_btn_cancel:Hn,settings_content_btn_save:Xn,settings_tools:Kn,settings_tools_link:Zn,settings_tools_link_active:Gn};function Jn({setCancel:o}){return e.jsxs("div",{className:G.modalCategory_nav,children:[e.jsx("h2",{className:G.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:G.modalCategory_nav_close,onClick:o,children:e.jsx(T,{width:24,height:24,name:"XMarkIcon"})})]})}function Yn({superCategory:o,category:t,setMessageStatus:s,fetchCategories:r}){const{currentCategory:n}=de(),{selectedSuperCategory:a,setSelectedSuperCategory:d}=Be(),{setCurrentCategory:l}=he(),[c,i]=m.useState(10),p=(h,b)=>{if(h.preventDefault(),n==="Подкотегории"){r("category",1,10,b.id);const g=t.filter(S=>S.parentId==b.id);l(g),d(b.id),s(!1)}d(b.id)},u=h=>{h.preventDefault();const b=c+10;i(b),r("super",1,b)};return e.jsxs("div",{className:G.modalCategory_content_block,children:[e.jsx("h2",{className:G.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:G.modalCategory_content_item,children:[o.map(h=>e.jsxs(Z,{to:"#",className:`${G.modalCategory_content_link} ${h.id==a?G.modalCategory_content_link_active:""} `,onClick:b=>p(b,h),children:[h.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),e.jsx(Z,{to:"#",className:G.modalCategory_content_link,onClick:h=>u(h),children:"Ещё..."})]})]})}function Qn({categoryId:o,category:t,setCategoryId:s,setSubCategory:r,fetchCategories:n}){const{selectedSuperCategory:a}=Be(),[d,l]=m.useState(10),c=p=>{p.preventDefault();const u=d+10;l(u),n("category",1,u,a)},i=(p,u)=>{r(p,u),s(u.id)};return t.length>0&&e.jsxs("div",{className:G.modalCategory_content_block,children:[e.jsx("h2",{className:G.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:G.modalCategory_content_item,children:[t==null?void 0:t.map(p=>e.jsxs(Z,{to:"#",className:`${G.modalCategory_content_link} ${p.id==o?G.modalCategory_content_link_active:""} `,onClick:u=>i(u,p),children:[p.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},p.id)),e.jsx(Z,{to:"#",className:G.modalCategory_content_link,onClick:p=>c(p),children:"Ещё..."})]})]})}function er({setSettings:o,setCancel:t}){return e.jsxs("div",{className:G.settings_content_buttons,children:[e.jsx("button",{className:`${G.settings_content_btn} ${G.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(Z,{to:"#",className:`${G.settings_content_btn} ${G.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function tr({setOpenModal:o}){const{currentCategory:t}=de(),{selectedSuperCategory:s,setSelectedSuperCategory:r,selectedCategory:n,setSelectedCategory:a}=Be(),[d,l]=m.useState(0),[c,i]=m.useState(!1),[p,u]=m.useState("Выберите категорию"),[h,b]=m.useState([]),[g,S]=m.useState([]);m.useEffect(()=>{j("super",1,10),n&&l(n)},[]);const A=(P,x)=>{P.preventDefault(),j("subCategory",1,10,x.id),i(!1)},W=()=>{t=="Котегории"?r(s):t=="Подкотегории"&&a(d),D()},D=()=>{i(!1),u("Выберите категорию"),o(!1)},j=async(P,x,v,$)=>{try{const N=P=="super"?`https://api.mcrm.uz/api/categories?&page=${x}&perPage=${v}`:`https://api.mcrm.uz/api/categories?parentId=${$}&page=${x}&perPage=${v}`,E=(await Re.get(N)).data.data.map(R=>({...R,label:P==="super"?"Супер категория":P==="category"?"Категория":"Субкатегория"}));P==="super"&&b([...E]),P==="category"&&S([...E])}catch(N){console.error(`Ошибка произошла при получении ${P} категорий`,N)}},k=()=>{o(!1)};return e.jsx("div",{className:G.modalCategory,onClick:k,children:e.jsxs("div",{className:G.modalCategory_block,onClick:P=>P.stopPropagation(),children:[e.jsx(Jn,{setCancel:D}),e.jsx("p",{className:G.modalCategory_content_message,children:c?p:""}),e.jsxs("div",{className:G.modalCategory_content,children:[e.jsx(Yn,{superCategory:h,category:g,setMessageStatus:i,fetchCategories:j}),t==="Подкотегории"&&e.jsx(Qn,{categoryId:d,category:g,setCategoryId:l,setSubCategory:A,fetchCategories:j}),e.jsx(er,{setSettings:W,setCancel:D})]})]})})}function sr(){const[o,t]=m.useState(!1),[s,r]=m.useState(!1),{currentCategory:n,categoriesStatus:a,categories:d,setCategoriesStatus:l,setCurrentCategory:c}=de();m.useEffect(()=>{t(n==="Котегории"||n==="Подкотегории")},[n]);const i=p=>{c(p.title),p.title==="Котегории"||p.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:_.categoriesDropDown,children:[e.jsx("h2",{className:_.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(tr,{setOpenModal:r}),e.jsxs("div",{className:_.categoriesDropDown_item,children:[e.jsxs("div",{className:_.categoriesDropDown_item_top,onClick:()=>l(!a),children:[e.jsx("h2",{className:_.categoriesDropDown_item_top_title,children:n}),e.jsx("button",{className:_.categoriesDropDown_item_top_btn,onClick:()=>l(!a),children:e.jsx("div",{className:`${_.categoriesDropDown_item_top_arrow} ${a?_.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${_.categoriesDropDown_item_block} ${a?_.categoriesDropDown_item_block_open:""}`,children:d.map(p=>e.jsx("div",{className:`${_.categoriesDropDown_item_block_line} ${p.title==n?_.categoriesDropDown_item_block_active:""}`,onClick:()=>i(p),children:p.title},p.id))})]}),o&&e.jsx(Sn,{title:"Выберите вариант",setOpenModal:r})]})}const or="_banner_1eodh_1",nr="_banner_title_1eodh_5",rr="_products_banner_1eodh_10",ar="_products_banner_wrap_1eodh_13",ir="_products_banner_wrap_btn_1eodh_19",cr="_products_banner_wrap_filter_1eodh_30",lr="_products_banner_wrap_filter_text_1eodh_40",_r="_products_banner_form_1eodh_48",dr="_products_banner_form_wrap_1eodh_53",pr="_products_banner_form_wrap_btn_1eodh_59",ur="_products_banner_form_wrap_input_1eodh_75",mr="_products_banner_form_wrap_icon_1eodh_83",hr="_table_1eodh_87",br="_table_tbody_1eodh_92",gr="_table_tbody_tr_1eodh_97",vr="_table_tbody_tr_active_1eodh_100",xr="_table_tbody_img_1eodh_103",fr="_table_tr_1eodh_108",yr="_table_th_1eodh_111",kr="_table_td_1eodh_122",jr="_table_td_edit_1eodh_130",wr="_table_btn_1eodh_136",Cr="_versions_1eodh_144",Nr="_versions_block_1eodh_149",Ir="_versions_block_top_1eodh_154",Sr="_versions_block_top_title_1eodh_164",Dr="_versions_block_top_arrow_1eodh_168",$r="_versions_block_top_arrow_active_1eodh_177",Or="_versions_block_dropdown_1eodh_180",Pr="_versions_block_dropdown_item_1eodh_195",Ar="_versions_block_dropdown_open_1eodh_206",Er="_add_banner_1eodh_213",Wr="_add_banner_header_1eodh_221",Ur="_add_banner_header_title_1eodh_225",Br="_add_banner_content_1eodh_229",Fr="_add_banner_content_product_1eodh_232",Lr="_add_banner_content_link_1eodh_254",zr="_add_banner_content_info_1eodh_262",Mr="_add_banner_content_info_text_1eodh_266",Tr="_add_banner_content_download_1eodh_272",Rr="_add_banner_content_download_link_1eodh_281",qr="_add_banner_content_btns_1eodh_293",Vr="_add_banner_content_btn_1eodh_293",Hr="_category_wrap_1eodh_311",Xr="_modalCategory_1eodh_315",Kr="_modalCategory_block_1eodh_323",Zr="_modalCategory_nav_1eodh_328",Gr="_modalCategory_nav_title_1eodh_335",Jr="_modalCategory_content_1eodh_341",Yr="_modalCategory_content_message_1eodh_348",Qr="_modalCategory_content_link_1eodh_356",ea="_modalCategory_content_link_active_1eodh_384",ta="_modalCategory_content_item_1eodh_394",sa="_modalCategory_content_block_1eodh_416",oa="_modalCategory_content_block_title_1eodh_420",na="_add_link_1eodh_427",ra="_add_link_title_1eodh_430",aa="_add_link_input_1eodh_434",ia="_modal_btn_1eodh_443",y={banner:or,banner_title:nr,products_banner:rr,products_banner_wrap:ar,products_banner_wrap_btn:ir,products_banner_wrap_filter:cr,products_banner_wrap_filter_text:lr,products_banner_form:_r,products_banner_form_wrap:dr,products_banner_form_wrap_btn:pr,products_banner_form_wrap_input:ur,products_banner_form_wrap_icon:mr,table:hr,table_tbody:br,table_tbody_tr:gr,table_tbody_tr_active:vr,table_tbody_img:xr,table_tr:fr,table_th:yr,table_td:kr,table_td_edit:jr,table_btn:wr,versions:Cr,versions_block:Nr,versions_block_top:Ir,versions_block_top_title:Sr,versions_block_top_arrow:Dr,versions_block_top_arrow_active:$r,versions_block_dropdown:Or,versions_block_dropdown_item:Pr,versions_block_dropdown_open:Ar,add_banner:Er,add_banner_header:Wr,add_banner_header_title:Ur,add_banner_content:Br,add_banner_content_product:Fr,add_banner_content_link:Lr,add_banner_content_info:zr,add_banner_content_info_text:Mr,add_banner_content_download:Tr,add_banner_content_download_link:Rr,add_banner_content_btns:qr,add_banner_content_btn:Vr,category_wrap:Hr,modalCategory:Xr,modalCategory_block:Kr,modalCategory_nav:Zr,modalCategory_nav_title:Gr,modalCategory_content:Jr,modalCategory_content_message:Yr,modalCategory_content_link:Qr,modalCategory_content_link_active:ea,modalCategory_content_item:ta,modalCategory_content_block:sa,modalCategory_content_block_title:oa,add_link:na,add_link_title:ra,add_link_input:aa,modal_btn:ia};function lt({color:o="black",title:t="",versionList:s=[],className:r,openBlock:n,setOpenBlock:a,setVersionList:d}){const[l,c]=m.useState(s[0].title),{setChangeCategoryStyles:i}=ae(),p=u=>{const h=s.map(b=>({...b,isOpen:b.id===u.id}));u.title=="Категория"&&i(!0),c(u.title),d(h),a(!1)};return e.jsxs("div",{className:r??y.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:y.versions_block,children:[e.jsxs("div",{className:y.versions_block_top,children:[e.jsx("h2",{className:y.versions_block_top_title,style:{color:o},children:l}),e.jsx("button",{className:y.versions_block_top_btn,onClick:()=>a(!n),children:e.jsx("div",{className:`${y.versions_block_top_arrow} ${n?y.versions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${y.versions_block_dropdown} ${n?y.versions_block_dropdown_open:""}`,children:s.map(u=>e.jsx("span",{className:y.versions_block_dropdown_item,onClick:()=>p(u),children:u.title},u.id))})]})]})}function Me({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:n=500,scale:a=1.1,status:d=!1,disabled:l=!1}){const c={width:`${o}px`,height:`${o/2-o/20}px`,background:d?s:r,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer",opacity:l?1:.3},i={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${d?s:r}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${a}) translateX(${d?"110%":"0"})`};return e.jsx("div",{style:c,children:e.jsx("div",{style:i})})}const Oe=({arr:o=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:r=!1,isEdit:n=!1,isCategory:a,isLinks:d,setPickedProduct:l,setPickedProductActive:c})=>{const{bannersArr:i,selectedProductEdit:p,imageUrlEditBanner:u,bannersArrProduct:h,bannersArrLink:b,setBannersArrLink:g,setSelectedProductEdit:S,setImageUrlEditBanner:A,setCurrentProductOpen:W,clearPickedProductsArr:D,setBannersArrProduct:j,setBannersArr:k,setBannersArrCategory:P}=ae(),[x,v]=m.useState(null);m.useState(new Set);const $=f=>i.some(w=>w.brandName===f&&w.isBannerActive),N=(f,w)=>{if(s==="mxikCode"&&(l==null||l(f)),n&&w){const M={productId:ee(),bannerUrl:u,brandName:w.brandName,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};M.brandName!=null&&!$(M.brandName)?(j(h.map(U=>U.productId===p?M:U)),k(i.map(U=>U.productId===p?M:U)),W(!1)):console.warn("Объект с таким brandName уже существует.")}v(f)},C=(f,w)=>{s==="productId"&&(c==null||c(f),N==null||N(f),v(f),D(),w.productId&&S(w.productId),w.bannerUrl&&A(w.bannerUrl))},E=(f,w,M)=>{if(f.stopPropagation(),M.isBannerActive)r&&(j(t.map(U=>U.productId===w?{...U,toggleSwitcher:!U.toggleSwitcher}:U)),k(i.map(U=>U.productId===w?{...U,toggleSwitcher:!U.toggleSwitcher}:U))),a&&(P(t.map(U=>U.productId===w?{...U,toggleSwitcher:!U.toggleSwitcher}:U)),k(i.map(U=>U.productId===w?{...U,toggleSwitcher:!U.toggleSwitcher}:U))),d&&(g(t.map(U=>U.productId===w?{...U,toggleSwitcher:!U.toggleSwitcher}:U)),k(i.map(U=>U.productId===w?{...U,toggleSwitcher:!U.toggleSwitcher}:U)));else return},R=f=>f.productId!==void 0,Y=(f,w)=>{f.stopPropagation(),j(t.map(M=>M.productId===w.productId?{...M,isBannerActive:!1,brandName:"-"}:M)),k(i.map(M=>M.productId===w.productId?{...M,isBannerActive:!1,brandName:"-"}:M))};return e.jsxs("table",{className:y.table,children:[e.jsx("thead",{className:y.table_thead,children:e.jsx("tr",{className:y.table_tr,children:o.map(f=>e.jsx("th",{className:y.table_th,children:f.title},f.id))})}),e.jsx("tbody",{className:y.table_tbody,children:t==null?void 0:t.map(f=>e.jsxs("tr",{className:`${y.table_tbody_tr} ${!n&&x==(s==="mxikCode"?f.mxikCode:f.productId)?y.table_tbody_tr_active:""}`,style:{cursor:r||a||d?"pointer":"default"},onClick:()=>C(f.productId,f),children:[e.jsxs("td",{className:y.table_td,children:[s==="mxikCode"&&f.brandName,r&&e.jsx("img",{className:y.table_tbody_img,src:f.bannerUrl??"",alt:"Banner"}),a&&e.jsx("img",{className:y.table_tbody_img,src:f.bannerUrl??"",alt:"Banner"}),d&&e.jsx("img",{className:y.table_tbody_img,src:f.bannerUrl??"",alt:"Banner"})]}),e.jsxs("td",{className:y.table_td,children:[a?f.categoryTitle:"",r?f.brandName:f.crmSellingPrice,d&&f.brandName]}),e.jsx("td",{className:y.table_td,children:r?"":f.crmAmount}),e.jsx("td",{className:y.table_td,children:a?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:w=>{const M=f;M.productId&&E(w,M.productId,f)},children:e.jsx(Me,{width:62,status:R(f)&&f.toggleSwitcher&&f.isBannerActive,disabled:R(f)&&f.isBannerActive})}):r?e.jsxs("div",{className:y.table_td_edit,children:[f.brandName!=="-"&&e.jsx("button",{className:y.table_btn,style:{width:"156px",background:"#FFB5B5"},onClick:w=>Y(w,f),children:"Открепить продукт"}),e.jsx("div",{onClick:w=>{const M=f;M.productId&&E(w,M.productId,f)},children:e.jsx(Me,{width:62,status:R(f)&&f.toggleSwitcher&&f.isBannerActive,disabled:R(f)&&f.isBannerActive})})]}):d?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:w=>{const M=f;M.productId&&E(w,M.productId,f)},children:e.jsx(Me,{width:62,status:R(f)&&f.toggleSwitcher&&f.isBannerActive,disabled:R(f)&&f.isBannerActive})}):e.jsx("button",{className:y.table_btn,onClick:()=>N(f.mxikCode,f),children:n?"Заменить":"Выбрать"})})]},R(f)?f.productId:f.mxikCode))})]})};function ca({setCancel:o}){return e.jsxs("div",{className:H.modalCategory_nav,children:[e.jsx("h2",{className:H.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:H.modalCategory_nav_close,onClick:o,children:e.jsx(T,{width:24,height:24,name:"XMarkIcon"})})]})}function la({superCategory:o,category:t,superId:s,setLocalPicked:r,setSuperId:n,setMessageStatus:a,setSubCategories:d,fetchCategories:l,setSuperCategoryObj:c}){const{changeCategoryStyles:i,categoriesArr:p,setCategoriesArr:u,setActiveCategory:h,setActiveCategoryTitle:b}=ae(),{setCurrentCategory:g}=he(),[S,A]=m.useState(10),W=(j,k)=>{j.preventDefault(),l("category",1,10,k.id),d([]);const P=t.filter(x=>x.parentId==k.id);if(g(P),r(k),n(k.id),a(!1),i&&k.label&&(h(k.label),b(k.name.ru)),i){const x=p.filter(v=>v.label!==k.label);x.push(k),u(x)}c==null||c(k),console.log("super",k)},D=()=>{const j=S+10;A(j),l("super",1,j),console.log("addPage",j)};return e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[o.map(j=>e.jsxs(Z,{to:"#",className:`${H.modalCategory_content_link} ${j.id==s?H.modalCategory_content_link_active:""} `,onClick:k=>W(k,j),children:[j.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},j.id)),e.jsx(Z,{to:"#",className:H.modalCategory_content_link,onClick:()=>D(),children:"Ещё..."})]})]})}function _a({superId:o,categoryId:t,category:s,setSubCategory:r,fetchCategories:n}){const[a,d]=m.useState(10),l=()=>{const i=a+10;d(i),n("category",1,i,o),console.log("addPage",i,o)},c=(i,p)=>{r(i,p)};return s.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[s==null?void 0:s.map(i=>e.jsxs(Z,{to:"#",className:`${H.modalCategory_content_link} ${i.id==t?H.modalCategory_content_link_active:""} `,onClick:p=>c(p,i),children:[i.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},i.id)),e.jsx(Z,{to:"#",className:H.modalCategory_content_link,onClick:()=>l(),children:"Ещё..."})]})]})}function da({subId:o,categoryId:t,subCategories:s,setSubProductsList:r,fetchCategories:n}){const[a,d]=m.useState(10),l=()=>{const c=a+10;d(c),n("subCategory",1,c,t),console.log("addPage",c)};return s.length>0&&e.jsxs("div",{className:H.modalCategory_content_block,children:[e.jsx("h2",{className:H.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:H.modalCategory_content_item,children:[s==null?void 0:s.map(c=>e.jsxs(Z,{to:"#",className:`${H.modalCategory_content_link} ${c.id==o?H.modalCategory_content_link_active:""} `,onClick:i=>r(i,c),children:[c.name.ru,e.jsx(T,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},c.id)),e.jsx(Z,{to:"#",className:H.modalCategory_content_link,onClick:()=>l(),children:"Ещё..."})]})]})}function pa({setSettings:o,setCancel:t}){return e.jsxs("div",{className:H.settings_content_buttons,children:[e.jsx("button",{className:`${H.settings_content_btn} ${H.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${H.settings_content_btn} ${H.settings_content_btn_save}`,onClick:o,children:"Сохранить"})]})}function Fe({isProduct:o,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:r,setCurrentCategory:n,setCurrentSubCategory:a}=he(),{changeCategoryStyles:d,categoriesArr:l,setCategoriesArr:c,setPickedProducts:i,setActiveCategory:p,setActiveCategoryTitle:u,setOpenModalCategoryBanner:h}=ae(),b=d?y:H,{websiteProducts:g}=Ce(),[S,A]=m.useState(0),[W,D]=m.useState(0),[j,k]=m.useState(0),[P,x]=m.useState({}),[v,$]=m.useState(!1),[N,C]=m.useState("Выберите категорию"),[E,R]=m.useState([]),[Y,f]=m.useState([]),[w,M]=m.useState([]),[U,Se]=m.useState(null),[ve,je]=m.useState(null),[B,oe]=m.useState(null);m.useEffect(()=>{ce("super",1,10)},[]);const L=(Q,V)=>{Q.preventDefault(),ce("subCategory",1,10,V.id);const pe=w.filter(ue=>ue.parentId==V.id);if(a(pe),x(V),D(V.id),$(!1),d&&V.label&&(p(V.label),u(V.name.ru)),d){const ue=l.filter(be=>be.label!==V.label);ue.push(V),c(ue)}je(V),console.log("category",V.id)},q=(Q,V)=>{if(Q.preventDefault(),x(V),k(V.id),$(!1),d&&V.label&&(p(V.label),u(V.name.ru)),d){const pe=l.filter(ue=>ue.name.ru!==V.name.ru);pe.push(V),console.log("newCategories",pe),c(pe)}oe(V),console.log("item",V)},_e=()=>{if(Object.keys(P).length===0){$(!0),C("Выберите Суперкотегорию");return}if(Y.length>0&&W===0){$(!0),C("Выберите Категорию");return}if(w.length>0&&j===0){$(!0),C("Выберите Подкотегорию");return}if(console.log("localPicked",P),P){const V=P.id,pe=g.filter(ue=>{var be;return((be=ue.crmCategoryParentId)==null?void 0:be.id)==V});i(pe)}const Q=[];U&&Q.push(U),ve&&Q.push(ve),B&&Q.push(B),c(Q),ie()},ie=()=>{r(P),s(!1),A(0),D(0),k(0),x({}),n([]),a([]),$(!1),C("Выберите категорию"),h(!1)},ce=async(Q,V,pe,ue)=>{try{const be=Q=="super"?`https://api.mcrm.uz/api/categories?&page=${V}&perPage=${pe}`:`https://api.mcrm.uz/api/categories?parentId=${ue}&page=${V}&perPage=${pe}`,ze=(await Re.get(be)).data.data.map(kt=>({...kt,label:Q==="super"?"Супер категория":Q==="category"?"Категория":"Субкатегория"}));Q==="super"&&R([...ze]),Q==="category"&&f([...ze]),Q==="subCategory"&&M([...ze])}catch(be){console.error(`Ошибка произошла при получении ${Q} категорий`,be)}};return e.jsx("div",{className:b.modalCategory,children:e.jsxs("div",{className:b.modalCategory_block,children:[!d&&e.jsx(ca,{setCancel:ie}),e.jsx("p",{className:b.modalCategory_content_message,children:v?N:""}),e.jsxs("div",{className:b.modalCategory_content,children:[e.jsx(la,{superId:S,superCategory:E,category:Y,setLocalPicked:x,setSuperId:A,setMessageStatus:$,fetchCategories:ce,setSubCategories:M,setSuperCategoryObj:Se}),e.jsx(_a,{superId:S,categoryId:W,category:Y,setSubCategory:L,fetchCategories:ce}),e.jsx(da,{subId:j,categoryId:W,subCategories:w,setSubProductsList:q,fetchCategories:ce}),!t&&e.jsx(pa,{setSettings:_e,setCancel:ie})]})]})})}const Ne=({title:o,currentProductEdit:t,isEdit:s,isCategory:r,isLinks:n,linkTextEdit:a,deleteBanner:d})=>{const{currentProductTable:l,changeCategoryStyles:c,categoriesArr:i,bannersArr:p,linksPageBannerText:u,openLinksPage:h,openProductsPage:b,activeCategory:g,activeCategoryTitle:S,bannersArrProduct:A,bannersArrCategory:W,bannersArrLink:D,setBannersArrLink:j,setCurrentProductOpen:k,clearCategoriesArr:P,addBannerToArr:x,setLinksPageBannerText:v,setBannersArrProduct:$,setBannersArr:N,setBannersArrCategory:C}=ae(),E=l,[R,Y]=m.useState(null),[f,w]=m.useState(null),[M,U]=m.useState(""),Se=L=>{if(L.target.files&&L.target.files[0]){const q=L.target.files[0];w(q);const _e=new FileReader;_e.onloadend=()=>{const ie=_e.result;Y(ie)},_e.readAsDataURL(q)}},ve=()=>{document.getElementById("upload").click()},je=()=>{if(!f)return;const L=()=>{switch(g){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}};if(f&&E&&b){const q={productId:ee(),bannerUrl:R||"",brandName:E.brandName,isProductBanner:!0,isBannerActive:!0,toggleSwitcher:!0};p.some(ce=>ce.brandName===q.brandName)||x(q),k(!1),Y(null),w(null);const ie=document.getElementById("upload");ie&&(ie.value="")}if(c&&h==!1){const q=L(),_e={productId:ee(),bannerUrl:R||"",categoryLabel:q,categoryTitle:S,isCategoryBanner:!0,isBannerActive:!0,toggleSwitcher:!0};p.some(Q=>Q.categoryTitle===_e.categoryTitle)||x(_e),Y(null),w(null);const ce=document.getElementById("upload");ce&&(ce.value="")}if(h&&u){const q={productId:ee(),bannerUrl:R||"",brandName:u,isLinkBanner:!0,isBannerActive:!0,toggleSwitcher:!0};p.some(ce=>ce.brandName===q.brandName)||(x(q),console.log("bannersArr",p)),Y(null),w(null),v("");const ie=document.getElementById("upload");ie&&(ie.value="")}},B=()=>{R===null?s&&(r&&(U((()=>{switch(g){case"Супер категория":return"superCategory";case"Категория":return"bannerCategory";case"Субкатегория":return"subCategory";default:return""}})()),C(W.map(q=>q.productId===(l==null?void 0:l.productId)?{...q,categoryTitle:S,activeCategoryEdit:M}:q))),n&&j(D.map(L=>L.productId===(t==null?void 0:t.productId)?{...L,brandName:a}:L)),N(p.map(L=>L.productId===(l==null?void 0:l.productId)?{...L,categoryTitle:S,activeCategoryEdit:M}:L)),k(!1)):s&&(r&&C(W.map(L=>L.productId===(t==null?void 0:t.productId)?{...L,bannerUrl:R}:L)),n&&j(D.map(L=>L.productId===(t==null?void 0:t.productId)?{...L,bannerUrl:R,brandName:a}:L)),N(p.map(L=>L.productId===(t==null?void 0:t.productId)?{...L,bannerUrl:R,brandName:a,categoryTitle:S,activeCategoryEdit:M}:L)),k(!1))},oe=()=>{d==null||d(t==null?void 0:t.productId),k(!1)};return e.jsxs("div",{className:y.add_banner,children:[e.jsx("div",{className:y.add_banner_header,children:e.jsx("h3",{className:y.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:y.add_banner_content,children:[c?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:y.add_banner_content_product,children:[o,":",r&&e.jsxs("span",{children:[" ",t==null?void 0:t.categoryTitle]}),n&&e.jsxs("span",{children:[" ",t==null?void 0:t.brandName]})]}),i==null?void 0:i.map(L=>e.jsx("span",{className:y.add_banner_content_product,children:L.name.ru},L.name.ru))]}):e.jsx("p",{className:y.add_banner_content_product,children:h?`${o}: ${u}`:`${o}: ${E==null?void 0:E.brandName}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:Se}),e.jsx("label",{htmlFor:"upload",className:y.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:y.add_banner_content_info,children:e.jsx("p",{className:y.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:y.add_banner_content_download,children:e.jsx("img",{src:R||(t==null?void 0:t.bannerUrl),alt:"",style:{width:"555px",height:"229px",objectFit:"cover"}})}):e.jsx("div",{className:y.add_banner_content_download,children:R?e.jsx("img",{src:R,alt:"Uploaded",className:y.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:y.add_banner_content_download_link,onClick:()=>ve(),children:[e.jsx(T,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:y.add_banner_content_btns,children:[e.jsx("button",{className:y.add_banner_content_btn,onClick:oe,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:y.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>B(),children:"Изменить"})]}):e.jsxs("div",{className:y.add_banner_content_btns,children:[e.jsx("button",{className:y.add_banner_content_btn,onClick:()=>k(!1),children:"Отмена"}),e.jsx("button",{className:y.add_banner_content_btn,onClick:()=>je(),children:"Сохранить"})]})]})]})};function _t({inputText:o,setInputText:t,filteredUsers:s,isProductEdit:r}){const{categoriesArr:n,filteredSubCategory:a,filteredCategoty:d,filteredSuperCategory:l,setCurrentProductOpen:c,setChangeCategoryStyles:i,setOpenModalCategoryBanner:p,clearCategoriesArr:u,setFilteredSubCategory:h,setFilteredCategoty:b,setFilteredSuperCategory:g}=ae(),S=()=>{r&&c(!1),i(!1),p(!0),u()};return m.useEffect(()=>{console.log("categoriesArr",n)},[n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:y.products_banner_wrap,children:[e.jsx("button",{className:y.products_banner_wrap_btn,onClick:S,children:e.jsx(T,{name:"FunnelIcon",width:20})}),(n==null?void 0:n.length)!==0&&e.jsx("div",{className:y.products_banner_wrap_filter,children:n==null?void 0:n.map(A=>e.jsx("span",{className:y.products_banner_wrap_filter_text,children:A.name.ru},A.id))}),e.jsxs("form",{action:"",className:y.products_banner_form,onSubmit:A=>s==null?void 0:s(A),children:[e.jsxs("div",{className:y.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:y.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:o,onChange:A=>t==null?void 0:t(A.target.value)}),e.jsx(T,{className:y.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:y.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const ua=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],ma=()=>{const{websiteProducts:o}=Ce(),[t,s]=m.useState(""),{openModalCategoryBanner:r,currentProductOpen:n,searchTextBannner:a,pickedProducts:d,setCurrentProductTable:l,clearCategoriesArr:c,setSearchTextBannner:i,clearPickedProductsArr:p,setOpenLinksPage:u,setOpenProductsPage:h,setCurrentProductOpen:b,setOpenModalCategoryBanner:g}=ae(),S=k=>{k.preventDefault(),i(t),c()},A=k=>{const P=o.find(x=>x.mxikCode===k);P&&(l(P),b(!0))},[W,D]=m.useState([]);m.useEffect(()=>{let k=o;k=k==null?void 0:k.filter(P=>{var x;return(x=P.className)==null?void 0:x.toLowerCase().includes(a.toLowerCase())}),D(k)},[a,o]);const j=a?W:d;return m.useEffect(()=>{t===""&&(i(""),p(),b(!1))},[t]),m.useEffect(()=>{b(!1),u(!1),h(!0),g(!1),c()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:y.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(_t,{inputText:t,setInputText:s,filteredUsers:S}),e.jsx(Oe,{arrToUse:j,arr:ua,setPickedProduct:A,selectionMode:"mxikCode"})]}),r&&e.jsx(Fe,{isProduct:!0}),n&&e.jsx(Ne,{title:"Товар"})]})},ha=()=>{const{categoriesArr:o,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:r}=ae();return m.useEffect(()=>{t(!1),s(!0),r(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:y.category_wrap,children:e.jsx(Fe,{isCategory:!0})}),e.jsx(Ne,{title:"Каталог",categories:o})]})},ba=()=>{const{linksPageBannerText:o,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:r,setOpenProductsPage:n}=ae();return m.useEffect(()=>{s(!0),r(!1),t(""),n(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:y.add_link,children:[e.jsx("h3",{className:y.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:y.add_link_input,type:"text",value:o,onChange:a=>t(a.target.value)})]}),e.jsx(Ne,{title:"Страница"})]})};function ga(){const{bannerDropdownOptions:o,openBannerDropdown:t,setBannerDropdownOptions:s,setOpenBannerDropdown:r,resetDropdownToDefault:n}=ae(),a=()=>{const d=o.find(l=>l.isOpen);if(!d)return null;switch(d.title){case"Продукт":return e.jsx(ma,{});case"Категория":return e.jsx(ha,{});case"Страница":return e.jsx(ba,{});default:return null}};return m.useEffect(()=>{n()},[]),e.jsxs("div",{className:y.banner,children:[e.jsx("h3",{className:y.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(lt,{openBlock:t,setOpenBlock:r,versionList:o,setVersionList:s}),e.jsx("div",{className:y.banner_content,children:a()})]})}const va=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],xa=()=>{const{websiteProducts:o}=Ce(),{pickedProducts:t,currentProductOpen:s,openModalCategoryBanner:r,bannersArr:n,searchTextBannner:a,currentProductTable:d,bannersArrProduct:l,clearPickedProductsArr:c,clearCategoriesArr:i,setCurrentProductOpen:p,setCurrentProductTable:u,setSearchTextBannner:h,setOpenLinksPage:b,setOpenProductsPage:g,setOpenModalCategoryBanner:S,setBannersArrProduct:A,setBannersArr:W}=ae(),[D,j]=m.useState(""),[k,P]=m.useState([]),x=C=>{C.preventDefault(),h(D),i()},v=C=>{const E=l.find(R=>R.productId===C);E&&(u(E),p(!0))};m.useEffect(()=>{let C=o;C=C==null?void 0:C.filter(E=>{var R;return(R=E.className)==null?void 0:R.toLowerCase().includes(a.toLowerCase())}),P(C)},[a,o]);const $=C=>{A(l.filter(E=>E.productId!=C)),W(n.filter(E=>E.productId!==C))},N=a?k:t;return m.useEffect(()=>{p(!1),b(!1),S(!1),i()},[p,b,g,S,i]),m.useEffect(()=>{D===""&&(h(""),c())},[D]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Oe,{arrToUse:l,arr:va,setPickedProductActive:v,selectionMode:"productId",isActive:!0}),s&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(_t,{filteredUsers:x,setInputText:j}),e.jsx(Oe,{arrToUse:N,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Ne,{title:"Продукт",currentProductEdit:d,isEdit:!0,deleteBanner:$})]})]}),r&&e.jsx(Fe,{})]})},fa=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],ya=()=>{const{bannersArr:o,bannersArrCategory:t,currentProductTable:s,currentProductOpen:r,setCurrentProductOpen:n,setBannersArr:a,setCurrentProductTable:d,setBannersArrCategory:l}=ae(),c=p=>{const u=t.find(h=>h.productId===p);u&&(d(u),n(!0),console.log("currentProductTable",s))},i=p=>{l(t.filter(u=>u.productId!=p)),a(o.filter(u=>u.productId!==p))};return m.useEffect(()=>{n(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Oe,{arr:fa,arrToUse:t,selectionMode:"productId",isCategory:!0,setPickedProductActive:c}),r&&e.jsx(Fe,{isCategory:!0}),r&&e.jsx(Ne,{title:"Каталог",currentProductEdit:s,isEdit:!0,isCategory:!0,deleteBanner:i})]})},ka=({setLinkText:o,currentProductEdit:t})=>{ae();const[s,r]=m.useState(t.brandName||""),n=a=>{r(a),o(a)};return m.useEffect(()=>{r(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:y.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:y.add_link_input,type:"text",onChange:a=>n(a.target.value),value:s})]})},ja=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],wa=()=>{const{bannersArr:o,bannersArrLink:t,currentProductOpen:s,currentProductTable:r,setBannersArr:n,setBannersArrLink:a,setCurrentProductTable:d,setCurrentProductOpen:l}=ae(),[c,i]=m.useState("");m.useEffect(()=>{console.log(c)},[c]);const p=h=>{const b=t.find(g=>g.productId===h);b&&(d(b),console.log("currentProductTable",r),l(!0))},u=h=>{a(t.filter(b=>b.productId!=h)),n(o.filter(b=>b.productId!==h))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Oe,{arr:ja,arrToUse:t,selectionMode:"productId",setPickedProductActive:p,isLinks:!0}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ka,{setLinkText:i,currentProductEdit:r}),e.jsx(Ne,{title:"Страница",currentProductEdit:r,deleteBanner:u,isLinks:!0,isEdit:!0,linkTextEdit:c})]})]})};function Ca(){const{bannerDropdownOptions:o,openBannerDropdown:t,bannersArr:s,bannersArrProduct:r,bannersArrCategory:n,bannersArrLink:a,setBannerDropdownOptions:d,setOpenBannerDropdown:l,resetDropdownToDefault:c,setBannersArrProduct:i,setBannersArrCategory:p,setBannersArrLink:u}=ae();m.useEffect(()=>{i(s.filter(b=>b.isProductBanner===!0)),p(s.filter(b=>b.isCategoryBanner===!0)),u(s.filter(b=>b.isLinkBanner===!0))},[]);const h=()=>{const b=o.find(g=>g.isOpen);if(!b)return null;switch(b.title){case"Продукт":return e.jsx(xa,{});case"Категория":return e.jsx(ya,{});case"Страница":return e.jsx(wa,{});default:return null}};return m.useEffect(()=>{c()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:y.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(lt,{openBlock:t,setOpenBlock:l,versionList:o,setVersionList:d})]}),e.jsx("div",{className:y.banner_content,children:h()})]})}const Na=[{id:1,title:"Новый",href:"/admin/settings/banner"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner"}];function Ia(){const t=re().pathname,{setCurrentProductOpen:s}=ae();return m.useEffect(()=>{s(!1)},[]),e.jsx("div",{className:_.banner,children:e.jsxs("div",{className:_.banner_nav,children:[e.jsx("ul",{className:_.banner_nav_list,children:Na.map(r=>e.jsx("li",{children:e.jsx(Z,{to:r.href,className:`${_.banner_nav_link} ${r.href==t?_.banner_nav_link_active:""}`,children:r.title})},r.id))}),t.startsWith("/admin/settings/banner")&&e.jsxs("div",{className:_.settings_content_base,children:[t=="/admin/settings/banner"&&e.jsx(ga,{}),t=="/admin/settings/banner/activeBanner"&&e.jsx(Ca,{})]})]})})}const Sa="_contacts_mxkpi_1",Da="_contacts_content_mxkpi_4",$a="_contacts_nav_mxkpi_7",Oa="_contacts_nav_list_mxkpi_10",Pa="_contacts_nav_link_mxkpi_15",Aa="_contacts_nav_link_active_mxkpi_30",Ea="_contacts_btn_mxkpi_34",Wa="_socials_mxkpi_55",Ua="_socials_title_mxkpi_60",Ba="_socials_content_mxkpi_65",Fa="_socials_content_wrap_mxkpi_70",La="_socials_content_wrap_input_mxkpi_75",za="_aboutUs_mxkpi_84",Ma="_aboutUs_add_image_mxkpi_87",Ta="_aboutUs_content_mxkpi_90",Ra="_aboutUs_image_wrap_mxkpi_95",qa="_aboutUs_download_mxkpi_104",Va="_aboutUs_text_mxkpi_112",Ha="_aboutUs_inputs_mxkpi_120",Xa="_aboutUs_inputs_wrap_mxkpi_126",Ka="_aboutUs_inputs_wrap_title_mxkpi_130",Za="_aboutUs_inputs_wrap_input_mxkpi_136",Ga="_aboutUs_inputs_wrap_textarea_mxkpi_144",Ja="_aboutUs_btn_mxkpi_152",Ya="_aboutUs_week_info_mxkpi_172",Qa="_aboutUs_week_info_text_mxkpi_178",ei="_aboutUs_week_content_mxkpi_183",ti="_aboutUs_week_wrap_mxkpi_189",si="_aboutUs_week_wrap_colored_mxkpi_193",oi="_aboutUs_week_wrap_colored_active_mxkpi_203",ni="_aboutUs_week_wrap_colored_last_mxkpi_206",ri="_aboutUs_week_wrap_day_mxkpi_209",ai="_aboutUs_week_wrap_schedule_mxkpi_215",ii="_aboutUs_week_wrap_input_mxkpi_221",ci="_custom_checkbox_mxkpi_241",li="_custom_checkbox_input_mxkpi_247",_i="_custom_checkbox_box_mxkpi_252",di="_custom_checkbox_box_icon_mxkpi_261",F={contacts:Sa,contacts_content:Da,contacts_nav:$a,contacts_nav_list:Oa,contacts_nav_link:Pa,contacts_nav_link_active:Aa,contacts_btn:Ea,socials:Wa,socials_title:Ua,socials_content:Ba,socials_content_wrap:Fa,socials_content_wrap_input:La,aboutUs:za,aboutUs_add_image:Ma,aboutUs_content:Ta,aboutUs_image_wrap:Ra,aboutUs_download:qa,aboutUs_text:Va,aboutUs_inputs:Ha,aboutUs_inputs_wrap:Xa,aboutUs_inputs_wrap_title:Ka,aboutUs_inputs_wrap_input:Za,aboutUs_inputs_wrap_textarea:Ga,aboutUs_btn:Ja,aboutUs_week_info:Ya,aboutUs_week_info_text:Qa,aboutUs_week_content:ei,aboutUs_week_wrap:ti,aboutUs_week_wrap_colored:si,aboutUs_week_wrap_colored_active:oi,aboutUs_week_wrap_colored_last:ni,aboutUs_week_wrap_day:ri,aboutUs_week_wrap_schedule:ai,aboutUs_week_wrap_input:ii,custom_checkbox:ci,custom_checkbox_input:li,custom_checkbox_box:_i,custom_checkbox_box_icon:di},pi=({temporaryImageUrl:o,setTemporaryImageUrl:t})=>{qe();const[s,r]=m.useState(null),[n,a]=m.useState(null);m.useEffect(()=>{const c=localStorage.getItem("savedLogoImageUrl");c&&(r(c),t(c))},[t]);const d=c=>{if(c.target.files&&c.target.files[0]){const i=c.target.files[0];a(i);const p=new FileReader;p.onloadend=()=>{const u=p.result;r(u),t(u),localStorage.setItem("savedLogoImageUrl",u)},p.readAsDataURL(i)}},l=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:F.aboutUs_add_image,children:[e.jsx("div",{className:F.aboutUs_image_wrap,children:s||o?e.jsx("img",{src:o||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>l(),children:e.jsx(T,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:d}),e.jsx("label",{htmlFor:"upload",className:F.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:F.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function fe(){return fe=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r])}return o},fe.apply(this,arguments)}const dt=(o,t)=>{const s={};for(const r in o)t.indexOf(r)===-1&&(s[r]=o[r]);return s},pt=J.createContext(null),Le=J.createContext(null),ui=o=>t=>J.createElement(Le.Consumer,null,s=>J.createElement(o,fe({parent:s},t))),mi=(o=[])=>{const[t,s]=m.useState(!1),r=m.useRef(o),n=(()=>{const d=m.useContext(pt);if(d===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return d})(),a=n.getApi();return m.useEffect(()=>{n.load().then(()=>Promise.all(r.current.map(n.loadModule))).then(()=>s(!0))},[]),t&&a?a:null},hi=()=>{},bi=["onLoad","onError","modules","apiLoader"];function ut(o,t=!1,s=[]){return r=>{const{width:n,height:a,modules:d=[],onLoad:l=hi}=r,c=mi(s.concat(d)),i=!t||!!c,p=dt(r,bi);return m.useEffect(()=>c?l(c):void 0,[c]),i?J.createElement(o,fe({ymaps:c},p)):J.createElement("div",{style:{width:n,height:a}})}}const gi=typeof window<"u",Ye={lang:"ru_RU",load:"",ns:"",mode:"release"},vi=o=>{const{version:t="2.1",enterprise:s=!1,query:r={lang:"ru_RU",load:"",ns:""},preload:n=!1,children:a}=o,d=m.useRef((l=>{const{query:c=Ye}=l,i=Date.now().toString(32),p=c.ns||"",u="__yandex-maps-api-onload__$$"+i,h="__yandex-maps-api-onerror__$$"+i,b=gi?window:{},g={};let S;const A=()=>p?b[p]:S,W=()=>{delete b[u],delete b[h]};return{load:()=>{if(A())return Promise.resolve(S);if(g[p])return g[p];const D={onload:u,onerror:h,...Ye,...c},j=Object.keys(D).map(P=>`${P}=${D[P]}`).join("&"),k=[`https://${l.enterprise?"enterprise.":""}api-maps.yandex.ru`,l.version,"?"+j].join("/");return g[p]=new Promise((P,x)=>{b[u]=v=>{W(),v.ready(()=>{S=v,P(v)})},b[h]=v=>{W(),x(v)},(v=>new Promise(($,N)=>{const C=document.createElement("script");C.type="text/javascript",C.onload=$,C.onerror=N,C.src=v,C.async=!0,document.head.appendChild(C)}))(k).catch(b[h])}),g[p]},getApi:A,loadModule:D=>new Promise((j,k)=>{S.modules.require(D).done(P=>{P.forEach(x=>{((v,$,N,C=!1)=>{const E=typeof $=="string"?$.split("."):$.slice();let R,Y=v;for(;E.length>1;)R=E.shift(),Y[R]||(Y[R]={}),Y=Y[R];const f=E[0];Y[f]=C===!0&&Y[f]||N})(S,D,x,!0)}),j(S)},k)})}})({version:t,enterprise:s,query:r,preload:n}));return m.useEffect(()=>{n&&d.current.load()},[d.current]),J.createElement(pt.Provider,{value:d.current},a)},Qe=/^on(?=[A-Z])/;function K(o){return Object.keys(o).reduce((t,s)=>{if(Qe.test(s)){const r=s.replace(Qe,"").toLowerCase();t._events[r]=o[s]}else t[s]=o[s];return t},{_events:{}})}function ye(o,t,s){typeof s=="function"&&o.events.add(t,s)}function ke(o,t,s){typeof s=="function"&&o.events.remove(t,s)}function Ie(o,t,s){Object.keys(Object.assign({},t,s)).forEach(r=>{t[r]!==s[r]&&(ke(o,r,t[r]),ye(o,r,s[r]))})}const mt=o=>"default"+o.charAt(0).toUpperCase()+o.slice(1);function te(o,t){return o[t]!==void 0||o[mt(t)]===void 0}function I(o,t,s){return(te(o,t)?o[t]:o[mt(t)])||s}function se(o,t,s=null){if(o!==t){if(o&&("current"in o?o.current=null:typeof o=="function"&&o(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function ht(o){const{width:t,height:s,style:r,className:n}=o;return r!==void 0||n!==void 0?Object.assign({},r&&{style:r},n&&{className:n}):{style:{width:t,height:s}}}class xi extends J.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:r=()=>{}}=this.props;r(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const bt=o=>({onError:t,...s})=>J.createElement(xi,{onError:t},J.createElement(o,s));class De extends J.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=De.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&De.updateObject(this.instance,t,this.props)}componentWillUnmount(){De.unmountObject(this.instance,this.props)}render(){const t=ht(this.props),s=K(this.props),r=dt(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return J.createElement(Le.Provider,{value:this.state.instance},J.createElement("div",fe({ref:this._getRef},t,r),this.props.children))}static mountObject(t,s,r){const{instanceRef:n,_events:a}=K(r),d=new s(t,I(r,"state"),I(r,"options"));return Object.keys(a).forEach(l=>ye(d,l,a[l])),se(null,n,d),d}static updateObject(t,s,r){const{_events:n,instanceRef:a}=K(r),{_events:d,instanceRef:l}=K(s);if(te(r,"state")){const c=I(s,"state",{}),i=I(r,"state",{});c.type!==i.type&&t.setType(i.type),c.behaviors!==i.behaviors&&(c.behaviors&&t.behaviors.disable(c.behaviors),i.behaviors&&t.behaviors.enable(i.behaviors)),i.zoom&&c.zoom!==i.zoom&&t.setZoom(i.zoom),i.center&&c.center!==i.center&&t.setCenter(i.center),i.bounds&&c.bounds!==i.bounds&&t.setBounds(i.bounds)}if(te(r,"options")){const c=I(s,"options"),i=I(r,"options",{});c!==i&&t.options.set(i)}I(s,"width")===I(r,"width")&&I(s,"height")===I(r,"height")||t.container.fitToViewport(),Ie(t,d,n),se(l,a,t)}static unmountObject(t,s){const{instanceRef:r,_events:n}=K(s);t!==null&&(Object.keys(n).forEach(a=>ke(t,a,n[a])),t.destroy(),se(r))}}const gt=bt(ut(De,!0,["Map"]));gt.defaultProps={width:320,height:240};class Pe extends J.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&Pe.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&Pe.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,Pe.unmountObject(this.state.instance,this.props)}render(){const t=ht(this.props);return J.createElement("div",fe({ref:this._getRef},t))}static mountObject(t,s,r){const{instanceRef:n,_events:a}=K(r),d=I(r,"point"),l=I(r,"locateOptions"),c=I(r,"options");return new Promise((i,p)=>{s.locate(d,l).done(u=>{if(u.length>0){const h=new s.Player(t,u[0],c);se(null,n,h),Object.keys(a).forEach(b=>ye(h,b,a[b])),i(h)}},p)})}static updateObject(t,s,r){const{_events:n,instanceRef:a}=K(r),{_events:d,instanceRef:l}=K(s);if(te(r,"options")){const c=I(s,"options"),i=I(r,"options");c!==i&&t.options.set(i)}if(te(r,"point")){const c=I(r,"point"),i=I(s,"point"),p=I(r,"locateOptions");c!==i&&t.moveTo(c,p)}Ie(t,d,n),se(l,a,t)}static unmountObject(t,s){const{instanceRef:r,_events:n}=K(s);t!==null&&(Object.keys(n).forEach(a=>ke(t,a,n[a])),se(r))}}class $e extends J.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=$e.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&$e.updateControl(this.instance,t,this.props)}componentWillUnmount(){$e.unmountControl(this.instance,this.props)}render(){return J.createElement(Le.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:r,parent:n,lazy:a,_events:d}=K(s),l=new t({data:I(s,"data"),options:I(s,"options"),state:I(s,"state"),mapTypes:I(s,"mapTypes"),lazy:a});if(Object.keys(d).forEach(c=>ye(l,c,d[c])),n&&n.controls&&typeof n.controls.add=="function")n.controls.add(l);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(l)}return se(null,r,l),l}static updateControl(t,s,r){const{_events:n,instanceRef:a}=K(r),{_events:d,instanceRef:l}=K(s);if(te(r,"options")){const c=I(s,"options"),i=I(r,"options");c!==i&&t.options.set(i)}if(te(r,"data")){const c=I(s,"data"),i=I(r,"data");c!==i&&t.data.set(i)}if(te(r,"state")){const c=I(s,"state"),i=I(r,"state");c!==i&&t.state.set(i)}if(te(r,"mapTypes")){const c=I(s,"mapTypes"),i=I(r,"mapTypes");c!==i&&(t.removeAllMapTypes(),i.forEach(p=>t.addMapType(p)))}Ie(t,d,n),se(l,a,t)}static unmountControl(t,s){const{instanceRef:r,parent:n,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(d=>ke(t,d,a[d])),n.controls&&typeof n.controls.remove=="function"?n.controls.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),se(r))}}var fi=bt(ui(ut(o=>J.createElement($e,fe({},o,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ae extends J.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ae.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ae.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ae.unmountObject(this.instance,this.props)}render(){return J.createElement(Le.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:r,parent:n,_events:a}=K(s),d=new t(I(s,"options"));if(Object.keys(a).forEach(l=>ye(d,l,a[l])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(d);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount Clusterer");n.add(d)}return se(null,r,d),d}static updateObject(t,s,r){const{_events:n,instanceRef:a}=K(r),{_events:d,instanceRef:l}=K(s);if(te(r,"options")){const c=I(s,"options"),i=I(r,"options");c!==i&&t.options.set(i)}Ie(t,d,n),se(l,a,t)}static unmountObject(t,s){const{instanceRef:r,parent:n,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(d=>ke(t,d,a[d])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),se(r))}}class Ee extends J.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Ee.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Ee.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ee.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:r,parent:n,_events:a}=K(s),d=I(s,"options",{}),l=I(s,"features",{}),c=I(s,"filter",null),i=I(s,"objects",{}),p=I(s,"clusters",{}),u=new t(d);if(u.add(l||[]),u.setFilter(c),u.objects.options.set(i),u.clusters.options.set(p),Object.keys(a).forEach(h=>ye(u,h,a[h])),n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(u);else{if(!n.add||typeof n.add!="function")throw new Error("No parent found to mount ObjectManager");n.add(u)}return se(null,r,u),u}static updateObject(t,s,r){const{_events:n,instanceRef:a}=K(r),{_events:d,instanceRef:l}=K(s);if(te(r,"options")){const c=I(s,"options"),i=I(r,"options");c!==i&&t.options.set(i)}if(te(r,"objects")){const c=I(s,"objects"),i=I(r,"objects");c!==i&&t.objects.options.set(i)}if(te(r,"clusters")){const c=I(s,"clusters"),i=I(r,"clusters");c!==i&&t.clusters.options.set(i)}if(te(r,"filter")){const c=I(s,"filter"),i=I(r,"filter");c!==i&&t.setFilter(i)}if(te(r,"features")){const c=I(s,"features"),i=I(r,"features");c!==i&&(t.remove(c),t.add(i))}Ie(t,d,n),se(l,a,t)}static unmountObject(t,s){const{instanceRef:r,parent:n,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(d=>ke(t,d,a[d])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),se(r))}}class We extends J.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:r}=this.props,n=We.mountObject(r&&typeof r.modifyConstructor=="function"?r.modifyConstructor(s[t]):s[t],this.props);this.instance=n,this.setState({instance:n})}componentDidUpdate(t){this.instance!==null&&We.updateObject(this.instance,t,this.props)}componentWillUnmount(){We.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:r,parent:n,_events:a}=K(s),d=new t(I(s,"geometry"),I(s,"properties"),I(s,"options"));if(Object.keys(a).forEach(l=>ye(d,l,a[l])),n&&n.geoObjects&&typeof n.geoObjects.add=="function")n.geoObjects.add(d);else{if(!n||!n.add||typeof n.add!="function")throw new Error(`No parent found to mount ${s.name}`);n.add(d)}return se(null,r,d),d}static updateObject(t,s,r){const{_events:n,instanceRef:a}=K(r),{_events:d,instanceRef:l}=K(s);if(te(r,"geometry")){const c=I(s,"geometry",{}),i=I(r,"geometry",{});Array.isArray(i)&&i!==c?Array.isArray(i[0])&&typeof i[1]=="number"?(t.geometry.setCoordinates(i[0]),t.geometry.setRadius(i[1])):t.geometry.setCoordinates(i):typeof i=="object"&&(i.coordinates!==c.coordinates&&t.geometry.setCoordinates(i.coordinates),i.radius!==c.radius&&t.geometry.setRadius(i.radius))}if(te(r,"properties")){const c=I(s,"properties"),i=I(r,"properties");c!==i&&t.properties.set(i)}if(te(r,"options")){const c=I(s,"options"),i=I(r,"options");c!==i&&t.options.set(i)}Ie(t,d,n),se(l,a,t)}static unmountObject(t,s){const{instanceRef:r,parent:n,_events:a}=K(s);t!==null&&(Object.keys(a).forEach(d=>ke(t,d,a[d])),n.geoObjects&&typeof n.geoObjects.remove=="function"?n.geoObjects.remove(t):n.remove&&typeof n.remove=="function"&&n.remove(t),se(r))}}const yi=()=>{const o=m.useRef(null);return e.jsx(vi,{children:e.jsx("div",{children:e.jsx(gt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{o.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(fi,{options:{position:{bottom:20,right:20}}})})})})},ki=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(r,n)=>{t(a=>a.map(d=>d.id===n?{...d,text:r}:d))};return e.jsxs("div",{className:F.aboutUs_inputs,children:[o.map(r=>e.jsx("div",{className:F.aboutUs_inputs_wrap,children:r.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:F.aboutUs_inputs_wrap_title,children:r.title}),e.jsx("textarea",{className:F.aboutUs_inputs_wrap_textarea,onChange:n=>s(n.target.value,r.id),value:r.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:F.aboutUs_inputs_wrap_title,children:r.title}),e.jsx("input",{className:F.aboutUs_inputs_wrap_input,type:r.type==="isPhone"?"number":r.type==="isEmail"?"email":"text",onChange:n=>s(n.target.value,r.id),value:r.text})]})},r.id)),e.jsx(yi,{})]})},ji=({id:o,checked:t,onChange:s})=>{const r=n=>{s(o,n.target.checked)};return e.jsxs("label",{className:F.custom_checkbox,children:[e.jsx("input",{className:F.custom_checkbox_input,type:"checkbox",checked:t,onChange:r}),e.jsx("span",{className:F.custom_checkbox_box,children:e.jsx(T,{name:"CheckIcon",width:18,height:18,className:F.custom_checkbox_box_icon})})]})},wi=({temporaryContactsSchedule:o,setTemporaryContactsSchedule:t})=>{const s=l=>{const c=l.replace(/\D/g,"");return c.length<=2?c:`${c.slice(0,2)}:${c.slice(2,4)}`},r=(l,c,i,p)=>{if(!p.isActive)return;const u=s(i);t(h=>h.map(b=>b.id===l?{...b,workHours:{...b.workHours,[c]:u}}:b))},n=(l,c)=>{t(i=>i.map(p=>p.id===l?{...p,isActive:c,workHours:c?p.workHours:{start:"",end:""}}:p))},a=m.useRef({}),d=m.useRef({});return m.useEffect(()=>{o.forEach(l=>{var c;l.isActive&&a.current[l.id]&&!d.current[l.id]&&((c=a.current[l.id])==null||c.focus(),d.current[l.id]=!0)})},[o]),e.jsxs("div",{className:F.aboutUs_week,children:[e.jsxs("div",{className:F.aboutUs_week_info,children:[e.jsx("span",{className:F.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:F.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:F.aboutUs_week_content,children:o.map((l,c)=>{const i=c===o.length-1,p=i&&l.isActive?F.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:F.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${F.aboutUs_week_wrap_colored} 
                  ${l.isActive?F.aboutUs_week_wrap_colored_active:""} 
                  ${i?F.aboutUs_week_wrap_colored_last:""} 
                  ${p}
                `,children:[e.jsx("span",{className:F.aboutUs_week_wrap_day,children:l.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:F.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:u=>a.current[l.id]=u,className:F.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>r(l.id,"start",u.target.value,l),value:l.workHours.start}),e.jsx("span",{className:F.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:F.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:u=>r(l.id,"end",u.target.value,l),value:l.workHours.end})]})]}),e.jsx(ji,{id:l.id,checked:l.isActive,onChange:n})]},l.id)})})]})},Ci=()=>{const{contactsFormInputsArr:o,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:r,setImageUrlLogo:n}=qe(),[a,d]=m.useState(o),[l,c]=m.useState(""),[i,p]=m.useState(s),u=()=>{t(a),n(l);const h=i.map(b=>b.workHours&&b.workHours.start===""&&b.workHours.end===""?{...b,isActive:!1}:b);r(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F.aboutUs,children:[e.jsx(pi,{temporaryImageUrl:l,setTemporaryImageUrl:c}),e.jsxs("div",{className:F.aboutUs_content,children:[e.jsx(ki,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:d}),e.jsx(wi,{temporaryContactsSchedule:i,setTemporaryContactsSchedule:p})]})]}),e.jsx("button",{className:F.aboutUs_btn,onClick:u,children:"Сохранить"})]})};function Ni({width:o=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:r="rgba(193, 193, 193, 1)",speed:n=500,scale:a=1.1,status:d=!1,disabled:l=!1}){const c={width:`${o}px`,height:`${o/2-o/20}px`,background:d?s:r,borderRadius:`${o/2}px`,display:"flex",alignItems:"center",transition:`${n}ms`,cursor:"pointer"},i={background:`${t}`,height:`${o/2-o/20}px`,width:`${o/2-o/20}px`,border:`${o/25}px solid ${d?s:r}`,borderRadius:"50%",transition:`${n}ms`,transform:`scale(${a}) translateX(${d?"110%":"0"})`};return e.jsx("div",{style:c,children:e.jsx("div",{style:i})})}const Ii=({temporarySocialPlatforms:o,setTemporarySocialPlatforms:t})=>{const s=(n,a)=>{t(d=>d.map(l=>l.id===n?{...l,url:a,isActive:a===""?!1:l.isActive}:l))},r=(n,a)=>{n.url!==""&&t(d=>d.map(l=>l.id===a?{...l,isActive:!l.isActive,url:n.isActive?"":n.url}:l))};return e.jsx(e.Fragment,{children:o.map(n=>e.jsxs("div",{className:F.socials_content_wrap,children:[e.jsx("img",{src:n.icon,alt:n.alt}),e.jsx("input",{type:"text",className:F.socials_content_wrap_input,value:n.url||"",onChange:a=>s(n.id,a.target.value)}),e.jsx("div",{onClick:()=>r(n,n.id),children:e.jsx(Ni,{status:n.isActive})})]},n.id))})},Si=()=>{const{socialPlatforms:o,setSocialPlatforms:t}=qe();async function s(){const d=we.get("multi-store");try{const l=await ne.post("web-credentials",{multiStoreId:Number(d)});l.data&&console.log("response-data",l.data)}catch(l){console.log("error",l)}}m.useEffect(()=>{s()},[]);const[r,n]=m.useState(o);async function a(){t(r);const d=we.get("multi-store"),l=r.reduce((c,i)=>(c[i.name]={url:i.url,isActive:i.isActive},c),{});try{const c=await ne.patch(`web-credentials/${d}`,{social:l});c.data&&console.log("response-data",c.data)}catch(c){console.log("error",c)}}return e.jsxs("div",{className:F.socials,children:[e.jsx("h3",{className:F.socials_title,children:"Соц-сети"}),e.jsx("div",{className:F.socials_content,children:e.jsx(Ii,{temporarySocialPlatforms:r,setTemporarySocialPlatforms:n})}),e.jsx("button",{className:F.contacts_btn,onClick:a,children:"Сохранить"})]})},Di=[{id:ee(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:ee(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function $i(){const t=re().pathname;return e.jsx("div",{className:F.contacts,children:e.jsxs("div",{className:F.contacts_content,children:[e.jsx("div",{className:F.contacts_nav,children:e.jsx("ul",{className:F.contacts_nav_list,children:Di.map(s=>e.jsx(Z,{to:s.href,className:`${F.contacts_nav_link} ${s.href==t?F.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(Si,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Ci,{})]})})}const Oi="_radioLabel_dhgqa_1",Pi="_radioLabel_selected_dhgqa_7",Ai="_radioLabel_radio_dhgqa_7",Ei="_radioLabel_input_dhgqa_15",Wi="_radioLabel_text_dhgqa_28",Ui="_storeBtn_dhgqa_34",Bi="_storeBtn_active_dhgqa_48",Fi="_deliveryInput_text_dhgqa_53",Li="_deliveryInput_wrap_dhgqa_58",zi="_deliveryInput_wrap_input_dhgqa_66",Mi="_version3_dhgqa_74",Ti="_version3_title_dhgqa_79",Ri="_version3_block_dhgqa_85",qi="_version3_block_top_dhgqa_90",Vi="_version3_block_top_title_dhgqa_102",Hi="_version3_block_top_arrow_dhgqa_106",Xi="_version3_block_top_arrow_active_dhgqa_119",Ki="_version3_block_dropdown_dhgqa_122",Zi="_version3_block_dropdown_item_dhgqa_133",Gi="_version3_block_dropdown_open_dhgqa_149",Ji="_version3_block_onOff_dhgqa_173",Yi="_version3_block_delivery_dhgqa_173",Qi="_version3_pickedWrap_dhgqa_178",ec="_version3_pickedWrap_item_dhgqa_189",X={radioLabel:Oi,radioLabel_selected:Pi,radioLabel_radio:Ai,radioLabel_input:Ei,radioLabel_text:Wi,storeBtn:Ui,storeBtn_active:Bi,deliveryInput_text:Fi,deliveryInput_wrap:Li,deliveryInput_wrap_input:zi,version3:Mi,version3_title:Ti,version3_block:Ri,version3_block_top:qi,version3_block_top_title:Vi,version3_block_top_arrow:Hi,version3_block_top_arrow_active:Xi,version3_block_dropdown:Ki,version3_block_dropdown_item:Zi,version3_block_dropdown_open:Gi,version3_block_onOff:Ji,version3_block_delivery:Yi,version3_pickedWrap:Qi,version3_pickedWrap_item:ec},me=({id:o,value:t,checked:s,onChange:r,label:n})=>e.jsxs("label",{className:`${X.radioLabel} ${s?X.radioLabel_selected:""}`,children:[e.jsx("input",{type:"radio",id:o,value:t,checked:s,onChange:r,className:X.radioLabel_input}),e.jsx("span",{className:X.radioLabel_radio}),e.jsx("span",{className:X.radioLabel_text,children:n})]}),ge=jt()(wt(Ct(o=>({deliveryStoresArr:[{id:ee(),name:"Магазин1"},{id:ee(),name:"Магазин2"},{id:ee(),name:"Магазин3"}],setDeliveryStoresArr:t=>o({deliveryStoresArr:t}),citiesDelivery:[{id:ee(),city:"Ташкент"},{id:ee(),city:"Бухара"},{id:ee(),city:"Самарканд"}],setCitiesDelivery:t=>o({citiesDelivery:t}),settingsDeliveryAll:[],setSettingsDeliveryAll:t=>o({settingsDeliveryAll:t}),selectedOption:"",setSelectedOption:t=>o({selectedOption:t}),selectedOrganizationOption:"",setSelectedOrganizationOption:t=>o({selectedOrganizationOption:t}),selectedStoreOption:"",setSelectedStoreOption:t=>o({selectedStoreOption:t}),lastLocation:"",setLastLocation:t=>o({lastLocation:t}),pickedCitiesFreeDelivery:[],setPickedCitiesFreeDelivery:t=>o({pickedCitiesFreeDelivery:t}),inputSumFree:"",setInputSumFree:t=>o({inputSumFree:t}),pickedCitiesFixedDelivery:[],setPickedCitiesFixedDelivery:t=>o({pickedCitiesFixedDelivery:t}),inputSumFixed:"",setInputSumFixed:t=>o({inputSumFixed:t}),inputFixedPrice:"",setInputFixedPrice:t=>o({inputFixedPrice:t}),pickedCitiesFlexibleDelivery:[],setPickedCitiesFlexibleDelivery:t=>o({pickedCitiesFlexibleDelivery:t}),inputSumFlexible:"",setInputSumFlexible:t=>o({inputSumFlexible:t}),inputFirstKm:"",setInputFirstKm:t=>o({inputFirstKm:t}),inputLastKm:"",setInputLastKm:t=>o({inputLastKm:t}),inputExtraKm:"",setInputExtraKm:t=>o({inputExtraKm:t}),openCountriesDropdown:!1,setOpenCountriesDropdown:t=>o({openCountriesDropdown:t})}),{name:"delivery-store",partialize:o=>({...o})}))),Ve=(o,t)=>{const{setLastLocation:s}=ge(),r=Ue();return re(),{handleChange:m.useCallback(a=>{const d=a.target.value;o(d);const l=t[d];l&&r(l),s(l)},[r,t,o])}},tc="_delivery_ud2pv_1",sc="_delivery_title_ud2pv_5",oc="_delivery_main_ud2pv_10",nc="_delivery_btn_ud2pv_16",rc="_deliveryOrg_ud2pv_28",ac="_deliveryOrg_radios_ud2pv_31",ic="_storeDelivery_ud2pv_38",cc="_storeDelivery_stores_ud2pv_41",lc="_storeDelivery_radios_ud2pv_47",le={delivery:tc,delivery_title:sc,delivery_main:oc,delivery_btn:nc,deliveryOrg:rc,deliveryOrg_radios:ac,storeDelivery:ic,storeDelivery_stores:cc,storeDelivery_radios:lc},Te=({text:o,placeholder:t,value:s,setValue:r})=>e.jsxs("div",{className:X.deliveryInput,children:[e.jsx("p",{className:X.deliveryInput_text,children:o}),e.jsxs("div",{className:X.deliveryInput_wrap,children:[e.jsx("input",{className:X.deliveryInput_wrap_input,type:"number",placeholder:t,value:s,onChange:n=>r(n.target.value)}),e.jsx("span",{className:X.deliveryInput_wrap_input_text,children:"UZS"})]})]});function He({citiesArrDelivery:o,setCitiesArrDelivery:t,pickedCities:s,setPickedCities:r}){const{openCountriesDropdown:n,setOpenCountriesDropdown:a}=ge(),d=c=>{s.some(i=>i.id===c.id)||r([...s,c]),a(!1)},l=(c,i)=>{i.stopPropagation(),r(s.filter(p=>p.id!==c.id))};return e.jsxs("div",{className:X.version3,children:[e.jsx("span",{className:X.version3_title,children:"Города"}),e.jsxs("div",{className:X.version3_block,children:[e.jsxs("div",{className:`${s.length>0?X.version3_pickedWrap:X.version3_block_top}`,onClick:()=>a(!n),children:[s.length>0?s.map(c=>e.jsxs("div",{className:X.version3_pickedWrap_item,children:[e.jsx("h2",{className:X.version3_block_top_title,children:c.city}),e.jsx("button",{onClick:i=>l(c,i),children:e.jsx(T,{name:"XMarkIcon",width:15})})]},c.id)):e.jsx("h2",{className:X.version3_block_top_title,children:"Выберите город"}),e.jsx("button",{className:X.version3_block_top_btn,onClick:()=>a(!n),children:e.jsx("div",{className:`${X.version3_block_top_arrow} ${n&&o.length>0?X.version3_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${X.version3_block_dropdown} ${n&&o.length>0?X.version3_block_dropdown_open:""}`,children:o==null?void 0:o.map(c=>e.jsx("span",{className:X.version3_block_dropdown_item,onClick:()=>d(c),children:c.city},c.id))})]})]})}const _c=()=>{const{inputSumFree:o,setInputSumFree:t,citiesDelivery:s,setCitiesDelivery:r,pickedCitiesFreeDelivery:n,setPickedCitiesFreeDelivery:a,deliveryStoresArr:d,setDeliveryStoresArr:l,setInputSumFixed:c,setInputFixedPrice:i,setPickedCitiesFixedDelivery:p,settingsDeliveryAll:u,setSettingsDeliveryAll:h,setOpenCountriesDropdown:b}=ge(),[g,S]=m.useState(n),[A,W]=m.useState(o);m.useEffect(()=>{b(!1)},[]);const D=()=>{h([]),c(""),i(""),p([]),a(g),t(A),o.length!==0&&n.length!==0?(h([{stores:d,minPrice:o}]),console.log("settingsDeliveryAll",u)):h([]),b(!1)};return e.jsxs("div",{children:[e.jsx(Te,{text:"Минимальная сумма заказа",placeholder:"0",value:A,setValue:W}),e.jsx(He,{citiesArrDelivery:s,setCitiesArrDelivery:r,pickedCities:g,setPickedCities:S}),e.jsx("button",{className:le.delivery_btn,onClick:()=>D(),children:"Сохранить"})]})},dc=()=>{const{inputSumFixed:o,setInputSumFixed:t,inputFixedPrice:s,setInputFixedPrice:r,citiesDelivery:n,setCitiesDelivery:a,pickedCitiesFixedDelivery:d,setPickedCitiesFixedDelivery:l,deliveryStoresArr:c,setPickedCitiesFreeDelivery:i,setInputSumFree:p,setSettingsDeliveryAll:u,settingsDeliveryAll:h,setOpenCountriesDropdown:b}=ge(),[g,S]=m.useState(d),[A,W]=m.useState(o),[D,j]=m.useState(s);m.useEffect(()=>{b(!1)},[]);const k=()=>{u([]),i([]),p(""),l(g),t(A),r(D),o.length!==0&&d.length!==0&&s.length!==0?(u([{stores:c,minPrice:o,fixedPrise:s}]),console.log("settingsDeliveryAll",h)):u([]),b(!1)};return e.jsxs("div",{children:[e.jsx(Te,{text:"Минимальная сумма заказа",placeholder:"0",value:A,setValue:W}),e.jsx(Te,{text:"Цена за доставку",placeholder:"0",value:D,setValue:j}),e.jsx(He,{citiesArrDelivery:n,setCitiesArrDelivery:a,pickedCities:g,setPickedCities:S}),e.jsx("button",{className:le.delivery_btn,onClick:()=>k(),children:"Сохранить"})]})},pc=()=>e.jsxs("div",{children:[e.jsx("span",{children:"Первые"}),e.jsx("input",{type:"number"}),e.jsx("span",{children:"по"}),e.jsx("input",{type:"number"})]}),uc=()=>{const{citiesDelivery:o,setCitiesDelivery:t,pickedCitiesFlexibleDelivery:s,setPickedCitiesFlexibleDelivery:r}=ge(),[n,a]=m.useState(s);return e.jsxs("div",{children:[e.jsx(pc,{}),e.jsx(He,{citiesArrDelivery:o,setCitiesArrDelivery:t,pickedCities:n,setPickedCities:a}),e.jsx("button",{className:le.delivery_btn,children:"Сохранить"})]})},mc=()=>e.jsx("div",{children:"OwnVersionDelivery"}),hc=()=>{const{selectedOrganizationOption:o,lastLocation:t,setSelectedOrganizationOption:s}=ge(),r=re(),n={freeDelivery:"/admin/settings/delivery/forOrganization/freeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forOrganization/fixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forOrganization/flexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forOrganization/ownVersionDelivery"},{handleChange:a}=Ve(s,n);return e.jsxs("div",{className:le.deliveryOrg,children:[e.jsx("h4",{className:le.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:le.deliveryOrg_radios,children:[e.jsx(me,{id:"freeDelivery",value:"freeDelivery",checked:o==="freeDelivery",onChange:a,label:"Бесплатная доставка"}),e.jsx(me,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:o==="fixedPriceDelivery",onChange:a,label:"Фиксированная цена"}),e.jsx(me,{id:"flexibleDelivery",value:"flexibleDelivery",checked:o==="flexibleDelivery",onChange:a,label:"Гибкая доставка"}),e.jsx(me,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:o==="ownVersionDelivery",onChange:a,label:"Свой вариант"})]}),e.jsxs("div",{children:[r.pathname==="/admin/settings/delivery/forOrganization/freeDelivery"&&e.jsx(_c,{}),r.pathname==="/admin/settings/delivery/forOrganization/fixedPriceDelivery"&&e.jsx(dc,{}),r.pathname==="/admin/settings/delivery/forOrganization/flexibleDelivery"&&e.jsx(uc,{}),r.pathname==="/admin/settings/delivery/forOrganization/ownVersionDelivery"&&e.jsx(mc,{})]})]})},bc=({text:o,isActive:t,onClick:s})=>e.jsx("button",{className:`${X.storeBtn} ${t?X.storeBtn_active:""}`,onClick:s,children:o}),gc=()=>e.jsx("div",{children:"StoreFreeDelivery"}),vc=()=>e.jsx("div",{children:"StoreFixedPriceDelivery"}),xc=()=>e.jsx("div",{children:"StoreFlexibleDelivery"}),fc=()=>e.jsx("div",{children:"StoreOwnVersionDelivery"}),yc=()=>{const{deliveryStoresArr:o,selectedStoreOption:t,lastLocation:s,setSelectedStoreOption:r}=ge(),[n,a]=m.useState(null),d=re(),l={freeDelivery:"/admin/settings/delivery/forStore/storeFreeDelivery",fixedPriceDelivery:"/admin/settings/delivery/forStore/storeFixedPriceDelivery",flexibleDelivery:"/admin/settings/delivery/forStore/storeFlexibleDelivery",ownVersionDelivery:"/admin/settings/delivery/forStore/storeOwnVersionDelivery"},{handleChange:c}=Ve(r,l),i=p=>{a(p),d.pathname="/admin/settings/delivery/forStore/storeFreeDelivery",r("freeDelivery")};return e.jsxs("div",{className:le.storeDelivery,children:[e.jsx("h4",{className:le.delivery_title,children:"Выберите магазин "}),e.jsx("div",{className:le.storeDelivery_stores,children:o.map(p=>e.jsx(bc,{text:p.name,isActive:p.id===n,onClick:()=>i(p.id)},p.id))}),e.jsxs("div",{children:[e.jsx("h4",{className:le.delivery_title,children:"Выберите вид доставки"}),e.jsxs("div",{className:le.storeDelivery_radios,children:[e.jsx(me,{id:"freeDelivery",value:"freeDelivery",checked:t==="freeDelivery",onChange:c,label:"Бесплатная доставка"}),e.jsx(me,{id:"fixedPriceDelivery",value:"fixedPriceDelivery",checked:t==="fixedPriceDelivery",onChange:c,label:"Фиксированная цена"}),e.jsx(me,{id:"flexibleDelivery",value:"flexibleDelivery",checked:t==="flexibleDelivery",onChange:c,label:"Гибкая доставка"}),e.jsx(me,{id:"ownVersionDelivery",value:"ownVersionDelivery",checked:t==="ownVersionDelivery",onChange:c,label:"Свой вариант"})]})]}),e.jsxs("div",{children:[d.pathname==="/admin/settings/delivery/forStore/storeFreeDelivery"&&e.jsx(gc,{}),d.pathname==="/admin/settings/delivery/forStore/storeFixedPriceDelivery"&&e.jsx(vc,{}),d.pathname==="/admin/settings/delivery/forStore/storeFlexibleDelivery"&&e.jsx(xc,{}),d.pathname==="/admin/settings/delivery/forStore/storeOwnVersionDelivery"&&e.jsx(fc,{})]})]})},kc=()=>{const{selectedOption:o,setSelectedOption:t,lastLocation:s}=ge(),r=re(),n=Ue(),a={forOrganization:"/admin/settings/delivery/forOrganization",forStore:"/admin/settings/delivery/forStore"},{handleChange:d}=Ve(t,a);return m.useEffect(()=>{n(s)},[s]),e.jsxs("div",{className:le.delivery,children:[e.jsx("h3",{className:le.delivery_title,children:"Выберите версию настройки доставки"}),e.jsxs("div",{className:le.delivery_main,children:[e.jsx(me,{id:"forOrganization",value:"forOrganization",checked:o==="forOrganization",onChange:d,label:"Для организации"}),e.jsx(me,{id:"forStore",value:"forStore",checked:o==="forStore",onChange:d,label:"Для каждого магазина"})]}),r.pathname.startsWith("/admin/settings/delivery/forOrganization")&&e.jsx(hc,{}),r.pathname.startsWith("/admin/settings/delivery/forStore")&&e.jsx(yc,{})]})},jc=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"}];function wc(){const t=re().pathname;return e.jsx("div",{className:_.settings,children:e.jsxs("div",{className:_.settings_content,children:[e.jsx("div",{className:_.settings_content_top,children:e.jsx("ul",{className:_.settings_tools,children:jc.map(s=>e.jsx("li",{children:e.jsx(Z,{to:s.href,className:`${_.settings_tools_link} ${t.startsWith(s.href)?_.settings_tools_link_active:""}`,children:s.label})},s.id))})}),t=="/admin/settings/modules"&&e.jsx(Nn,{}),t=="/admin/settings/templates"&&e.jsx(In,{}),t=="/admin/settings/categories"&&e.jsx(sr,{}),t.startsWith("/admin/settings/banner")&&e.jsx(Ia,{}),t.startsWith("/admin/settings/contacts")&&e.jsx($i,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(kc,{})]})})}const et=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function Cc(){const[o,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[n,a]=m.useState({status:!1,message:""}),[d,l]=m.useState([]);m.useEffect(()=>{o||(l([]),a({status:!1,message:""}))},[o]);async function c(i){i.preventDefault();const p=we.get("multi-store");try{const h=await(await ne.get(`nomenclatures?multiStoreId=${p}&name=${o}&page=${s}&perPage=${r}`)).data.data;h.length>0?(l([...h]),a({status:!1,message:""})):(l([]),a({status:!0,message:"Совпадений не найдено"}))}catch(u){console.log("Ошибка произошла при поиске продуктов на складе",u)}}return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:i=>c(i),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:o}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:et.map(i=>e.jsx("th",{className:_.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:d==null?void 0:d.map(i=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[et.map(p=>{var u;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[p.title=="Наименование"?e.jsx("span",{children:(u=i==null?void 0:i.name)==null?void 0:u.ru}):"",p.title=="Штрих-код"?e.jsx("span",{children:i.mxik}):"",p.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},p.id)}),!i.hasWebNomenclature&&e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsx(Z,{to:`/admin/stock-product/${i.id}`,className:_.addingWrapper_tbody_add,children:"Добавить"})})]},i==null?void 0:i.mxik))})]}),n.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:n.message})]})}const tt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function Nc(){const[o,t]=m.useState(""),[s,r]=m.useState({status:!1,message:""}),[n,a]=m.useState([]),[d]=m.useState(1),[l]=m.useState(10);m.useEffect(()=>{o||(a([]),r({status:!1,message:""}))},[o]);async function c(){const h=we.get("multi-store");try{console.log(222,"searchText",o);const g=(await ne.get(`web-nomenclatures?multiStoreId=${h}&title=${o}&page=${d}&perPage=${l}`)).data.data;console.log(999,"data",g),g.length>0?(a([...g]),r({status:!1,message:""})):(a([]),r({status:!0,message:"Совпадений не найдено"}))}catch(b){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",b)}}async function i(h,b){h.preventDefault();try{const g=await ne.patch(`web-nomenclatures/${b}`,{isActive:!1});t(""),a([]),console.log("Продукт успешно отключен с веб сайта",g)}catch(g){console.log("Ошибка произошла при удалении продукта с вебсайта",g)}}async function p(h,b){h.preventDefault();try{const g=await ne.patch(`web-nomenclatures/${b}`,{isActive:!0});t(""),a([]),console.log("Продукт успешно включен на веб сайта",g)}catch(g){console.log("Ошибка произошла при удалении продукта с вебсайта",g)}}const u=async h=>{h.preventDefault(),c()};return e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("form",{action:"",className:_.addingWrapper_form,onSubmit:h=>u(h),children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:h=>t(h.target.value),value:o}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsxs("tr",{className:_.addingWrapper_thead_tr,children:[tt.map(h=>e.jsx("th",{className:_.addingWrapper_thead_th,children:h.title},h.id)),e.jsx("th",{className:_.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:n==null?void 0:n.map(h=>e.jsxs("tr",{className:_.addingWrapper_tbody_tr,children:[tt.map(b=>e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[b.title=="Наименование"?e.jsx("span",{children:h.title}):"",b.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},b.id)),e.jsx("td",{className:_.addingWrapper_tbody_td,children:e.jsxs("div",{className:_.addingWrapper_tbody_buttons,children:[h.isActive&&e.jsx(Z,{to:"#",className:_.addingWrapper_tbody_del,onClick:b=>i(b,h.id),children:"Отключить"}),!h.isActive&&e.jsx(Z,{to:"#",className:_.addingWrapper_tbody_del,onClick:b=>p(b,h.id),children:"Включить"}),e.jsx(Z,{to:`/admin/website-product/${h.id}`,className:_.addingWrapper_tbody_add,children:"Изменить"})]})})]},h==null?void 0:h.id))})]}),s.status&&e.jsx("span",{className:_.addingWrapper_table_error,children:s.message})]})}const Ic=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function Sc(){const t=re().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:Ic.map(s=>e.jsx(Z,{to:s.href,className:`${_.products_btn} ${s.href==t?_.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(Cc,{}),t=="/admin/product/adding/website"&&e.jsx(Nc,{})]})}const Dc=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function $c(){const t=re().pathname;return e.jsxs("div",{className:_.products,children:[e.jsx("div",{className:_.products_buttons,children:Dc.map(s=>e.jsx(Z,{to:s.href,className:`${_.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?_.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(Sc,{})]})}const Oc="_user_title_1uizv_1",Pc="_user_list_1uizv_6",Ac="_user_list_link_1uizv_12",Ec="_user_list_link_active_1uizv_26",Wc="_user_form_1uizv_30",Uc="_user_form_btn_1uizv_35",Bc="_user_form_wrap_1uizv_51",Fc="_user_form_input_1uizv_57",Lc="_user_form_icon_1uizv_65",zc="_user_table_1uizv_68",Mc="_user_table_tbody_1uizv_71",Tc="_user_table_tr_1uizv_74",Rc="_user_table_th_1uizv_77",qc="_user_table_td_1uizv_85",Vc="_user_table_btns_1uizv_89",Hc="_user_table_btn_1uizv_89",Xc="_user_table_btn_blocked_1uizv_107",Kc="_modal_1uizv_111",Zc="_modal_active_1uizv_120",Gc="_modal_wrap_1uizv_123",Jc="_modal_wrap_header_1uizv_131",Yc="_modal_wrap_stores_1uizv_143",Qc="_modal_wrap_stores_text_1uizv_165",el="_modal_btns_1uizv_169",tl="_modal_btn_1uizv_169",sl="_modal_content_1uizv_193",ol="_modal_content_text_1uizv_197",nl="_versions_1uizv_206",rl="_versions_block_1uizv_211",al="_versions_block_top_1uizv_216",il="_versions_block_top_title_1uizv_226",cl="_versions_block_top_arrow_1uizv_230",ll="_versions_block_top_arrow_active_1uizv_239",_l="_versions_block_dropdown_1uizv_242",dl="_versions_block_dropdown_item_1uizv_257",pl="_versions_block_dropdown_open_1uizv_268",ul="_shop_header_1uizv_275",ml="_shop_header_title_1uizv_282",O={user_title:Oc,user_list:Pc,user_list_link:Ac,user_list_link_active:Ec,user_form:Wc,user_form_btn:Uc,user_form_wrap:Bc,user_form_input:Fc,user_form_icon:Lc,user_table:zc,user_table_tbody:Mc,user_table_tr:Tc,user_table_th:Rc,user_table_td:qc,user_table_btns:Vc,user_table_btn:Hc,user_table_btn_blocked:Xc,modal:Kc,modal_active:Zc,modal_wrap:Gc,modal_wrap_header:Jc,modal_wrap_stores:Yc,modal_wrap_stores_text:Qc,modal_btns:el,modal_btn:tl,modal_content:sl,modal_content_text:ol,versions:nl,versions_block:rl,versions_block_top:al,versions_block_top_title:il,versions_block_top_arrow:cl,versions_block_top_arrow_active:ll,versions_block_dropdown:_l,versions_block_dropdown_item:dl,versions_block_dropdown_open:pl,shop_header:ul,shop_header_title:ml},Xe=({headers:o})=>e.jsx("thead",{className:O.user_table_thead,children:e.jsx("tr",{className:O.user_table_tr,children:o.map(t=>e.jsx("th",{className:O.user_table_th,children:t.title},t.id))})}),Ke=()=>{const[o,t]=m.useState(""),{setUserSearch:s}=de(),r=n=>{n.preventDefault(),s(o)};return m.useEffect(()=>{o==""&&s("")},[o]),e.jsxs("form",{action:"",className:O.user_form,children:[e.jsxs("div",{className:O.user_form_wrap,children:[e.jsx("input",{type:"text",className:O.user_form_input,placeholder:"Поиск пользователей",onChange:n=>t(n.target.value),value:o}),e.jsx(T,{className:O.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:O.user_form_btn,onClick:n=>r(n),children:"Найти"})]})},Ze=({arr:o,showStore:t})=>{const{usersList:s,userSearch:r,openModalAdmin:n,openAppointUser:a,shopListAdmin:d,setOpenAppointUser:l,setOpenModalAdmin:c,setUsersList:i,setEditUserAdmin:p,setShopListDropdownAdmin:u,setCloseBlock:h,setFilteredShopListAdmin:b}=de(),S=re().pathname,[A,W]=m.useState([]);m.useEffect(()=>{let x=o;S==="/clients"?x=o.filter(v=>v.isUser):S==="/employees"&&(x=o.filter(v=>!v.isUser)),x=x==null?void 0:x.filter(v=>v.name.toLowerCase().includes(r.toLowerCase())),W(x)},[r,s,o,S]);const D=x=>{const v=s.map($=>$.id===x?{...$,isBlocked:!$.isBlocked}:$);i(v)},j=x=>{c(!0),h(!0);const v=s.find(C=>C.id==x),$=[{id:ee(),title:"Магазин 1",order:1},{id:ee(),title:"Магазин 2",order:2},{id:ee(),title:"Магазин 3",order:3}],N=$.filter(C=>!(v!=null&&v.shopList.some(E=>E.title===C.title)));console.log("editUser",v),console.log("shopListAdminArr",$),v&&(u(v.shopList),p(v),b(N))},k=x=>{l(!0),h(!0),u([]),b(d);const v=s.find($=>$.id==x);v&&p(v)},P=n||a;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:O.user_table_tbody,children:A.map(x=>e.jsxs("tr",{children:[e.jsx("td",{className:O.user_table_td,children:x.name}),e.jsx("td",{className:O.user_table_td,children:t?x.shopList.map(v=>e.jsxs("p",{children:[v.title," ",`(${v.position})`]},v.id)):e.jsx("p",{children:x.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:O.user_table_td,children:t?"Админ 1":x.registerDate}),e.jsx("td",{className:O.user_table_btns,children:x!=null&&x.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${O.user_table_btn} ${x.isBlocked?O.user_table_btn_blocked:""}`,onClick:()=>D(x.id),children:x.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:O.user_table_btn,onClick:()=>k(x.id),disabled:P,children:"Назначить"})]}):e.jsx("button",{className:O.user_table_btn,onClick:()=>j(x.id),style:{background:"#B5FFC7"},disabled:P,children:"Изменить"})})]},x.id))})})};function st({color:o="black",className:t,header:s,isEnabled:r,dropdownItem:n,margin:a,versionList:d,closeBlock:l}){const{shopListAdmin:c,shopListDropdownAdmin:i,filteredShopListAdmin:p,setShopListDropdownAdmin:u,setShopListAdmin:h}=de(),[b,g]=m.useState("Выберете должность"),[S,A]=m.useState("Выберете магазин"),[W,D]=m.useState(!1);m.useEffect(()=>{n!=null&&n.position?g(n.position):g("Выберете должность")},[n==null?void 0:n.position]),m.useEffect(()=>{l||D(!1)},[l]);const j=(v,$)=>{if(n){g(v.title);const N=i.filter(E=>E.title==n.title),C=i.findIndex(E=>E.title==n.title);N[0].position=v.title,i.splice(C,1,N[0]),u(i)}else A(v.title);if(r&&!i.some(N=>N.title==v.title)){g("Выберете должность");const N={...v,originalIndex:$};u([...i,N]),h(p.filter((C,E)=>E!==$))}D(!1)},k=v=>{const $=i.filter(N=>N.id!==v.id);if(u($),v.originalIndex!==void 0){const N=[...c];N.splice(v.originalIndex,0,v),h(N)}else{const N=[...p,v].sort((C,E)=>C.order!==void 0&&E.order!==void 0?C.order-E.order:0);h(N),console.log("arr",N)}},P=()=>{D(!W)};function x(v,$){return v.order&&$.order&&(v==null?void 0:v.order)>($==null?void 0:$.order)?1:-1}return e.jsx("div",{className:t??O.versions,style:{marginBottom:a},children:e.jsxs("div",{className:O.versions_block,children:[s&&e.jsxs("div",{className:O.shop_header,children:[e.jsx("p",{className:O.shop_header_title,children:n==null?void 0:n.title}),e.jsx("button",{onClick:()=>n&&k(n),children:e.jsx(T,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:O.versions_block_top,children:[e.jsx("h2",{className:O.versions_block_top_title,style:{color:o},children:n?b:S}),e.jsx("button",{className:O.versions_block_top_btn,onClick:()=>P(),children:e.jsx("div",{className:`${O.versions_block_top_arrow} ${W?O.versions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${O.versions_block_dropdown} ${W?O.versions_block_dropdown_open:""}`,children:d==null?void 0:d.sort(x).map((v,$)=>e.jsx("span",{className:O.versions_block_dropdown_item,onClick:()=>j(v,$),children:v.title},$))})]})})}const Ge=()=>{const{currentShopModal:o,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:r,openModalAdmin:n,editUserAdmin:a,shopListAdmin:d,usersList:l,openAppointUser:c,closeBlock:i,filteredShopListAdmin:p,setCurrentShopModal:u,setShopListPositionAdmin:h,setCurrentShopPosition:b,setOpenModalAdmin:g,setShopListAdmin:S,setUsersList:A,setOpenAppointUser:W,setCloseBlock:D,setFilteredShopListAdmin:j}=de();m.useEffect(()=>{},[p]);const k=()=>{const N=l.findIndex(C=>C.id==(a==null?void 0:a.id));a&&t.every(C=>"position"in C)&&(a.shopList=t,l.splice(N,1,a),A(l),S(d),console.log("filteredShopListAdmin",p)),console.log("shopListAdmin",d),v(),t.length==0&&P()},P=()=>{if(a){a.isUser=!0,a.isEmployes=!1,a.shopList=[];const N={id:ee(),title:"",position:"пользователь"};a.shopList=[{...N}]}v()},x=()=>{const N=l.findIndex(C=>C.id==(a==null?void 0:a.id));if(a&&(a.shopList=t,l.splice(N,1,a),a.isUser=!1,a.isEmployes=!0,A(l),W(!1),!(a!=null&&a.shopList.some(C=>"position"in C)))){a.isUser=!0,a.shopList=[];const C={id:ee(),title:"",position:"пользователь"};a.shopList=[{...C}]}},v=()=>{S(d),j([]),g(!1),W(!1),D(!1),console.log("close modal")},$=m.useRef(null);return m.useEffect(()=>{const N=C=>{var E;$.current&&!((E=$==null?void 0:$.current)!=null&&E.contains(C.target))&&v()};return n||c?document.addEventListener("mousedown",N):document.removeEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[n,c]),e.jsx("div",{className:`${O.modal} ${n?O.modal_active:""} ${c?O.modal_active:""}`,children:e.jsxs("div",{ref:$,className:O.modal_wrap,children:[e.jsxs("div",{className:O.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>v(),children:e.jsx(T,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:O.modal_content,children:[e.jsxs("p",{className:O.modal_content_text,children:["Логин: ",a==null?void 0:a.name]}),e.jsxs("p",{className:O.modal_content_text,children:["Статус:",a==null?void 0:a.shopList.map(N=>e.jsx("span",{children:N.position},N.id))]}),e.jsx(st,{color:"#717171",setVersionList:S,currentVersion:o,setCurrentVersion:u,isEnabled:r,versionList:p||d,closeBlock:i}),e.jsxs("div",{className:O.modal_wrap_stores,children:[e.jsx("p",{className:O.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((N,C)=>e.jsx(st,{dropdownItem:N,margin:"12px",color:"#717171",versionList:s,setVersionList:h,setCurrentVersion:b,header:!0,closeBlock:i},C))]}),e.jsx("div",{className:O.modal_btns,children:c?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:O.modal_btn,onClick:()=>v(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:O.modal_btn,onClick:()=>x(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:O.modal_btn,onClick:()=>P(),children:"Уволить"}),e.jsx("button",{className:O.modal_btn,onClick:()=>k(),children:"Сохранить"})]})})]})]})})},hl=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],bl=()=>{const{usersList:o}=de();return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(Xe,{headers:hl}),e.jsx(Ze,{arr:o})]}),e.jsx(Ge,{})]})},gl=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],vl=()=>{const{usersList:o}=de(),t=o.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(Xe,{headers:gl}),e.jsx(Ze,{arr:t})]}),e.jsx(Ge,{})]})},xl=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],fl=()=>{const{usersList:o}=de(),t=o.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(Xe,{headers:xl}),e.jsx(Ze,{arr:t,showStore:!0})]}),e.jsx(Ge,{})]})},yl=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],kl=()=>{const t=re().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O.users,children:e.jsxs("div",{className:O.users_header,children:[e.jsx("h2",{className:O.user_title,children:"Пользователи"}),e.jsx("ul",{className:O.user_list,children:yl.map(s=>e.jsx("li",{children:e.jsx(Z,{className:`${O.user_list_link} ${t==s.href?O.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(bl,{}),t=="/admin/users/clients"&&e.jsx(vl,{}),t=="/admin/users/employees"&&e.jsx(fl,{})]})]})},ot=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function jl(){const[o,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[n,a]=m.useState([]);m.useEffect(()=>{d()},[o]);async function d(){const l=we.get("multi-store");try{const c=await ne.get(`nomenclatures?multiStoreId=${l}&page=${s}&perPage=${r}`),i=await c.data.data;console.log("res",c),a([...i])}catch(c){console.log("Ошибка произошла при получении всх продуктов со склада",c)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:l=>t(l.target.value),value:o}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:ot.map(l=>e.jsx("th",{className:_.addingWrapper_thead_th,children:l.title},l.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:n&&(n==null?void 0:n.map(l=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:ot.map(c=>{var i,p;return e.jsxs("td",{className:_.addingWrapper_tbody_td,children:[c.title=="Наименование"?e.jsx("span",{children:((i=l==null?void 0:l.name)==null?void 0:i.ru)&&((p=l==null?void 0:l.name)==null?void 0:p.ru)}):"",c.title=="Штрих-код"?e.jsx("span",{children:l==null?void 0:l.barcode}):""]},c.id)})},l==null?void 0:l.id)))})]})]})})}const nt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function wl(){const[o,t]=m.useState(""),[s]=m.useState(1),[r]=m.useState(10),[n,a]=m.useState([]);m.useEffect(()=>{d()},[o]);async function d(){const l=we.get("multi-store");try{const c=await ne.get(`web-nomenclatures?multiStoreId=${l}&page=${s}&perPage=${r}`),i=await c.data.data;console.log("res",c),a([...i])}catch(c){console.log("Ошибка произошла при получении всх продуктов со склада",c)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.addingWrapper,children:[e.jsxs("h2",{className:_.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsxs("form",{action:"",className:_.addingWrapper_form,children:[e.jsxs("div",{className:_.addingWrapper_search,children:[e.jsx("input",{type:"text",className:_.addingWrapper_search_input,placeholder:"Поиск товара",onChange:l=>t(l.target.value),value:o}),e.jsx(T,{className:_.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:_.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:_.addingWrapper_table,children:[e.jsx("thead",{className:_.addingWrapper_thead,children:e.jsx("tr",{className:_.addingWrapper_thead_tr,children:nt.map(l=>e.jsx("th",{className:_.addingWrapper_thead_th,children:l.title},l.id))})}),e.jsx("tbody",{className:_.addingWrapper_tbody,children:n==null?void 0:n.map(l=>e.jsx("tr",{className:_.addingWrapper_tbody_tr,children:nt.map(c=>e.jsx("td",{className:_.addingWrapper_tbody_td,children:c.title=="Наименование"?e.jsx("span",{children:l==null?void 0:l.title}):""},c.id))},l==null?void 0:l.id))})]})]})})}function Cl(){const t=re().pathname,{shopsStocks:s}=Ce();return e.jsxs("div",{className:_.layout,children:[e.jsx("ul",{className:_.layout_buttons,children:s.map(r=>e.jsx("li",{children:e.jsx(Z,{to:`/admin/shops/shop/${r.url}`,className:`${_.layout_btn} ${t==`/admin/shops/shop/${r.url}`?_.layout_btn_active:""}`,children:r.title})},r.id))}),e.jsxs("div",{className:_.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(jl,{}),t==="/admin/shops/shop/website"&&e.jsx(wl,{})]})]})}function Nl(){const{shopsAmount:o,currentShop:t,setCurrentShop:s}=Ce(),n=re().pathname;return e.jsxs("div",{className:_.layout,children:[e.jsx("h2",{className:_.layout_title,children:"Магазины"}),e.jsx("ul",{className:_.layout_buttons,children:o.map(a=>e.jsx("li",{children:e.jsx(Z,{to:"/admin/shops/shop",className:`${_.layout_btn} ${t==a.url?_.layout_btn_active:""}`,onClick:()=>s(a.url),children:a.title})},a.id))}),n.startsWith("/admin/shops/shop")&&e.jsx("div",{className:_.layout_content,children:e.jsx(Cl,{})})]})}function Il({item:o}){const{setErrorModal:t}=he(),s=r=>{r.stopPropagation()};return e.jsx("div",{className:_.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:_.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:_.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(T,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:o.message})]})})}function Sl({localNewImage:o,setLocalNewImage:t}){const[s,r]=m.useState(null);function n(p,u){return p.order>u.order?1:-1}function a(p,u){r(u)}function d(p){p.target.style.background="white"}function l(p){p.preventDefault(),p.target.style.background="lightgray"}function c(p,u){p.preventDefault(),p.target.style.background="white";const h=o&&o.map(b=>b.id===u.id?{...b,order:(s==null?void 0:s.order)||b.order}:b.id===(s==null?void 0:s.id)?{...b,order:u.order}:b).sort((b,g)=>b.order-g.order);console.log(555,"newImages",h),h&&t(h),r(null)}const i=p=>{const u=o.filter(h=>h.id!==p);t([...u])};return m.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:o&&o.sort(n).map((p,u)=>e.jsxs("div",{className:`${_.productItem_photo} ${u==0?_.productItem_photo_active:""}`,draggable:!0,onDragStart:h=>a(h,p),onDragLeave:h=>d(h),onDragEnd:h=>d(h),onDragOver:h=>l(h),onDrop:h=>c(h,p),children:[e.jsx("div",{className:_.productItem_photo_img,children:e.jsx("img",{src:p.src?`https://api.mcrm.uz/${p.src}`:p.localSrc?p.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:_.productItem_photo_close,onClick:()=>i(p.id),children:e.jsx(T,{width:18,height:18,name:"XMarkIcon"})})]},p.id))})}function vt({stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:r,setLocalFormData:n,localFormData:a}){const{errorModal:d}=he(),l=m.useRef(null),c=()=>{l.current!=null&&l.current.click()},i=async p=>{var h,b;const u=(b=(h=p==null?void 0:p.target)==null?void 0:h.files)==null?void 0:b[0];if(u&&["image/jpeg","image/png","image/webp"].includes(u.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",u);const g=new FormData;g.append("files[]",u),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",g),u&&n([...a,u]);const S=s&&(s==null?void 0:s.length)>0?s.reduce((W,D)=>D.order>W?D.order:W,-1/0):1,A=new FileReader;A.onload=W=>{var D;if((D=W.target)!=null&&D.result){const j={id:ee(),order:S?S+1:1,localSrc:URL.createObjectURL(u)},k=[...s,j];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",k),r&&r([...k]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},A.readAsDataURL(u),console.log(6,"отрисовал выбранную картинку files",u),l.current&&(l.current.value="")}};return e.jsxs("div",{className:_.productItem_top,children:[d.status&&e.jsx(Il,{item:d}),e.jsx("h1",{className:_.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:_.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:_.productItem_photos,children:[e.jsx(Sl,{stockName:o,myMxikCode:t,localNewImage:s,setLocalNewImage:r}),e.jsxs("div",{className:`${_.productItem_photo} ${_.productItem_add}`,onClick:c,children:[e.jsx(T,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:_.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:i,ref:l})]})]}),e.jsx("p",{className:_.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}const rt=["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],Dl=(o=1,t=9)=>Math.floor(Math.random()*(t+1-o)+o).toString();function $l(o=8){let t="#";for(let s=1;s<=o;s++){const r=Dl();s==1?rt.forEach((n,a)=>{a.toString()==r&&(t+=n)}):s==2?rt.forEach((n,a)=>{a.toString()==r&&(t+=n)}):t+=r}return t}function xt({localCategory:o,productName:t,productDescription:s,setProductDescription:r,setProductName:n,myBarcode:a,vendorCode:d,setVendorCode:l}){var S,A,W,D;const{pickedCategory:c,currentProduct:i,setOpenModalCategory:p}=he();m.useEffect(()=>{(c||o)&&g()},[c,o]);const[u,h]=m.useState(""),b=()=>{const j=$l();l(j)},g=async()=>{try{const k=(await ne.get(`categories/${c.id?c.id:o}`)).data;h(k.name.ru)}catch(j){console.log("Ошибка произошла при получении категонии по id",j)}};return e.jsxs("div",{className:_.productItem_left,children:[e.jsxs("div",{className:_.productItem_left_info,children:[e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:_.productItem_left_item_top_input,value:d,onChange:j=>l(j.target.value)})]}),e.jsxs("div",{className:_.productItem_left_item_bottom,children:[e.jsx("button",{className:_.productItem_left_item_button,children:"Изменить"}),e.jsx("button",{className:_.productItem_left_item_button,onClick:b,children:"Генерировать"})]})]}),e.jsxs("div",{className:_.productItem_left_item,children:[e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:u||((A=(S=i==null?void 0:i.category)==null?void 0:S.name)!=null&&A.ru?(D=(W=i==null?void 0:i.category)==null?void 0:W.name)==null?void 0:D.ru:"")})]}),e.jsx("div",{className:_.productItem_left_item_bottom,children:e.jsx("button",{className:_.productItem_left_item_button,onClick:()=>p(!0),children:c!=null&&c.name||i!=null&&i.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:a})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:i==null?void 0:i.price})]})}),e.jsx("div",{className:_.productItem_left_item,children:e.jsxs("div",{className:_.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:_.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:_.productItem_left_form,children:[e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:_.productItem_left_form_input,type:"text",value:t,onChange:j=>n(j.target.value)})]}),e.jsxs("label",{className:_.productItem_left_form_label,children:[e.jsx("span",{className:_.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:j=>r(j.target.value),value:s,className:_.productItem_left_form_textarea}),e.jsx("p",{className:_.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function Ol({color:o="black",title:t="",extraOptionsList:s,className:r,openBlock:n,setOpenBlock:a,setExtraOptionsList:d}){const l=m.useRef([]);m.useEffect(()=>{l.current.length>0&&c()},[s]);const c=()=>{s&&s.forEach(p=>{l.current.forEach(u=>{u.name==p.title&&(u.checked=p.isActive)})})},i=(p,u)=>{const h=JSON.parse(JSON.stringify(s));h.forEach(b=>{b.title==u&&(b.isActive=!b.isActive)}),d&&d(h)};return e.jsxs("div",{className:r??z.versionExtraOptions,children:[t&&e.jsx("span",{className:z.versionExtraOptions_title,children:t}),e.jsxs("div",{className:z.versionExtraOptions_block,children:[e.jsxs("div",{className:z.versionExtraOptions_block_top,onClick:()=>a&&a(!n),children:[e.jsx("h2",{className:z.versionExtraOptions_block_top_title,style:{color:o},children:t||"Выберите параметры"}),e.jsx("button",{className:z.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${z.versionExtraOptions_block_top_arrow} ${n?z.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.versionExtraOptions_block_dropdown} ${n?z.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((p,u)=>e.jsxs("label",{className:z.versionExtraOptions_block_dropdown_item,children:[p.title,e.jsx("input",{ref:h=>{h&&(l.current[u]=h)},type:"checkbox",name:p.title,"data-type":p.title,onChange:h=>i(h,p.title)})]},p.id))})]})]})}function Pl({color:o="black",title:t="",versionList:s,className:r}){const[n,a]=m.useState(!1),[d,l]=m.useState("");m.useEffect(()=>{s==null||s.forEach(p=>{p.isActive&&l(p.title)})},[]);const c=()=>{a(!n)},i=p=>{s==null||s.forEach(u=>u.isActive=!1),s==null||s.forEach(u=>{u.title==p.title&&(u.isActive=!0,l(u.title))}),c()};return e.jsxs("div",{className:r??z.version3,children:[e.jsx("span",{className:z.version3_title,children:t}),e.jsxs("div",{className:z.version3_block,children:[e.jsxs("div",{className:z.version3_block_top,onClick:()=>c(),children:[e.jsx("h2",{className:z.version3_block_top_title,style:{color:o},children:d||"Выбрать"}),e.jsx("button",{className:z.version3_block_top_btn,children:e.jsx("div",{className:`${z.version3_block_top_arrow} ${n?z.version3_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.version3_block_dropdown} ${n?z.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(p=>e.jsx("span",{className:z.version3_block_dropdown_item,onClick:()=>i(p),children:s.length>1?p.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},p.id))})]})]})}function Al({extraOptionsStatus:o,localCategory:t,setExtraOptionsStatus:s,extraOptions:r}){const[n,a]=m.useState(!1);return m.useEffect(()=>{},[t]),e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>s(!o),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Доп. параметры"}),e.jsx(xe,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsxs("div",{className:`${_.productItem_right_bottom_items} ${o?_.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:_.productItem_right_bottom_item,children:e.jsx(Ol,{color:"",extraOptionsList:r,openBlock:n,setOpenBlock:a})}),r.map(d=>{if(d.isActive)return e.jsxs("div",{className:_.productItem_right_bottom_item,children:[e.jsx(Pl,{color:"",title:d.title,versionList:d.type}),e.jsx("button",{className:_.productItem_right_bottom_del,children:"Удалить"})]},d.id)})]})]})}function at({color:o="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:r,openBlock:n,currentVersion:a,setOpenBlock:d,setCurrentVersion:l,setVersionList:c}){const i=p=>{l&&l(p.title);const u=s.map(g=>({id:g.id,title:g.title,isActive:!1})),h=u.find(g=>g.id==p.id),b=u.findIndex(g=>g.id==p.id);h&&(h.isActive=!0,u.splice(b,1,h),c&&c(u))};return e.jsxs("div",{className:r??z.version3,children:[e.jsx("span",{className:z.version3_title,children:t}),e.jsxs("div",{className:z.version3_block,children:[e.jsxs("div",{className:z.version3_block_top,children:[e.jsx("h2",{className:z.version3_block_top_title,style:{color:o},children:a}),e.jsx("button",{className:z.version3_block_top_btn,onClick:()=>d&&d(!n),children:e.jsx("div",{className:`${z.version3_block_top_arrow} ${n?z.version3_block_top_arrow_active:""}`,children:e.jsx(T,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${z.version3_block_dropdown} ${n?z.version3_block_dropdown_open:""}`,children:s.map(p=>e.jsx("span",{className:z.version3_block_dropdown_item,onClick:()=>i(p),children:p.title},p.id))})]})]})}function El({brieflyProductStatus:o,setBrieflyProductStatus:t}){return e.jsxs("div",{className:_.productItem_right_item,children:[e.jsxs("div",{className:_.productItem_right_top,onClick:()=>t(!o),children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коротко о товаре"}),e.jsx(xe,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:o})]}),e.jsx("div",{className:`${_.productItem_right_bottom_items} ${o?_.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${_.productItem_right_bottom_item} ${_.productItem_right_bottom_row}`,children:[e.jsx(at,{color:"",title:"Объем, л"}),e.jsx(at,{color:"",title:"Кол-во в упаковке"})]})})]})}function ft({currentProduct:o,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:r,setBrieflyProductStatus:n,localCategory:a,extraOptions:d,setExtraOptions:l}){return e.jsxs("div",{className:_.productItem_right,children:[e.jsx("div",{className:_.productItem_right_item,children:e.jsxs("div",{className:_.productItem_right_top,children:[e.jsx("h5",{className:_.productItem_right_title,children:"Коментарии"}),e.jsx(xe,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(Al,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:a,extraOptions:d,setExtraOptions:l,currentProduct:o}),e.jsx(El,{brieflyProductStatus:r,setBrieflyProductStatus:n})]})}function yt({stockName:o,setAdminSettings:t}){return e.jsxs("div",{className:_.settings_content_buttons,children:[e.jsx(Z,{to:o=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${_.settings_content_btn} ${_.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${_.settings_content_btn} ${_.settings_content_btn_save}`,onClick:()=>t(),children:o=="website"?"Сохранить":"Добавить"})]})}function Wl(){const o=Ue(),t=re(),{id:s}=it(),{openModalCategory:r}=he(),{pickedCategory:n,currentProduct:a,setErrorModal:d,setCurrentProduct:l,setPickedCategory:c}=he(),[i,p]=m.useState(""),[u,h]=m.useState(0),[b,g]=m.useState(!1),[S,A]=m.useState([]),[W,D]=m.useState(!1),[j,k]=m.useState(""),[P,x]=m.useState(""),[v,$]=m.useState([]);async function N(){try{return await(await ne.get(`nomenclatures/${s}`)).data}catch(w){console.log("Ошибка произошла при получении продукта по id",w)}}const C=w=>{var M,U;w&&(p(((M=w==null?void 0:w.name)==null?void 0:M.ru)||""),l({...w}),h((U=w==null?void 0:w.category)==null?void 0:U.id))};m.useEffect(()=>{c({})},[t.pathname]),m.useEffect(()=>{E(),console.log("id",s),console.log("vendorCode",j)},[s,n]);async function E(){const w=await N();w&&(console.log(333,"product",w),C(w))}const R=async()=>{var w;if(a){const M={nomenclatureId:a.id,title:i||((w=a==null?void 0:a.name)==null?void 0:w.ru),article:j,image:"string",description:P,document:"string"};Y(M),n.id&&(await f(),h(n.id)),c({}),A([]),o("/admin/product/adding/stock",{replace:!0})}else d({status:!0,message:'"Выберите категорию"'})};async function Y(w){try{const M=await ne.post("web-nomenclatures",w);console.log(`${w.title} успешно добавлен на сайт`,M.data)}catch(M){console.log("Ошибка произошла при добавлении web nomenclatures",M)}}async function f(){try{await ne.patch(`nomenclatures/${s}`,{categoryId:n.id})}catch(w){console.log("Ошибка произошла при изменении котегории на складе",w)}}return e.jsxs("div",{className:_.productItem,children:[r&&e.jsx(ct,{}),e.jsx(vt,{stockName:"stock",myMxikCode:s,localFormData:v,setLocalFormData:$}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(xt,{myBarcode:a.barcode,localCategory:u,productName:i,productDescription:P,setProductDescription:x,setProductName:p,vendorCode:j,setVendorCode:k}),e.jsx(ft,{extraOptionsStatus:b,setExtraOptionsStatus:g,brieflyProductStatus:W,setBrieflyProductStatus:D,localCategory:u,extraOptions:S,setExtraOptions:A,currentProduct:a})]}),e.jsx(yt,{stockName:"stock",setAdminSettings:R})]})}function Ul(){var ve,je;const o=Ue(),t=re(),{id:s}=it(),{openModalCategory:r}=he(),{pickedCategory:n,webCurrentProduct:a,setWebCurrentProduct:d,setErrorModal:l,setPickedCategory:c}=he(),[i,p]=m.useState(""),[u,h]=m.useState(0),[b,g]=m.useState(Number(s)),[S,A]=m.useState(!1),[W,D]=m.useState([]),[j,k]=m.useState(!1),[P,x]=m.useState(""),[v,$]=m.useState(""),[N,C]=m.useState([]),[E,R]=m.useState([]);async function Y(){try{return await(await ne.get(`web-nomenclatures/${s}`)).data}catch(B){console.log("Ошибка произошла при получении продукта по id",B)}}m.useEffect(()=>{c({})},[t.pathname]),m.useEffect(()=>{f()},[s]);async function f(){var oe,L,q,_e,ie;const B=await Y();if(B){h((oe=B==null?void 0:B.nomenclature)==null?void 0:oe.id),x(B==null?void 0:B.article),p(B!=null&&B.title?B==null?void 0:B.title:(q=(L=B==null?void 0:B.nomenclature)==null?void 0:L.name)==null?void 0:q.ru),d({...B}),g((ie=(_e=B==null?void 0:B.nomenclature)==null?void 0:_e.category)==null?void 0:ie.id);let ce=1;const Q=B.images?B.images.map(V=>({id:ee(),order:ce++,src:V})):[];console.log(1,"установка в localNewImage картинки с сервера images",Q),C(Q),ce=1,$(B.description?B.description:"")}}const w=async()=>{if(console.log(7,"нажал на кнопку сохранить"),a||n.label){n.id&&await U(),console.log(8,"предворительная проверка localFormData",E),console.log(9,"вызвал функцию fetchPhotos(localFormData)");const B=await Se(E);console.log(15,"получил ответ от функции fetchPhotos() images",B),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const oe=N.filter(q=>q.src).map(q=>{if(q.src)return q.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",oe);const L={nomenclatureId:a.id,title:i,article:P,images:[...oe,...B],description:v,document:"string"};console.log(18,"создал новый объект продукта newProduct",L),console.log(18,"localNewImage",N),M(L),console.log(19,"отправил его на сервер"),c({}),D([]),console.log(20,"Обнулил объект setPickedCategory({})"),console.log(21,"перенаправил пользователя на /admin/product/adding/website"),o("/admin/product/adding/website",{replace:!0})}else l({status:!0,message:'"Выберите категорию"'})};async function M(B){try{await ne.patch(`web-nomenclatures/${s}`,B)}catch(oe){console.log("Ошибка произошла при добавлении web nomenclatures",oe)}}async function U(){try{await ne.patch(`nomenclatures/${u}`,{categoryId:n.id}),g(n.id)}catch(B){console.log("Ошибка произошла при изменении котегории на сайте",B)}}const Se=async B=>{if(console.log(10,"принял formData в fetchPhotos fd",B),B){console.log(11,"прошел проверку на наличие formData fd",B);const oe=new FormData;console.log(12,"создал новый formData",oe),B.forEach((L,q)=>{oe.append(`files[${q}]`,L)}),console.log(13,"пробежался в цикле по первой formData и в новую formData записал все элементы первой formData",oe);try{const q=await(await ne.post("media-objects/uploads",oe)).data;return console.log(14,"Файлы успешно загружены, возвращаю ответ от сервера data",q),q}catch(L){console.error("Ошибка при добавлении картинок на сервер",L)}}};return e.jsxs("div",{className:_.productItem,children:[r&&e.jsx(ct,{}),e.jsx(vt,{stockName:"stock",myMxikCode:s,localNewImage:N,setLocalNewImage:C,localFormData:E,setLocalFormData:R}),e.jsxs("div",{className:_.productItem_settings,children:[e.jsx(xt,{myBarcode:((ve=a==null?void 0:a.nomenclature)==null?void 0:ve.barcode)&&((je=a==null?void 0:a.nomenclature)==null?void 0:je.barcode),localCategory:b,productName:i,productDescription:v,setProductDescription:$,setProductName:p,vendorCode:P,setVendorCode:x}),e.jsx(ft,{extraOptionsStatus:S,setExtraOptionsStatus:A,brieflyProductStatus:j,setBrieflyProductStatus:k,localCategory:b,extraOptions:W,setExtraOptions:D,currentProduct:a})]}),e.jsx(yt,{stockName:"website",setAdminSettings:w})]})}function Hl(){const{user:o}=Nt(),{setCurrentShop:t}=Ce(),r=re().pathname;m.useEffect(()=>{r.startsWith("/admin/shops")||t("0")},[r]);const n=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(T,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(T,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(T,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(T,{name:"BuildingStorefrontIcon"}),isActive:!1}],[a,d]=m.useState(n),l=c=>{const i=a.map(u=>({id:u.id,label:u.label,href:u.href,icon:u.icon,isActive:!1})),p=i.find(u=>u.id==c);p&&(p.isActive=!0),d(i)};return e.jsxs(e.Fragment,{children:[e.jsx(It,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:_.wrapper,children:[e.jsx("h1",{className:_.wrapper_title,children:o==null?void 0:o.username}),e.jsxs("div",{className:_.content,children:[e.jsx("div",{className:_.content_left,children:e.jsx("ul",{className:_.tools,children:a.map(c=>e.jsx("li",{children:e.jsxs(Z,{to:c.href,className:`${_.tools_link} ${r.startsWith(c.href)?_.tools_link_active:""}`,onClick:()=>l(c.id),children:[c.icon,c.label]})},c.id))})}),r.startsWith("/admin")&&e.jsxs("div",{className:_.content_right,children:[r.startsWith("/admin/settings")&&e.jsx(wc,{}),r.startsWith("/admin/users")&&e.jsx(kl,{}),r.startsWith("/admin/shops")&&e.jsx(Nl,{}),r.startsWith("/admin/product")&&e.jsx($c,{}),r.startsWith("/admin/stock-product")&&e.jsx(Wl,{}),r.startsWith("/admin/website-product")&&e.jsx(Ul,{})]})]})]})})]})}export{Hl as default};
