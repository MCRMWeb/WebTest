import{a as le,j as e,r as p,w as He,L as V,c as F,b as ge,x as fe,e as re,y as ce,z as Ft,A as qt,B as Ht,u as ft,C as vt}from"./index-BvLd0ioI.js";import{u as Vt}from"./userStore-Bcpaglfz.js";import{C as E}from"./CustomIcon-BASPemvT.js";import{s as De}from"./shop1Store-38ucfQ3g.js";import{c as Ve,a as st,H as Qt}from"./Header-BEmhHNws.js";import{C as Se,D as _t,a as xe,s as J,b as H,M as jt}from"./Modal-CWqwqvr5.js";import{b as be}from"./bannerStore-C21Duy-p.js";import{C as ot}from"./CustomIcon-CzJZSOME.js";import{C as Xt}from"./CustomIcon-BPzw6Ibc.js";import"./XMarkIcon-hG-QNPRC.js";const Gt="_wrapper_s91xt_1",Yt="_wrapper_title_s91xt_4",Zt="_content_s91xt_10",Kt="_content_left_s91xt_16",Jt="_content_right_s91xt_19",en="_tools_s91xt_45",tn="_tools_link_s91xt_50",nn="_tools_link_active_s91xt_63",sn="_settings_s91xt_86",on="_settings_title_s91xt_89",an="_settings_content_s91xt_94",rn="_settings_content_top_s91xt_97",cn="_settings_content_buttons_s91xt_100",ln="_settings_content_btn_s91xt_110",_n="_settings_content_btn_cancel_s91xt_122",dn="_settings_content_btn_save_s91xt_125",mn="_settings_tools_s91xt_128",pn="_settings_tools_link_s91xt_133",un="_settings_tools_link_active_s91xt_148",hn="_wrapperModules_s91xt_153",gn="_item_s91xt_160",bn="_item_top_s91xt_165",xn="_item_top_title_s91xt_176",fn="_item_top_arrow_s91xt_180",vn="_item_top_arrow_active_s91xt_188",jn="_item_block_s91xt_191",yn="_item_block_item_s91xt_202",kn="_item_block_open_s91xt_205",wn="_item_onOff_s91xt_211",Cn="_item_delivery_s91xt_211",Nn="_versions_block_s91xt_217",Sn="_versions_block_top_s91xt_222",In="_versions_block_top_title_s91xt_232",$n="_versions_block_top_arrow_s91xt_237",Pn="_versions_block_top_arrow_active_s91xt_246",Dn="_versions_block_dropdown_s91xt_249",Mn="_versions_block_dropdown_item_s91xt_260",Bn="_versions_block_dropdown_open_s91xt_271",On="_versions_block_onOff_s91xt_277",An="_versions_block_delivery_s91xt_277",Wn="_categoriesDropDown_title_s91xt_283",En="_categoriesDropDown_item_s91xt_286",Un="_categoriesDropDown_item_top_s91xt_292",Ln="_categoriesDropDown_item_top_title_s91xt_303",zn="_categoriesDropDown_item_top_arrow_s91xt_307",Rn="_categoriesDropDown_item_top_arrow_active_s91xt_314",Tn="_categoriesDropDown_item_block_s91xt_317",Fn="_categoriesDropDown_item_block_line_s91xt_326",qn="_categoriesDropDown_item_block_active_s91xt_338",Hn="_categoriesDropDown_item_block_open_s91xt_341",Vn="_categoriesDropDown_item_onOff_s91xt_346",Qn="_categoriesDropDown_item_delivery_s91xt_346",Xn="_products_buttons_s91xt_352",Gn="_products_btn_s91xt_358",Yn="_products_btn_active_s91xt_369",Zn="_productItem_title_s91xt_374",Kn="_productItem_basePhoto_s91xt_379",Jn="_productItem_photos_s91xt_385",es="_productItem_photos_desc_s91xt_391",ts="_productItem_photo_s91xt_385",ns="_productItem_photo_img_s91xt_406",ss="_productItem_photo_close_s91xt_417",os="_productItem_photo_active_s91xt_429",as="_productItem_add_s91xt_433",is="_productItem_add_text_s91xt_441",rs="_productItem_settings_s91xt_446",cs="_productItem_left_info_s91xt_450",ls="_productItem_left_item_s91xt_458",_s="_productItem_left_item_top_s91xt_462",ds="_productItem_left_item_top_input_s91xt_483",ms="_productItem_left_item_bottom_s91xt_489",ps="_productItem_left_form_s91xt_502",us="_productItem_left_form_label_s91xt_509",hs="_productItem_left_form_title_s91xt_513",gs="_productItem_left_form_input_s91xt_519",bs="_productItem_left_form_textarea_s91xt_527",xs="_productItem_left_form_size_s91xt_535",fs="_productItem_right_s91xt_543",vs="_productItem_right_item_s91xt_550",js="_productItem_right_top_s91xt_555",ys="_productItem_right_title_s91xt_562",ks="_productItem_right_bottom_items_s91xt_568",ws="_productItem_right_bottom_items_active_s91xt_577",Cs="_productItem_right_bottom_item_s91xt_568",Ns="_productItem_right_bottom_row_s91xt_603",Ss="_productItem_right_bottom_del_s91xt_608",Is="_banner_nav_list_s91xt_619",$s="_banner_nav_link_s91xt_625",Ps="_banner_nav_link_active_s91xt_640",Ds="_addingWrapper_title_s91xt_645",Ms="_addingWrapper_form_s91xt_650",Bs="_addingWrapper_form_btn_s91xt_655",Os="_addingWrapper_search_s91xt_672",As="_addingWrapper_search_input_s91xt_678",Ws="_addingWrapper_search_icon_s91xt_686",Es="_addingWrapper_wrap_table_s91xt_689",Us="_addingWrapper_table_error_s91xt_705",Ls="_addingWrapper_thead_tr_s91xt_709",zs="_addingWrapper_thead_th_s91xt_714",Rs="_addingWrapper_tbody_tr_s91xt_722",Ts="_addingWrapper_tbody_tr_td_s91xt_726",Fs="_addingWrapper_tbody_tr_image_s91xt_730",qs="_addingWrapper_tbody_buttons_s91xt_735",Hs="_addingWrapper_tbody_add_s91xt_740",Vs="_addingWrapper_tbody_del_s91xt_747",Qs="_errorWrapper_s91xt_755",Xs="_errorWrapper_block_s91xt_764",Gs="_errorWrapper_block_close_s91xt_774",Ys="_layout_title_s91xt_785",Zs="_layout_buttons_s91xt_790",Ks="_layout_btn_s91xt_796",Js="_layout_btn_active_s91xt_810",eo="_editBlock_s91xt_815",to="_articleModal_s91xt_827",no="_articleModal_block_s91xt_836",so="_articleModal_block_nav_s91xt_843",oo="_articleModal_block_title_s91xt_850",ao="_articleModal_block_info_s91xt_855",io="_articleModal_block_info_item_s91xt_858",ro="_articleModal_block_recommended_s91xt_873",co="_articleModal_block_recommended_title_s91xt_876",lo="_articleModal_block_recommended_item_s91xt_882",_o="_articleModal_block_recommended_item_title_s91xt_886",mo="_articleModal_block_recommended_content_s91xt_892",po="_articleModal_block_recommended_img_s91xt_897",uo="_articleModal_block_recommended_info_s91xt_907",ho="_articleModal_block_recommended_desc_s91xt_912",go="_articleModal_block_recommended_article_s91xt_926",bo="_articleModal_block_search_s91xt_931",xo="_articleModal_block_search_box_s91xt_934",fo="_articleModal_block_search_input_s91xt_939",vo="_articleModal_block_search_btn_s91xt_951",jo="_articleModal_block_found_s91xt_961",yo="_articleModal_block_buttonBox_s91xt_967",ko="_articleModal_block_button_s91xt_967",wo="_homePage_wrapper_title_s91xt_984",Co="_homePage_blocks_s91xt_994",No="_homePage_addBlock_s91xt_1000",So="_homePage_addBlock_title_s91xt_1017",Io="_homePage_addBlock_active_s91xt_1020",$o="_homePage_addBlockItem_s91xt_1024",Po="_homePage_addBlockItem_close_s91xt_1033",Do="_homePage_addBlockItem_super_s91xt_1039",Mo="_homePage_addBlockItem_super_title_s91xt_1043",Bo="_homePage_addBlockItem_super_block_s91xt_1048",Oo="_homePage_addBlockItem_super_item_s91xt_1073",Ao="_homePage_addBlockItem_content_s91xt_1089",Wo="_homePage_addBlockItem_categories_s91xt_1113",Eo="_homePage_delModal_s91xt_1120",Uo="_homePage_delModal_block_s91xt_1130",Lo="_homePage_delModal_buttons_s91xt_1140",zo="_homePage_delModal_btn_s91xt_1150",Ro="_homePage_delModal_del_s91xt_1159",To="_homePage_delModal_cancel_s91xt_1162",r={wrapper:Gt,wrapper_title:Yt,content:Zt,content_left:Kt,content_right:Jt,tools:en,tools_link:tn,tools_link_active:nn,settings:sn,settings_title:on,settings_content:an,settings_content_top:rn,settings_content_buttons:cn,settings_content_btn:ln,settings_content_btn_cancel:_n,settings_content_btn_save:dn,settings_tools:mn,settings_tools_link:pn,settings_tools_link_active:un,wrapperModules:hn,item:gn,item_top:bn,item_top_title:xn,item_top_arrow:fn,item_top_arrow_active:vn,item_block:jn,item_block_item:yn,item_block_open:kn,item_onOff:wn,item_delivery:Cn,versions_block:Nn,versions_block_top:Sn,versions_block_top_title:In,versions_block_top_arrow:$n,versions_block_top_arrow_active:Pn,versions_block_dropdown:Dn,versions_block_dropdown_item:Mn,versions_block_dropdown_open:Bn,versions_block_onOff:On,versions_block_delivery:An,categoriesDropDown_title:Wn,categoriesDropDown_item:En,categoriesDropDown_item_top:Un,categoriesDropDown_item_top_title:Ln,categoriesDropDown_item_top_arrow:zn,categoriesDropDown_item_top_arrow_active:Rn,categoriesDropDown_item_block:Tn,categoriesDropDown_item_block_line:Fn,categoriesDropDown_item_block_active:qn,categoriesDropDown_item_block_open:Hn,categoriesDropDown_item_onOff:Vn,categoriesDropDown_item_delivery:Qn,products_buttons:Xn,products_btn:Gn,products_btn_active:Yn,productItem_title:Zn,productItem_basePhoto:Kn,productItem_photos:Jn,productItem_photos_desc:es,productItem_photo:ts,productItem_photo_img:ns,productItem_photo_close:ss,productItem_photo_active:os,productItem_add:as,productItem_add_text:is,productItem_settings:rs,productItem_left_info:cs,productItem_left_item:ls,productItem_left_item_top:_s,productItem_left_item_top_input:ds,productItem_left_item_bottom:ms,productItem_left_form:ps,productItem_left_form_label:us,productItem_left_form_title:hs,productItem_left_form_input:gs,productItem_left_form_textarea:bs,productItem_left_form_size:xs,productItem_right:fs,productItem_right_item:vs,productItem_right_top:js,productItem_right_title:ys,productItem_right_bottom_items:ks,productItem_right_bottom_items_active:ws,productItem_right_bottom_item:Cs,productItem_right_bottom_row:Ns,productItem_right_bottom_del:Ss,banner_nav_list:Is,banner_nav_link:$s,banner_nav_link_active:Ps,addingWrapper_title:Ds,addingWrapper_form:Ms,addingWrapper_form_btn:Bs,addingWrapper_search:Os,addingWrapper_search_input:As,addingWrapper_search_icon:Ws,addingWrapper_wrap_table:Es,addingWrapper_table_error:Us,addingWrapper_thead_tr:Ls,addingWrapper_thead_th:zs,addingWrapper_tbody_tr:Rs,addingWrapper_tbody_tr_td:Ts,addingWrapper_tbody_tr_image:Fs,addingWrapper_tbody_buttons:qs,addingWrapper_tbody_add:Hs,addingWrapper_tbody_del:Vs,errorWrapper:Qs,errorWrapper_block:Xs,errorWrapper_block_close:Gs,layout_title:Ys,layout_buttons:Zs,layout_btn:Ks,layout_btn_active:Js,editBlock:eo,articleModal:to,articleModal_block:no,articleModal_block_nav:so,articleModal_block_title:oo,articleModal_block_info:ao,articleModal_block_info_item:io,articleModal_block_recommended:ro,articleModal_block_recommended_title:co,articleModal_block_recommended_item:lo,articleModal_block_recommended_item_title:_o,articleModal_block_recommended_content:mo,articleModal_block_recommended_img:po,articleModal_block_recommended_info:uo,articleModal_block_recommended_desc:ho,articleModal_block_recommended_article:go,articleModal_block_search:bo,articleModal_block_search_box:xo,articleModal_block_search_input:fo,articleModal_block_search_btn:vo,articleModal_block_found:jo,articleModal_block_buttonBox:yo,articleModal_block_button:ko,homePage_wrapper_title:wo,homePage_blocks:Co,homePage_addBlock:No,homePage_addBlock_title:So,homePage_addBlock_active:Io,homePage_addBlockItem:$o,homePage_addBlockItem_close:Po,homePage_addBlockItem_super:Do,homePage_addBlockItem_super_title:Mo,homePage_addBlockItem_super_block:Bo,homePage_addBlockItem_super_item:Oo,homePage_addBlockItem_content:Ao,homePage_addBlockItem_categories:Wo,homePage_delModal:Eo,homePage_delModal_block:Uo,homePage_delModal_buttons:Lo,homePage_delModal_btn:zo,homePage_delModal_del:Ro,homePage_delModal_cancel:To};function Fo(){const{modulesCashRegisterStatus:s,deliveryStatus:t,cashRegisterVersionList:n,cashRegisterCurrentVersion:a,openBlockCashRegister:o,openBlockCashRegisterVersion:i,openBlockCart:m,cartVersionList:c,modulesCartStatus:d,cartCurrentVersion:l,openBlockCartVersion:_,setCartVersionList:h,setCartCurrentVersion:g,setModulesCartStatus:u,setOpenBlockCart:f,setOpenBlockCartVersion:v,setDeliveryStatus:y,setOpenBlockCashRegister:I,setCashRegisterVersionList:N,setModulesCashRegisterStatus:$,setCashRegisterCurrentVersion:k,setOpenBlockCashRegisterVersion:x}=le(),j=()=>{f(!m)},b=()=>{I(!o)};return e.jsxs("div",{className:r.wrapperModules,children:[e.jsxs("div",{className:r.item,children:[e.jsxs("div",{className:r.item_top,onClick:()=>j(),children:[e.jsx("h2",{className:r.item_top_title,children:"Корзина"}),e.jsx("button",{className:r.item_top_btn,onClick:()=>j(),children:e.jsx("div",{className:`${r.item_top_arrow} ${m?r.item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${r.item_block} ${m?r.item_block_open:""}`,children:[e.jsxs("div",{className:r.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:r.item_shell,onClick:()=>u(!d),children:e.jsx(Se,{status:d,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(_t,{color:"rgb(137, 250, 135)",openBlock:_,setOpenBlock:v,title:"Выберите версию",versionList:c,currentVersion:l,setCurrentVersion:g,setVersionList:h}),e.jsxs("div",{className:r.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:r.item_shell,onClick:()=>y(!t),children:e.jsx(Se,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:r.item,children:[e.jsxs("div",{className:r.item_top,onClick:()=>b(),children:[e.jsx("h2",{className:r.item_top_title,children:"Кacca"}),e.jsx("button",{className:r.item_top_btn,onClick:()=>b(),children:e.jsx("div",{className:`${r.item_top_arrow} ${o?r.item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${r.item_block} ${o?r.item_block_open:""}`,children:[e.jsxs("div",{className:r.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:r.item_shell,onClick:()=>$(!s),children:e.jsx(Se,{status:s,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(_t,{color:"rgb(137, 250, 135)",openBlock:i,setOpenBlock:x,title:"Выберите версию",versionList:n,currentVersion:a,setCurrentVersion:k,setVersionList:N})]})]})]})}function qo(){const{templates:s,setTemplates:t}=le(),[n,a]=p.useState([...s]);p.useEffect(()=>{a([...s])},[s]);const o=c=>{const d=n.map(l=>l.id===c?{...l,open:!l.open}:l);a(d)},i=(c,d)=>{const l=n.map(_=>_.id===c?{..._,isActive:!0,templateThemes:_.templateThemes.map(h=>h.id===d?{...h,isActive:!0}:{...h,isActive:!1})}:{..._,isActive:!1,templateThemes:_.templateThemes.map(h=>({...h,isActive:!1}))});a(l)};function m(){t(n)}return e.jsxs("div",{className:r.wrapperModules,children:[n.map(c=>e.jsxs("div",{className:r.item,children:[e.jsxs("div",{className:r.item_top,onClick:()=>o(c.id),children:[e.jsx("h2",{className:r.item_top_title,children:c.title}),e.jsx("button",{className:r.item_top_btn,onClick:()=>o(c.id),children:e.jsx("div",{className:`${r.item_top_arrow} ${c.open?r.item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${r.item_block} ${c.open?r.item_block_open:""}`,children:c.templateThemes.map(d=>e.jsxs("div",{className:r.item_onOff,children:[e.jsx("span",{children:d.title}),e.jsx("div",{className:r.item_shell,onClick:()=>i(c.id,d.id),children:e.jsx(Se,{status:d.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},d.id))})]},c.id)),e.jsxs("div",{className:r.settings_content_buttons,children:[e.jsx("button",{className:`${r.settings_content_btn} ${r.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${r.settings_content_btn} ${r.settings_content_btn_save}`,onClick:()=>m(),children:"Сохранить"})]})]})}function Ho({title:s,setOpenModal:t}){const{currentCategory:n}=le(),[a,o]=p.useState(""),{selectedSuperCategory:i,selectedCategory:m}=Ve();p.useEffect(()=>{n=="Котегории"&&i&&c(i),n=="Подкотегории"&&m&&c(m)},[n,i,m]);const c=async l=>{try{const h=await(await He.get(`https://api.mcrm.uz/api/categories/${l}`)).data;o(h.name.ru)}catch(_){console.error("Ошибка произошла при получении названия варианта категории",_)}},d=()=>{t&&t(!0)};return e.jsxs("div",{className:r.editBlock,onClick:d,children:[a||s,e.jsx(E,{name:"PencilIcon"})]})}const Vo="_modalCategory_xzv82_1",Qo="_modalCategory_block_xzv82_10",Xo="_modalCategory_nav_xzv82_16",Go="_modalCategory_nav_title_xzv82_23",Yo="_modalCategory_content_xzv82_29",Zo="_modalCategory_content_message_xzv82_36",Ko="_modalCategory_content_link_xzv82_44",Jo="_modalCategory_content_link_active_xzv82_72",ea="_modalCategory_content_item_xzv82_82",ta="_modalCategory_content_block_xzv82_104",na="_modalCategory_content_block_title_xzv82_108",sa="_settings_xzv82_115",oa="_settings_title_xzv82_118",aa="_settings_content_xzv82_123",ia="_settings_content_top_xzv82_126",ra="_settings_content_buttons_xzv82_129",ca="_settings_content_btn_xzv82_139",la="_settings_content_btn_cancel_xzv82_151",_a="_settings_content_btn_save_xzv82_154",da="_settings_tools_xzv82_157",ma="_settings_tools_link_xzv82_162",pa="_settings_tools_link_active_xzv82_177",oe={modalCategory:Vo,modalCategory_block:Qo,modalCategory_nav:Xo,modalCategory_nav_title:Go,modalCategory_content:Yo,modalCategory_content_message:Zo,modalCategory_content_link:Ko,modalCategory_content_link_active:Jo,modalCategory_content_item:ea,modalCategory_content_block:ta,modalCategory_content_block_title:na,settings:sa,settings_title:oa,settings_content:aa,settings_content_top:ia,settings_content_buttons:ra,settings_content_btn:ca,settings_content_btn_cancel:la,settings_content_btn_save:_a,settings_tools:da,settings_tools_link:ma,settings_tools_link_active:pa};function ua({setCancel:s}){return e.jsxs("div",{className:oe.modalCategory_nav,children:[e.jsx("h2",{className:oe.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:oe.modalCategory_nav_close,onClick:s,children:e.jsx(E,{width:24,height:24,name:"XMarkIcon"})})]})}function ha({superCategory:s,category:t,setMessageStatus:n,fetchCategories:a}){const{currentCategory:o}=le(),{selectedSuperCategory:i,setSelectedSuperCategory:m}=Ve(),{setCurrentCategory:c}=xe(),[d,l]=p.useState(10),_=(g,u)=>{if(g.preventDefault(),o==="Подкотегории"){a("category",1,10,u.id);const f=t.filter(v=>v.parentId==u.id);c(f),m(u.id),n(!1)}m(u.id)},h=g=>{g.preventDefault();const u=d+10;l(u),a("super",1,u)};return e.jsxs("div",{className:oe.modalCategory_content_block,children:[e.jsx("h2",{className:oe.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:oe.modalCategory_content_item,children:[s.map(g=>e.jsxs(V,{to:"#",className:`${oe.modalCategory_content_link} ${g.id==i?oe.modalCategory_content_link_active:""} `,onClick:u=>_(u,g),children:[g.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},g.id)),e.jsx(V,{to:"#",className:oe.modalCategory_content_link,onClick:g=>h(g),children:"Ещё..."})]})]})}function ga({categoryId:s,category:t,setCategoryId:n,setSubCategory:a,fetchCategories:o}){const{selectedSuperCategory:i}=Ve(),[m,c]=p.useState(10),d=_=>{_.preventDefault();const h=m+10;c(h),o("category",1,h,i)},l=(_,h)=>{a(_,h),n(h.id)};return t.length>0&&e.jsxs("div",{className:oe.modalCategory_content_block,children:[e.jsx("h2",{className:oe.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:oe.modalCategory_content_item,children:[t==null?void 0:t.map(_=>e.jsxs(V,{to:"#",className:`${oe.modalCategory_content_link} ${_.id==s?oe.modalCategory_content_link_active:""} `,onClick:h=>l(h,_),children:[_.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},_.id)),e.jsx(V,{to:"#",className:oe.modalCategory_content_link,onClick:_=>d(_),children:"Ещё..."})]})]})}function ba({setSettings:s,setCancel:t}){return e.jsxs("div",{className:oe.settings_content_buttons,children:[e.jsx("button",{className:`${oe.settings_content_btn} ${oe.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(V,{to:"#",className:`${oe.settings_content_btn} ${oe.settings_content_btn_save}`,onClick:s,children:"Сохранить"})]})}function xa({setOpenModal:s}){const{currentCategory:t}=le(),{selectedSuperCategory:n,setSelectedSuperCategory:a,selectedCategory:o,setSelectedCategory:i}=Ve(),[m,c]=p.useState(0),[d,l]=p.useState(!1),[_,h]=p.useState("Выберите категорию"),[g,u]=p.useState([]),[f,v]=p.useState([]);p.useEffect(()=>{$("super",1,10),o&&c(o)},[]);const y=(x,j)=>{x.preventDefault(),$("subCategory",1,10,j.id),l(!1)},I=()=>{t=="Котегории"?a(n):t=="Подкотегории"&&i(m),N()},N=()=>{l(!1),h("Выберите категорию"),s(!1)},$=async(x,j,b,w)=>{try{const C=x=="super"?`https://api.mcrm.uz/api/categories?&page=${j}&perPage=${b}`:`https://api.mcrm.uz/api/categories?parentId=${w}&page=${j}&perPage=${b}`,O=(await He.get(C)).data.data.map(te=>({...te,label:x==="super"?"Супер категория":x==="category"?"Категория":"Субкатегория"}));x==="super"&&u([...O]),x==="category"&&v([...O])}catch(C){console.error(`Ошибка произошла при получении ${x} категорий`,C)}},k=()=>{s(!1)};return e.jsx("div",{className:oe.modalCategory,onClick:k,children:e.jsxs("div",{className:oe.modalCategory_block,onClick:x=>x.stopPropagation(),children:[e.jsx(ua,{setCancel:N}),e.jsx("p",{className:oe.modalCategory_content_message,children:d?_:""}),e.jsxs("div",{className:oe.modalCategory_content,children:[e.jsx(ha,{superCategory:g,category:f,setMessageStatus:l,fetchCategories:$}),t==="Подкотегории"&&e.jsx(ga,{categoryId:m,category:f,setCategoryId:c,setSubCategory:y,fetchCategories:$}),e.jsx(ba,{setSettings:I,setCancel:N})]})]})})}function fa(){const[s,t]=p.useState(!1),[n,a]=p.useState(!1),{currentCategory:o,categoriesStatus:i,categories:m,setCategoriesStatus:c,setCurrentCategory:d}=le();p.useEffect(()=>{t(o==="Котегории"||o==="Подкотегории")},[o]);const l=_=>{d(_.title),_.title==="Котегории"||_.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:r.categoriesDropDown,children:[e.jsx("h2",{className:r.categoriesDropDown_title,children:"Настройки каталога"}),n&&e.jsx(xa,{setOpenModal:a}),e.jsxs("div",{className:r.categoriesDropDown_item,children:[e.jsxs("div",{className:r.categoriesDropDown_item_top,onClick:()=>c(!i),children:[e.jsx("h2",{className:r.categoriesDropDown_item_top_title,children:o}),e.jsx("button",{className:r.categoriesDropDown_item_top_btn,onClick:()=>c(!i),children:e.jsx("div",{className:`${r.categoriesDropDown_item_top_arrow} ${i?r.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${r.categoriesDropDown_item_block} ${i?r.categoriesDropDown_item_block_open:""}`,children:m.map(_=>e.jsx("div",{className:`${r.categoriesDropDown_item_block_line} ${_.title==o?r.categoriesDropDown_item_block_active:""}`,onClick:()=>l(_),children:_.title},_.id))})]}),s&&e.jsx(Ho,{title:"Выберите вариант",setOpenModal:a})]})}const va="_banner_xoj3o_1",ja="_banner_title_xoj3o_6",ya="_products_banner_xoj3o_11",ka="_products_banner_wrap_xoj3o_14",wa="_products_banner_wrap_btn_xoj3o_20",Ca="_products_banner_wrap_filter_xoj3o_31",Na="_products_banner_wrap_filter_text_xoj3o_41",Sa="_products_banner_form_xoj3o_49",Ia="_products_banner_form_wrap_xoj3o_54",$a="_products_banner_form_wrap_btn_xoj3o_60",Pa="_products_banner_form_wrap_input_xoj3o_76",Da="_products_banner_form_wrap_icon_xoj3o_84",Ma="_table_xoj3o_88",Ba="_table_tbody_xoj3o_93",Oa="_table_tbody_tr_xoj3o_98",Aa="_table_tbody_tr_active_xoj3o_101",Wa="_table_tbody_img_xoj3o_104",Ea="_table_tr_xoj3o_109",Ua="_table_th_xoj3o_112",La="_table_td_xoj3o_123",za="_table_td_edit_xoj3o_131",Ra="_table_btn_xoj3o_137",Ta="_versions_xoj3o_145",Fa="_versions_block_xoj3o_150",qa="_versions_block_top_xoj3o_155",Ha="_versions_block_top_title_xoj3o_165",Va="_versions_block_top_arrow_xoj3o_169",Qa="_versions_block_top_arrow_active_xoj3o_178",Xa="_versions_block_dropdown_xoj3o_181",Ga="_versions_block_dropdown_item_xoj3o_196",Ya="_versions_block_dropdown_open_xoj3o_207",Za="_add_banner_xoj3o_214",Ka="_add_banner_header_xoj3o_222",Ja="_add_banner_header_title_xoj3o_226",ei="_add_banner_content_xoj3o_230",ti="_add_banner_content_product_xoj3o_233",ni="_add_banner_content_link_xoj3o_255",si="_add_banner_content_info_xoj3o_263",oi="_add_banner_content_info_text_xoj3o_267",ai="_add_banner_content_download_xoj3o_273",ii="_add_banner_content_download_link_xoj3o_281",ri="_add_banner_content_btns_xoj3o_293",ci="_add_banner_content_btn_xoj3o_293",li="_category_wrap_xoj3o_311",_i="_modalCategory_xoj3o_315",di="_modalCategory_block_xoj3o_323",mi="_modalCategory_nav_xoj3o_328",pi="_modalCategory_nav_title_xoj3o_335",ui="_modalCategory_content_xoj3o_341",hi="_modalCategory_content_message_xoj3o_348",gi="_modalCategory_content_link_xoj3o_356",bi="_modalCategory_content_link_active_xoj3o_384",xi="_modalCategory_content_item_xoj3o_394",fi="_modalCategory_content_block_xoj3o_416",vi="_modalCategory_content_block_title_xoj3o_420",ji="_add_link_xoj3o_427",yi="_add_link_title_xoj3o_430",ki="_add_link_input_xoj3o_434",wi="_modal_btn_xoj3o_443",P={banner:va,banner_title:ja,products_banner:ya,products_banner_wrap:ka,products_banner_wrap_btn:wa,products_banner_wrap_filter:Ca,products_banner_wrap_filter_text:Na,products_banner_form:Sa,products_banner_form_wrap:Ia,products_banner_form_wrap_btn:$a,products_banner_form_wrap_input:Pa,products_banner_form_wrap_icon:Da,table:Ma,table_tbody:Ba,table_tbody_tr:Oa,table_tbody_tr_active:Aa,table_tbody_img:Wa,table_tr:Ea,table_th:Ua,table_td:La,table_td_edit:za,table_btn:Ra,versions:Ta,versions_block:Fa,versions_block_top:qa,versions_block_top_title:Ha,versions_block_top_arrow:Va,versions_block_top_arrow_active:Qa,versions_block_dropdown:Xa,versions_block_dropdown_item:Ga,versions_block_dropdown_open:Ya,add_banner:Za,add_banner_header:Ka,add_banner_header_title:Ja,add_banner_content:ei,add_banner_content_product:ti,add_banner_content_link:ni,add_banner_content_info:si,add_banner_content_info_text:oi,add_banner_content_download:ai,add_banner_content_download_link:ii,add_banner_content_btns:ri,add_banner_content_btn:ci,category_wrap:li,modalCategory:_i,modalCategory_block:di,modalCategory_nav:mi,modalCategory_nav_title:pi,modalCategory_content:ui,modalCategory_content_message:hi,modalCategory_content_link:gi,modalCategory_content_link_active:bi,modalCategory_content_item:xi,modalCategory_content_block:fi,modalCategory_content_block_title:vi,add_link:ji,add_link_title:yi,add_link_input:ki,modal_btn:wi};function yt({color:s="black",title:t="",versionList:n=[],className:a,openBlock:o,setOpenBlock:i,setVersionList:m}){const[c,d]=p.useState(n[0].title),{setChangeCategoryStyles:l}=be(),_=h=>{const g=n.map(u=>({...u,isOpen:u.id===h.id}));h.title=="Категория"&&l(!0),d(h.title),m(g),i(!1)};return e.jsxs("div",{className:a??P.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:P.versions_block,children:[e.jsxs("div",{className:P.versions_block_top,onClick:()=>i(!o),style:{cursor:"pointer"},children:[e.jsx("h2",{className:P.versions_block_top_title,style:{color:s},children:c}),e.jsx("button",{className:P.versions_block_top_btn,children:e.jsx("div",{className:`${P.versions_block_top_arrow} ${o?P.versions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${P.versions_block_dropdown} ${o?P.versions_block_dropdown_open:""}`,children:n.map(h=>e.jsx(V,{className:P.versions_block_dropdown_item,to:h.href,onClick:()=>_(h),children:h.title},h.id))})]})]})}function Ze({width:s=78,color:t="white",backgroundOn:n="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:o=500,scale:i=1.1,status:m=!1}){const c={width:`${s}px`,height:`${s/2-s/20}px`,background:m?n:a,borderRadius:`${s/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},d={background:`${t}`,height:`${s/2-s/20}px`,width:`${s/2-s/20}px`,border:`${s/25}px solid ${m?n:a}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${i}) translateX(${m?"110%":"0"})`};return e.jsx("div",{style:c,children:e.jsx("div",{style:d})})}const Ee=({arr:s=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:n,isActive:a=!1,isEdit:o=!1,isCategory:i,isLinks:m,setArrToUse:c,setPickedProduct:d,setPickedProductActive:l,bannersArrProduct:_})=>{const{selectedProductId:h,setSelectedProductId:g,setCurrentProductOpen:u,clearPickedProductsArr:f,setOpenAddBanner:v}=be(),[y,I]=p.useState(null),N=b=>_==null?void 0:_.some(w=>w.type_id===b),$=async(b,w)=>{if(n==="byId"&&(d==null||d(b)),o&&w)try{if(!N(w==null?void 0:w.id)){const O=await(await F.patch(`web-banners/${h}`,{typeId:b})).data;console.log("data",O);const te=_==null?void 0:_.map(q=>q.id===h?O:q);u(!1),c==null||c(te)}}catch(C){console.log(C)}I(b)},k=(b,w)=>{n==="productId"&&(v(!0),l==null||l(b),$==null||$(b),I(b),f(),g(b))},x=b=>b.typeId!==void 0,j=async(b,w,C)=>{b.stopPropagation();try{await F.patch(`web-banners/${w}`,{isActive:!C.isActive})}catch(O){console.log(O)}const S=t.map(O=>O.id===w?{...O,isActive:!O.isActive}:O);c==null||c(S)};return e.jsxs("table",{className:P.table,children:[e.jsx("thead",{className:P.table_thead,children:e.jsx("tr",{className:P.table_tr,children:s.map(b=>e.jsx("th",{className:P.table_th,children:b.title},b.id))})}),e.jsx("tbody",{className:P.table_tbody,children:t==null?void 0:t.map(b=>{var w;return e.jsxs("tr",{className:`${P.table_tbody_tr}
            ${!o&&y==b.id?P.table_tbody_tr_active:""}
            `,style:{cursor:a||i||m?"pointer":"default"},onClick:()=>k(b.id),children:[e.jsx("td",{className:P.table_td,children:e.jsxs("div",{style:{width:"70px",height:"40px"},children:[n==="byId"&&(b==null?void 0:b.title),o?b.title:"",a&&e.jsx("img",{className:P.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),i&&e.jsx("img",{className:P.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),m&&e.jsx("img",{className:P.table_tbody_img,src:b.image??"",alt:"Banner"})]})}),e.jsxs("td",{className:P.table_td,children:[i?b.title:"",a?b.title:(w=b.nomenclature)==null?void 0:w.price,m&&b.title]}),e.jsx("td",{className:P.table_td,children:a?"":b.crmAmount}),e.jsx("td",{className:P.table_td,children:i?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:C=>{const S=b;S.id&&j(C,S.id,S)},children:e.jsx(Ze,{width:62,status:b.isActive})}):a?e.jsx("div",{className:P.table_td_edit,children:e.jsx("div",{onClick:C=>{const S=b;S.id&&j(C,S.id,S)},children:e.jsx(Ze,{width:62,status:b.isActive})})}):m?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:C=>{const S=b;S.id&&j(C,S.id,S)},children:e.jsx(Ze,{width:62,status:b.isActive})}):e.jsx("button",{className:P.table_btn,onClick:()=>$(b.id,b),children:o?"Заменить":"Выбрать"})})]},x(b)?b.typeId:b.id)})})]})};function Ci({setCancel:s}){return e.jsxs("div",{className:J.modalCategory_nav,children:[e.jsx("h2",{className:J.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:J.modalCategory_nav_close,onClick:s,children:e.jsx(E,{width:24,height:24,name:"XMarkIcon"})})]})}function Ni({superCategory:s,category:t,superId:n,setLocalPicked:a,setSuperId:o,setMessageStatus:i,setSubCategories:m,fetchCategories:c,setSuperCategoryObj:d,getBannersItems:l}){const{changeCategoryStyles:_,categoriesArr:h,setCategoriesArr:g,setActiveCategory:u,setActiveCategoryTitle:f,setOpenAddBanner:v}=be(),{setCurrentCategory:y}=xe(),[I,N]=p.useState(10),$=(x,j)=>{x.preventDefault(),c("category",1,10,j.id),m([]);const b=t.filter(w=>w.parentId==j.id);if(y(b),a(j),o(j.id),i(!1),_&&j.label&&(u(j),f(j.name.ru)),_){const w=h.filter(C=>C.label!==j.label);w.push(j),g(w)}d==null||d(j),v(!0),l==null||l()},k=()=>{const x=I+10;N(x),c("super",1,x),console.log("addPage",x)};return e.jsxs("div",{className:J.modalCategory_content_block,children:[e.jsx("h2",{className:J.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:J.modalCategory_content_item,children:[s.map(x=>e.jsxs(V,{to:"#",className:`${J.modalCategory_content_link} ${x.id==n?J.modalCategory_content_link_active:""} `,onClick:j=>$(j,x),children:[x.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},x.id)),e.jsx(V,{to:"#",className:J.modalCategory_content_link,onClick:()=>k(),children:"Ещё..."})]})]})}function Si({superId:s,categoryId:t,category:n,setSubCategory:a,fetchCategories:o}){const[i,m]=p.useState(10),c=()=>{const l=i+10;m(l),o("category",1,l,s),console.log("addPage",l,s)},d=(l,_)=>{a(l,_)};return n.length>0&&e.jsxs("div",{className:J.modalCategory_content_block,children:[e.jsx("h2",{className:J.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:J.modalCategory_content_item,children:[n==null?void 0:n.map(l=>e.jsxs(V,{to:"#",className:`${J.modalCategory_content_link} ${l.id==t?J.modalCategory_content_link_active:""} `,onClick:_=>d(_,l),children:[l.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},l.id)),e.jsx(V,{to:"#",className:J.modalCategory_content_link,onClick:()=>c(),children:"Ещё..."})]})]})}function Ii({subId:s,categoryId:t,subCategories:n,setSubProductsList:a,fetchCategories:o}){const[i,m]=p.useState(10),c=()=>{const d=i+10;m(d),o("subCategory",1,d,t),console.log("addPage",d)};return n.length>0&&e.jsxs("div",{className:J.modalCategory_content_block,children:[e.jsx("h2",{className:J.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:J.modalCategory_content_item,children:[n==null?void 0:n.map(d=>e.jsxs(V,{to:"#",className:`${J.modalCategory_content_link} ${d.id==s?J.modalCategory_content_link_active:""} `,onClick:l=>a(l,d),children:[d.name.ru,e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},d.id)),e.jsx(V,{to:"#",className:J.modalCategory_content_link,onClick:()=>c(),children:"Ещё..."})]})]})}function $i({setSettings:s,setCancel:t}){return e.jsxs("div",{className:J.settings_content_buttons,children:[e.jsx("button",{className:`${J.settings_content_btn} ${J.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${J.settings_content_btn} ${J.settings_content_btn_save}`,onClick:s,children:"Сохранить"})]})}function Qe({isProduct:s,isCategory:t=!1}){const{setOpenModalCategory:n,setPickedCategory:a,setCurrentCategory:o,setCurrentSubCategory:i}=xe(),{changeCategoryStyles:m,categoriesArr:c,pickedProducts:d,setCategoriesArr:l,setPickedProducts:_,setActiveCategory:h,setActiveCategoryTitle:g,setBannersArr1:u,bannersArr1:f,setOpenModalCategoryBanner:v}=be(),y=m?P:J,[I,N]=p.useState(0),[$,k]=p.useState(0),[x,j]=p.useState(0),[b,w]=p.useState({}),[C,S]=p.useState(!1),[O,te]=p.useState("Выберите категорию"),[q,X]=p.useState([]),[he,ke]=p.useState([]),[ve,Q]=p.useState([]),[R,G]=p.useState(null),[ee,ae]=p.useState(null),[L,D]=p.useState(null);p.useEffect(()=>{console.log("pickedProducts",d)},[d]),p.useEffect(()=>{ye("super",1,10)},[]);const[se]=p.useState(1),[_e]=p.useState(10);async function pe(){const Z=ge.get("multi-store");try{const z=await F.get(`web-banners?multiStoreId=${Z}&page=${se}&perPage=${_e}`);u(z.data.data),console.log("bannersArr1",f)}catch(z){console.log("error",z)}}const Ce=(Z,z)=>{Z.preventDefault(),ye("subCategory",1,10,z.id);const K=ve.filter(Y=>Y.parentId==z.id);if(i(K),w(z),k(z.id),S(!1),m&&z.label&&(h(z),g(z.name.ru)),m){const Y=c.filter(Oe=>Oe.label!==z.label);Y.push(z),l(Y)}ae(z),pe()},Ne=(Z,z)=>{if(Z.preventDefault(),w(z),j(z.id),S(!1),m&&z.label&&(h(z),g(z.name.ru)),m){const K=c.filter(Y=>Y.name.ru!==z.name.ru);K.push(z),console.log("newCategories",K),l(K)}D(z),pe()};async function ie(Z){const z=ge.get("multi-store");try{const K=await F.get(`web-nomenclatures?multiStoreId=${z}&categoryId=${Z}&page=${se}&perPage=${_e}`);_(K.data.data)}catch(K){console.log("error",K)}}const ue=()=>{if(Object.keys(b).length===0){S(!0),te("Выберите Суперкотегорию");return}if(he.length>0&&$===0){S(!0),te("Выберите Категорию");return}if(ve.length>0&&x===0){S(!0),te("Выберите Подкотегорию");return}ie(b.id),console.log("localPicked",b);const Z=[];R&&Z.push(R),ee&&Z.push(ee),L&&Z.push(L),l(Z),je()},je=()=>{a(b),n(!1),N(0),k(0),j(0),w({}),o([]),i([]),S(!1),te("Выберите категорию"),v(!1)},ye=async(Z,z,K,Y)=>{try{const Oe=Z=="super"?`https://api.mcrm.uz/api/categories?&page=${z}&perPage=${K}`:`https://api.mcrm.uz/api/categories?parentId=${Y}&page=${z}&perPage=${K}`,Ye=(await He.get(Oe)).data.data.map(Tt=>({...Tt,label:Z==="super"?"Супер категория":Z==="category"?"Категория":"Субкатегория"}));Z==="super"&&X([...Ye]),Z==="category"&&ke([...Ye]),Z==="subCategory"&&Q([...Ye])}catch(Oe){console.error(`Ошибка произошла при получении ${Z} категорий`,Oe)}};return e.jsx("div",{className:y.modalCategory,children:e.jsxs("div",{className:y.modalCategory_block,children:[!m&&e.jsx(Ci,{setCancel:je}),e.jsx("p",{className:y.modalCategory_content_message,children:C?O:""}),e.jsxs("div",{className:y.modalCategory_content,children:[e.jsx(Ni,{superId:I,superCategory:q,category:he,setLocalPicked:w,setSuperId:N,setMessageStatus:S,fetchCategories:ye,setSubCategories:Q,setSuperCategoryObj:G,getBannersItems:pe}),e.jsx(Si,{superId:I,categoryId:$,category:he,setSubCategory:Ce,fetchCategories:ye}),e.jsx(Ii,{subId:x,categoryId:$,subCategories:ve,setSubProductsList:Ne,fetchCategories:ye}),!t&&e.jsx($i,{setSettings:ue,setCancel:je})]})]})})}const Me=({title:s,currentProductEdit:t,isEdit:n,isCategory:a,isLinks:o,linkTextEdit:i,deleteBanner:m,isProduct:c,arrToUse:d,setArrToUse:l,typeOfBanner:_})=>{const{currentProductTable:h,changeCategoryStyles:g,categoriesArr:u,linksPageBannerText:f,openLinksPage:v,activeCategory:y,bannersArr1:I,setCurrentProductOpen:N,setOpenAddBanner:$}=be(),[k,x]=p.useState(null),[j,b]=p.useState(""),[w,C]=p.useState(null);async function S(Q){if(Q){const R=new FormData;R.append("files[]",Q);try{const ee=await(await F.post("media-objects/uploads",R)).data;return console.log("data",ee),b(ee[0]),ee}catch(G){console.log("не удалось добавить картинку на сервер",G)}}}async function O(Q){try{const G=await(await F.post("web-banners",Q)).data;console.log("data",G)}catch(R){console.log("ошибка при добовления баннера к продукту",R)}}async function te(Q,R){try{return await(await F.patch(`web-banners/${Q.id}`,{image:R})).data}catch(G){console.log(G)}}const q=Q=>{if(Q.target.files&&Q.target.files[0]){const R=Q.target.files[0];C(R),S(R);const G=new FileReader;G.onloadend=()=>{const ee=G.result;x(ee)},G.readAsDataURL(R)}},X=()=>{document.getElementById("upload").click()},he=()=>{const Q=Number(ge.get("multi-store"));if(w){if(_==="product"){const R={multiStoreId:Q,type:"product",typeId:h==null?void 0:h.id,image:j};I.filter(ae=>ae.type==="product").some(ae=>ae.type_id===(h==null?void 0:h.id))||O(R),$(!1),x(null),C(null);const ee=document.getElementById("upload");ee&&(ee.value="")}if(_==="category"){const R={multiStoreId:Q,type:"category",typeId:y.id,image:j};I.filter(ae=>ae.type==="category").some(ae=>ae.type_id===(y==null?void 0:y.id))||(O(R),$(!1)),x(null),C(null);const ee=document.getElementById("upload");ee&&(ee.value="")}}},ke=async()=>{if(c){const Q=await te(t,j),R=d==null?void 0:d.map(G=>G.id===(t==null?void 0:t.id)?Q:G);l==null||l(R)}if(a){const Q=I.filter(R=>R.type==="category").some(R=>R.type_id===(y==null?void 0:y.id));try{if(!Q){const R=await te(t,j),ee=await(await F.patch(`web-banners/${t==null?void 0:t.id}`,{typeId:y.id})).data;console.log("activeCategory",y),console.log("currentProductEdit",t),console.log("data",ee);const ae=d==null?void 0:d.map(L=>L.id===(t==null?void 0:t.id)?{...L,image:R.image,title:ee.title,type_id:ee.type_id}:L);l==null||l(ae),console.log("updatedBannerCategory",ae)}}catch(R){console.log(R)}}N(!1),$(!1)},ve=()=>{m==null||m(t==null?void 0:t.id),$(!1)};return e.jsxs("div",{className:P.add_banner,children:[e.jsx("div",{className:P.add_banner_header,children:e.jsx("h3",{className:P.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:P.add_banner_content,children:[g?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:P.add_banner_content_product,children:[s,":",a&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]}),o&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),u==null?void 0:u.map(Q=>e.jsx("span",{className:P.add_banner_content_product,children:Q.name.ru},Q.name.ru))]}):e.jsx("p",{className:P.add_banner_content_product,children:v?`${s}: ${f}`:`${s}: ${h==null?void 0:h.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:q}),e.jsx("label",{htmlFor:"upload",className:P.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:P.add_banner_content_info,children:e.jsx("p",{className:P.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),n?e.jsx("div",{className:P.add_banner_content_download,children:e.jsx("img",{src:k||`https://api.mcrm.uz/${t==null?void 0:t.image}`,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{className:P.add_banner_content_download,children:k?e.jsx("img",{src:k,alt:"Uploaded",className:P.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:P.add_banner_content_download_link,onClick:()=>X(),children:[e.jsx(E,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),n?e.jsxs("div",{className:P.add_banner_content_btns,children:[e.jsx("button",{className:P.add_banner_content_btn,onClick:ve,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:P.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>ke(),children:"Изменить"})]}):e.jsxs("div",{className:P.add_banner_content_btns,children:[e.jsx("button",{className:P.add_banner_content_btn,onClick:()=>N(!1),children:"Отмена"}),e.jsx("button",{className:P.add_banner_content_btn,onClick:()=>he(),children:"Сохранить"})]})]})]})};function kt({inputText:s,setInputText:t,filteredUsers:n,isProductEdit:a}){const{categoriesArr:o,setCurrentProductOpen:i,setChangeCategoryStyles:m,setOpenModalCategoryBanner:c,clearCategoriesArr:d}=be(),l=()=>{a&&i(!1),m(!1),c(!0),d()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:P.products_banner_wrap,children:[e.jsx("button",{className:P.products_banner_wrap_btn,onClick:l,children:e.jsx(E,{name:"FunnelIcon",width:20})}),(o==null?void 0:o.length)!==0&&e.jsx("div",{className:P.products_banner_wrap_filter,children:o==null?void 0:o.map(_=>e.jsx("span",{className:P.products_banner_wrap_filter_text,children:_.name.ru},_.id))}),e.jsxs("form",{action:"",className:P.products_banner_form,onSubmit:_=>n==null?void 0:n(_),children:[e.jsxs("div",{className:P.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:P.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:s,onChange:_=>t==null?void 0:t(_.target.value)}),e.jsx(E,{className:P.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:P.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const Pi=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],Di=()=>{const{openModalCategoryBanner:s,setOpenModalCategoryBanner:t,searchTextBanner:n,setSearchTextBanner:a,pickedProducts:o,clearPickedProductsArr:i,webProductsArr:m,setBannersArr1:c,bannersArr1:d,openAddBanner:l,setOpenAddBanner:_,setCurrentProductTable:h,clearCategoriesArr:g,setOpenLinksPage:u,setOpenProductsPage:f,setChangeCategoryStyles:v}=be(),[y]=p.useState(1),[I]=p.useState(10),[N,$]=p.useState(""),[k,x]=p.useState(m);async function j(){const C=ge.get("multi-store");try{const S=await F.get(`web-banners?multiStoreId=${C}&page=${y}&perPage=${I}`);c(S.data.data),console.log("bannersArr1",d)}catch(S){console.log("error",S)}}const b=C=>{C.preventDefault(),a(N)},w=async C=>{const S=k.find(O=>O.id===C);S&&(await j(),h(S),_(!0))};return p.useEffect(()=>{n&&x(k.filter(C=>{var S;return(S=C.title)==null?void 0:S.toLowerCase().includes(n.toLowerCase())})),o.length>0&&x(o)},[n,o]),p.useEffect(()=>{N===""?(x(m),a(""),i(),_(!1)):(x(m),g()),s&&$("")},[N,s]),p.useEffect(()=>{_(!1),u(!1),f(!0),t(!1),v(!1),g()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:P.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(kt,{inputText:N,setInputText:$,filteredUsers:b}),e.jsx(Ee,{arrToUse:k,arr:Pi,setPickedProduct:w,selectionMode:"byId"})]}),s&&e.jsx(Qe,{isProduct:!0}),l&&e.jsx(Me,{title:"Товар",typeOfBanner:"product"})]})},Mi=()=>{const{categoriesArr:s,setOpenLinksPage:t,setChangeCategoryStyles:n,setOpenProductsPage:a,openAddBanner:o}=be();return p.useEffect(()=>{t(!1),n(!0),a(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:P.category_wrap,children:e.jsx(Qe,{isCategory:!0})}),o&&e.jsx(Me,{title:"Каталог",categories:s,typeOfBanner:"category"})]})},Bi=()=>{const{linksPageBannerText:s,setLinksPageBannerText:t,setOpenLinksPage:n,setChangeCategoryStyles:a,setOpenProductsPage:o}=be();return p.useEffect(()=>{n(!0),a(!1),t(""),o(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:P.add_link,children:[e.jsx("h3",{className:P.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:P.add_link_input,type:"text",value:s,onChange:i=>t(i.target.value)})]}),e.jsx(Me,{title:"Страница"})]})};function Oi(){const{openBannerDropdown:s,setOpenBannerDropdown:t,setWebProductsArr:n}=be(),a=fe(),[o,i]=p.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Категория",href:"/admin/settings/banner/newBanner/category"},{id:3,title:"Страница",href:"/admin/settings/banner/newBanner/link"}]),[m]=p.useState(1),[c]=p.useState(10);async function d(){const l=ge.get("multi-store");try{const _=await F.get(`web-nomenclatures?multiStoreId=${l}&page=${m}&perPage=${c}`);n(_.data.data)}catch(_){console.log("error",_)}}return p.useEffect(()=>{d()},[]),e.jsxs("div",{className:P.banner,children:[e.jsx("h3",{className:P.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(yt,{openBlock:s,setOpenBlock:t,versionList:o,setVersionList:i}),e.jsxs("div",{className:P.banner_content,children:[a.pathname.startsWith("/admin/settings/banner/newBanner/products")&&e.jsx(Di,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/category")&&e.jsx(Mi,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/link")&&e.jsx(Bi,{})]})]})}const Ai=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Wi=()=>{const{pickedProducts:s,currentProductOpen:t,openModalCategoryBanner:n,bannersArr1:a,searchTextBanner:o,currentProductTable:i,webProductsArr:m,clearPickedProductsArr:c,clearCategoriesArr:d,setCurrentProductOpen:l,setCurrentProductTable:_,setSearchTextBanner:h,setOpenLinksPage:g,setOpenProductsPage:u,setOpenModalCategoryBanner:f,setBannersArr1:v}=be(),[y,I]=p.useState(""),[N,$]=p.useState(m),[k,x]=p.useState([]),[j]=p.useState(1),[b]=p.useState(20);async function w(){const q=ge.get("multi-store");try{const ke=(await(await F.get(`web-banners?multiStoreId=${q}&page=${j}&perPage=${b}`)).data.data).filter(ve=>ve.type==="product");x(ke)}catch(X){console.log("не удалось получить обьекты с баннерами",X)}}async function C(q){try{F.delete(`web-banners/${q}`)}catch(X){console.log("не удалось удалить",X)}}const S=q=>{q.preventDefault(),h(y),d()},O=q=>{const X=k.find(he=>he.id===q);X&&(_(X),l(!0))};p.useEffect(()=>{o&&$(N.filter(q=>{var X;return(X=q.title)==null?void 0:X.toLowerCase().includes(o.toLowerCase())})),s.length>0&&$(s)},[o,s]);const te=q=>{x(k.filter(X=>X.id!==q)),v(a.filter(X=>X.id!==q)),C(q)};return p.useEffect(()=>{l(!1),g(!1),u(!0),f(!1),d()},[l,g,u,f,d]),p.useEffect(()=>{w()},[]),p.useEffect(()=>{y===""?($(m),h(""),c()):($(m),d())},[y]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ee,{arrToUse:k,setArrToUse:x,arr:Ai,setPickedProductActive:O,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(kt,{filteredUsers:S,setInputText:I}),e.jsx(Ee,{arrToUse:N,bannersArrProduct:k,setArrToUse:x,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Me,{arrToUse:k,setArrToUse:x,title:"Продукт",currentProductEdit:i,isEdit:!0,isProduct:!0,deleteBanner:te})]})]}),n&&e.jsx(Qe,{})]})},Ei=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ui=()=>{const{currentProductTable:s,currentProductOpen:t,setCurrentProductOpen:n,setCurrentProductTable:a,setOpenAddBanner:o,openAddBanner:i}=be(),[m,c]=p.useState([]),[d]=p.useState(1),[l]=p.useState(20);async function _(){const f=ge.get("multi-store");try{const I=(await(await F.get(`web-banners?multiStoreId=${f}&page=${d}&perPage=${l}`)).data.data).filter(N=>N.type==="category");c(I)}catch(v){console.log("не удалось получить обьекты с баннерами",v)}}async function h(f){try{F.delete(`web-banners/${f}`)}catch(v){console.log("не удалось удалить",v)}}const g=f=>{const v=m.find(y=>y.id===f);v&&(a(v),n(!0))},u=f=>{c(m.filter(v=>v.id!=f)),h(f)};return p.useEffect(()=>{_()},[]),p.useEffect(()=>{n(!1),o(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ee,{arr:Ei,arrToUse:m,setArrToUse:c,selectionMode:"productId",isCategory:!0,setPickedProductActive:g}),i&&e.jsx(Qe,{isCategory:!0}),i&&e.jsx(Me,{arrToUse:m,setArrToUse:c,title:"Каталог",currentProductEdit:s,isEdit:!0,isCategory:!0,deleteBanner:u})]})},Li=({setLinkText:s,currentProductEdit:t})=>{be();const[n,a]=p.useState(t.brandName||""),o=i=>{a(i),s(i)};return p.useEffect(()=>{a(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:P.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:P.add_link_input,type:"text",onChange:i=>o(i.target.value),value:n})]})},zi=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ri=()=>{const{currentProductOpen:s,currentProductTable:t,setCurrentProductTable:n,setCurrentProductOpen:a}=be(),[o,i]=p.useState(""),[m,c]=p.useState([]),[d]=p.useState(1),[l]=p.useState(20);async function _(){const f=ge.get("multi-store");try{const I=(await(await F.get(`web-banners?multiStoreId=${f}&page=${d}&perPage=${l}`)).data.data).filter(N=>N.type==="link");c(I)}catch(v){console.log("не удалось получить обьекты с баннерами",v)}}async function h(f){try{F.delete(`web-banners/${f}`)}catch(v){console.log("не удалось удалить",v)}}p.useEffect(()=>{_()},[]);const g=f=>{const v=m.find(y=>y.id===f);v&&(n(v),console.log("currentProductTable",t),a(!0))},u=f=>{c(m.filter(v=>v.id!==f)),h(f)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ee,{arr:zi,arrToUse:m,selectionMode:"productId",setPickedProductActive:g,isLinks:!0}),s&&e.jsxs(e.Fragment,{children:[e.jsx(Li,{setLinkText:i,currentProductEdit:t}),e.jsx(Me,{title:"Страница",currentProductEdit:t,deleteBanner:u,isLinks:!0,isEdit:!0,linkTextEdit:o})]})]})};function Ti(){const{openBannerDropdown:s,setOpenBannerDropdown:t}=be(),n=fe(),[a,o]=p.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/activeBanner/activeProducts"},{id:1,title:"Категория",href:"/admin/settings/banner/activeBanner/activeCategory"},{id:1,title:"Страница",href:"/admin/settings/banner/activeBanner/activeLink"}]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:P.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(yt,{openBlock:s,setOpenBlock:t,versionList:a,setVersionList:o})]}),e.jsxs("div",{className:P.banner_content,children:[n.pathname.startsWith("/admin/settings/banner/activeBanner/activeProducts")&&e.jsx(Wi,{}),n.pathname.startsWith("/admin/settings/banner/activeBanner/activeCategory")&&e.jsx(Ui,{}),n.pathname.startsWith("/admin/settings/banner/activeBanner/activeLink")&&e.jsx(Ri,{})]})]})}const Fi=[{id:1,title:"Новый",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner/activeProducts"}];function qi(){const t=fe().pathname,{setCurrentProductOpen:n}=be();return p.useEffect(()=>{n(!1)},[]),e.jsx("div",{className:r.banner,children:e.jsxs("div",{className:r.banner_nav,children:[e.jsx("ul",{className:r.banner_nav_list,children:Fi.map(a=>e.jsx("li",{children:e.jsx(V,{to:a.href,className:`${r.banner_nav_link} ${t.startsWith(a.href.split("/products")[0])||t.startsWith(a.href.split("/activeProducts")[0])?r.banner_nav_link_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:r.settings_content_base,children:[t.startsWith("/admin/settings/banner/newBanner")&&e.jsx(Oi,{}),t.startsWith("/admin/settings/banner/activeBanner")&&e.jsx(Ti,{})]})]})})}const Hi="_contacts_mxkpi_1",Vi="_contacts_content_mxkpi_4",Qi="_contacts_nav_mxkpi_7",Xi="_contacts_nav_list_mxkpi_10",Gi="_contacts_nav_link_mxkpi_15",Yi="_contacts_nav_link_active_mxkpi_30",Zi="_contacts_btn_mxkpi_34",Ki="_socials_mxkpi_55",Ji="_socials_title_mxkpi_60",er="_socials_content_mxkpi_65",tr="_socials_content_wrap_mxkpi_70",nr="_socials_content_wrap_input_mxkpi_75",sr="_aboutUs_mxkpi_84",or="_aboutUs_add_image_mxkpi_87",ar="_aboutUs_content_mxkpi_90",ir="_aboutUs_image_wrap_mxkpi_95",rr="_aboutUs_download_mxkpi_104",cr="_aboutUs_text_mxkpi_112",lr="_aboutUs_inputs_mxkpi_120",_r="_aboutUs_inputs_wrap_mxkpi_126",dr="_aboutUs_inputs_wrap_title_mxkpi_130",mr="_aboutUs_inputs_wrap_input_mxkpi_136",pr="_aboutUs_inputs_wrap_textarea_mxkpi_144",ur="_aboutUs_btn_mxkpi_152",hr="_aboutUs_week_info_mxkpi_172",gr="_aboutUs_week_info_text_mxkpi_178",br="_aboutUs_week_content_mxkpi_183",xr="_aboutUs_week_wrap_mxkpi_189",fr="_aboutUs_week_wrap_colored_mxkpi_193",vr="_aboutUs_week_wrap_colored_active_mxkpi_203",jr="_aboutUs_week_wrap_colored_last_mxkpi_206",yr="_aboutUs_week_wrap_day_mxkpi_209",kr="_aboutUs_week_wrap_schedule_mxkpi_215",wr="_aboutUs_week_wrap_input_mxkpi_221",Cr="_custom_checkbox_mxkpi_241",Nr="_custom_checkbox_input_mxkpi_247",Sr="_custom_checkbox_box_mxkpi_252",Ir="_custom_checkbox_box_icon_mxkpi_261",U={contacts:Hi,contacts_content:Vi,contacts_nav:Qi,contacts_nav_list:Xi,contacts_nav_link:Gi,contacts_nav_link_active:Yi,contacts_btn:Zi,socials:Ki,socials_title:Ji,socials_content:er,socials_content_wrap:tr,socials_content_wrap_input:nr,aboutUs:sr,aboutUs_add_image:or,aboutUs_content:ar,aboutUs_image_wrap:ir,aboutUs_download:rr,aboutUs_text:cr,aboutUs_inputs:lr,aboutUs_inputs_wrap:_r,aboutUs_inputs_wrap_title:dr,aboutUs_inputs_wrap_input:mr,aboutUs_inputs_wrap_textarea:pr,aboutUs_btn:ur,aboutUs_week_info:hr,aboutUs_week_info_text:gr,aboutUs_week_content:br,aboutUs_week_wrap:xr,aboutUs_week_wrap_colored:fr,aboutUs_week_wrap_colored_active:vr,aboutUs_week_wrap_colored_last:jr,aboutUs_week_wrap_day:yr,aboutUs_week_wrap_schedule:kr,aboutUs_week_wrap_input:wr,custom_checkbox:Cr,custom_checkbox_input:Nr,custom_checkbox_box:Sr,custom_checkbox_box_icon:Ir},$r=({temporaryImageUrl:s,setTemporaryImageUrl:t})=>{st();const[n,a]=p.useState(null),[o,i]=p.useState(null);p.useEffect(()=>{const d=localStorage.getItem("savedLogoImageUrl");d&&(a(d),t(d))},[t]);const m=d=>{if(d.target.files&&d.target.files[0]){const l=d.target.files[0];i(l);const _=new FileReader;_.onloadend=()=>{const h=_.result;a(h),t(h),localStorage.setItem("savedLogoImageUrl",h)},_.readAsDataURL(l)}},c=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:U.aboutUs_add_image,children:[e.jsx("div",{className:U.aboutUs_image_wrap,children:n||s?e.jsx("img",{src:s||n,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>c(),children:e.jsx(E,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:m}),e.jsx("label",{htmlFor:"upload",className:U.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:U.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function Ie(){return Ie=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},Ie.apply(this,arguments)}const wt=(s,t)=>{const n={};for(const a in s)t.indexOf(a)===-1&&(n[a]=s[a]);return n},Ct=re.createContext(null),Xe=re.createContext(null),Pr=s=>t=>re.createElement(Xe.Consumer,null,n=>re.createElement(s,Ie({parent:n},t))),Dr=(s=[])=>{const[t,n]=p.useState(!1),a=p.useRef(s),o=(()=>{const m=p.useContext(Ct);if(m===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return m})(),i=o.getApi();return p.useEffect(()=>{o.load().then(()=>Promise.all(a.current.map(o.loadModule))).then(()=>n(!0))},[]),t&&i?i:null},Mr=()=>{},Br=["onLoad","onError","modules","apiLoader"];function Nt(s,t=!1,n=[]){return a=>{const{width:o,height:i,modules:m=[],onLoad:c=Mr}=a,d=Dr(n.concat(m)),l=!t||!!d,_=wt(a,Br);return p.useEffect(()=>d?c(d):void 0,[d]),l?re.createElement(s,Ie({ymaps:d},_)):re.createElement("div",{style:{width:o,height:i}})}}const Or=typeof window<"u",dt={lang:"ru_RU",load:"",ns:"",mode:"release"},Ar=s=>{const{version:t="2.1",enterprise:n=!1,query:a={lang:"ru_RU",load:"",ns:""},preload:o=!1,children:i}=s,m=p.useRef((c=>{const{query:d=dt}=c,l=Date.now().toString(32),_=d.ns||"",h="__yandex-maps-api-onload__$$"+l,g="__yandex-maps-api-onerror__$$"+l,u=Or?window:{},f={};let v;const y=()=>_?u[_]:v,I=()=>{delete u[h],delete u[g]};return{load:()=>{if(y())return Promise.resolve(v);if(f[_])return f[_];const N={onload:h,onerror:g,...dt,...d},$=Object.keys(N).map(x=>`${x}=${N[x]}`).join("&"),k=[`https://${c.enterprise?"enterprise.":""}api-maps.yandex.ru`,c.version,"?"+$].join("/");return f[_]=new Promise((x,j)=>{u[h]=b=>{I(),b.ready(()=>{v=b,x(b)})},u[g]=b=>{I(),j(b)},(b=>new Promise((w,C)=>{const S=document.createElement("script");S.type="text/javascript",S.onload=w,S.onerror=C,S.src=b,S.async=!0,document.head.appendChild(S)}))(k).catch(u[g])}),f[_]},getApi:y,loadModule:N=>new Promise(($,k)=>{v.modules.require(N).done(x=>{x.forEach(j=>{((b,w,C,S=!1)=>{const O=typeof w=="string"?w.split("."):w.slice();let te,q=b;for(;O.length>1;)te=O.shift(),q[te]||(q[te]={}),q=q[te];const X=O[0];q[X]=S===!0&&q[X]||C})(v,N,j,!0)}),$(v)},k)})}})({version:t,enterprise:n,query:a,preload:o}));return p.useEffect(()=>{o&&m.current.load()},[m.current]),re.createElement(Ct.Provider,{value:m.current},i)},mt=/^on(?=[A-Z])/;function ne(s){return Object.keys(s).reduce((t,n)=>{if(mt.test(n)){const a=n.replace(mt,"").toLowerCase();t._events[a]=s[n]}else t[n]=s[n];return t},{_events:{}})}function $e(s,t,n){typeof n=="function"&&s.events.add(t,n)}function Pe(s,t,n){typeof n=="function"&&s.events.remove(t,n)}function Be(s,t,n){Object.keys(Object.assign({},t,n)).forEach(a=>{t[a]!==n[a]&&(Pe(s,a,t[a]),$e(s,a,n[a]))})}const St=s=>"default"+s.charAt(0).toUpperCase()+s.slice(1);function de(s,t){return s[t]!==void 0||s[St(t)]===void 0}function B(s,t,n){return(de(s,t)?s[t]:s[St(t)])||n}function me(s,t,n=null){if(s!==t){if(s&&("current"in s?s.current=null:typeof s=="function"&&s(null)),!t)return;"current"in t?t.current=n:typeof t=="function"&&t(n)}}function It(s){const{width:t,height:n,style:a,className:o}=s;return a!==void 0||o!==void 0?Object.assign({},a&&{style:a},o&&{className:o}):{style:{width:t,height:n}}}class Wr extends re.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,n){const{onError:a=()=>{}}=this.props;a(t),this.setState({error:t,errorInfo:n})}render(){return this.state.error?null:this.props.children}}const $t=s=>({onError:t,...n})=>re.createElement(Wr,{onError:t},re.createElement(s,n));class Ae extends re.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Ae.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Ae.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ae.unmountObject(this.instance,this.props)}render(){const t=It(this.props),n=ne(this.props),a=wt(n,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return re.createElement(Xe.Provider,{value:this.state.instance},re.createElement("div",Ie({ref:this._getRef},t,a),this.props.children))}static mountObject(t,n,a){const{instanceRef:o,_events:i}=ne(a),m=new n(t,B(a,"state"),B(a,"options"));return Object.keys(i).forEach(c=>$e(m,c,i[c])),me(null,o,m),m}static updateObject(t,n,a){const{_events:o,instanceRef:i}=ne(a),{_events:m,instanceRef:c}=ne(n);if(de(a,"state")){const d=B(n,"state",{}),l=B(a,"state",{});d.type!==l.type&&t.setType(l.type),d.behaviors!==l.behaviors&&(d.behaviors&&t.behaviors.disable(d.behaviors),l.behaviors&&t.behaviors.enable(l.behaviors)),l.zoom&&d.zoom!==l.zoom&&t.setZoom(l.zoom),l.center&&d.center!==l.center&&t.setCenter(l.center),l.bounds&&d.bounds!==l.bounds&&t.setBounds(l.bounds)}if(de(a,"options")){const d=B(n,"options"),l=B(a,"options",{});d!==l&&t.options.set(l)}B(n,"width")===B(a,"width")&&B(n,"height")===B(a,"height")||t.container.fitToViewport(),Be(t,m,o),me(c,i,t)}static unmountObject(t,n){const{instanceRef:a,_events:o}=ne(n);t!==null&&(Object.keys(o).forEach(i=>Pe(t,i,o[i])),t.destroy(),me(a))}}const Pt=$t(Nt(Ae,!0,["Map"]));Pt.defaultProps={width:320,height:240};class ze extends re.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&ze.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&ze.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,ze.unmountObject(this.state.instance,this.props)}render(){const t=It(this.props);return re.createElement("div",Ie({ref:this._getRef},t))}static mountObject(t,n,a){const{instanceRef:o,_events:i}=ne(a),m=B(a,"point"),c=B(a,"locateOptions"),d=B(a,"options");return new Promise((l,_)=>{n.locate(m,c).done(h=>{if(h.length>0){const g=new n.Player(t,h[0],d);me(null,o,g),Object.keys(i).forEach(u=>$e(g,u,i[u])),l(g)}},_)})}static updateObject(t,n,a){const{_events:o,instanceRef:i}=ne(a),{_events:m,instanceRef:c}=ne(n);if(de(a,"options")){const d=B(n,"options"),l=B(a,"options");d!==l&&t.options.set(l)}if(de(a,"point")){const d=B(a,"point"),l=B(n,"point"),_=B(a,"locateOptions");d!==l&&t.moveTo(d,_)}Be(t,m,o),me(c,i,t)}static unmountObject(t,n){const{instanceRef:a,_events:o}=ne(n);t!==null&&(Object.keys(o).forEach(i=>Pe(t,i,o[i])),me(a))}}class We extends re.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=We.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&We.updateControl(this.instance,t,this.props)}componentWillUnmount(){We.unmountControl(this.instance,this.props)}render(){return re.createElement(Xe.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,n){const{instanceRef:a,parent:o,lazy:i,_events:m}=ne(n),c=new t({data:B(n,"data"),options:B(n,"options"),state:B(n,"state"),mapTypes:B(n,"mapTypes"),lazy:i});if(Object.keys(m).forEach(d=>$e(c,d,m[d])),o&&o.controls&&typeof o.controls.add=="function")o.controls.add(c);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${n.name}`);o.add(c)}return me(null,a,c),c}static updateControl(t,n,a){const{_events:o,instanceRef:i}=ne(a),{_events:m,instanceRef:c}=ne(n);if(de(a,"options")){const d=B(n,"options"),l=B(a,"options");d!==l&&t.options.set(l)}if(de(a,"data")){const d=B(n,"data"),l=B(a,"data");d!==l&&t.data.set(l)}if(de(a,"state")){const d=B(n,"state"),l=B(a,"state");d!==l&&t.state.set(l)}if(de(a,"mapTypes")){const d=B(n,"mapTypes"),l=B(a,"mapTypes");d!==l&&(t.removeAllMapTypes(),l.forEach(_=>t.addMapType(_)))}Be(t,m,o),me(c,i,t)}static unmountControl(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n);t!==null&&(Object.keys(i).forEach(m=>Pe(t,m,i[m])),o.controls&&typeof o.controls.remove=="function"?o.controls.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),me(a))}}var Er=$t(Pr(Nt(s=>re.createElement(We,Ie({},s,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Re extends re.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Re.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Re.updateObject(this.instance,t,this.props)}componentWillUnmount(){Re.unmountObject(this.instance,this.props)}render(){return re.createElement(Xe.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n),m=new t(B(n,"options"));if(Object.keys(i).forEach(c=>$e(m,c,i[c])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(m);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount Clusterer");o.add(m)}return me(null,a,m),m}static updateObject(t,n,a){const{_events:o,instanceRef:i}=ne(a),{_events:m,instanceRef:c}=ne(n);if(de(a,"options")){const d=B(n,"options"),l=B(a,"options");d!==l&&t.options.set(l)}Be(t,m,o),me(c,i,t)}static unmountObject(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n);t!==null&&(Object.keys(i).forEach(m=>Pe(t,m,i[m])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),me(a))}}class Te extends re.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Te.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Te.updateObject(this.instance,t,this.props)}componentWillUnmount(){Te.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n),m=B(n,"options",{}),c=B(n,"features",{}),d=B(n,"filter",null),l=B(n,"objects",{}),_=B(n,"clusters",{}),h=new t(m);if(h.add(c||[]),h.setFilter(d),h.objects.options.set(l),h.clusters.options.set(_),Object.keys(i).forEach(g=>$e(h,g,i[g])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(h);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount ObjectManager");o.add(h)}return me(null,a,h),h}static updateObject(t,n,a){const{_events:o,instanceRef:i}=ne(a),{_events:m,instanceRef:c}=ne(n);if(de(a,"options")){const d=B(n,"options"),l=B(a,"options");d!==l&&t.options.set(l)}if(de(a,"objects")){const d=B(n,"objects"),l=B(a,"objects");d!==l&&t.objects.options.set(l)}if(de(a,"clusters")){const d=B(n,"clusters"),l=B(a,"clusters");d!==l&&t.clusters.options.set(l)}if(de(a,"filter")){const d=B(n,"filter"),l=B(a,"filter");d!==l&&t.setFilter(l)}if(de(a,"features")){const d=B(n,"features"),l=B(a,"features");d!==l&&(t.remove(d),t.add(l))}Be(t,m,o),me(c,i,t)}static unmountObject(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n);t!==null&&(Object.keys(i).forEach(m=>Pe(t,m,i[m])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),me(a))}}class Fe extends re.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:n,dangerZone:a}=this.props,o=Fe.mountObject(a&&typeof a.modifyConstructor=="function"?a.modifyConstructor(n[t]):n[t],this.props);this.instance=o,this.setState({instance:o})}componentDidUpdate(t){this.instance!==null&&Fe.updateObject(this.instance,t,this.props)}componentWillUnmount(){Fe.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n),m=new t(B(n,"geometry"),B(n,"properties"),B(n,"options"));if(Object.keys(i).forEach(c=>$e(m,c,i[c])),o&&o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(m);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${n.name}`);o.add(m)}return me(null,a,m),m}static updateObject(t,n,a){const{_events:o,instanceRef:i}=ne(a),{_events:m,instanceRef:c}=ne(n);if(de(a,"geometry")){const d=B(n,"geometry",{}),l=B(a,"geometry",{});Array.isArray(l)&&l!==d?Array.isArray(l[0])&&typeof l[1]=="number"?(t.geometry.setCoordinates(l[0]),t.geometry.setRadius(l[1])):t.geometry.setCoordinates(l):typeof l=="object"&&(l.coordinates!==d.coordinates&&t.geometry.setCoordinates(l.coordinates),l.radius!==d.radius&&t.geometry.setRadius(l.radius))}if(de(a,"properties")){const d=B(n,"properties"),l=B(a,"properties");d!==l&&t.properties.set(l)}if(de(a,"options")){const d=B(n,"options"),l=B(a,"options");d!==l&&t.options.set(l)}Be(t,m,o),me(c,i,t)}static unmountObject(t,n){const{instanceRef:a,parent:o,_events:i}=ne(n);t!==null&&(Object.keys(i).forEach(m=>Pe(t,m,i[m])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),me(a))}}const Ur=()=>{const s=p.useRef(null);return e.jsx(Ar,{children:e.jsx("div",{children:e.jsx(Pt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{s.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(Er,{options:{position:{bottom:20,right:20}}})})})})},Lr=({temporarySocialPlatforms:s,setTemporarySocialPlatforms:t})=>{const n=(a,o)=>{t(i=>i.map(m=>m.id===o?{...m,text:a}:m))};return e.jsxs("div",{className:U.aboutUs_inputs,children:[s.map(a=>e.jsx("div",{className:U.aboutUs_inputs_wrap,children:a.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:U.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("textarea",{className:U.aboutUs_inputs_wrap_textarea,onChange:o=>n(o.target.value,a.id),value:a.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:U.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("input",{className:U.aboutUs_inputs_wrap_input,type:a.type==="isPhone"?"number":a.type==="isEmail"?"email":"text",onChange:o=>n(o.target.value,a.id),value:a.text})]})},a.id)),e.jsx(Ur,{})]})},zr=({id:s,checked:t,onChange:n})=>{const a=o=>{n(s,o.target.checked)};return e.jsxs("label",{className:U.custom_checkbox,children:[e.jsx("input",{className:U.custom_checkbox_input,type:"checkbox",checked:t,onChange:a}),e.jsx("span",{className:U.custom_checkbox_box,children:e.jsx(E,{name:"CheckIcon",width:18,height:18,className:U.custom_checkbox_box_icon})})]})},Rr=({temporaryContactsSchedule:s,setTemporaryContactsSchedule:t})=>{const n=c=>{const d=c.replace(/\D/g,"");return d.length<=2?d:`${d.slice(0,2)}:${d.slice(2,4)}`},a=(c,d,l,_)=>{if(!_.isActive)return;const h=n(l);t(g=>g.map(u=>u.id===c?{...u,workHours:{...u.workHours,[d]:h}}:u))},o=(c,d)=>{t(l=>l.map(_=>_.id===c?{..._,isActive:d,workHours:d?_.workHours:{start:"",end:""}}:_))},i=p.useRef({}),m=p.useRef({});return p.useEffect(()=>{s.forEach(c=>{var d;c.isActive&&i.current[c.id]&&!m.current[c.id]&&((d=i.current[c.id])==null||d.focus(),m.current[c.id]=!0)})},[s]),e.jsxs("div",{className:U.aboutUs_week,children:[e.jsxs("div",{className:U.aboutUs_week_info,children:[e.jsx("span",{className:U.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:U.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:U.aboutUs_week_content,children:s.map((c,d)=>{const l=d===s.length-1,_=l&&c.isActive?U.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:U.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${U.aboutUs_week_wrap_colored} 
                  ${c.isActive?U.aboutUs_week_wrap_colored_active:""} 
                  ${l?U.aboutUs_week_wrap_colored_last:""} 
                  ${_}
                `,children:[e.jsx("span",{className:U.aboutUs_week_wrap_day,children:c.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:U.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:h=>i.current[c.id]=h,className:U.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:h=>a(c.id,"start",h.target.value,c),value:c.workHours.start}),e.jsx("span",{className:U.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:U.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:h=>a(c.id,"end",h.target.value,c),value:c.workHours.end})]})]}),e.jsx(zr,{id:c.id,checked:c.isActive,onChange:o})]},c.id)})})]})},Tr=()=>{const{contactsFormInputsArr:s,setContactsFormInputsArr:t,contactsSchedule:n,setContactsSchedule:a,setImageUrlLogo:o}=st(),[i,m]=p.useState(s),[c,d]=p.useState(""),[l,_]=p.useState(n),h=()=>{t(i),o(c);const g=l.map(u=>u.workHours&&u.workHours.start===""&&u.workHours.end===""?{...u,isActive:!1}:u);a(g)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:U.aboutUs,children:[e.jsx($r,{temporaryImageUrl:c,setTemporaryImageUrl:d}),e.jsxs("div",{className:U.aboutUs_content,children:[e.jsx(Lr,{temporarySocialPlatforms:i,setTemporarySocialPlatforms:m}),e.jsx(Rr,{temporaryContactsSchedule:l,setTemporaryContactsSchedule:_})]})]}),e.jsx("button",{className:U.aboutUs_btn,onClick:h,children:"Сохранить"})]})};function Fr({width:s=78,color:t="white",backgroundOn:n="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:o=500,scale:i=1.1,status:m=!1,disabled:c=!1}){const d={width:`${s}px`,height:`${s/2-s/20}px`,background:m?n:a,borderRadius:`${s/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},l={background:`${t}`,height:`${s/2-s/20}px`,width:`${s/2-s/20}px`,border:`${s/25}px solid ${m?n:a}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${i}) translateX(${m?"110%":"0"})`};return e.jsx("div",{style:d,children:e.jsx("div",{style:l})})}const qr=({temporarySocialPlatforms:s,setTemporarySocialPlatforms:t})=>{const n=(o,i)=>{t(m=>m.map(c=>c.id===o?{...c,url:i,isActive:i===""?!1:c.isActive}:c))},a=(o,i)=>{o.url!==""&&t(m=>m.map(c=>c.id===i?{...c,isActive:!c.isActive,url:o.isActive?"":o.url}:c))};return e.jsx(e.Fragment,{children:s.map(o=>e.jsxs("div",{className:U.socials_content_wrap,children:[e.jsx("img",{src:o.icon,alt:o.alt}),e.jsx("input",{type:"text",className:U.socials_content_wrap_input,value:o.url||"",onChange:i=>n(o.id,i.target.value)}),e.jsx("div",{onClick:()=>a(o,o.id),children:e.jsx(Fr,{status:o.isActive})})]},o.id))})},Hr=()=>{const{socialPlatforms:s,setSocialPlatforms:t,setActiveSocials:n}=st(),[a,o]=p.useState(s);async function i(){const c=ge.get("multi-store"),d=await F.get(`web-credentials/${c}`);if(d){const l=Object.entries(d.data.social).filter(([h,g])=>g.isActive).map(([h,g])=>({name:h,...g})),_=s.filter(h=>l.some(g=>g.name===h.name)).map(h=>{const g=l.find(u=>u.name===h.name);return{...h,...g,isActive:!0}});n(_)}}async function m(){t(a);const c=ge.get("multi-store"),d=a.reduce((l,_)=>(l[_.name]={url:_.url,isActive:_.isActive},l),{});try{const l=await F.patch(`web-credentials/${c}`,{social:d});i()}catch(l){console.log("error",l)}}return e.jsxs("div",{className:U.socials,children:[e.jsx("h3",{className:U.socials_title,children:"Соц-сети"}),e.jsx("div",{className:U.socials_content,children:e.jsx(qr,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:o})}),e.jsx("button",{className:U.contacts_btn,onClick:m,children:"Сохранить"})]})},Vr=[{id:ce(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:ce(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function Qr(){const t=fe().pathname;return e.jsx("div",{className:U.contacts,children:e.jsxs("div",{className:U.contacts_content,children:[e.jsx("div",{className:U.contacts_nav,children:e.jsx("ul",{className:U.contacts_nav_list,children:Vr.map(n=>e.jsx(V,{to:n.href,className:`${U.contacts_nav_link} ${n.href==t?U.contacts_nav_link_active:""}`,children:n.title},n.id))})}),t==="/admin/settings/contacts"&&e.jsx(Hr,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Tr,{})]})})}const Xr="_delivery_1ik22_1",Gr="_delivery_wrap_1ik22_5",Yr="_delivery_settingsAdd_1ik22_8",Zr="_delivery_brief_title_1ik22_29",Kr="_delivery_brief_wrap_1ik22_34",Jr="_delivery_brief_info_1ik22_40",ec="_delivery_brief_info_header_1ik22_44",tc="_delivery_brief_info_header_title_1ik22_50",nc="_delivery_brief_info_content_1ik22_54",sc="_delivery_brief_info_content_item_1ik22_59",oc="_delivery_brief_info_city_1ik22_64",ac="_delivery_brief_info_text_1ik22_68",ic="_delivery_brief_btn_1ik22_73",rc="_deliverySettings_1ik22_79",cc="_deliverySettings_top_1ik22_82",lc="_deliverySettings_stores_1ik22_91",_c="_deliverySettings_location_1ik22_96",dc="_deliverySettings_location_wrap_1ik22_101",mc="_deliverySettings_location_left_1ik22_127",pc="_deliverySettings_location_right_1ik22_130",uc="_deliverySettings_location_region_1ik22_137",hc="_deliverySettings_selected_1ik22_142",gc="_deliverySettings_radio_1ik22_148",bc="_deliverySettings_radio_btn_1ik22_154",xc="_deliverySettings_btn_1ik22_159",fc="_fixedDelivery_1ik22_166",vc="_fixedDelivery_wrap_1ik22_170",jc="_fixedDelivery_add_1ik22_176",yc="_fullInfo_header_1ik22_182",kc="_fullInfo_title_1ik22_188",wc="_fullInfo_wrap_1ik22_192",Cc="_fullInfo_card_title_1ik22_197",Nc="_fullInfo_card_price_1ik22_202",Sc="_fullInfo_card_price_desc_1ik22_206",Ic="_fullInfo_card_price_desc_text_1ik22_214",$c="_fullInfo_btn_1ik22_220",Pc="_editDelivery_1ik22_226",Dc="_editDelivery_title_1ik22_229",Mc="_editDelivery_link_1ik22_235",Bc="_editDelivery_content_1ik22_242",Oc="_editDelivery_settings_header_1ik22_247",Ac="_editDelivery_settings_content_1ik22_257",Wc="_editDelivery_settings_content_container_1ik22_262",Ec="_editDelivery_settings_content_container_wrap_1ik22_266",Uc="_editDelivery_settings_content_container_btn_1ik22_269",Lc="_editDelivery_btn_1ik22_273",zc="_addCity_1ik22_283",Rc="_addCity_title_1ik22_287",Tc="_addCity_content_1ik22_293",Fc="_addCity_radio_1ik22_298",qc="_addCity_addBtn_1ik22_303",Hc="_addCity_saveBtn_1ik22_309",M={delivery:Xr,delivery_wrap:Gr,delivery_settingsAdd:Yr,delivery_brief_title:Zr,delivery_brief_wrap:Kr,delivery_brief_info:Jr,delivery_brief_info_header:ec,delivery_brief_info_header_title:tc,delivery_brief_info_content:nc,delivery_brief_info_content_item:sc,delivery_brief_info_city:oc,delivery_brief_info_text:ac,delivery_brief_btn:ic,deliverySettings:rc,deliverySettings_top:cc,deliverySettings_stores:lc,deliverySettings_location:_c,deliverySettings_location_wrap:dc,deliverySettings_location_left:mc,deliverySettings_location_right:pc,deliverySettings_location_region:uc,deliverySettings_selected:hc,deliverySettings_radio:gc,deliverySettings_radio_btn:bc,deliverySettings_btn:xc,fixedDelivery:fc,fixedDelivery_wrap:vc,fixedDelivery_add:jc,fullInfo_header:yc,fullInfo_title:kc,fullInfo_wrap:wc,fullInfo_card_title:Cc,fullInfo_card_price:Nc,fullInfo_card_price_desc:Sc,fullInfo_card_price_desc_text:Ic,fullInfo_btn:$c,editDelivery:Pc,editDelivery_title:Dc,editDelivery_link:Mc,editDelivery_content:Bc,editDelivery_settings_header:Oc,editDelivery_settings_content:Ac,editDelivery_settings_content_container:Wc,editDelivery_settings_content_container_wrap:Ec,editDelivery_settings_content_container_btn:Uc,editDelivery_btn:Lc,addCity:zc,addCity_title:Rc,addCity_content:Tc,addCity_radio:Fc,addCity_addBtn:qc,addCity_saveBtn:Hc},Ue=Ft()(qt(Ht(s=>({cities:[{id:ce(),city:"Ташкент",isActive:!0},{id:ce(),city:"Самарканд",isActive:!0},{id:ce(),city:"Бухара",isActive:!0}],setCities:t=>s({cities:t}),selectedCities:[],setSelectedCities:t=>s({selectedCities:t}),deliveryStores:[{id:ce(),store:"Магазин1",checked:!1},{id:ce(),store:"Магазин2",checked:!1},{id:ce(),store:"Магазин3",checked:!1}],setDeliveryStores:t=>s({deliveryStores:t}),typeOfDelivery:"",setTypeOfDelivery:t=>s({typeOfDelivery:t}),saveSettingDelivery:[],setSaveSettingDelivery:t=>s({saveSettingDelivery:t}),regionsArr:[],setRegionsArr:t=>s({regionsArr:t}),districtsArr:[],setDistrictsArr:t=>s({districtsArr:t}),selectedArr:[],setSelectedArr:t=>s({selectedArr:t})}),{name:"delivery-storage",partialize:s=>({...s,selectedArr:void 0})}))),Dt=({label:s,checked:t})=>{const n={backgroundColor:t?"#45D442":"#fff",border:"1px solid #D8D8D8",width:"20px",height:"20px",borderRadius:"3px",display:"flex",justifyContent:"center",alignItems:"center"};return e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",checked:t,style:{display:"none"},onChange:()=>!t}),e.jsxs("label",{style:{cursor:"pointer",display:s?"flex":"block",gap:s?"10px":"0",alignItems:s?"center":"initial"},children:[e.jsx("div",{style:n,children:t&&e.jsx(E,{name:"CheckIcon",width:17,color:"white"})}),e.jsx("span",{style:{fontSize:"14px"},children:s})]})]})},Vc="_dropdown_hrtge_1",Qc="_dropdown_wrap_hrtge_6",Xc="_dropdown_wrap_content_hrtge_10",Gc="_dropdown_wrap_content_btn_hrtge_17",Yc="_dropdown_block_hrtge_28",Zc="_dropdown_block_top_hrtge_33",Kc="_dropdown_block_top_title_hrtge_43",Jc="_dropdown_block_top_arrow_hrtge_47",el="_dropdown_block_top_arrow_active_hrtge_56",tl="_dropdown_block_dropdown_hrtge_59",nl="_dropdown_block_dropdown_item_hrtge_72",sl="_dropdown_block_dropdown_item_selected_hrtge_82",ol="_dropdown_block_dropdown_open_hrtge_86",al="_dropdown_block_onOff_hrtge_93",il="_dropdown_block_delivery_hrtge_93",rl="_radio_hrtge_99",cl="_radio_selected_hrtge_105",ll="_radio_radio_hrtge_105",_l="_radio_input_hrtge_113",dl="_radio_text_hrtge_126",ml="_addBtn_hrtge_131",pl="_fixed_inputs_hrtge_145",ul="_fixed_inputs_wrap_hrtge_150",hl="_fixed_inputs_subtitle_hrtge_154",gl="_fixed_inputs_input_hrtge_157",bl="_fixed_inputs_price_hrtge_157",xl="_flexible_inputs_hrtge_167",fl="_flexible_inputs_top_hrtge_174",vl="_flexible_inputs_bottom_hrtge_179",jl="_flexible_inputs_wrapLarge_hrtge_185",yl="_flexible_inputs_wrapSmall_hrtge_185",kl="_flexible_inputs_title_hrtge_197",wl="_flexible_inputs_input_hrtge_200",Cl="_flexible_inputs_btn_hrtge_206",Nl="_deliveryStore_hrtge_210",Sl="_deliveryCity_hrtge_218",Il="_btns_save_hrtge_232",$l="_btns_back_hrtge_232",W={dropdown:Vc,dropdown_wrap:Qc,dropdown_wrap_content:Xc,dropdown_wrap_content_btn:Gc,dropdown_block:Yc,dropdown_block_top:Zc,dropdown_block_top_title:Kc,dropdown_block_top_arrow:Jc,dropdown_block_top_arrow_active:el,dropdown_block_dropdown:tl,dropdown_block_dropdown_item:nl,dropdown_block_dropdown_item_selected:sl,dropdown_block_dropdown_open:ol,dropdown_block_onOff:al,dropdown_block_delivery:il,radio:rl,radio_selected:cl,radio_radio:ll,radio_input:_l,radio_text:dl,addBtn:ml,fixed_inputs:pl,fixed_inputs_wrap:ul,fixed_inputs_subtitle:hl,fixed_inputs_input:gl,fixed_inputs_price:bl,flexible_inputs:xl,flexible_inputs_top:fl,flexible_inputs_bottom:vl,flexible_inputs_wrapLarge:jl,flexible_inputs_wrapSmall:yl,flexible_inputs_title:kl,flexible_inputs_input:wl,flexible_inputs_btn:Cl,deliveryStore:Nl,deliveryCity:Sl,btns_save:Il,btns_back:$l},Pl=({store:s,setChecked:t})=>e.jsx("div",{className:W.deliveryStore,children:e.jsx("div",{onClick:()=>t(s.id),children:e.jsx(Dt,{checked:s.checked,label:s.store})})}),qe=({id:s,value:t,checked:n,text:a,onChange:o})=>e.jsxs("label",{className:`${W.radio} ${n?W.radio_selected:""}`,children:[e.jsx("input",{type:"radio",id:s,value:t,checked:n,onChange:()=>o(s),className:W.radio_input}),e.jsx("span",{className:W.radio_radio}),e.jsx("span",{className:W.radio_text,children:a})]});function tt({city:s,cityName:t}){const{setSelectedArr:n,selectedArr:a}=Ue(),o=(i,m)=>{let c;"region_id"in m?c=a.map(d=>{var l;return d.id===m.region_id?{...d,districts:(l=d.districts)==null?void 0:l.filter(_=>_.id!==i)}:d}):c=a.filter(d=>d.id!==i),n(c)};return e.jsxs("div",{className:W.deliveryCity,children:[e.jsx("span",{children:(s==null?void 0:s.name)||t}),e.jsx("button",{onClick:()=>o(s==null?void 0:s.id,s),children:e.jsx(ot,{name:"TrashIcon",width:16})})]})}const Mt=({id:s,onRemove:t,purchasePrice:n,price:a,onInputChange:o})=>{const i=m=>{const{name:c,value:d}=m.target;o==null||o(s,c,d)};return e.jsxs("div",{className:W.fixed_inputs,children:[e.jsxs("div",{className:W.fixed_inputs_wrap,children:[e.jsx("span",{className:W.fixed_inputs_subtitle,children:"Сумма покупки от"}),e.jsx("input",{className:W.fixed_inputs_input,type:"number",name:"purchasePrice",value:n,onChange:i})]}),e.jsxs("div",{className:W.fixed_inputs_wrap,children:[e.jsx("span",{className:W.fixed_inputs_subtitle,children:"Сумма"}),e.jsx("input",{className:W.fixed_inputs_price,type:"number",name:"price",value:a,onChange:i})]}),e.jsx("button",{style:{alignSelf:"end",cursor:"pointer"},onClick:()=>t==null?void 0:t(s),children:e.jsx(ot,{name:"TrashIcon",width:17})})]})},Le=({text:s})=>e.jsxs("button",{className:W.addBtn,children:[s||"Добавить еще",e.jsx(E,{name:"PlusIcon",width:12})]}),Bt=()=>{Ue();const[s,t]=p.useState([{id:ce(),purchasePrice:"",price:""}]),n=o=>{s.length!=1&&t(s.filter(i=>i.id!==o))},a=(o,i,m)=>{t(c=>c.map(d=>d.id===o?{...d,[i]:m}:d))};return e.jsxs("div",{className:M.fixedDelivery,children:[s.map(o=>e.jsx("div",{className:M.fixedDelivery_wrap,children:e.jsx(Mt,{id:o.id,purchasePrice:o.purchasePrice,price:o.price,onInputChange:a,onRemove:n})},o.id)),e.jsx("div",{className:M.fixedDelivery_add,children:e.jsx(Le,{})})]})},Ot=()=>e.jsxs("div",{className:W.flexible_inputs,children:[e.jsxs("div",{className:W.flexible_inputs_top,children:[e.jsxs("div",{className:W.flexible_inputs_wrapLarge,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"Сумма покупки от"}),e.jsx("input",{type:"text",className:W.flexible_inputs_input})]}),e.jsxs("div",{className:W.flexible_inputs_wrapSmall,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"Первые км"}),e.jsx("input",{className:W.flexible_inputs_input,type:"text"})]}),e.jsxs("div",{className:W.flexible_inputs_wrapSmall,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"Цена"}),e.jsx("input",{className:W.flexible_inputs_input,type:"text"})]})]}),e.jsxs("div",{className:W.flexible_inputs_bottom,children:[e.jsxs("div",{className:W.flexible_inputs_wrapLarge,children:[e.jsx("span",{className:W.flexible_inputs_title,children:"За каждый следующий км"}),e.jsx("input",{className:W.flexible_inputs_input,type:"text"})]}),e.jsx("button",{className:W.flexible_inputs_btn,children:e.jsx(ot,{name:"TrashIcon",width:17})})]})]}),At=()=>e.jsxs("div",{style:{maxWidth:"355px",width:"100%"},children:[e.jsx(Ot,{}),e.jsx("div",{style:{display:"flex",justifyContent:"end",marginTop:"10px"},children:e.jsx(Le,{})})]}),Ge=({href:s,text:t})=>e.jsx(V,{to:s,className:W.btns,children:e.jsx("button",{className:W.btns_save,children:t||"Сохранить"})});function nt({color:s="black",className:t,arrToUse:n,setArrToUse:a,openBlock:o,title:i,setTitle:m,setOpenBlock:c,filter:d,setSelectedArr:l,selectedArr:_}){const h=u=>{if("region_id"in u){const f=u;if(_==null?void 0:_.some(I=>{var N;return I.id===f.region_id&&((N=I.districts)==null?void 0:N.some($=>$.id===f.id))})){c(!1);return}const y=_==null?void 0:_.map(I=>I.id===u.region_id?{...I,districts:[...I.districts||[],f]}:I);l==null||l(y)}else{if(_==null?void 0:_.some(y=>y.id===u.id)){c(!1);return}const v={id:u.id,region:[u]};l==null||l([..._,v]),d==null||d(u.id)}c(!1)},g=u=>{if("region_id"in u){const f=u;return _==null?void 0:_.some(v=>{var y;return v.id===f.region_id&&((y=v.districts)==null?void 0:y.some(I=>I.id===f.id))})}else return _==null?void 0:_.some(f=>f.id===u.id)};return e.jsx("div",{className:t??W.dropdown,children:e.jsxs("div",{className:W.dropdown_block,children:[e.jsxs("div",{className:W.dropdown_block_top,onClick:()=>c(!o),children:[e.jsx("h2",{className:W.dropdown_block_top_title,style:{color:s},children:i}),e.jsx("button",{className:W.dropdown_block_top_btn,children:e.jsx("div",{className:`${W.dropdown_block_top_arrow} ${o?W.dropdown_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${W.dropdown_block_dropdown} ${o?W.dropdown_block_dropdown_open:""}`,children:n==null?void 0:n.map(u=>e.jsx("span",{className:`${W.dropdown_block_dropdown_item} ${g(u)?W.dropdown_block_dropdown_item_selected:""}`,onClick:()=>h(u),children:u.name},u.id))})]})})}const Ke=[{id:1,name:"Qoraqalpog‘iston Respublikasi"},{id:2,name:"Andijon viloyati"},{id:3,name:"Buxoro viloyati"},{id:4,name:"Jizzax viloyati"},{id:5,name:"Qashqadaryo viloyati"},{id:6,name:"Navoiy viloyati"},{id:7,name:"Namangan viloyati"},{id:8,name:"Samarqand viloyati"},{id:9,name:"Surxandaryo viloyati"},{id:10,name:"Sirdaryo viloyati"},{id:11,name:"Toshkent viloyati"},{id:12,name:"Farg‘ona viloyati"},{id:13,name:"Xorazm viloyati"},{id:14,name:"Toshkent shahri"}],Je=[{id:15,region_id:1,name:"Amudaryo tumani"},{id:16,region_id:1,name:"Beruniy tumani"},{id:17,region_id:1,name:"Kegayli tumani"},{id:18,region_id:1,name:"Qonliko‘l tumani"},{id:19,region_id:1,name:"Qorao‘zak tumani"},{id:20,region_id:1,name:"Qo‘ng‘irot tumani"},{id:21,region_id:1,name:"Mo‘ynoq tumani"},{id:22,region_id:1,name:"Nukus tumani"},{id:23,region_id:1,name:"Nukus shahri"},{id:24,region_id:1,name:"Taxtako‘pir tumani"},{id:25,region_id:1,name:"To‘rtko‘l tumani"},{id:26,region_id:1,name:"Xo‘jayli tumani"},{id:27,region_id:1,name:"CHimboy tumani"},{id:28,region_id:1,name:"SHumanay tumani"},{id:29,region_id:1,name:"Ellikqal‘a tumani"},{id:30,region_id:2,name:"Andijon shahri"},{id:31,region_id:2,name:"Andijon tumani"},{id:32,region_id:2,name:"Asaka tumani"},{id:33,region_id:2,name:"Baliqchi tumani"},{id:34,region_id:2,name:"Buloqboshi tumani"},{id:35,region_id:2,name:"Bo‘z tumani"},{id:36,region_id:2,name:"Jalaquduq tumani"},{id:37,region_id:2,name:"Izbosgan tumani"},{id:38,region_id:2,name:"Qorasuv shahri"},{id:39,region_id:2,name:"Qo‘rg‘ontepa tumani"},{id:40,region_id:2,name:"Marhamat tumani"},{id:41,region_id:2,name:"Oltinko‘l tumani"},{id:42,region_id:2,name:"Paxtaobod tumani"},{id:43,region_id:2,name:"Ulug‘nor tumani"},{id:44,region_id:2,name:"Xonabod tumani"},{id:45,region_id:2,name:"Xo‘jaobod shahri"},{id:46,region_id:2,name:"Shaxrixon tumani"},{id:47,region_id:3,name:"Buxoro shahri"},{id:48,region_id:3,name:"Buxoro tumani"},{id:49,region_id:3,name:"Vobkent tumani"},{id:50,region_id:3,name:"G‘ijduvon tumani"},{id:51,region_id:3,name:"Jondor tumani"},{id:52,region_id:3,name:"Kogon tumani"},{id:53,region_id:3,name:"Kogon shahri"},{id:54,region_id:3,name:"Qorako‘l tumani"},{id:55,region_id:3,name:"Qorovulbozor tumani"},{id:56,region_id:3,name:"Olot tumani"},{id:57,region_id:3,name:"Peshku tumani"},{id:58,region_id:3,name:"Romitan tumani"},{id:59,region_id:3,name:"Shofirkon tumani"},{id:60,region_id:4,name:"Arnasoy tumani"},{id:61,region_id:4,name:"Baxmal tumani"},{id:62,region_id:4,name:"G‘allaorol tumani"},{id:63,region_id:4,name:"Do‘stlik tumani"},{id:64,region_id:4,name:"Sh.Rashidov tumani"},{id:65,region_id:4,name:"Jizzax shahri"},{id:66,region_id:4,name:"Zarbdor tumani"},{id:67,region_id:4,name:"Zafarobod tumani"},{id:68,region_id:4,name:"Zomin tumani"},{id:69,region_id:4,name:"Mirzacho‘l tumani"},{id:70,region_id:4,name:"Paxtakor tumani"},{id:71,region_id:4,name:"Forish tumani"},{id:72,region_id:4,name:"Yangiobod tumani"},{id:73,region_id:5,name:"G‘uzor tumani"},{id:74,region_id:5,name:"Dehqonobod tumani"},{id:75,region_id:5,name:"Qamashi tumani"},{id:76,region_id:5,name:"Qarshi tumani"},{id:77,region_id:5,name:"Qarshi shahri"},{id:78,region_id:5,name:"Kasbi tumani"},{id:79,region_id:5,name:"Kitob tumani"},{id:80,region_id:5,name:"Koson tumani"},{id:81,region_id:5,name:"Mirishkor tumani"},{id:82,region_id:5,name:"Muborak tumani"},{id:83,region_id:5,name:"Nishon tumani"},{id:84,region_id:5,name:"Chiroqchi tumani"},{id:85,region_id:5,name:"Shahrisabz tumani"},{id:86,region_id:5,name:"Yakkabog‘ tumani"},{id:87,region_id:6,name:"Zarafshon shahri"},{id:88,region_id:6,name:"Karmana tumani"},{id:89,region_id:6,name:"Qiziltepa tumani"},{id:90,region_id:6,name:"Konimex tumani"},{id:91,region_id:6,name:"Navbahor tumani"},{id:92,region_id:6,name:"Navoiy shahri"},{id:93,region_id:6,name:"Nurota tumani"},{id:94,region_id:6,name:"Tomdi tumani"},{id:95,region_id:6,name:"Uchquduq tumani"},{id:96,region_id:6,name:"Xatirchi tumani"},{id:97,region_id:7,name:"Kosonsoy tumani"},{id:98,region_id:7,name:"Mingbuloq tumani"},{id:99,region_id:7,name:"Namangan tumani"},{id:100,region_id:7,name:"Namangan shahri"},{id:101,region_id:7,name:"Norin tumani"},{id:102,region_id:7,name:"Pop tumani"},{id:103,region_id:7,name:"To‘raqo‘rg‘on tumani"},{id:104,region_id:7,name:"Uychi tumani"},{id:105,region_id:7,name:"Uchqo‘rg‘on tumani"},{id:106,region_id:7,name:"Chortoq tumani"},{id:107,region_id:7,name:"Chust tumani"},{id:108,region_id:7,name:"Yangiqo‘rg‘on tumani"},{id:109,region_id:8,name:"Bulung‘ur tumani"},{id:110,region_id:8,name:"Jomboy tumani"},{id:111,region_id:8,name:"Ishtixon tumani"},{id:112,region_id:8,name:"Kattaqo‘rg‘on tumani"},{id:113,region_id:8,name:"Kattaqo‘rg‘on shahri"},{id:114,region_id:8,name:"Qo‘shrabot tumani"},{id:115,region_id:8,name:"Narpay tumani"},{id:116,region_id:8,name:"Nurabod tumani"},{id:117,region_id:8,name:"Oqdaryo tumani"},{id:118,region_id:8,name:"Payariq tumani"},{id:119,region_id:8,name:"Pastarg‘om tumani"},{id:120,region_id:8,name:"Paxtachi tumani"},{id:121,region_id:8,name:"Samarqand tumani"},{id:122,region_id:8,name:"Samarqand shahri"},{id:123,region_id:8,name:"Toyloq tumani"},{id:124,region_id:8,name:"Urgut tumani"},{id:125,region_id:9,name:"Angor tumani"},{id:126,region_id:9,name:"Boysun tumani"},{id:127,region_id:9,name:"Denov tumani"},{id:128,region_id:9,name:"Jarqo‘rg‘on tumani"},{id:129,region_id:9,name:"Qiziriq tumani"},{id:130,region_id:9,name:"Qo‘mqo‘rg‘on tumani"},{id:131,region_id:9,name:"Muzrabot tumani"},{id:132,region_id:9,name:"Oltinsoy tumani"},{id:133,region_id:9,name:"Sariosiy tumani"},{id:134,region_id:9,name:"Termiz tumani"},{id:135,region_id:9,name:"Termiz shahri"},{id:136,region_id:9,name:"Uzun tumani"},{id:137,region_id:9,name:"Sherobod tumani"},{id:138,region_id:9,name:"Sho‘rchi tumani"},{id:139,region_id:10,name:"Boyovut tumani"},{id:140,region_id:10,name:"Guliston tumani"},{id:141,region_id:10,name:"Guliston shahri"},{id:142,region_id:10,name:"Mirzaobod tumani"},{id:143,region_id:10,name:"Oqoltin tumani"},{id:144,region_id:10,name:"Sayxunobod tumani"},{id:145,region_id:10,name:"Sardoba tumani"},{id:146,region_id:10,name:"Sirdaryo tumani"},{id:147,region_id:10,name:"Xavos tumani"},{id:148,region_id:10,name:"Shirin shahri"},{id:149,region_id:10,name:"Yangier shahri"},{id:150,region_id:11,name:"Angiren shahri"},{id:151,region_id:11,name:"Bekabod tumani"},{id:152,region_id:11,name:"Bekabod shahri"},{id:153,region_id:11,name:"Bo‘ka tumani"},{id:154,region_id:11,name:"Bo‘stonliq tumani"},{id:155,region_id:11,name:"Zangiota tumani"},{id:156,region_id:11,name:"Qibray tumani"},{id:157,region_id:11,name:"Quyichirchiq tumani"},{id:158,region_id:11,name:"Oqqo‘rg‘on tumani"},{id:159,region_id:11,name:"Olmaliq shahri"},{id:160,region_id:11,name:"Ohangaron tumani"},{id:161,region_id:11,name:"Parkent tumani"},{id:162,region_id:11,name:"Piskent tumani"},{id:163,region_id:11,name:"O‘rtachirchiq tumani"},{id:164,region_id:11,name:"Chinoz tumani"},{id:165,region_id:11,name:"Chirchiq shahri"},{id:166,region_id:11,name:"Yuqorichirchiq tumani"},{id:167,region_id:11,name:"Yangiyo‘l tumani"},{id:168,region_id:12,name:"Beshariq tumani"},{id:169,region_id:12,name:"Bog‘dod tumani"},{id:170,region_id:12,name:"Buvayda tumani"},{id:171,region_id:12,name:"Dang‘ara tumani"},{id:172,region_id:12,name:"Yozyovon tumani"},{id:173,region_id:12,name:"Quva tumani"},{id:174,region_id:12,name:"Quvasoy shahri"},{id:175,region_id:12,name:"Qo‘qon shahri"},{id:176,region_id:12,name:"Qo‘shtepa tumani"},{id:177,region_id:12,name:"Marg‘ilon shahri"},{id:178,region_id:12,name:"Oltiariq tumani"},{id:179,region_id:12,name:"Rishton tumani"},{id:180,region_id:12,name:"So‘x tumani"},{id:181,region_id:12,name:"Toshloq tumani"},{id:182,region_id:12,name:"Uchko‘prik tumani"},{id:183,region_id:12,name:"O‘zbekiston tumani"},{id:184,region_id:12,name:"Farg‘ona tumani"},{id:185,region_id:12,name:"Farg‘ona shahri"},{id:186,region_id:12,name:"Furqat tumani"},{id:187,region_id:13,name:"Bog‘ot tumani"},{id:188,region_id:13,name:"Gurlan tumani"},{id:189,region_id:13,name:"Qo‘shko‘pir tumani"},{id:190,region_id:13,name:"Urganch tumani"},{id:191,region_id:13,name:"Urganch shahri"},{id:192,region_id:13,name:"Xiva tumani"},{id:193,region_id:13,name:"Xazarasp tumani"},{id:194,region_id:13,name:"Xonqa tumani"},{id:195,region_id:13,name:"Shavot tumani"},{id:196,region_id:13,name:"Yangiariq tumani"},{id:197,region_id:13,name:"Yangibozor tumani"},{id:198,region_id:14,name:"Bektimer tumani"},{id:199,region_id:14,name:"M.Ulug‘bek tumani"},{id:200,region_id:14,name:"Mirobod tumani"},{id:201,region_id:14,name:"Olmazor tumani"},{id:202,region_id:14,name:"Sergeli tumani"},{id:203,region_id:14,name:"Uchtepa tumani"},{id:204,region_id:14,name:"Yashnobod tumani"},{id:205,region_id:14,name:"Chilonzor tumani"},{id:206,region_id:14,name:"Shayxontohur tumani"},{id:207,region_id:14,name:"Yunusobod tumani"},{id:208,region_id:14,name:"Yakkasaroy tumani"},{id:209,region_id:1,name:"Taxiatosh shahri"},{id:210,region_id:2,name:"Asaka shahri"},{id:211,region_id:9,name:"Bandixon tumani"},{id:212,region_id:11,name:"Ohangaron shahri"},{id:213,region_id:11,name:"Yangiyo‘l shahri"},{id:215,region_id:11,name:"Toshkent tumani"},{id:216,region_id:1,name:"Bo'zatov tumani"},{id:217,region_id:13,name:"Tuproqqala tumani"},{id:218,region_id:5,name:"Ko'kdala tumani"}],Dl=()=>{const{regionsArr:s,setRegionsArr:t,districtsArr:n,setDistrictsArr:a,selectedArr:o,setSelectedArr:i}=Ue(),[m,c]=p.useState(!1),[d,l]=p.useState(!1),[_,h]=p.useState("Выберете регион"),[g,u]=p.useState("Выберете район");p.useEffect(()=>{t(Ke),a([])},[]),p.useEffect(()=>{o.length===0&&l(!1)},[o]),p.useEffect(()=>{o.length!==Ke.length&&h("Выберете регион"),o.every($=>$.districts&&$.districts.length===Je.filter(k=>k.region_id===$.id).length)||u("Выберете район")},[o]),p.useEffect(()=>{console.log("selectedArr",o)},[o]);const f=N=>{console.log(N);const $=Je.filter(k=>k.region_id===N);a($)},v=()=>{o.length>0&&l(!d)},y=()=>{const N=Ke.map($=>({id:$.id,region:[$]}));i(N),a([]),h("Все регионы выбраны")},I=()=>{var N;if((N=o[0])!=null&&N.region){const $=o.map(k=>({...k,districts:Je.filter(x=>x.region_id===k.id)}));i($),u("Все районы выбраны")}};return e.jsxs("div",{className:W.dropdown_wrap,children:[e.jsxs("div",{className:W.dropdown_wrap_content,children:[e.jsx("button",{onClick:y,className:W.dropdown_wrap_content_btn,children:"Выбрать все"}),e.jsx(nt,{openBlock:m,setOpenBlock:c,arrToUse:s,setArrToUse:t,title:_,setTitle:h,filter:f,selectedArr:o,setSelectedArr:i})]}),e.jsxs("div",{className:W.dropdown_wrap_content,children:[e.jsx("button",{onClick:I,className:W.dropdown_wrap_content_btn,children:"Выбрать все"}),e.jsx(nt,{openBlock:d,setOpenBlock:v,arrToUse:n,setArrToUse:a,title:g,setTitle:u,selectedArr:o,setSelectedArr:i})]})]})},Ml=()=>{const{selectedCities:s,deliveryStores:t,setDeliveryStores:n,typeOfDelivery:a,setTypeOfDelivery:o,selectedArr:i,regionsArr:m,setRegionsArr:c,districtsArr:d,setDistrictsArr:l}=Ue(),[_,h]=p.useState(!1),g=()=>{if(s.length>0)return;const v=!_;n(t.map(y=>({...y,checked:v}))),h(v)},u=v=>{if(s.length>0)return;const y=t.map(N=>N.id===v?{...N,checked:!N.checked}:N);n(y);const I=y.every(N=>N.checked);h(I)};p.useEffect(()=>{i.length===0&&o(""),i.length===0&&(h(!1),n(t.map(v=>({...v,checked:!1}))))},[i]);const f=v=>{o(v)};return e.jsxs("div",{className:M.deliverySettings,children:[e.jsx("div",{onClick:g,style:{marginBottom:"20px",paddingLeft:"10px"},children:e.jsx(Dt,{label:_?"Отключить все":"Выбрать все",checked:_})}),e.jsx("div",{className:M.deliverySettings_stores,children:t.map(v=>e.jsx(Pl,{store:v,setChecked:u},v.id))}),e.jsxs("div",{className:M.deliverySettings_location,children:[e.jsxs("div",{className:M.deliverySettings_location_left,children:[e.jsx(Dl,{}),i.length>0&&e.jsxs("div",{className:M.deliverySettings_radio,children:[e.jsxs("div",{className:M.deliverySettings_radio_btn,children:[e.jsx(qe,{text:"Фиксированная доставка",id:"fixedDelivery",value:"fixedDelivery",checked:a==="fixedDelivery",onChange:f}),e.jsx(qe,{text:"Гибкая доставка",id:"flexibleDelivery",value:"flexibleDelivery",checked:a==="flexibleDelivery",onChange:f})]}),a!==""&&e.jsxs("div",{children:[a==="fixedDelivery"&&e.jsx(Bt,{}),a==="flexibleDelivery"&&e.jsx(At,{})]})]})]}),i.length>0&&e.jsx("div",{className:M.deliverySettings_location_wrap,children:i.map(v=>{var y,I;return e.jsxs("div",{className:M.deliverySettings_location_right,children:[e.jsxs("div",{className:M.deliverySettings_location_region,children:[e.jsx("span",{style:{fontSize:"14px"},children:"Выбранный регион"}),(y=v.region)==null?void 0:y.map(N=>e.jsx(tt,{city:N},N.id))]}),e.jsxs("div",{className:M.deliverySettings_location_region,children:[e.jsx("span",{style:{fontSize:"14px"},children:"Выбранные районы"}),(I=v.districts)==null?void 0:I.map(N=>e.jsx(tt,{city:N},N.id))]})]},v.id)})})]}),e.jsx("div",{className:M.deliverySettings_btn,children:e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})})]})},Bl=()=>e.jsxs("div",{className:M.delivery_brief_info,children:[e.jsxs("div",{className:M.delivery_brief_info_header,children:[e.jsx("span",{className:M.delivery_brief_info_header_title,children:"Магазин 1"}),e.jsx(V,{to:"/admin/settings/delivery/fullInfo",children:e.jsx(E,{name:"EyeIcon",width:18,height:16})})]}),e.jsxs("div",{className:M.delivery_brief_info_content,children:[e.jsxs("div",{className:M.delivery_brief_info_content_item,children:[e.jsx("span",{className:M.delivery_brief_info_city,children:"Ташкент"}),e.jsx("span",{className:M.delivery_brief_info_text,children:"Фиксированная"})]}),e.jsxs("div",{className:M.delivery_brief_info_content_item,children:[e.jsx("span",{className:M.delivery_brief_info_city,children:"Бухара"}),e.jsx("span",{className:M.delivery_brief_info_text,children:"Гибкая"})]})]})]}),Ol=()=>e.jsxs("div",{className:M.delivery_brief,children:[e.jsx("h4",{className:M.delivery_brief_title,children:"Существующие настройки"}),e.jsx("div",{className:M.delivery_brief_wrap,children:e.jsx(Bl,{})}),e.jsx("div",{className:M.delivery_brief_btn,children:e.jsx(Ge,{href:"/admin/settings/delivery/settingsDelivery",text:"Добавить еще настройку"})})]}),et=({city:s,type:t})=>e.jsxs("div",{className:M.fullInfo_card,children:[e.jsxs("p",{className:M.fullInfo_card_title,children:[s," - ",t]}),e.jsxs("div",{className:M.fullInfo_card_price,children:[e.jsxs("div",{className:M.fullInfo_card_price_desc,children:[e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"Мин сумма от:"}),e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"100 000"})]}),e.jsxs("div",{className:M.fullInfo_card_price_desc,children:[e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"Мин сумма от:"}),e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"100 000"})]})]})]}),at=({href:s})=>e.jsx(V,{to:s,className:W.btns,children:e.jsx("button",{className:W.btns_back,children:"Назад"})}),Al=()=>e.jsxs("div",{className:M.fullInfo,children:[e.jsxs("div",{className:M.fullInfo_header,children:[e.jsx("span",{className:M.fullInfo_title,children:"Магазин 1"}),e.jsx(V,{to:"/admin/settings/delivery/editDelivery",children:e.jsx(E,{name:"PencilSquareIcon",width:20,height:20})})]}),e.jsxs("div",{className:M.fullInfo_wrap,children:[e.jsx(et,{city:"Ташкент",type:"Фиксированная"}),e.jsx(et,{city:"Бухара",type:"Гибкая"}),e.jsx(et,{city:"Самарканд",type:"Фиксированная"})]}),e.jsx("div",{className:M.fullInfo_btn,children:e.jsx(at,{href:"/admin/settings/delivery/briefInfo"})})]}),pt=({cityName:s,type:t})=>e.jsxs("div",{className:M.editDelivery_settings,children:[e.jsxs("div",{className:M.editDelivery_settings_header,children:[e.jsx(tt,{cityName:s}),e.jsxs("span",{children:[t=="fixed"&&"Фиксированная",t=="flexible"&&"Гибкая"]})]}),e.jsx("div",{className:M.editDelivery_settings_content,children:e.jsxs("div",{className:M.editDelivery_settings_content_container,children:[e.jsxs("div",{className:M.editDelivery_settings_content_container_wrap,children:[t=="fixed"&&e.jsx(Mt,{}),t=="flexible"&&e.jsx(Ot,{})]}),e.jsx("div",{className:M.editDelivery_settings_content_container_btn,children:e.jsx(Le,{})})]})})]}),Wl=()=>e.jsxs("div",{className:M.editDelivery,children:[e.jsx("span",{className:M.editDelivery_title,children:"Магазин1"}),e.jsx("div",{className:M.editDelivery_link,children:e.jsx(V,{to:"/admin/settings/delivery/addCityPage",children:e.jsx(Le,{text:"Добавить еще город"})})}),e.jsxs("div",{className:M.editDelivery_content,children:[e.jsx(pt,{cityName:"Ташкент",type:"fixed"}),e.jsx(pt,{cityName:"Бухара",type:"flexible"})]}),e.jsxs("div",{className:M.editDelivery_btn,children:[e.jsx(at,{href:"/admin/settings/delivery/fullInfo"}),e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})]})]}),El=()=>{const[s,t]=p.useState(!1),[n]=p.useState("Выбирите город"),[a,o]=p.useState(""),{regionsArr:i,setRegionsArr:m}=Ue(),c=d=>{o(d)};return e.jsx("div",{className:M.addCity,children:e.jsxs("div",{className:M.addCity_content,children:[e.jsx(nt,{openBlock:s,setOpenBlock:t,title:n,arrToUse:i,setArrToUse:m}),e.jsxs("div",{className:M.addCity_radio,children:[e.jsx(qe,{text:"Фиксированная доставка",id:"fixedDelivery",value:"fixedDelivery",checked:a==="fixedDelivery",onChange:c}),e.jsx(qe,{text:"Гибкая доставка",id:"flexibleDelivery",value:"flexibleDelivery",checked:a==="flexibleDelivery",onChange:c})]}),e.jsx("div",{children:a!==""&&e.jsxs("div",{children:[a==="fixedDelivery"&&e.jsx(Bt,{}),a==="flexibleDelivery"&&e.jsx(At,{})]})})]})})},Ul=()=>e.jsxs("div",{children:[e.jsx("span",{className:M.addCity_title,children:"Магазин1"}),e.jsx(El,{}),e.jsx("div",{className:M.addCity_addBtn,children:e.jsx(Le,{text:"Добавить город"})}),e.jsxs("div",{className:M.addCity_saveBtn,children:[e.jsx(at,{href:"/admin/settings/delivery/editDelivery"}),e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})]})]}),Ll=()=>{const t=fe().pathname;return e.jsx("div",{children:e.jsx("div",{className:M.delivery,children:e.jsxs("div",{className:M.delivery_wrap,children:[t==="/admin/settings/delivery"&&e.jsxs("div",{className:M.delivery_settingsAdd,children:[e.jsx("p",{children:"У вас нет  настроенных  доставок "}),e.jsx(V,{to:"/admin/settings/delivery/settingsDelivery",children:"Добавить настройку"})]}),t==="/admin/settings/delivery/settingsDelivery"&&e.jsx(Ml,{}),t==="/admin/settings/delivery/briefInfo"&&e.jsx(Ol,{}),t==="/admin/settings/delivery/fullInfo"&&e.jsx(Al,{}),t==="/admin/settings/delivery/editDelivery"&&e.jsx(Wl,{}),t==="/admin/settings/delivery/addCityPage"&&e.jsx(Ul,{})]})})})};function zl(){const{addBlockStatus:s,setAddBlockStatus:t,setAddBlockProducts:n}=le();p.useEffect(()=>{n([])},[]);const a=o=>{o.stopPropagation(),t(!s)};return e.jsxs("button",{className:`${r.homePage_addBlock} ${s?r.homePage_addBlock_active:""}`,onClick:o=>a(o),children:[e.jsx("span",{className:r.homePage_addBlock_title,children:"Добавить блок"}),e.jsx(Xt,{name:"PlusIcon"})]})}function Rl({setSure:s,setDelModalStatus:t}){return e.jsx("div",{className:r.homePage_delModal,onClick:()=>t(!1),children:e.jsxs("div",{className:r.homePage_delModal_block,onClick:n=>n.stopPropagation(),children:[e.jsx("h3",{children:"Вы уверены что хотите удалить блок ?"}),e.jsxs("div",{className:r.homePage_delModal_buttons,children:[e.jsx("button",{className:`${r.homePage_delModal_btn} ${r.homePage_delModal_del}`,onClick:()=>s(!0),children:"удалить"}),e.jsx("button",{className:`${r.homePage_delModal_btn} ${r.homePage_delModal_cancel}`,onClick:()=>t(!1),children:"отмена"})]})]})})}function Tl({item:s,delModalStatus:t,setDelModalStatus:n}){const{addBlockStatus:a,homePageBlock:o,setHomePageBlock:i,addBlockProducts:m}=le(),[c,d]=p.useState(!1),l=u=>{const f=o.filter(v=>v.id!=u);i([...f]),d(!1)};p.useEffect(()=>{c&&(l(s.id),n(!1))},[c]);const[_,h]=p.useState("");p.useEffect(()=>{h(s.title)},[]);const g=u=>{const f=o.map(v=>v.id==u.id?{id:u.id,title:_,superCategory:u.superCategory,category:u.category,subCategory:u.subCategory,products:u.products}:{...v});i([...f])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:r.homePage_wrapper,draggable:!t,children:[t&&e.jsx("div",{onDragStart:u=>u.stopPropagation(),onDragOver:u=>u.stopPropagation(),children:e.jsx(Rl,{setSure:d,setDelModalStatus:n})}),e.jsxs("div",{className:r.homePage_wrapper_title,children:[e.jsx("input",{type:"text",value:_,onChange:u=>h(u.target.value),onBlur:()=>g(s)}),e.jsx(E,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:`${r.homePage_addBlockItem} ${a?r.homePage_addBlockItem_active:""}`,children:[e.jsx("button",{className:r.homePage_addBlockItem_close,onClick:()=>n(!0),children:e.jsx(E,{name:"XMarkIcon"})}),e.jsxs("p",{className:r.homePage_addBlockItem_categories,children:[e.jsxs("span",{children:[s.superCategory.name.ru," / "]}),e.jsxs("span",{children:[s.category.name.ru," / "]}),e.jsx("span",{children:s.subCategory.name.ru})]}),e.jsx("h2",{className:r.homePage_addBlockItem_super_title,children:"Продукты"}),e.jsx("div",{className:r.homePage_addBlockItem_content,children:s.products.map(u=>{var f,v;return e.jsx("div",{className:r.homePage_addBlockItem_super_item,children:e.jsx("span",{children:(v=(f=u.nomenclature)==null?void 0:f.name)==null?void 0:v.ru})},u.id)})})]})]})})}const Fl="_modalCategory_6mlu2_1",ql="_modalCategory_block_6mlu2_10",Hl="_modalCategory_block_createTitle_6mlu2_16",Vl="_modalCategory_nav_6mlu2_33",Ql="_modalCategory_nav_title_6mlu2_40",Xl="_modalCategory_content_6mlu2_46",Gl="_modalCategory_content_message_6mlu2_53",Yl="_modalCategory_content_allActive_6mlu2_61",Zl="_modalCategory_content_more_6mlu2_61",Kl="_modalCategory_content_link_6mlu2_76",Jl="_modalCategory_content_link_product_6mlu2_76",e_="_modalCategory_content_link_active_6mlu2_111",t_="_modalCategory_content_link_product_active_6mlu2_111",n_="_modalCategory_content_item_6mlu2_124",s_="_modalCategory_content_block_6mlu2_146",o_="_modalCategory_content_block_title_6mlu2_150",a_="_settings_6mlu2_157",i_="_settings_title_6mlu2_160",r_="_settings_content_6mlu2_165",c_="_settings_content_top_6mlu2_168",l_="_settings_content_buttons_6mlu2_171",__="_settings_content_btn_6mlu2_181",d_="_settings_content_btn_cancel_6mlu2_193",m_="_settings_content_btn_save_6mlu2_196",p_="_settings_tools_6mlu2_199",u_="_settings_tools_link_6mlu2_204",h_="_settings_tools_link_active_6mlu2_219",g_="_blink_6mlu2_1",T={modalCategory:Fl,modalCategory_block:ql,modalCategory_block_createTitle:Hl,modalCategory_nav:Vl,modalCategory_nav_title:Ql,modalCategory_content:Xl,modalCategory_content_message:Gl,modalCategory_content_allActive:Yl,modalCategory_content_more:Zl,modalCategory_content_link:Kl,modalCategory_content_link_product:Jl,modalCategory_content_link_active:e_,modalCategory_content_link_product_active:t_,modalCategory_content_item:n_,modalCategory_content_block:s_,modalCategory_content_block_title:o_,settings:a_,settings_title:i_,settings_content:r_,settings_content_top:c_,settings_content_buttons:l_,settings_content_btn:__,settings_content_btn_cancel:d_,settings_content_btn_save:m_,settings_tools:p_,settings_tools_link:u_,settings_tools_link_active:h_,blink:g_};function b_({superCategory:s,category:t,superId:n,moreSuperStatus:a,setSubId:o,setLocalPicked:i,setSuperId:m,setMessageStatus:c,setSubCategories:d,fetchCategories:l}){const{setCurrentCategory:_}=xe(),[h,g]=p.useState(10),u=(v,y)=>{v.preventDefault(),l("category",1,10,y.id),d([]);const I=t.filter(N=>N.parentId==y.id);_(I),i(y),m(y.id),c(!1),o(0)},f=v=>{v.preventDefault();const y=h+10;g(y),l("super",1,y)};return e.jsxs("div",{className:T.modalCategory_content_block,children:[e.jsx("h2",{className:T.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:T.modalCategory_content_item,children:[s.map(v=>e.jsxs("div",{className:`${T.modalCategory_content_link} ${v.id==n?T.modalCategory_content_link_active:""} `,onClick:y=>u(y,v),children:[e.jsx("span",{children:v.name.ru}),e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},v.id)),a&&e.jsx("span",{className:T.modalCategory_content_more,onClick:v=>f(v),children:"Ещё..."})]})]})}function x_({superId:s,categoryId:t,setCategoryId:n,category:a,moreStatus:o,setMoreStatus:i,setSubId:m,setSubCategory:c,fetchCategories:d}){const[l,_]=p.useState(10);p.useEffect(()=>{_(10),i(!0),n(0)},[s]);const h=u=>{u.preventDefault();const f=l+10;_(f),d("category",1,f,s)},g=(u,f)=>{m(0),c(u,f)};return e.jsxs("div",{className:T.modalCategory_content_block,children:[e.jsx("h2",{className:T.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:T.modalCategory_content_item,children:[a==null?void 0:a.map(u=>e.jsxs("div",{className:`${T.modalCategory_content_link} ${u.id==t?T.modalCategory_content_link_active:""} `,onClick:f=>g(f,u),children:[e.jsx("span",{children:u.name.ru}),e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},u.id)),o&&e.jsx("span",{className:T.modalCategory_content_more,onClick:u=>h(u),children:"Ещё..."})]})]})}function f_({subId:s,setSubId:t,categoryId:n,moreSubStatus:a,setMoreSubStatus:o,subCategories:i,setSubProductsList:m,fetchCategories:c}){le();const[d]=p.useState(1),[l,_]=p.useState(10);p.useEffect(()=>{o(!0)},[n]);const h=u=>{u.preventDefault();const f=l+10;_(f),c("subCategory",d,f,n)},g=async(u,f)=>{m(u,f),t(f.id)};return e.jsxs("div",{className:T.modalCategory_content_block,children:[e.jsx("h2",{className:T.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:T.modalCategory_content_item,children:[i==null?void 0:i.map(u=>e.jsxs("div",{className:`${T.modalCategory_content_link} ${u.id==s?T.modalCategory_content_link_active:""} `,onClick:f=>g(f,u),children:[e.jsx("span",{children:u.name.ru}),e.jsx(E,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},u.id)),a&&e.jsx("span",{className:T.modalCategory_content_more,onClick:u=>h(u),children:"Ещё..."})]})]})}function v_({setSettings:s,setCancel:t}){const{setAddBlockStatus:n}=le(),a=()=>{t(),n(!1)};return e.jsxs("div",{className:T.settings_content_buttons,children:[e.jsx("button",{className:`${T.settings_content_btn} ${T.settings_content_btn_cancel}`,onClick:a,children:"Отмена"}),e.jsx(V,{to:"#",className:`${T.settings_content_btn} ${T.settings_content_btn_save}`,onClick:o=>s(o),children:"Сохранить"})]})}function j_({subId:s}){const{addBlockProducts:t,setAddBlockProducts:n}=le(),[a,o]=p.useState(!1),[i,m]=p.useState([]),[c,d]=p.useState([]),[l]=p.useState(1),[_,h]=p.useState(10),[g,u]=p.useState(!0);p.useEffect(()=>{n([]),d([]),o(!1),m([]),s!=0&&$(s,_)},[s]);const f=p.useRef([]),v=p.useRef(null),y=(x,j)=>{if(x){m([...i,j]);const b=c.filter(w=>w.id==j)[0];n([...t,b])}else if(!x&&v.current){const b=i.filter(C=>C!=j);m([...b]);const w=t.filter(C=>C.id!=j);n([...w]),o(!1),v.current.checked=!1}v.current&&x&&i.length+1==c.length&&(o(!0),v.current.checked=!0,n([...c]))},I=x=>{x.preventDefault();const j=_+10;h(j),k(s,j)},N=x=>{if(o(x),x){f.current.forEach(b=>{b&&(b.checked=x)});const j=c.map(b=>b.id);m([...j]),n([...c])}else m([]),f.current.forEach(j=>{j&&(j.checked=x)}),n([])};async function $(x,j){const b=await k(x,j);d([...b])}const k=async(x,j)=>{const b=ge.get("multi-store");try{const w=await F.get(`web-nomenclatures?multiStoreId=${b}&categoryId=${x}&page=${l}&perPage=${j}`),C=await w.data.data,S=await w.data.pagination;return C.length<S.total?d([...C]):C.length==S.total&&(d([...C]),u(!1)),w.data.data}catch(w){console.log("Ошибка при получении продуктов по id",w)}};return e.jsxs("div",{className:T.modalCategory_content_block,children:[e.jsx("h2",{className:T.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:T.modalCategory_content_item,children:[c.length>1&&e.jsxs("label",{className:T.modalCategory_content_allActive,children:[e.jsx("input",{type:"checkbox",onChange:x=>N(x.target.checked),ref:v}),e.jsx("span",{children:a?"Отключить все":"Выбрать все"})]}),c==null?void 0:c.map((x,j)=>{var b,w;return e.jsxs("label",{className:`
              ${T.modalCategory_content_link_product}
              ${a||i.includes(x.id)?T.modalCategory_content_link_active:""}
              `,children:[e.jsx("input",{type:"checkbox",onChange:C=>y(C.target.checked,x.id),ref:C=>{f.current[j]=C}}),e.jsx("span",{children:(w=(b=x==null?void 0:x.nomenclature)==null?void 0:b.name)==null?void 0:w.ru})]},x.id)}),g&&e.jsx("span",{className:T.modalCategory_content_more,onClick:x=>I(x),children:"Ещё..."})]})]})}function y_(){const{TemporaryData:s,currentProduct:t,setCurrentCategory:n,setPickedCategory:a,setCurrentSubCategory:o,setTemporaryData:i,setOpenModalCategory:m,setCurrentProduct:c}=xe(),{homePageBlock:d,setHomePageBlock:l,setAddBlockStatus:_,homePageBlockName:h,setHomePageBlockName:g,setAddBlockStatusItem:u,addBlockProducts:f,setAddBlockProducts:v}=le(),[y,I]=p.useState(0),[N,$]=p.useState(0),[k,x]=p.useState(0),[j,b]=p.useState({}),[w,C]=p.useState(!1),[S,O]=p.useState("Выберите категорию"),[te,q]=p.useState(!0),[X,he]=p.useState(!0),[ke,ve]=p.useState(!0),[Q,R]=p.useState([]),[G,ee]=p.useState([]),[ae,L]=p.useState([]);p.useEffect(()=>{Ce("super",1,10)},[]);const D=(ie,ue)=>{ie.preventDefault(),Ce("subCategory",1,10,ue.id);const je=ae.filter(ye=>ye.parentId==ue.id);o(je),b(ue),$(ue.id),C(!1)},se=(ie,ue)=>{ie.preventDefault(),b(ue),x(ue.id),C(!1)},_e=async ie=>{if(ie.preventDefault(),Object.keys(j).length===0){C(!0),O("Выберите Суперкотегорию");return}if(G.length>0&&N===0){C(!0),O("Выберите Категорию");return}if(ae.length>0&&k===0){C(!0),O("Выберите Подкотегорию");return}if(h==""){C(!0),O("Введите название блока");return}if(k){u(!0);const ue=Q.filter(Y=>Y.id==y)[0],je=G.filter(Y=>Y.id==N)[0],ye=ae.filter(Y=>Y.id==k)[0],Z={id:ce(),title:h||"Заголовок не добавлен",superCategory:ue,category:je,subCategory:ye,products:f};l([Z,...d]);const z=s.find(Y=>Y.mxikCode==(t==null?void 0:t.mxikCode)),K=s.findIndex(Y=>Y.mxikCode==(t==null?void 0:t.mxikCode));z&&(z.crmCategory=j,s.splice(K,1,z),i([...s]))}pe()},pe=()=>{a(j),m(!1),I(0),$(0),c({}),x(0),b({}),n([]),o([]),v([]),C(!1),O("Выберите категорию"),_(!1),g("")},Ce=async(ie,ue,je,ye)=>{try{const Z=ie=="super"?`https://api.mcrm.uz/api/categories?&page=${ue}&perPage=${je}`:`https://api.mcrm.uz/api/categories?parentId=${ye}&page=${ue}&perPage=${je}`,z=await He.get(Z),K=z.data.data.map(Y=>({...Y,label:ie==="super"?"Супер категория":ie==="category"?"Категория":"Субкатегория"}));if(ie==="super"){const Y=await z.data.pagination;K.length<Y.total?R([...K]):K.length==Y.total&&(R([...K]),q(!1))}if(ie==="category"){const Y=await z.data.pagination;K.length<Y.total?ee([...K]):K.length==Y.total&&(ee([...K]),he(!1))}if(ie==="subCategory"){const Y=await z.data.pagination;K.length<Y.total?L([...K]):K.length==Y.total&&(L([...K]),ve(!1))}}catch(Z){console.error(`Ошибка произошла при получении ${ie} категорий`,Z)}},Ne=p.useRef(null);return p.useEffect(()=>{Ne.current&&Ne.current.focus()},[Ne]),e.jsx("div",{className:T.modalCategory,onClick:ie=>ie.stopPropagation(),children:e.jsxs("div",{className:T.modalCategory_block,children:[e.jsx("p",{className:T.modalCategory_content_message,children:w?S:""}),e.jsxs("div",{className:`${T.modalCategory_block_createTitle}`,children:[e.jsx("input",{ref:Ne,type:"text",value:h,onChange:ie=>g(ie.target.value),placeholder:"Заголовок  блока"}),e.jsx(E,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:T.modalCategory_content,children:[e.jsx(b_,{moreSuperStatus:te,superId:y,setSubId:x,superCategory:Q,category:G,setLocalPicked:b,setSuperId:I,setMessageStatus:C,fetchCategories:Ce,setSubCategories:L}),G.length>0&&e.jsx(x_,{setSubId:x,setCategoryId:$,setMoreStatus:he,moreStatus:X,superId:y,categoryId:N,category:G,setSubCategory:D,fetchCategories:Ce}),ae.length>0&&e.jsx(f_,{subId:k,setSubId:x,moreSubStatus:ke,categoryId:N,subCategories:ae,setSubProductsList:se,setMoreSubStatus:ve,fetchCategories:Ce}),k!=0&&e.jsx(j_,{subId:k}),e.jsx(v_,{setSettings:_e,setCancel:pe})]})]})})}function k_(){const{addBlockStatus:s,homePageBlock:t,setHomePageBlock:n}=le(),[a,o]=p.useState(null),[i,m]=p.useState([]),[c,d]=p.useState(!1);p.useEffect(()=>{const u=i.length>0?i.reduce((v,y)=>y.order>v?y.order:v,-1/0):0,f=t.map((v,y)=>({...v,order:u+y+1}));m([...f])},[t]),p.useEffect(()=>{},[]);function l(u,f){o(f),u.target.style.cursor=c?"default":"grabbing"}function _(u){u.target.style.cursor=c?"default":"grab"}function h(u){u.preventDefault()}function g(u,f){u.preventDefault();const v=i&&i.map(y=>y.id===f.id?{...y,order:(a==null?void 0:a.order)||y.order}:y.id===(a==null?void 0:a.id)?{...y,order:f.order}:y).sort((y,I)=>(y&&y.order)-(I&&I.order));v&&(m(v),n(v)),o(null)}return e.jsxs("div",{className:r.homePage,children:[e.jsx(zl,{}),s&&e.jsx(y_,{}),e.jsx("div",{className:r.homePage_blocks,children:i.length>0&&i.map(u=>e.jsx("div",{draggable:!c,onDragStart:f=>l(f,u),onDragLeave:f=>_(f),onDragEnd:f=>_(f),onDragOver:f=>h(f),onDrop:f=>g(f,u),children:e.jsx(Tl,{item:u,delModalStatus:c,setDelModalStatus:d})},u.id))})]})}const w_=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"},{id:"7",label:"Главная страница",href:"/admin/settings/homePage"}];function C_(){const t=fe().pathname,{setAddBlockStatus:n}=le();return e.jsx("div",{className:r.settings,onClick:()=>n(!1),children:e.jsxs("div",{className:r.settings_content,children:[e.jsx("div",{className:r.settings_content_top,children:e.jsx("ul",{className:r.settings_tools,children:w_.map(a=>e.jsx("li",{children:e.jsx(V,{to:a.href,className:`${r.settings_tools_link} ${t.startsWith(a.href)?r.settings_tools_link_active:""}`,children:a.label})},a.id))})}),t=="/admin/settings/modules"&&e.jsx(Fo,{}),t=="/admin/settings/templates"&&e.jsx(qo,{}),t=="/admin/settings/categories"&&e.jsx(fa,{}),t.startsWith("/admin/settings/banner")&&e.jsx(qi,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(Qr,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(Ll,{}),t.startsWith("/admin/settings/homePage")&&e.jsx(k_,{})]})})}const ut=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function N_(){const[s,t]=p.useState(""),[n]=p.useState(1),[a]=p.useState(10),[o,i]=p.useState({status:!1,message:""}),[m,c]=p.useState([]);p.useEffect(()=>{s||(c([]),i({status:!1,message:""}))},[s]);async function d(l){l.preventDefault();const _=ge.get("multi-store");try{const g=await(await F.get(`nomenclatures?multiStoreId=${_}&name=${s}&page=${n}&perPage=${a}`)).data.data;g.length>0?(c([...g]),i({status:!1,message:""})):(c([]),i({status:!0,message:"Совпадений не найдено"}))}catch(h){console.log("Ошибка произошла при поиске продуктов на складе",h)}}return e.jsxs("div",{className:r.addingWrapper,children:[e.jsxs("form",{action:"",className:r.addingWrapper_form,onSubmit:l=>d(l),children:[e.jsxs("div",{className:r.addingWrapper_search,children:[e.jsx("input",{type:"text",className:r.addingWrapper_search_input,placeholder:"Поиск товара",onChange:l=>t(l.target.value),value:s}),e.jsx(E,{className:r.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:r.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:r.addingWrapper_table,children:[e.jsx("thead",{className:r.addingWrapper_thead,children:e.jsx("tr",{className:r.addingWrapper_thead_tr,children:ut.map(l=>e.jsx("th",{className:r.addingWrapper_thead_th,children:l.title},l.id))})}),e.jsx("tbody",{className:r.addingWrapper_tbody,children:m==null?void 0:m.map(l=>e.jsxs("tr",{className:r.addingWrapper_tbody_tr,children:[ut.map(_=>{var h;return e.jsxs("td",{className:r.addingWrapper_tbody_td,children:[_.title=="Наименование"?e.jsx("span",{children:(h=l==null?void 0:l.name)==null?void 0:h.ru}):"",_.title=="Штрих-код"?e.jsx("span",{children:l.mxik}):"",_.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},_.id)}),!l.hasWebNomenclature&&e.jsx("td",{className:r.addingWrapper_tbody_td,children:e.jsx(V,{to:`/admin/stock-product/${l.id}`,className:r.addingWrapper_tbody_add,children:"Добавить"})})]},l==null?void 0:l.mxik))})]}),o.status&&e.jsx("span",{className:r.addingWrapper_table_error,children:o.message})]})}const ht=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function S_(){const[s,t]=p.useState(""),[n,a]=p.useState({status:!1,message:""}),[o,i]=p.useState([]),[m]=p.useState(1),[c]=p.useState(10);p.useEffect(()=>{s||(i([]),a({status:!1,message:""}))},[s]);async function d(){const g=ge.get("multi-store");try{console.log(222,"searchText",s);const f=(await F.get(`web-nomenclatures?multiStoreId=${g}&title=${s}&page=${m}&perPage=${c}`)).data.data;console.log(999,"data",f),f.length>0?(i([...f]),a({status:!1,message:""})):(i([]),a({status:!0,message:"Совпадений не найдено"}))}catch(u){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",u)}}async function l(g,u){g.preventDefault();try{const f=await F.patch(`web-nomenclatures/${u}`,{isActive:!1});t(""),i([]),console.log("Продукт успешно отключен с веб сайта",f)}catch(f){console.log("Ошибка произошла при удалении продукта с вебсайта",f)}}async function _(g,u){g.preventDefault();try{const f=await F.patch(`web-nomenclatures/${u}`,{isActive:!0});t(""),i([]),console.log("Продукт успешно включен на веб сайта",f)}catch(f){console.log("Ошибка произошла при удалении продукта с вебсайта",f)}}const h=async g=>{g.preventDefault(),d()};return e.jsxs("div",{className:r.addingWrapper,children:[e.jsxs("form",{action:"",className:r.addingWrapper_form,onSubmit:g=>h(g),children:[e.jsxs("div",{className:r.addingWrapper_search,children:[e.jsx("input",{type:"text",className:r.addingWrapper_search_input,placeholder:"Поиск товара",onChange:g=>t(g.target.value),value:s}),e.jsx(E,{className:r.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:r.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:r.addingWrapper_table,children:[e.jsx("thead",{className:r.addingWrapper_thead,children:e.jsxs("tr",{className:r.addingWrapper_thead_tr,children:[ht.map(g=>e.jsx("th",{className:r.addingWrapper_thead_th,children:g.title},g.id)),e.jsx("th",{className:r.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:r.addingWrapper_tbody,children:o==null?void 0:o.map(g=>e.jsxs("tr",{className:r.addingWrapper_tbody_tr,children:[ht.map(u=>e.jsxs("td",{className:r.addingWrapper_tbody_td,children:[u.title=="Наименование"?e.jsx("span",{children:g.title}):"",u.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},u.id)),e.jsx("td",{className:r.addingWrapper_tbody_td,children:e.jsxs("div",{className:r.addingWrapper_tbody_buttons,children:[g.isActive&&e.jsx(V,{to:"#",className:r.addingWrapper_tbody_del,onClick:u=>l(u,g.id),children:"Отключить"}),!g.isActive&&e.jsx(V,{to:"#",className:r.addingWrapper_tbody_del,onClick:u=>_(u,g.id),children:"Включить"}),e.jsx(V,{to:`/admin/website-product/${g.id}`,className:r.addingWrapper_tbody_add,children:"Изменить"})]})})]},g==null?void 0:g.id))})]}),n.status&&e.jsx("span",{className:r.addingWrapper_table_error,children:n.message})]})}const I_=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function $_(){const t=fe().pathname;return e.jsxs("div",{className:r.products,children:[e.jsx("div",{className:r.products_buttons,children:I_.map(n=>e.jsx(V,{to:n.href,className:`${r.products_btn} ${n.href==t?r.products_btn_active:""}`,children:n.title},n.id))}),t=="/admin/product/adding/stock"&&e.jsx(N_,{}),t=="/admin/product/adding/website"&&e.jsx(S_,{})]})}const P_=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function D_(){const t=fe().pathname;return e.jsxs("div",{className:r.products,children:[e.jsx("div",{className:r.products_buttons,children:P_.map(n=>e.jsx(V,{to:n.href,className:`${r.products_btn} ${t.startsWith(`${n.href}`)||t.startsWith("/admin/product-item")?r.products_btn_active:""}`,children:n.title},n.id))}),t.startsWith("/admin/product/adding")&&e.jsx($_,{})]})}const M_="_user_title_1uizv_1",B_="_user_list_1uizv_6",O_="_user_list_link_1uizv_12",A_="_user_list_link_active_1uizv_26",W_="_user_form_1uizv_30",E_="_user_form_btn_1uizv_35",U_="_user_form_wrap_1uizv_51",L_="_user_form_input_1uizv_57",z_="_user_form_icon_1uizv_65",R_="_user_table_1uizv_68",T_="_user_table_tbody_1uizv_71",F_="_user_table_tr_1uizv_74",q_="_user_table_th_1uizv_77",H_="_user_table_td_1uizv_85",V_="_user_table_btns_1uizv_89",Q_="_user_table_btn_1uizv_89",X_="_user_table_btn_blocked_1uizv_107",G_="_modal_1uizv_111",Y_="_modal_active_1uizv_120",Z_="_modal_wrap_1uizv_123",K_="_modal_wrap_header_1uizv_131",J_="_modal_wrap_stores_1uizv_143",ed="_modal_wrap_stores_text_1uizv_165",td="_modal_btns_1uizv_169",nd="_modal_btn_1uizv_169",sd="_modal_content_1uizv_193",od="_modal_content_text_1uizv_197",ad="_versions_1uizv_206",id="_versions_block_1uizv_211",rd="_versions_block_top_1uizv_216",cd="_versions_block_top_title_1uizv_226",ld="_versions_block_top_arrow_1uizv_230",_d="_versions_block_top_arrow_active_1uizv_239",dd="_versions_block_dropdown_1uizv_242",md="_versions_block_dropdown_item_1uizv_257",pd="_versions_block_dropdown_open_1uizv_268",ud="_shop_header_1uizv_275",hd="_shop_header_title_1uizv_282",A={user_title:M_,user_list:B_,user_list_link:O_,user_list_link_active:A_,user_form:W_,user_form_btn:E_,user_form_wrap:U_,user_form_input:L_,user_form_icon:z_,user_table:R_,user_table_tbody:T_,user_table_tr:F_,user_table_th:q_,user_table_td:H_,user_table_btns:V_,user_table_btn:Q_,user_table_btn_blocked:X_,modal:G_,modal_active:Y_,modal_wrap:Z_,modal_wrap_header:K_,modal_wrap_stores:J_,modal_wrap_stores_text:ed,modal_btns:td,modal_btn:nd,modal_content:sd,modal_content_text:od,versions:ad,versions_block:id,versions_block_top:rd,versions_block_top_title:cd,versions_block_top_arrow:ld,versions_block_top_arrow_active:_d,versions_block_dropdown:dd,versions_block_dropdown_item:md,versions_block_dropdown_open:pd,shop_header:ud,shop_header_title:hd},it=({headers:s})=>e.jsx("thead",{className:A.user_table_thead,children:e.jsx("tr",{className:A.user_table_tr,children:s.map(t=>e.jsx("th",{className:A.user_table_th,children:t.title},t.id))})}),rt=()=>{const[s,t]=p.useState(""),{setUserSearch:n}=le(),a=o=>{o.preventDefault(),n(s)};return p.useEffect(()=>{s==""&&n("")},[s]),e.jsxs("form",{action:"",className:A.user_form,children:[e.jsxs("div",{className:A.user_form_wrap,children:[e.jsx("input",{type:"text",className:A.user_form_input,placeholder:"Поиск пользователей",onChange:o=>t(o.target.value),value:s}),e.jsx(E,{className:A.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:A.user_form_btn,onClick:o=>a(o),children:"Найти"})]})},ct=({arr:s,showStore:t})=>{const{usersList:n,userSearch:a,openModalAdmin:o,openAppointUser:i,shopListAdmin:m,setOpenAppointUser:c,setOpenModalAdmin:d,setUsersList:l,setEditUserAdmin:_,setShopListDropdownAdmin:h,setCloseBlock:g,setFilteredShopListAdmin:u}=le(),v=fe().pathname,[y,I]=p.useState([]);p.useEffect(()=>{let j=s;v==="/clients"?j=s.filter(b=>b.isUser):v==="/employees"&&(j=s.filter(b=>!b.isUser)),j=j==null?void 0:j.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),I(j)},[a,n,s,v]);const N=j=>{const b=n.map(w=>w.id===j?{...w,isBlocked:!w.isBlocked}:w);l(b)},$=j=>{d(!0),g(!0);const b=n.find(S=>S.id==j),w=[{id:ce(),title:"Магазин 1",order:1},{id:ce(),title:"Магазин 2",order:2},{id:ce(),title:"Магазин 3",order:3}],C=w.filter(S=>!(b!=null&&b.shopList.some(O=>O.title===S.title)));console.log("editUser",b),console.log("shopListAdminArr",w),b&&(h(b.shopList),_(b),u(C))},k=j=>{c(!0),g(!0),h([]),u(m);const b=n.find(w=>w.id==j);b&&_(b)},x=o||i;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:A.user_table_tbody,children:y.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:A.user_table_td,children:j.name}),e.jsx("td",{className:A.user_table_td,children:t?j.shopList.map(b=>e.jsxs("p",{children:[b.title," ",`(${b.position})`]},b.id)):e.jsx("p",{children:j.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:A.user_table_td,children:t?"Админ 1":j.registerDate}),e.jsx("td",{className:A.user_table_btns,children:j!=null&&j.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${A.user_table_btn} ${j.isBlocked?A.user_table_btn_blocked:""}`,onClick:()=>N(j.id),children:j.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:A.user_table_btn,onClick:()=>k(j.id),disabled:x,children:"Назначить"})]}):e.jsx("button",{className:A.user_table_btn,onClick:()=>$(j.id),style:{background:"#B5FFC7"},disabled:x,children:"Изменить"})})]},j.id))})})};function gt({color:s="black",className:t,header:n,isEnabled:a,dropdownItem:o,margin:i,versionList:m,closeBlock:c}){const{shopListAdmin:d,shopListDropdownAdmin:l,filteredShopListAdmin:_,setShopListDropdownAdmin:h,setShopListAdmin:g}=le(),[u,f]=p.useState("Выберете должность"),[v,y]=p.useState("Выберете магазин"),[I,N]=p.useState(!1);p.useEffect(()=>{o!=null&&o.position?f(o.position):f("Выберете должность")},[o==null?void 0:o.position]),p.useEffect(()=>{c||N(!1)},[c]);const $=(b,w)=>{if(o){f(b.title);const C=l.filter(O=>O.title==o.title),S=l.findIndex(O=>O.title==o.title);C[0].position=b.title,l.splice(S,1,C[0]),h(l)}else y(b.title);if(a&&!l.some(C=>C.title==b.title)){f("Выберете должность");const C={...b,originalIndex:w};h([...l,C]),g(_.filter((S,O)=>O!==w))}N(!1)},k=b=>{const w=l.filter(C=>C.id!==b.id);if(h(w),b.originalIndex!==void 0){const C=[...d];C.splice(b.originalIndex,0,b),g(C)}else{const C=[..._,b].sort((S,O)=>S.order!==void 0&&O.order!==void 0?S.order-O.order:0);g(C),console.log("arr",C)}},x=()=>{N(!I)};function j(b,w){return b.order&&w.order&&(b==null?void 0:b.order)>(w==null?void 0:w.order)?1:-1}return e.jsx("div",{className:t??A.versions,style:{marginBottom:i},children:e.jsxs("div",{className:A.versions_block,children:[n&&e.jsxs("div",{className:A.shop_header,children:[e.jsx("p",{className:A.shop_header_title,children:o==null?void 0:o.title}),e.jsx("button",{onClick:()=>o&&k(o),children:e.jsx(E,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:A.versions_block_top,children:[e.jsx("h2",{className:A.versions_block_top_title,style:{color:s},children:o?u:v}),e.jsx("button",{className:A.versions_block_top_btn,onClick:()=>x(),children:e.jsx("div",{className:`${A.versions_block_top_arrow} ${I?A.versions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${A.versions_block_dropdown} ${I?A.versions_block_dropdown_open:""}`,children:m==null?void 0:m.sort(j).map((b,w)=>e.jsx("span",{className:A.versions_block_dropdown_item,onClick:()=>$(b,w),children:b.title},w))})]})})}const lt=()=>{const{currentShopModal:s,shopListDropdownAdmin:t,shopListPositionAdmin:n,isEnabled:a,openModalAdmin:o,editUserAdmin:i,shopListAdmin:m,usersList:c,openAppointUser:d,closeBlock:l,filteredShopListAdmin:_,setCurrentShopModal:h,setShopListPositionAdmin:g,setCurrentShopPosition:u,setOpenModalAdmin:f,setShopListAdmin:v,setUsersList:y,setOpenAppointUser:I,setCloseBlock:N,setFilteredShopListAdmin:$}=le();p.useEffect(()=>{},[_]);const k=()=>{const C=c.findIndex(S=>S.id==(i==null?void 0:i.id));i&&t.every(S=>"position"in S)&&(i.shopList=t,c.splice(C,1,i),y(c),v(m),console.log("filteredShopListAdmin",_)),console.log("shopListAdmin",m),b(),t.length==0&&x()},x=()=>{if(i){i.isUser=!0,i.isEmployes=!1,i.shopList=[];const C={id:ce(),title:"",position:"пользователь"};i.shopList=[{...C}]}b()},j=()=>{const C=c.findIndex(S=>S.id==(i==null?void 0:i.id));if(i&&(i.shopList=t,c.splice(C,1,i),i.isUser=!1,i.isEmployes=!0,y(c),I(!1),!(i!=null&&i.shopList.some(S=>"position"in S)))){i.isUser=!0,i.shopList=[];const S={id:ce(),title:"",position:"пользователь"};i.shopList=[{...S}]}},b=()=>{v(m),$([]),f(!1),I(!1),N(!1),console.log("close modal")},w=p.useRef(null);return p.useEffect(()=>{const C=S=>{var O;w.current&&!((O=w==null?void 0:w.current)!=null&&O.contains(S.target))&&b()};return o||d?document.addEventListener("mousedown",C):document.removeEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[o,d]),e.jsx("div",{className:`${A.modal} ${o?A.modal_active:""} ${d?A.modal_active:""}`,children:e.jsxs("div",{ref:w,className:A.modal_wrap,children:[e.jsxs("div",{className:A.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>b(),children:e.jsx(E,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:A.modal_content,children:[e.jsxs("p",{className:A.modal_content_text,children:["Логин: ",i==null?void 0:i.name]}),e.jsxs("p",{className:A.modal_content_text,children:["Статус:",i==null?void 0:i.shopList.map(C=>e.jsx("span",{children:C.position},C.id))]}),e.jsx(gt,{color:"#717171",setVersionList:v,currentVersion:s,setCurrentVersion:h,isEnabled:a,versionList:_||m,closeBlock:l}),e.jsxs("div",{className:A.modal_wrap_stores,children:[e.jsx("p",{className:A.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((C,S)=>e.jsx(gt,{dropdownItem:C,margin:"12px",color:"#717171",versionList:n,setVersionList:g,setCurrentVersion:u,header:!0,closeBlock:l},S))]}),e.jsx("div",{className:A.modal_btns,children:d?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:A.modal_btn,onClick:()=>b(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:A.modal_btn,onClick:()=>j(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:A.modal_btn,onClick:()=>x(),children:"Уволить"}),e.jsx("button",{className:A.modal_btn,onClick:()=>k(),children:"Сохранить"})]})})]})]})})},gd=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],bd=()=>{const{usersList:s}=le();return e.jsxs(e.Fragment,{children:[e.jsx(rt,{}),e.jsxs("table",{className:A.user_table,children:[e.jsx(it,{headers:gd}),e.jsx(ct,{arr:s})]}),e.jsx(lt,{})]})},xd=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],fd=()=>{const{usersList:s}=le(),t=s.filter(n=>n.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(rt,{}),e.jsxs("table",{className:A.user_table,children:[e.jsx(it,{headers:xd}),e.jsx(ct,{arr:t})]}),e.jsx(lt,{})]})},vd=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],jd=()=>{const{usersList:s}=le(),t=s.filter(n=>n.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(rt,{}),e.jsxs("table",{className:A.user_table,children:[e.jsx(it,{headers:vd}),e.jsx(ct,{arr:t,showStore:!0})]}),e.jsx(lt,{})]})},yd=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],kd=()=>{const t=fe().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:A.users,children:e.jsxs("div",{className:A.users_header,children:[e.jsx("h2",{className:A.user_title,children:"Пользователи"}),e.jsx("ul",{className:A.user_list,children:yd.map(n=>e.jsx("li",{children:e.jsx(V,{className:`${A.user_list_link} ${t==n.href?A.user_list_link_active:""}`,to:n.href,children:n.title})},n.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(bd,{}),t=="/admin/users/clients"&&e.jsx(fd,{}),t=="/admin/users/employees"&&e.jsx(jd,{})]})]})},wd=({column:s,item:t})=>{var m;const{setOpenEditPhotoModal:n,setCurrentItemStock:a}=De(),o=()=>{n(!0),a(t),console.log("cerrent",t)},i=(m=t==null?void 0:t.photosArr)==null?void 0:m.map(c=>c.src);return e.jsxs("tr",{className:r.addingWrapper_tbody_tr,style:{gridTemplateColumns:`90px 90px repeat(${s.length}, 150px)`},children:[e.jsx("td",{className:r.addingWrapper_tbody_tr_td,children:e.jsx("input",{type:"checkbox"})}),s.map(c=>e.jsx("td",{className:r.addingWrapper_tbody_tr_image,children:c.title==="Фото"?e.jsx("img",{onClick:()=>o(),src:(i==null?void 0:i[0])==="/noPhoto.jpg"?"/noPhoto.jpg":i==null?void 0:i[0],width:40,height:40}):""},c.id))]})},Cd=()=>e.jsxs("form",{className:r.addingWrapper_form,children:[e.jsxs("div",{className:r.addingWrapper_search,children:[e.jsx("input",{type:"text",className:r.addingWrapper_search_input,placeholder:"Поиск товара"}),e.jsx(E,{className:r.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:r.addingWrapper_form_btn,children:"Найти"})]}),Nd="_photoModal_nt241_1",Sd="_photoModal_content_nt241_10",Id="_photoModal_content_block_nt241_20",$d="_photoModal_content_bottom_nt241_26",Pd="_photoModal_content_bottom_item_nt241_34",Dd="_photoModal_content_bottom_item_img_nt241_44",Md="_photoModal_content_bottom_BaseItem_nt241_49",Bd="_photoModal_content_bottom_BaseItem_img_nt241_60",Od="_photoModal_wrapBtns_nt241_64",Ad="_photoModal_wrapBtns_btn_nt241_69",we={photoModal:Nd,photoModal_content:Sd,photoModal_content_block:Id,photoModal_content_bottom:$d,photoModal_content_bottom_item:Pd,photoModal_content_bottom_item_img:Dd,photoModal_content_bottom_BaseItem:Md,photoModal_content_bottom_BaseItem_img:Bd,photoModal_wrapBtns:Od,photoModal_wrapBtns_btn:Ad};function Wd(){var $;const{imagesArrStock:s,setImagesArrStock:t,setOpenEditPhotoModal:n,currentItemStock:a,stockProductsArr:o,setCurrentItemStock:i,setStockProductsArr:m}=De(),[c,d]=p.useState(null),l=p.useRef([]),_=k=>{l.current.forEach(x=>{x&&x.getAttribute("id")==k&&x.click()})};function h(k,x){d(x)}function g(k){k.target.style.background="white"}function u(k){k.target.style.background="white"}function f(k){k.preventDefault(),k.target.style.background="lightgray"}function v(k,x){var b;k.preventDefault(),k.target.style.background="white";const j=(b=a.photosArr)==null?void 0:b.map(w=>w.id===x.id?{...w,order:(c==null?void 0:c.order)||w.order}:w.id===(c==null?void 0:c.id)?{...w,order:x.order}:w);a.photosArr=j,d(null)}function y(k,x){return k.order>x.order?1:-1}const I=k=>{var j,b,w;const x=(b=(j=k==null?void 0:k.target)==null?void 0:j.files)==null?void 0:b[0];if(x&&(x==null?void 0:x.type)==="image/jpeg"||(x==null?void 0:x.type)==="image/png"||(x==null?void 0:x.type)==="image/webp"){const C=k.target.getAttribute("id"),S=(w=a.photosArr)==null?void 0:w.map(O=>O.id===C?{...O,src:URL.createObjectURL(x)}:O);i({...a,photosArr:S})}},N=()=>{const k=o.map(x=>x.id===a.id?{...x,photosArr:a.photosArr}:x);m(k),n(!1)};return e.jsx("div",{className:we.photoModal,children:e.jsxs("div",{className:we.photoModal_content,children:[e.jsx("div",{className:we.photoModal_content_block,children:e.jsx("div",{className:we.photoModal_content_bottom,children:($=a==null?void 0:a.photosArr)==null?void 0:$.sort(y).map((k,x)=>e.jsxs("div",{draggable:!0,onDragStart:j=>h(j,k),onDragLeave:j=>g(j),onDragEnd:j=>u(j),onDragOver:j=>f(j),onDrop:j=>v(j,k),className:x==0?we.photoModal_content_bottom_BaseItem:we.photoModal_content_bottom_item,onDoubleClick:()=>_(k.id),children:[e.jsx("input",{id:k.id,type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:I,ref:j=>{l.current[x]=j}}),e.jsx("img",{src:k.src,width:x==0?150:50,height:x==0?150:50,alt:"",className:`${x==0?we.photoModal_content_bottom_baseImg:we.photoModal_content_bottom_img}`})]},k.id))})}),e.jsxs("div",{className:we.photoModal_wrapBtns,children:[e.jsx("button",{className:we.photoModal_wrapBtns_btn,onClick:k=>N(),children:"Сохранить"}),e.jsx("button",{className:we.photoModal_wrapBtns_btn,children:"Назад"})]})]})})}function Ed(){const{settingsParams:s}=xe(),{openEditPhotoModal:t,stockProductsArr:n,imagesArrStock:a,setStockProductsArr:o}=De(),[i]=p.useState(1),[m]=p.useState(10),[c,d]=p.useState([]);p.useEffect(()=>{l()},[]),p.useEffect(()=>{const x=s.filter(j=>j.checked);d(()=>[...x])},[s]);async function l(){const x=ge.get("multi-store");try{const b=await(await F.get(`nomenclatures?multiStoreId=${x}&page=${i}&perPage=${m}`)).data.data;if(n.length==0){const w=b.map(C=>({...C,photosArr:a}));o(w)}else console.log("stockProductsArr",n),console.log("массив уже добавлен")}catch(j){console.log("Ошибка произошла при получении всeх продуктов со склада",j)}}const _=p.useRef(null),[h,g]=p.useState(!1),[u,f]=p.useState(0),[v,y]=p.useState(0),I=x=>{_.current&&(g(!0),f(x.pageX-_.current.offsetLeft),y(_.current.scrollLeft))},N=()=>{g(!1)},$=()=>{g(!1)},k=x=>{if(!h||!_.current)return;x.preventDefault();const b=(x.pageX-_.current.offsetLeft-u)*2;_.current.scrollLeft=v-b};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:r.addingWrapper,children:[e.jsxs("h2",{className:r.addingWrapper_title,children:["Всего товара: ",n.length]}),e.jsx(Cd,{}),e.jsx("div",{className:r.addingWrapper_wrap_table,ref:_,onMouseDown:I,onMouseLeave:N,onMouseUp:$,onMouseMove:k,children:e.jsxs("table",{className:r.addingWrapper_table,children:[e.jsx("thead",{className:r.addingWrapper_thead,children:e.jsxs("tr",{className:r.addingWrapper_thead_tr,style:{gridTemplateColumns:`90px 90px repeat(${c.length}, 150px)`},children:[e.jsx("th",{className:r.addingWrapper_thead_th,children:e.jsx("input",{type:"checkbox"})}),c.map(x=>e.jsx("td",{className:r.addingWrapper_thead_th,children:x.title},x.id))]})}),e.jsx("tbody",{className:r.addingWrapper_tbody,children:n.map(x=>e.jsx(wd,{column:c,item:x},x.id))})]})}),t&&e.jsx(Wd,{})]})})}const bt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function Ud(){const[s,t]=p.useState(""),[n]=p.useState(1),[a]=p.useState(10),[o,i]=p.useState([]);p.useEffect(()=>{m()},[s]);async function m(){const c=ge.get("multi-store");try{const d=await F.get(`web-nomenclatures?multiStoreId=${c}&page=${n}&perPage=${a}`),l=await d.data.data;console.log("res",d),i([...l])}catch(d){console.log("Ошибка произошла при получении всх продуктов со склада",d)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:r.addingWrapper,children:[e.jsxs("h2",{className:r.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:r.addingWrapper_form,children:[e.jsxs("div",{className:r.addingWrapper_search,children:[e.jsx("input",{type:"text",className:r.addingWrapper_search_input,placeholder:"Поиск товара",onChange:c=>t(c.target.value),value:s}),e.jsx(E,{className:r.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:r.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:r.addingWrapper_table,children:[e.jsx("thead",{className:r.addingWrapper_thead,children:e.jsx("tr",{className:r.addingWrapper_thead_tr,children:bt.map(c=>e.jsx("th",{className:r.addingWrapper_thead_th,children:c.title},c.id))})}),e.jsx("tbody",{className:r.addingWrapper_tbody,children:o==null?void 0:o.map(c=>e.jsx("tr",{className:r.addingWrapper_tbody_tr,children:bt.map(d=>e.jsx("td",{className:r.addingWrapper_tbody_td,children:d.title=="Наименование"?e.jsx("span",{children:c==null?void 0:c.title}):""},d.id))},c==null?void 0:c.id))})]})]})})}function Ld(){const t=fe().pathname,{shopsStocks:n}=De();return e.jsxs("div",{className:r.layout,children:[e.jsx("ul",{className:r.layout_buttons,children:n.map(a=>e.jsx("li",{children:e.jsx(V,{to:`/admin/shops/shop/${a.url}`,className:`${r.layout_btn} ${t==`/admin/shops/shop/${a.url}`?r.layout_btn_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:r.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(Ed,{}),t==="/admin/shops/shop/website"&&e.jsx(Ud,{})]})]})}function zd(){const{shopsAmount:s,currentShop:t,setCurrentShop:n}=De(),o=fe().pathname;return e.jsxs("div",{className:r.layout,children:[e.jsx("h2",{className:r.layout_title,children:"Магазины"}),e.jsx("ul",{className:r.layout_buttons,children:s.map(i=>e.jsx("li",{children:e.jsx(V,{to:"/admin/shops/shop",className:`${r.layout_btn} ${t==i.url?r.layout_btn_active:""}`,onClick:()=>n(i.url),children:i.title})},i.id))}),o.startsWith("/admin/shops/shop")&&e.jsx("div",{className:r.layout_content,children:e.jsx(Ld,{})})]})}function Rd({item:s}){const{setErrorModal:t}=xe(),n=a=>{a.stopPropagation()};return e.jsx("div",{className:r.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:r.errorWrapper_block,onClick:n,children:[e.jsx("button",{className:r.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(E,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:s.message})]})})}function Td({localNewImage:s,setLocalNewImage:t}){const[n,a]=p.useState(null);function o(_,h){return _.order>h.order?1:-1}function i(_,h){a(h)}function m(_){_.target.style.background="white"}function c(_){_.preventDefault(),_.target.style.background="lightgray"}function d(_,h){_.preventDefault(),_.target.style.background="white";const g=s&&s.map(u=>u.id===h.id?{...u,order:(n==null?void 0:n.order)||u.order}:u.id===(n==null?void 0:n.id)?{...u,order:h.order}:u).sort((u,f)=>u.order-f.order);console.log(555,"newImages",g),g&&t(g),a(null)}const l=_=>{const h=s.filter(g=>g.id!==_);t([...h])};return p.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:s&&s.sort(o).map((_,h)=>e.jsxs("div",{className:`${r.productItem_photo} ${h==0?r.productItem_photo_active:""}`,draggable:!0,onDragStart:g=>i(g,_),onDragLeave:g=>m(g),onDragEnd:g=>m(g),onDragOver:g=>c(g),onDrop:g=>d(g,_),children:[e.jsx("div",{className:r.productItem_photo_img,children:e.jsx("img",{src:_.src?`https://api.mcrm.uz/${_.src}`:_.localSrc?_.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:r.productItem_photo_close,onClick:()=>l(_.id),children:e.jsx(E,{width:18,height:18,name:"XMarkIcon"})})]},_.id))})}function Wt({stockName:s,myMxikCode:t,localNewImage:n,setLocalNewImage:a,setLocalFormData:o,localFormData:i}){const{errorModal:m}=xe(),c=p.useRef(null),d=()=>{c.current!=null&&c.current.click()},l=async _=>{var g,u;const h=(u=(g=_==null?void 0:_.target)==null?void 0:g.files)==null?void 0:u[0];if(h&&["image/jpeg","image/png","image/webp"].includes(h.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",h);const f=new FormData;f.append("files[]",h),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",f),h&&o([...i,h]);const v=n&&(n==null?void 0:n.length)>0?n.reduce((I,N)=>N.order>I?N.order:I,-1/0):1,y=new FileReader;y.onload=I=>{var N;if((N=I.target)!=null&&N.result){const $={id:ce(),order:v?v+1:1,localSrc:URL.createObjectURL(h)},k=[...n,$];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",k),a&&a([...k]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},y.readAsDataURL(h),console.log(6,"отрисовал выбранную картинку files",h),c.current&&(c.current.value="")}};return e.jsxs("div",{className:r.productItem_top,children:[m.status&&e.jsx(Rd,{item:m}),e.jsx("h1",{className:r.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:r.productItem_basePhoto,children:n&&n.length>0?"Главное фото":""}),e.jsxs("div",{className:r.productItem_photos,children:[e.jsx(Td,{stockName:s,myMxikCode:t,localNewImage:n,setLocalNewImage:a}),e.jsxs("div",{className:`${r.productItem_photo} ${r.productItem_add}`,onClick:d,children:[e.jsx(E,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:r.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:l,ref:c})]})]}),e.jsx("p",{className:r.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function Et({localCategory:s,productName:t,productDescription:n,setProductDescription:a,setProductName:o,myBarcode:i,vendorCode:m,setVendorCode:c,myPrice:d}){var y,I,N,$;const{pickedCategory:l,currentProduct:_,setArticleModal:h,setOpenModalCategory:g}=xe();p.useEffect(()=>{(l||s)&&v()},[l,s]);const[u,f]=p.useState(""),v=async()=>{try{const x=(await F.get(`categories/${l.id?l.id:s}`)).data;f(x.name.ru)}catch(k){console.log("Ошибка произошла при получении категонии по id",k)}};return e.jsxs("div",{className:r.productItem_left,children:[e.jsxs("div",{className:r.productItem_left_info,children:[e.jsxs("div",{className:r.productItem_left_item,children:[e.jsxs("div",{className:r.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:r.productItem_left_item_top_input,value:m||"",onChange:k=>c(k.target.value)})]}),e.jsx("div",{className:r.productItem_left_item_bottom,children:e.jsx("button",{className:r.productItem_left_item_button,onClick:()=>h(!0),children:"Изменить"})})]}),e.jsxs("div",{className:r.productItem_left_item,children:[e.jsxs("div",{className:r.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:u||((I=(y=_==null?void 0:_.category)==null?void 0:y.name)!=null&&I.ru?($=(N=_==null?void 0:_.category)==null?void 0:N.name)==null?void 0:$.ru:"")})]}),e.jsx("div",{className:r.productItem_left_item_bottom,children:e.jsx("button",{className:r.productItem_left_item_button,onClick:()=>g(!0),children:l!=null&&l.name||_!=null&&_.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:r.productItem_left_item,children:e.jsxs("div",{className:r.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:i})]})}),e.jsx("div",{className:r.productItem_left_item,children:e.jsxs("div",{className:r.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:d})]})}),e.jsx("div",{className:r.productItem_left_item,children:e.jsxs("div",{className:r.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:r.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:r.productItem_left_form,children:[e.jsxs("label",{className:r.productItem_left_form_label,children:[e.jsx("span",{className:r.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:r.productItem_left_form_input,type:"text",value:t||"",onChange:k=>o(k.target.value)})]}),e.jsxs("label",{className:r.productItem_left_form_label,children:[e.jsx("span",{className:r.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:k=>a(k.target.value),value:n||"",className:r.productItem_left_form_textarea}),e.jsx("p",{className:r.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function Fd({color:s="black",title:t="",extraOptionsList:n,className:a,openBlock:o,setOpenBlock:i,setExtraOptionsList:m}){const c=p.useRef([]);p.useEffect(()=>{c.current.length>0&&d()},[n]);const d=()=>{n&&n.forEach(_=>{c.current.forEach(h=>{h.name==_.title&&(h.checked=_.isActive)})})},l=(_,h)=>{const g=JSON.parse(JSON.stringify(n));g.forEach(u=>{u.title==h&&(u.isActive=!u.isActive)}),m&&m(g)};return e.jsxs("div",{className:a??H.versionExtraOptions,children:[t&&e.jsx("span",{className:H.versionExtraOptions_title,children:t}),e.jsxs("div",{className:H.versionExtraOptions_block,children:[e.jsxs("div",{className:H.versionExtraOptions_block_top,onClick:()=>i&&i(!o),children:[e.jsx("h2",{className:H.versionExtraOptions_block_top_title,style:{color:s},children:t||"Выберите параметры"}),e.jsx("button",{className:H.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${H.versionExtraOptions_block_top_arrow} ${o?H.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${H.versionExtraOptions_block_dropdown} ${o?H.versionExtraOptions_block_dropdown_open:""}`,children:n&&n.map((_,h)=>e.jsxs("label",{className:H.versionExtraOptions_block_dropdown_item,children:[_.title,e.jsx("input",{ref:g=>{g&&(c.current[h]=g)},type:"checkbox",name:_.title,"data-type":_.title,onChange:g=>l(g,_.title)})]},_.id))})]})]})}function qd({color:s="black",title:t="",versionList:n,className:a}){const[o,i]=p.useState(!1),[m,c]=p.useState("");p.useEffect(()=>{n==null||n.forEach(_=>{_.isActive&&c(_.title)})},[]);const d=()=>{i(!o)},l=_=>{n==null||n.forEach(h=>h.isActive=!1),n==null||n.forEach(h=>{h.title==_.title&&(h.isActive=!0,c(h.title))}),d()};return e.jsxs("div",{className:a??H.version3,children:[e.jsx("span",{className:H.version3_title,children:t}),e.jsxs("div",{className:H.version3_block,children:[e.jsxs("div",{className:H.version3_block_top,onClick:()=>d(),children:[e.jsx("h2",{className:H.version3_block_top_title,style:{color:s},children:m||"Выбрать"}),e.jsx("button",{className:H.version3_block_top_btn,children:e.jsx("div",{className:`${H.version3_block_top_arrow} ${o?H.version3_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${H.version3_block_dropdown} ${o?H.version3_block_dropdown_open:""}`,style:{height:`${n&&n.length==1?"50px":""}`},children:n&&n.map(_=>e.jsx("span",{className:H.version3_block_dropdown_item,onClick:()=>l(_),children:n.length>1?_.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},_.id))})]})]})}function Hd({extraOptionsStatus:s,localCategory:t,setExtraOptionsStatus:n,extraOptions:a}){const[o,i]=p.useState(!1);return p.useEffect(()=>{},[t]),e.jsxs("div",{className:r.productItem_right_item,children:[e.jsxs("div",{className:r.productItem_right_top,onClick:()=>n(!s),children:[e.jsx("h5",{className:r.productItem_right_title,children:"Доп. параметры"}),e.jsx(Se,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:s})]}),e.jsxs("div",{className:`${r.productItem_right_bottom_items} ${s?r.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:r.productItem_right_bottom_item,children:e.jsx(Fd,{color:"",extraOptionsList:a,openBlock:o,setOpenBlock:i})}),a.map(m=>{if(m.isActive)return e.jsxs("div",{className:r.productItem_right_bottom_item,children:[e.jsx(qd,{color:"",title:m.title,versionList:m.type}),e.jsx("button",{className:r.productItem_right_bottom_del,children:"Удалить"})]},m.id)})]})]})}function xt({color:s="black",title:t="",versionList:n=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:o,currentVersion:i,setOpenBlock:m,setCurrentVersion:c,setVersionList:d}){const l=_=>{c&&c(_.title);const h=n.map(f=>({id:f.id,title:f.title,isActive:!1})),g=h.find(f=>f.id==_.id),u=h.findIndex(f=>f.id==_.id);g&&(g.isActive=!0,h.splice(u,1,g),d&&d(h))};return e.jsxs("div",{className:a??H.version3,children:[e.jsx("span",{className:H.version3_title,children:t}),e.jsxs("div",{className:H.version3_block,children:[e.jsxs("div",{className:H.version3_block_top,children:[e.jsx("h2",{className:H.version3_block_top_title,style:{color:s},children:i}),e.jsx("button",{className:H.version3_block_top_btn,onClick:()=>m&&m(!o),children:e.jsx("div",{className:`${H.version3_block_top_arrow} ${o?H.version3_block_top_arrow_active:""}`,children:e.jsx(E,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${H.version3_block_dropdown} ${o?H.version3_block_dropdown_open:""}`,children:n.map(_=>e.jsx("span",{className:H.version3_block_dropdown_item,onClick:()=>l(_),children:_.title},_.id))})]})]})}function Vd({brieflyProductStatus:s,setBrieflyProductStatus:t}){return e.jsxs("div",{className:r.productItem_right_item,children:[e.jsxs("div",{className:r.productItem_right_top,onClick:()=>t(!s),children:[e.jsx("h5",{className:r.productItem_right_title,children:"Коротко о товаре"}),e.jsx(Se,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:s})]}),e.jsx("div",{className:`${r.productItem_right_bottom_items} ${s?r.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${r.productItem_right_bottom_item} ${r.productItem_right_bottom_row}`,children:[e.jsx(xt,{color:"",title:"Объем, л"}),e.jsx(xt,{color:"",title:"Кол-во в упаковке"})]})})]})}function Ut({currentProduct:s,extraOptionsStatus:t,setExtraOptionsStatus:n,brieflyProductStatus:a,setBrieflyProductStatus:o,localCategory:i,extraOptions:m,setExtraOptions:c}){return e.jsxs("div",{className:r.productItem_right,children:[e.jsx("div",{className:r.productItem_right_item,children:e.jsxs("div",{className:r.productItem_right_top,children:[e.jsx("h5",{className:r.productItem_right_title,children:"Коментарии"}),e.jsx(Se,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(Hd,{extraOptionsStatus:t,setExtraOptionsStatus:n,localCategory:i,extraOptions:m,setExtraOptions:c,currentProduct:s}),e.jsx(Vd,{brieflyProductStatus:a,setBrieflyProductStatus:o})]})}function Lt({stockName:s,setAdminSettings:t}){return e.jsxs("div",{className:r.settings_content_buttons,children:[e.jsx(V,{to:s=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${r.settings_content_btn} ${r.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${r.settings_content_btn} ${r.settings_content_btn_save}`,onClick:()=>t(),children:s=="website"?"Сохранить":"Добавить"})]})}function Qd(){const{setArticleModal:s}=xe();return e.jsxs("div",{className:r.articleModal_block_nav,children:[e.jsx("h2",{className:r.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>s(!1),children:e.jsx(E,{name:"XMarkIcon"})})]})}function Xd({productName:s}){const[t]=p.useState(""),[n]=p.useState("");return e.jsxs("div",{className:r.articleModal_block_info,children:[e.jsxs("div",{className:r.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:s})]}),e.jsxs("div",{className:r.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:r.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[n,"1%"]})]})]})}function zt({item:s}){return e.jsxs("div",{className:r.articleModal_block_recommended_item,children:[e.jsx("h3",{className:r.articleModal_block_recommended_item_title,children:s.title}),e.jsxs("div",{className:r.articleModal_block_recommended_content,children:[e.jsx("div",{className:r.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:r.articleModal_block_recommended_info,children:[e.jsxs("div",{className:r.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:r.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:r.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:r.articleModal_block_recommended_article,children:s.article})]})]})}const Gd=[{id:ce(),title:"Молоко Nestle",article:"#DF262515"}];function Yd(){return e.jsxs("div",{className:r.articleModal_block_recommended,children:[e.jsx("h2",{className:r.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:r.articleModal_block_recommended_list,children:Gd.map(s=>e.jsx(zt,{item:s},s.id))})]})}function Zd(){return e.jsx("div",{className:r.articleModal_block_search,children:e.jsxs("div",{className:r.articleModal_block_search_box,children:[e.jsxs("div",{className:r.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(E,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:r.articleModal_block_search_btn,children:"Найти"})]})})}const Kd=[{id:ce(),title:"Молоко Nestle",article:"#DF262515"},{id:ce(),title:"Молоко Nestle",article:"#DF262515"},{id:ce(),title:"Молоко Nestle",article:"#DF262515"}];function Jd(){return e.jsx("div",{className:r.articleModal_block_found,children:Kd.map(s=>e.jsx(zt,{item:s},s.id))})}function Rt({productName:s}){return e.jsx("div",{className:r.articleModal,children:e.jsxs("div",{className:r.articleModal_block,children:[e.jsx(Qd,{}),e.jsx(Xd,{productName:s}),e.jsx(Yd,{}),e.jsx(Zd,{}),e.jsx(Jd,{}),e.jsx("div",{className:r.articleModal_block_buttonBox,children:e.jsx("button",{className:r.articleModal_block_button,children:"Выбрать"})})]})})}function em(){const s=ft(),t=fe(),{id:n}=vt(),{openModalCategory:a}=xe(),{pickedCategory:o,currentProduct:i,setErrorModal:m,setCurrentProduct:c,setPickedCategory:d,articleModal:l}=xe(),[_,h]=p.useState(""),[g,u]=p.useState(0),[f,v]=p.useState(0),[y,I]=p.useState(Number(n)),[N,$]=p.useState(!1),[k,x]=p.useState([]),[j,b]=p.useState(!1),[w,C]=p.useState(""),[S,O]=p.useState(""),[te,q]=p.useState([]),[X,he]=p.useState([]);async function ke(){try{return await(await F.get(`nomenclatures/${n}`)).data}catch(L){console.log("Ошибка произошла при получении продукта со склада по id",L)}}p.useEffect(()=>{d({})},[t.pathname]),p.useEffect(()=>{ve()},[n,o]);async function ve(){var D;const L=await ke();L&&(h((D=L==null?void 0:L.name)==null?void 0:D.ru),c({...L}),I(L==null?void 0:L.categoryId),u(L==null?void 0:L.barcode),v(L==null?void 0:L.price))}const Q=async()=>{if(i){o.id&&(await G(),I(o.id));const L=await ee(X),D=w||await ae(),se={nomenclatureId:i.id,title:_,article:D||null,images:L.length>0?[...L]:null,description:S||null,document:"string"};console.log(333333,"newProduct",se),await R(se),d({}),x([]),s("/admin/product/adding/stock",{replace:!0})}else m({status:!0,message:'"Выберите категорию"'})};async function R(L){try{await F.post("web-nomenclatures",L)}catch(D){console.log("Ошибка произошла при добавлении web nomenclatures",D)}}async function G(){try{await F.patch(`nomenclatures/${n}`,{categoryId:o.id}),I(o.id)}catch(L){console.log("Ошибка произошла при изменении котегории на складе",L)}}const ee=async L=>{if(L){const D=new FormData;L.forEach((se,_e)=>{D.append(`files[${_e}]`,se)});try{return await(await F.post("media-objects/uploads",D)).data}catch(se){console.error("Ошибка при добавлении картинок на сервер",se)}}},ae=async()=>{const L=ge.get("multi-store");try{const D=await F.get(`web-credentials/${L}`);return console.log("fetchArticle res",D),D.data.article}catch(D){console.log("Ошибка при получении артикля",D)}};return e.jsxs("div",{className:r.productItem,children:[a&&e.jsx(jt,{}),e.jsx(Wt,{stockName:"stock",myMxikCode:n,localFormData:X,setLocalFormData:he,localNewImage:te,setLocalNewImage:q}),e.jsxs("div",{className:r.productItem_settings,children:[e.jsx(Et,{myPrice:f,setMyPrice:v,myBarcode:g,setMyBarcode:u,localCategory:y,productName:_,productDescription:S,setProductDescription:O,setProductName:h,vendorCode:w,setVendorCode:C}),e.jsx(Ut,{extraOptionsStatus:N,setExtraOptionsStatus:$,brieflyProductStatus:j,setBrieflyProductStatus:b,localCategory:y,extraOptions:k,setExtraOptions:x,currentProduct:i})]}),e.jsx(Lt,{stockName:"stock",setAdminSettings:Q}),l&&e.jsx(Rt,{productName:_})]})}function tm(){const s=ft(),t=fe(),{id:n}=vt(),{openModalCategory:a}=xe(),{pickedCategory:o,webCurrentProduct:i,setWebCurrentProduct:m,setErrorModal:c,setPickedCategory:d,articleModal:l}=xe(),[_,h]=p.useState(""),[g,u]=p.useState(0),[f,v]=p.useState(0),[y,I]=p.useState(0),[N,$]=p.useState(Number(n)),[k,x]=p.useState(!1),[j,b]=p.useState([]),[w,C]=p.useState(!1),[S,O]=p.useState(""),[te,q]=p.useState(""),[X,he]=p.useState([]),[ke,ve]=p.useState([]);async function Q(){try{return await(await F.get(`web-nomenclatures/${n}`)).data}catch(D){console.log("Ошибка произошла при получении продукта с сайта по id",D)}}p.useEffect(()=>{d({})},[t.pathname]),p.useEffect(()=>{R()},[n]);async function R(){var se,_e,pe,Ce,Ne,ie,ue;const D=await Q();if(D){v((se=D==null?void 0:D.nomenclature)==null?void 0:se.price),u((_e=D==null?void 0:D.nomenclature)==null?void 0:_e.barcode),I((pe=D==null?void 0:D.nomenclature)==null?void 0:pe.id),O(D==null?void 0:D.article),h(D!=null&&D.title?D==null?void 0:D.title:(Ne=(Ce=D==null?void 0:D.nomenclature)==null?void 0:Ce.name)==null?void 0:Ne.ru),m({...D}),$((ue=(ie=D==null?void 0:D.nomenclature)==null?void 0:ie.category)==null?void 0:ue.id);let je=1;const ye=D.images?D.images.map(Z=>({id:ce(),order:je++,src:Z})):[];he(ye),je=1,q(D.description?D.description:"")}}const G=async()=>{if(i||o.label){o.id&&await ae();const D=await L(ke);console.log(15,"получил ответ от функции fetchPhotos() images",D),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const se=X.filter(pe=>pe.src).map(pe=>{if(pe.src)return pe.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",se);const _e={nomenclatureId:i.id,title:_,article:S,images:D.length>0||se.length>0?[...D]:null,description:te,document:"string"};console.log(18,"создал новый объект продукта newProduct",_e),console.log(18,"localNewImage",X),ee(_e),d({}),b([]),s("/admin/product/adding/website",{replace:!0})}else c({status:!0,message:'"Выберите категорию"'})};async function ee(D){try{await F.patch(`web-nomenclatures/${n}`,D)}catch(se){console.log("Ошибка произошла при добавлении web nomenclatures",se)}}async function ae(){try{await F.patch(`nomenclatures/${y}`,{categoryId:o.id}),$(o.id)}catch(D){console.log("Ошибка произошла при изменении котегории на сайте",D)}}const L=async D=>{if(D){const se=new FormData;D.forEach((_e,pe)=>{se.append(`files[${pe}]`,_e)});try{return await(await F.post("media-objects/uploads",se)).data}catch(_e){console.error("Ошибка при добавлении картинок на сервер",_e)}}};return e.jsxs("div",{className:r.productItem,children:[a&&e.jsx(jt,{}),e.jsx(Wt,{stockName:"website",myMxikCode:n,localNewImage:X,setLocalNewImage:he,localFormData:ke,setLocalFormData:ve}),e.jsxs("div",{className:r.productItem_settings,children:[e.jsx(Et,{myPrice:f,setMyPrice:v,myBarcode:g,setMyBarcode:u,localCategory:N,productName:_,productDescription:te,setProductDescription:q,setProductName:h,vendorCode:S,setVendorCode:O}),e.jsx(Ut,{extraOptionsStatus:k,setExtraOptionsStatus:x,brieflyProductStatus:w,setBrieflyProductStatus:C,localCategory:N,extraOptions:j,setExtraOptions:b,currentProduct:i})]}),e.jsx(Lt,{stockName:"website",setAdminSettings:G}),l&&e.jsx(Rt,{productName:_})]})}function pm(){const{user:s}=Vt(),{setCurrentShop:t}=De(),a=fe().pathname,{setTemporaryData:o,setCheckedProducts:i}=xe();p.useEffect(()=>{o([]),i([])},[]),p.useEffect(()=>{a.startsWith("/admin/shops")||t("0")},[a]);const m=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(E,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(E,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(E,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(E,{name:"BuildingStorefrontIcon"}),isActive:!1}],[c,d]=p.useState(m),l=_=>{const h=c.map(u=>({id:u.id,label:u.label,href:u.href,icon:u.icon,isActive:!1})),g=h.find(u=>u.id==_);g&&(g.isActive=!0),d(h)};return e.jsxs(e.Fragment,{children:[e.jsx(Qt,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:r.wrapper,children:[e.jsx("h1",{className:r.wrapper_title,children:s==null?void 0:s.username}),e.jsxs("div",{className:r.content,children:[e.jsx("div",{className:r.content_left,children:e.jsx("ul",{className:r.tools,children:c.map(_=>e.jsx("li",{children:e.jsxs(V,{to:_.href,className:`${r.tools_link} ${a.startsWith(_.href)?r.tools_link_active:""}`,onClick:()=>l(_.id),children:[_.icon,_.label]})},_.id))})}),a.startsWith("/admin")&&e.jsxs("div",{className:r.content_right,children:[a.startsWith("/admin/settings")&&e.jsx(C_,{}),a.startsWith("/admin/users")&&e.jsx(kd,{}),a.startsWith("/admin/shops")&&e.jsx(zd,{}),a.startsWith("/admin/product")&&e.jsx(D_,{}),a.startsWith("/admin/stock-product")&&e.jsx(em,{}),a.startsWith("/admin/website-product")&&e.jsx(tm,{})]})]})]})})]})}export{pm as default};
