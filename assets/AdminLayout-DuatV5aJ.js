import{a as ie,j as e,r as p,w as Fe,L as H,c as T,b as ge,x as xe,e as ce,y as le,z as zt,A as Ft,B as Tt,u as ht,C as gt}from"./index-Ch0w1gqK.js";import{u as qt}from"./userStore-oWC8KPZP.js";import{C as W}from"./CustomIcon-DSx6vhij.js";import{s as Ye}from"./shop1Store-Cl6La7Z5.js";import{c as Te,a as Ke,H as Vt}from"./Header-C5Yn_eNV.js";import{C as Ne,D as at,a as ve,s as K,b as V,M as bt}from"./Modal-DnT9dUFH.js";import{b as be}from"./bannerStore-DrLkLib_.js";import{C as qe}from"./CustomIcon-UT8oax-U.js";import{C as Ht}from"./CustomIcon-CDybqkqC.js";import"./XMarkIcon-DjrrFDlF.js";const Xt="_wrapper_ldu5l_1",Gt="_wrapper_title_ldu5l_4",Zt="_content_ldu5l_10",Jt="_content_left_ldu5l_16",Qt="_content_right_ldu5l_19",Yt="_tools_ldu5l_45",Kt="_tools_link_ldu5l_50",es="_tools_link_active_ldu5l_63",ts="_settings_ldu5l_86",ss="_settings_title_ldu5l_89",ns="_settings_content_ldu5l_94",os="_settings_content_top_ldu5l_97",as="_settings_content_buttons_ldu5l_100",rs="_settings_content_btn_ldu5l_110",cs="_settings_content_btn_cancel_ldu5l_122",ls="_settings_content_btn_save_ldu5l_125",is="_settings_tools_ldu5l_128",_s="_settings_tools_link_ldu5l_133",ds="_settings_tools_link_active_ldu5l_148",us="_wrapperModules_ldu5l_153",ps="_item_ldu5l_160",ms="_item_top_ldu5l_165",hs="_item_top_title_ldu5l_176",gs="_item_top_arrow_ldu5l_180",bs="_item_top_arrow_active_ldu5l_188",xs="_item_block_ldu5l_191",fs="_item_block_item_ldu5l_202",vs="_item_block_open_ldu5l_205",js="_item_onOff_ldu5l_211",ys="_item_delivery_ldu5l_211",ks="_versions_block_ldu5l_217",ws="_versions_block_top_ldu5l_222",Cs="_versions_block_top_title_ldu5l_232",Ns="_versions_block_top_arrow_ldu5l_237",Is="_versions_block_top_arrow_active_ldu5l_246",Ss="_versions_block_dropdown_ldu5l_249",$s="_versions_block_dropdown_item_ldu5l_260",Ps="_versions_block_dropdown_open_ldu5l_271",Ds="_versions_block_onOff_ldu5l_277",Bs="_versions_block_delivery_ldu5l_277",Ms="_categoriesDropDown_title_ldu5l_283",Os="_categoriesDropDown_item_ldu5l_286",As="_categoriesDropDown_item_top_ldu5l_292",Ws="_categoriesDropDown_item_top_title_ldu5l_303",Es="_categoriesDropDown_item_top_arrow_ldu5l_307",Us="_categoriesDropDown_item_top_arrow_active_ldu5l_314",Ls="_categoriesDropDown_item_block_ldu5l_317",Rs="_categoriesDropDown_item_block_line_ldu5l_326",zs="_categoriesDropDown_item_block_active_ldu5l_338",Fs="_categoriesDropDown_item_block_open_ldu5l_341",Ts="_categoriesDropDown_item_onOff_ldu5l_346",qs="_categoriesDropDown_item_delivery_ldu5l_346",Vs="_products_buttons_ldu5l_352",Hs="_products_btn_ldu5l_358",Xs="_products_btn_active_ldu5l_369",Gs="_productItem_title_ldu5l_374",Zs="_productItem_basePhoto_ldu5l_379",Js="_productItem_photos_ldu5l_385",Qs="_productItem_photos_desc_ldu5l_391",Ys="_productItem_photo_ldu5l_385",Ks="_productItem_photo_img_ldu5l_406",en="_productItem_photo_close_ldu5l_417",tn="_productItem_photo_active_ldu5l_429",sn="_productItem_add_ldu5l_433",nn="_productItem_add_text_ldu5l_441",on="_productItem_settings_ldu5l_446",an="_productItem_left_info_ldu5l_450",rn="_productItem_left_item_ldu5l_458",cn="_productItem_left_item_top_ldu5l_462",ln="_productItem_left_item_top_input_ldu5l_483",_n="_productItem_left_item_bottom_ldu5l_489",dn="_productItem_left_form_ldu5l_502",un="_productItem_left_form_label_ldu5l_509",pn="_productItem_left_form_title_ldu5l_513",mn="_productItem_left_form_input_ldu5l_519",hn="_productItem_left_form_textarea_ldu5l_527",gn="_productItem_left_form_size_ldu5l_535",bn="_productItem_right_ldu5l_543",xn="_productItem_right_item_ldu5l_550",fn="_productItem_right_top_ldu5l_555",vn="_productItem_right_title_ldu5l_562",jn="_productItem_right_bottom_items_ldu5l_568",yn="_productItem_right_bottom_items_active_ldu5l_577",kn="_productItem_right_bottom_item_ldu5l_568",wn="_productItem_right_bottom_row_ldu5l_603",Cn="_productItem_right_bottom_del_ldu5l_608",Nn="_banner_nav_list_ldu5l_619",In="_banner_nav_link_ldu5l_625",Sn="_banner_nav_link_active_ldu5l_640",$n="_addingWrapper_title_ldu5l_645",Pn="_addingWrapper_form_ldu5l_650",Dn="_addingWrapper_form_btn_ldu5l_655",Bn="_addingWrapper_search_ldu5l_672",Mn="_addingWrapper_search_input_ldu5l_678",On="_addingWrapper_search_icon_ldu5l_686",An="_addingWrapper_table_ldu5l_689",Wn="_addingWrapper_table_error_ldu5l_692",En="_addingWrapper_thead_tr_ldu5l_696",Un="_addingWrapper_thead_th_ldu5l_700",Ln="_addingWrapper_tbody_tr_ldu5l_707",Rn="_addingWrapper_tbody_td_ldu5l_710",zn="_addingWrapper_tbody_buttons_ldu5l_724",Fn="_addingWrapper_tbody_add_ldu5l_729",Tn="_addingWrapper_tbody_del_ldu5l_736",qn="_errorWrapper_ldu5l_744",Vn="_errorWrapper_block_ldu5l_753",Hn="_errorWrapper_block_close_ldu5l_763",Xn="_layout_title_ldu5l_774",Gn="_layout_buttons_ldu5l_779",Zn="_layout_btn_ldu5l_785",Jn="_layout_btn_active_ldu5l_799",Qn="_editBlock_ldu5l_804",Yn="_articleModal_ldu5l_816",Kn="_articleModal_block_ldu5l_825",eo="_articleModal_block_nav_ldu5l_832",to="_articleModal_block_title_ldu5l_839",so="_articleModal_block_info_ldu5l_844",no="_articleModal_block_info_item_ldu5l_847",oo="_articleModal_block_recommended_ldu5l_862",ao="_articleModal_block_recommended_title_ldu5l_865",ro="_articleModal_block_recommended_item_ldu5l_871",co="_articleModal_block_recommended_item_title_ldu5l_875",lo="_articleModal_block_recommended_content_ldu5l_881",io="_articleModal_block_recommended_img_ldu5l_886",_o="_articleModal_block_recommended_info_ldu5l_896",uo="_articleModal_block_recommended_desc_ldu5l_901",po="_articleModal_block_recommended_article_ldu5l_915",mo="_articleModal_block_search_ldu5l_920",ho="_articleModal_block_search_box_ldu5l_923",go="_articleModal_block_search_input_ldu5l_928",bo="_articleModal_block_search_btn_ldu5l_940",xo="_articleModal_block_found_ldu5l_950",fo="_articleModal_block_buttonBox_ldu5l_956",vo="_articleModal_block_button_ldu5l_956",jo="_homePage_wrapper_title_ldu5l_973",yo="_homePage_blocks_ldu5l_983",ko="_homePage_addBlock_ldu5l_989",wo="_homePage_addBlock_title_ldu5l_1006",Co="_homePage_addBlock_active_ldu5l_1009",No="_homePage_addBlockItem_ldu5l_1013",Io="_homePage_addBlockItem_close_ldu5l_1022",So="_homePage_addBlockItem_super_ldu5l_1028",$o="_homePage_addBlockItem_super_title_ldu5l_1032",Po="_homePage_addBlockItem_super_block_ldu5l_1037",Do="_homePage_addBlockItem_super_item_ldu5l_1062",Bo="_homePage_addBlockItem_content_ldu5l_1078",Mo="_homePage_addBlockItem_categories_ldu5l_1102",Oo="_homePage_delModal_ldu5l_1109",Ao="_homePage_delModal_block_ldu5l_1119",Wo="_homePage_delModal_buttons_ldu5l_1129",Eo="_homePage_delModal_btn_ldu5l_1139",Uo="_homePage_delModal_del_ldu5l_1148",Lo="_homePage_delModal_cancel_ldu5l_1151",c={wrapper:Xt,wrapper_title:Gt,content:Zt,content_left:Jt,content_right:Qt,tools:Yt,tools_link:Kt,tools_link_active:es,settings:ts,settings_title:ss,settings_content:ns,settings_content_top:os,settings_content_buttons:as,settings_content_btn:rs,settings_content_btn_cancel:cs,settings_content_btn_save:ls,settings_tools:is,settings_tools_link:_s,settings_tools_link_active:ds,wrapperModules:us,item:ps,item_top:ms,item_top_title:hs,item_top_arrow:gs,item_top_arrow_active:bs,item_block:xs,item_block_item:fs,item_block_open:vs,item_onOff:js,item_delivery:ys,versions_block:ks,versions_block_top:ws,versions_block_top_title:Cs,versions_block_top_arrow:Ns,versions_block_top_arrow_active:Is,versions_block_dropdown:Ss,versions_block_dropdown_item:$s,versions_block_dropdown_open:Ps,versions_block_onOff:Ds,versions_block_delivery:Bs,categoriesDropDown_title:Ms,categoriesDropDown_item:Os,categoriesDropDown_item_top:As,categoriesDropDown_item_top_title:Ws,categoriesDropDown_item_top_arrow:Es,categoriesDropDown_item_top_arrow_active:Us,categoriesDropDown_item_block:Ls,categoriesDropDown_item_block_line:Rs,categoriesDropDown_item_block_active:zs,categoriesDropDown_item_block_open:Fs,categoriesDropDown_item_onOff:Ts,categoriesDropDown_item_delivery:qs,products_buttons:Vs,products_btn:Hs,products_btn_active:Xs,productItem_title:Gs,productItem_basePhoto:Zs,productItem_photos:Js,productItem_photos_desc:Qs,productItem_photo:Ys,productItem_photo_img:Ks,productItem_photo_close:en,productItem_photo_active:tn,productItem_add:sn,productItem_add_text:nn,productItem_settings:on,productItem_left_info:an,productItem_left_item:rn,productItem_left_item_top:cn,productItem_left_item_top_input:ln,productItem_left_item_bottom:_n,productItem_left_form:dn,productItem_left_form_label:un,productItem_left_form_title:pn,productItem_left_form_input:mn,productItem_left_form_textarea:hn,productItem_left_form_size:gn,productItem_right:bn,productItem_right_item:xn,productItem_right_top:fn,productItem_right_title:vn,productItem_right_bottom_items:jn,productItem_right_bottom_items_active:yn,productItem_right_bottom_item:kn,productItem_right_bottom_row:wn,productItem_right_bottom_del:Cn,banner_nav_list:Nn,banner_nav_link:In,banner_nav_link_active:Sn,addingWrapper_title:$n,addingWrapper_form:Pn,addingWrapper_form_btn:Dn,addingWrapper_search:Bn,addingWrapper_search_input:Mn,addingWrapper_search_icon:On,addingWrapper_table:An,addingWrapper_table_error:Wn,addingWrapper_thead_tr:En,addingWrapper_thead_th:Un,addingWrapper_tbody_tr:Ln,addingWrapper_tbody_td:Rn,addingWrapper_tbody_buttons:zn,addingWrapper_tbody_add:Fn,addingWrapper_tbody_del:Tn,errorWrapper:qn,errorWrapper_block:Vn,errorWrapper_block_close:Hn,layout_title:Xn,layout_buttons:Gn,layout_btn:Zn,layout_btn_active:Jn,editBlock:Qn,articleModal:Yn,articleModal_block:Kn,articleModal_block_nav:eo,articleModal_block_title:to,articleModal_block_info:so,articleModal_block_info_item:no,articleModal_block_recommended:oo,articleModal_block_recommended_title:ao,articleModal_block_recommended_item:ro,articleModal_block_recommended_item_title:co,articleModal_block_recommended_content:lo,articleModal_block_recommended_img:io,articleModal_block_recommended_info:_o,articleModal_block_recommended_desc:uo,articleModal_block_recommended_article:po,articleModal_block_search:mo,articleModal_block_search_box:ho,articleModal_block_search_input:go,articleModal_block_search_btn:bo,articleModal_block_found:xo,articleModal_block_buttonBox:fo,articleModal_block_button:vo,homePage_wrapper_title:jo,homePage_blocks:yo,homePage_addBlock:ko,homePage_addBlock_title:wo,homePage_addBlock_active:Co,homePage_addBlockItem:No,homePage_addBlockItem_close:Io,homePage_addBlockItem_super:So,homePage_addBlockItem_super_title:$o,homePage_addBlockItem_super_block:Po,homePage_addBlockItem_super_item:Do,homePage_addBlockItem_content:Bo,homePage_addBlockItem_categories:Mo,homePage_delModal:Oo,homePage_delModal_block:Ao,homePage_delModal_buttons:Wo,homePage_delModal_btn:Eo,homePage_delModal_del:Uo,homePage_delModal_cancel:Lo};function Ro(){const{modulesCashRegisterStatus:n,deliveryStatus:t,cashRegisterVersionList:s,cashRegisterCurrentVersion:a,openBlockCashRegister:o,openBlockCashRegisterVersion:l,openBlockCart:u,cartVersionList:r,modulesCartStatus:_,cartCurrentVersion:i,openBlockCartVersion:d,setCartVersionList:m,setCartCurrentVersion:g,setModulesCartStatus:h,setOpenBlockCart:x,setOpenBlockCartVersion:f,setDeliveryStatus:k,setOpenBlockCashRegister:$,setCashRegisterVersionList:N,setModulesCashRegisterStatus:B,setCashRegisterCurrentVersion:P,setOpenBlockCashRegisterVersion:j}=ie(),v=()=>{x(!u)},b=()=>{$(!o)};return e.jsxs("div",{className:c.wrapperModules,children:[e.jsxs("div",{className:c.item,children:[e.jsxs("div",{className:c.item_top,onClick:()=>v(),children:[e.jsx("h2",{className:c.item_top_title,children:"Корзина"}),e.jsx("button",{className:c.item_top_btn,onClick:()=>v(),children:e.jsx("div",{className:`${c.item_top_arrow} ${u?c.item_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${c.item_block} ${u?c.item_block_open:""}`,children:[e.jsxs("div",{className:c.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:c.item_shell,onClick:()=>h(!_),children:e.jsx(Ne,{status:_,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(at,{color:"rgb(137, 250, 135)",openBlock:d,setOpenBlock:f,title:"Выберите версию",versionList:r,currentVersion:i,setCurrentVersion:g,setVersionList:m}),e.jsxs("div",{className:c.item_delivery,children:[e.jsx("span",{children:"Доставка"}),e.jsx("div",{className:c.item_shell,onClick:()=>k(!t),children:e.jsx(Ne,{status:t,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]})]})]}),e.jsxs("div",{className:c.item,children:[e.jsxs("div",{className:c.item_top,onClick:()=>b(),children:[e.jsx("h2",{className:c.item_top_title,children:"Кacca"}),e.jsx("button",{className:c.item_top_btn,onClick:()=>b(),children:e.jsx("div",{className:`${c.item_top_arrow} ${o?c.item_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsxs("div",{className:`${c.item_block} ${o?c.item_block_open:""}`,children:[e.jsxs("div",{className:c.item_onOff,children:[e.jsx("span",{children:"Выкл / Вкл"}),e.jsx("div",{className:c.item_shell,onClick:()=>B(!n),children:e.jsx(Ne,{status:n,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]}),e.jsx(at,{color:"rgb(137, 250, 135)",openBlock:l,setOpenBlock:j,title:"Выберите версию",versionList:s,currentVersion:a,setCurrentVersion:P,setVersionList:N})]})]})]})}function zo(){const{templates:n,setTemplates:t}=ie(),[s,a]=p.useState([...n]);p.useEffect(()=>{a([...n])},[n]);const o=r=>{const _=s.map(i=>i.id===r?{...i,open:!i.open}:i);a(_)},l=(r,_)=>{const i=s.map(d=>d.id===r?{...d,isActive:!0,templateThemes:d.templateThemes.map(m=>m.id===_?{...m,isActive:!0}:{...m,isActive:!1})}:{...d,isActive:!1,templateThemes:d.templateThemes.map(m=>({...m,isActive:!1}))});a(i)};function u(){t(s)}return e.jsxs("div",{className:c.wrapperModules,children:[s.map(r=>e.jsxs("div",{className:c.item,children:[e.jsxs("div",{className:c.item_top,onClick:()=>o(r.id),children:[e.jsx("h2",{className:c.item_top_title,children:r.title}),e.jsx("button",{className:c.item_top_btn,onClick:()=>o(r.id),children:e.jsx("div",{className:`${c.item_top_arrow} ${r.open?c.item_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${c.item_block} ${r.open?c.item_block_open:""}`,children:r.templateThemes.map(_=>e.jsxs("div",{className:c.item_onOff,children:[e.jsx("span",{children:_.title}),e.jsx("div",{className:c.item_shell,onClick:()=>l(r.id,_.id),children:e.jsx(Ne,{status:_.isActive,backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgba(193, 193, 193, 1)"})})]},_.id))})]},r.id)),e.jsxs("div",{className:c.settings_content_buttons,children:[e.jsx("button",{className:`${c.settings_content_btn} ${c.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${c.settings_content_btn} ${c.settings_content_btn_save}`,onClick:()=>u(),children:"Сохранить"})]})]})}function Fo({title:n,setOpenModal:t}){const{currentCategory:s}=ie(),[a,o]=p.useState(""),{selectedSuperCategory:l,selectedCategory:u}=Te();p.useEffect(()=>{s=="Котегории"&&l&&r(l),s=="Подкотегории"&&u&&r(u)},[s,l,u]);const r=async i=>{try{const m=await(await Fe.get(`https://api.mcrm.uz/api/categories/${i}`)).data;o(m.name.ru)}catch(d){console.error("Ошибка произошла при получении названия варианта категории",d)}},_=()=>{t&&t(!0)};return e.jsxs("div",{className:c.editBlock,onClick:_,children:[a||n,e.jsx(W,{name:"PencilIcon"})]})}const To="_modalCategory_xzv82_1",qo="_modalCategory_block_xzv82_10",Vo="_modalCategory_nav_xzv82_16",Ho="_modalCategory_nav_title_xzv82_23",Xo="_modalCategory_content_xzv82_29",Go="_modalCategory_content_message_xzv82_36",Zo="_modalCategory_content_link_xzv82_44",Jo="_modalCategory_content_link_active_xzv82_72",Qo="_modalCategory_content_item_xzv82_82",Yo="_modalCategory_content_block_xzv82_104",Ko="_modalCategory_content_block_title_xzv82_108",ea="_settings_xzv82_115",ta="_settings_title_xzv82_118",sa="_settings_content_xzv82_123",na="_settings_content_top_xzv82_126",oa="_settings_content_buttons_xzv82_129",aa="_settings_content_btn_xzv82_139",ra="_settings_content_btn_cancel_xzv82_151",ca="_settings_content_btn_save_xzv82_154",la="_settings_tools_xzv82_157",ia="_settings_tools_link_xzv82_162",_a="_settings_tools_link_active_xzv82_177",oe={modalCategory:To,modalCategory_block:qo,modalCategory_nav:Vo,modalCategory_nav_title:Ho,modalCategory_content:Xo,modalCategory_content_message:Go,modalCategory_content_link:Zo,modalCategory_content_link_active:Jo,modalCategory_content_item:Qo,modalCategory_content_block:Yo,modalCategory_content_block_title:Ko,settings:ea,settings_title:ta,settings_content:sa,settings_content_top:na,settings_content_buttons:oa,settings_content_btn:aa,settings_content_btn_cancel:ra,settings_content_btn_save:ca,settings_tools:la,settings_tools_link:ia,settings_tools_link_active:_a};function da({setCancel:n}){return e.jsxs("div",{className:oe.modalCategory_nav,children:[e.jsx("h2",{className:oe.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:oe.modalCategory_nav_close,onClick:n,children:e.jsx(W,{width:24,height:24,name:"XMarkIcon"})})]})}function ua({superCategory:n,category:t,setMessageStatus:s,fetchCategories:a}){const{currentCategory:o}=ie(),{selectedSuperCategory:l,setSelectedSuperCategory:u}=Te(),{setCurrentCategory:r}=ve(),[_,i]=p.useState(10),d=(g,h)=>{if(g.preventDefault(),o==="Подкотегории"){a("category",1,10,h.id);const x=t.filter(f=>f.parentId==h.id);r(x),u(h.id),s(!1)}u(h.id)},m=g=>{g.preventDefault();const h=_+10;i(h),a("super",1,h)};return e.jsxs("div",{className:oe.modalCategory_content_block,children:[e.jsx("h2",{className:oe.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:oe.modalCategory_content_item,children:[n.map(g=>e.jsxs(H,{to:"#",className:`${oe.modalCategory_content_link} ${g.id==l?oe.modalCategory_content_link_active:""} `,onClick:h=>d(h,g),children:[g.name.ru,e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},g.id)),e.jsx(H,{to:"#",className:oe.modalCategory_content_link,onClick:g=>m(g),children:"Ещё..."})]})]})}function pa({categoryId:n,category:t,setCategoryId:s,setSubCategory:a,fetchCategories:o}){const{selectedSuperCategory:l}=Te(),[u,r]=p.useState(10),_=d=>{d.preventDefault();const m=u+10;r(m),o("category",1,m,l)},i=(d,m)=>{a(d,m),s(m.id)};return t.length>0&&e.jsxs("div",{className:oe.modalCategory_content_block,children:[e.jsx("h2",{className:oe.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:oe.modalCategory_content_item,children:[t==null?void 0:t.map(d=>e.jsxs(H,{to:"#",className:`${oe.modalCategory_content_link} ${d.id==n?oe.modalCategory_content_link_active:""} `,onClick:m=>i(m,d),children:[d.name.ru,e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},d.id)),e.jsx(H,{to:"#",className:oe.modalCategory_content_link,onClick:d=>_(d),children:"Ещё..."})]})]})}function ma({setSettings:n,setCancel:t}){return e.jsxs("div",{className:oe.settings_content_buttons,children:[e.jsx("button",{className:`${oe.settings_content_btn} ${oe.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx(H,{to:"#",className:`${oe.settings_content_btn} ${oe.settings_content_btn_save}`,onClick:n,children:"Сохранить"})]})}function ha({setOpenModal:n}){const{currentCategory:t}=ie(),{selectedSuperCategory:s,setSelectedSuperCategory:a,selectedCategory:o,setSelectedCategory:l}=Te(),[u,r]=p.useState(0),[_,i]=p.useState(!1),[d,m]=p.useState("Выберите категорию"),[g,h]=p.useState([]),[x,f]=p.useState([]);p.useEffect(()=>{B("super",1,10),o&&r(o)},[]);const k=(j,v)=>{j.preventDefault(),B("subCategory",1,10,v.id),i(!1)},$=()=>{t=="Котегории"?a(s):t=="Подкотегории"&&l(u),N()},N=()=>{i(!1),m("Выберите категорию"),n(!1)},B=async(j,v,b,w)=>{try{const y=j=="super"?`https://api.mcrm.uz/api/categories?&page=${v}&perPage=${b}`:`https://api.mcrm.uz/api/categories?parentId=${w}&page=${v}&perPage=${b}`,A=(await Fe.get(y)).data.data.map(te=>({...te,label:j==="super"?"Супер категория":j==="category"?"Категория":"Субкатегория"}));j==="super"&&h([...A]),j==="category"&&f([...A])}catch(y){console.error(`Ошибка произошла при получении ${j} категорий`,y)}},P=()=>{n(!1)};return e.jsx("div",{className:oe.modalCategory,onClick:P,children:e.jsxs("div",{className:oe.modalCategory_block,onClick:j=>j.stopPropagation(),children:[e.jsx(da,{setCancel:N}),e.jsx("p",{className:oe.modalCategory_content_message,children:_?d:""}),e.jsxs("div",{className:oe.modalCategory_content,children:[e.jsx(ua,{superCategory:g,category:x,setMessageStatus:i,fetchCategories:B}),t==="Подкотегории"&&e.jsx(pa,{categoryId:u,category:x,setCategoryId:r,setSubCategory:k,fetchCategories:B}),e.jsx(ma,{setSettings:$,setCancel:N})]})]})})}function ga(){const[n,t]=p.useState(!1),[s,a]=p.useState(!1),{currentCategory:o,categoriesStatus:l,categories:u,setCategoriesStatus:r,setCurrentCategory:_}=ie();p.useEffect(()=>{t(o==="Котегории"||o==="Подкотегории")},[o]);const i=d=>{_(d.title),d.title==="Котегории"||d.title==="Подкотегории"?t(!0):t(!1)};return e.jsxs("div",{className:c.categoriesDropDown,children:[e.jsx("h2",{className:c.categoriesDropDown_title,children:"Настройки каталога"}),s&&e.jsx(ha,{setOpenModal:a}),e.jsxs("div",{className:c.categoriesDropDown_item,children:[e.jsxs("div",{className:c.categoriesDropDown_item_top,onClick:()=>r(!l),children:[e.jsx("h2",{className:c.categoriesDropDown_item_top_title,children:o}),e.jsx("button",{className:c.categoriesDropDown_item_top_btn,onClick:()=>r(!l),children:e.jsx("div",{className:`${c.categoriesDropDown_item_top_arrow} ${l?c.categoriesDropDown_item_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${c.categoriesDropDown_item_block} ${l?c.categoriesDropDown_item_block_open:""}`,children:u.map(d=>e.jsx("div",{className:`${c.categoriesDropDown_item_block_line} ${d.title==o?c.categoriesDropDown_item_block_active:""}`,onClick:()=>i(d),children:d.title},d.id))})]}),n&&e.jsx(Fo,{title:"Выберите вариант",setOpenModal:a})]})}const ba="_banner_xoj3o_1",xa="_banner_title_xoj3o_6",fa="_products_banner_xoj3o_11",va="_products_banner_wrap_xoj3o_14",ja="_products_banner_wrap_btn_xoj3o_20",ya="_products_banner_wrap_filter_xoj3o_31",ka="_products_banner_wrap_filter_text_xoj3o_41",wa="_products_banner_form_xoj3o_49",Ca="_products_banner_form_wrap_xoj3o_54",Na="_products_banner_form_wrap_btn_xoj3o_60",Ia="_products_banner_form_wrap_input_xoj3o_76",Sa="_products_banner_form_wrap_icon_xoj3o_84",$a="_table_xoj3o_88",Pa="_table_tbody_xoj3o_93",Da="_table_tbody_tr_xoj3o_98",Ba="_table_tbody_tr_active_xoj3o_101",Ma="_table_tbody_img_xoj3o_104",Oa="_table_tr_xoj3o_109",Aa="_table_th_xoj3o_112",Wa="_table_td_xoj3o_123",Ea="_table_td_edit_xoj3o_131",Ua="_table_btn_xoj3o_137",La="_versions_xoj3o_145",Ra="_versions_block_xoj3o_150",za="_versions_block_top_xoj3o_155",Fa="_versions_block_top_title_xoj3o_165",Ta="_versions_block_top_arrow_xoj3o_169",qa="_versions_block_top_arrow_active_xoj3o_178",Va="_versions_block_dropdown_xoj3o_181",Ha="_versions_block_dropdown_item_xoj3o_196",Xa="_versions_block_dropdown_open_xoj3o_207",Ga="_add_banner_xoj3o_214",Za="_add_banner_header_xoj3o_222",Ja="_add_banner_header_title_xoj3o_226",Qa="_add_banner_content_xoj3o_230",Ya="_add_banner_content_product_xoj3o_233",Ka="_add_banner_content_link_xoj3o_255",er="_add_banner_content_info_xoj3o_263",tr="_add_banner_content_info_text_xoj3o_267",sr="_add_banner_content_download_xoj3o_273",nr="_add_banner_content_download_link_xoj3o_281",or="_add_banner_content_btns_xoj3o_293",ar="_add_banner_content_btn_xoj3o_293",rr="_category_wrap_xoj3o_311",cr="_modalCategory_xoj3o_315",lr="_modalCategory_block_xoj3o_323",ir="_modalCategory_nav_xoj3o_328",_r="_modalCategory_nav_title_xoj3o_335",dr="_modalCategory_content_xoj3o_341",ur="_modalCategory_content_message_xoj3o_348",pr="_modalCategory_content_link_xoj3o_356",mr="_modalCategory_content_link_active_xoj3o_384",hr="_modalCategory_content_item_xoj3o_394",gr="_modalCategory_content_block_xoj3o_416",br="_modalCategory_content_block_title_xoj3o_420",xr="_add_link_xoj3o_427",fr="_add_link_title_xoj3o_430",vr="_add_link_input_xoj3o_434",jr="_modal_btn_xoj3o_443",I={banner:ba,banner_title:xa,products_banner:fa,products_banner_wrap:va,products_banner_wrap_btn:ja,products_banner_wrap_filter:ya,products_banner_wrap_filter_text:ka,products_banner_form:wa,products_banner_form_wrap:Ca,products_banner_form_wrap_btn:Na,products_banner_form_wrap_input:Ia,products_banner_form_wrap_icon:Sa,table:$a,table_tbody:Pa,table_tbody_tr:Da,table_tbody_tr_active:Ba,table_tbody_img:Ma,table_tr:Oa,table_th:Aa,table_td:Wa,table_td_edit:Ea,table_btn:Ua,versions:La,versions_block:Ra,versions_block_top:za,versions_block_top_title:Fa,versions_block_top_arrow:Ta,versions_block_top_arrow_active:qa,versions_block_dropdown:Va,versions_block_dropdown_item:Ha,versions_block_dropdown_open:Xa,add_banner:Ga,add_banner_header:Za,add_banner_header_title:Ja,add_banner_content:Qa,add_banner_content_product:Ya,add_banner_content_link:Ka,add_banner_content_info:er,add_banner_content_info_text:tr,add_banner_content_download:sr,add_banner_content_download_link:nr,add_banner_content_btns:or,add_banner_content_btn:ar,category_wrap:rr,modalCategory:cr,modalCategory_block:lr,modalCategory_nav:ir,modalCategory_nav_title:_r,modalCategory_content:dr,modalCategory_content_message:ur,modalCategory_content_link:pr,modalCategory_content_link_active:mr,modalCategory_content_item:hr,modalCategory_content_block:gr,modalCategory_content_block_title:br,add_link:xr,add_link_title:fr,add_link_input:vr,modal_btn:jr};function xt({color:n="black",title:t="",versionList:s=[],className:a,openBlock:o,setOpenBlock:l,setVersionList:u}){const[r,_]=p.useState(s[0].title),{setChangeCategoryStyles:i}=be(),d=m=>{const g=s.map(h=>({...h,isOpen:h.id===m.id}));m.title=="Категория"&&i(!0),_(m.title),u(g),l(!1)};return e.jsxs("div",{className:a??I.versions,children:[e.jsx("span",{children:t}),e.jsxs("div",{className:I.versions_block,children:[e.jsxs("div",{className:I.versions_block_top,onClick:()=>l(!o),style:{cursor:"pointer"},children:[e.jsx("h2",{className:I.versions_block_top_title,style:{color:n},children:r}),e.jsx("button",{className:I.versions_block_top_btn,children:e.jsx("div",{className:`${I.versions_block_top_arrow} ${o?I.versions_block_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${I.versions_block_dropdown} ${o?I.versions_block_dropdown_open:""}`,children:s.map(m=>e.jsx(H,{className:I.versions_block_dropdown_item,to:m.href,onClick:()=>d(m),children:m.title},m.id))})]})]})}function Je({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:o=500,scale:l=1.1,status:u=!1}){const r={width:`${n}px`,height:`${n/2-n/20}px`,background:u?s:a,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},_={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${u?s:a}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${l}) translateX(${u?"110%":"0"})`};return e.jsx("div",{style:r,children:e.jsx("div",{style:_})})}const Ae=({arr:n=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],arrToUse:t,selectionMode:s,isActive:a=!1,isEdit:o=!1,isCategory:l,isLinks:u,setArrToUse:r,setPickedProduct:_,setPickedProductActive:i,bannersArrProduct:d})=>{const{selectedProductId:m,setSelectedProductId:g,setCurrentProductOpen:h,clearPickedProductsArr:x,setOpenAddBanner:f}=be(),[k,$]=p.useState(null),N=b=>d==null?void 0:d.some(w=>w.type_id===b),B=async(b,w)=>{if(s==="byId"&&(_==null||_(b)),o&&w)try{if(!N(w==null?void 0:w.id)){const A=await(await T.patch(`web-banners/${m}`,{typeId:b})).data;console.log("data",A);const te=d==null?void 0:d.map(q=>q.id===m?A:q);h(!1),r==null||r(te)}}catch(y){console.log(y)}$(b)},P=(b,w)=>{s==="productId"&&(f(!0),i==null||i(b),B==null||B(b),$(b),x(),g(b))},j=b=>b.typeId!==void 0,v=async(b,w,y)=>{b.stopPropagation();try{await T.patch(`web-banners/${w}`,{isActive:!y.isActive})}catch(A){console.log(A)}const C=t.map(A=>A.id===w?{...A,isActive:!A.isActive}:A);r==null||r(C)};return e.jsxs("table",{className:I.table,children:[e.jsx("thead",{className:I.table_thead,children:e.jsx("tr",{className:I.table_tr,children:n.map(b=>e.jsx("th",{className:I.table_th,children:b.title},b.id))})}),e.jsx("tbody",{className:I.table_tbody,children:t==null?void 0:t.map(b=>{var w;return e.jsxs("tr",{className:`${I.table_tbody_tr}
            ${!o&&k==b.id?I.table_tbody_tr_active:""}
            `,style:{cursor:a||l||u?"pointer":"default"},onClick:()=>P(b.id),children:[e.jsx("td",{className:I.table_td,children:e.jsxs("div",{style:{width:"70px",height:"40px"},children:[s==="byId"&&(b==null?void 0:b.title),o?b.title:"",a&&e.jsx("img",{className:I.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),l&&e.jsx("img",{className:I.table_tbody_img,src:`https://api.mcrm.uz/${b.image}`,alt:"Banner"}),u&&e.jsx("img",{className:I.table_tbody_img,src:b.image??"",alt:"Banner"})]})}),e.jsxs("td",{className:I.table_td,children:[l?b.title:"",a?b.title:(w=b.nomenclature)==null?void 0:w.price,u&&b.title]}),e.jsx("td",{className:I.table_td,children:a?"":b.crmAmount}),e.jsx("td",{className:I.table_td,children:l?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:y=>{const C=b;C.id&&v(y,C.id,C)},children:e.jsx(Je,{width:62,status:b.isActive})}):a?e.jsx("div",{className:I.table_td_edit,children:e.jsx("div",{onClick:y=>{const C=b;C.id&&v(y,C.id,C)},children:e.jsx(Je,{width:62,status:b.isActive})})}):u?e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:y=>{const C=b;C.id&&v(y,C.id,C)},children:e.jsx(Je,{width:62,status:b.isActive})}):e.jsx("button",{className:I.table_btn,onClick:()=>B(b.id,b),children:o?"Заменить":"Выбрать"})})]},j(b)?b.typeId:b.id)})})]})};function yr({setCancel:n}){return e.jsxs("div",{className:K.modalCategory_nav,children:[e.jsx("h2",{className:K.modalCategory_nav_title,children:"Котегория"}),e.jsx("button",{className:K.modalCategory_nav_close,onClick:n,children:e.jsx(W,{width:24,height:24,name:"XMarkIcon"})})]})}function kr({superCategory:n,category:t,superId:s,setLocalPicked:a,setSuperId:o,setMessageStatus:l,setSubCategories:u,fetchCategories:r,setSuperCategoryObj:_,getBannersItems:i}){const{changeCategoryStyles:d,categoriesArr:m,setCategoriesArr:g,setActiveCategory:h,setActiveCategoryTitle:x,setOpenAddBanner:f}=be(),{setCurrentCategory:k}=ve(),[$,N]=p.useState(10),B=(j,v)=>{j.preventDefault(),r("category",1,10,v.id),u([]);const b=t.filter(w=>w.parentId==v.id);if(k(b),a(v),o(v.id),l(!1),d&&v.label&&(h(v),x(v.name.ru)),d){const w=m.filter(y=>y.label!==v.label);w.push(v),g(w)}_==null||_(v),f(!0),i==null||i()},P=()=>{const j=$+10;N(j),r("super",1,j),console.log("addPage",j)};return e.jsxs("div",{className:K.modalCategory_content_block,children:[e.jsx("h2",{className:K.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:K.modalCategory_content_item,children:[n.map(j=>e.jsxs(H,{to:"#",className:`${K.modalCategory_content_link} ${j.id==s?K.modalCategory_content_link_active:""} `,onClick:v=>B(v,j),children:[j.name.ru,e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},j.id)),e.jsx(H,{to:"#",className:K.modalCategory_content_link,onClick:()=>P(),children:"Ещё..."})]})]})}function wr({superId:n,categoryId:t,category:s,setSubCategory:a,fetchCategories:o}){const[l,u]=p.useState(10),r=()=>{const i=l+10;u(i),o("category",1,i,n),console.log("addPage",i,n)},_=(i,d)=>{a(i,d)};return s.length>0&&e.jsxs("div",{className:K.modalCategory_content_block,children:[e.jsx("h2",{className:K.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:K.modalCategory_content_item,children:[s==null?void 0:s.map(i=>e.jsxs(H,{to:"#",className:`${K.modalCategory_content_link} ${i.id==t?K.modalCategory_content_link_active:""} `,onClick:d=>_(d,i),children:[i.name.ru,e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},i.id)),e.jsx(H,{to:"#",className:K.modalCategory_content_link,onClick:()=>r(),children:"Ещё..."})]})]})}function Cr({subId:n,categoryId:t,subCategories:s,setSubProductsList:a,fetchCategories:o}){const[l,u]=p.useState(10),r=()=>{const _=l+10;u(_),o("subCategory",1,_,t),console.log("addPage",_)};return s.length>0&&e.jsxs("div",{className:K.modalCategory_content_block,children:[e.jsx("h2",{className:K.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:K.modalCategory_content_item,children:[s==null?void 0:s.map(_=>e.jsxs(H,{to:"#",className:`${K.modalCategory_content_link} ${_.id==n?K.modalCategory_content_link_active:""} `,onClick:i=>a(i,_),children:[_.name.ru,e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},_.id)),e.jsx(H,{to:"#",className:K.modalCategory_content_link,onClick:()=>r(),children:"Ещё..."})]})]})}function Nr({setSettings:n,setCancel:t}){return e.jsxs("div",{className:K.settings_content_buttons,children:[e.jsx("button",{className:`${K.settings_content_btn} ${K.settings_content_btn_cancel}`,onClick:t,children:"Отмена"}),e.jsx("button",{className:`${K.settings_content_btn} ${K.settings_content_btn_save}`,onClick:n,children:"Сохранить"})]})}function Ve({isProduct:n,isCategory:t=!1}){const{setOpenModalCategory:s,setPickedCategory:a,setCurrentCategory:o,setCurrentSubCategory:l}=ve(),{changeCategoryStyles:u,categoriesArr:r,pickedProducts:_,setCategoriesArr:i,setPickedProducts:d,setActiveCategory:m,setActiveCategoryTitle:g,setBannersArr1:h,bannersArr1:x,setOpenModalCategoryBanner:f}=be(),k=u?I:K,[$,N]=p.useState(0),[B,P]=p.useState(0),[j,v]=p.useState(0),[b,w]=p.useState({}),[y,C]=p.useState(!1),[A,te]=p.useState("Выберите категорию"),[q,G]=p.useState([]),[he,ke]=p.useState([]),[fe,X]=p.useState([]),[z,Z]=p.useState(null),[ee,ae]=p.useState(null),[L,S]=p.useState(null);p.useEffect(()=>{console.log("pickedProducts",_)},[_]),p.useEffect(()=>{ye("super",1,10)},[]);const[ne]=p.useState(1),[_e]=p.useState(10);async function pe(){const Q=ge.get("multi-store");try{const R=await T.get(`web-banners?multiStoreId=${Q}&page=${ne}&perPage=${_e}`);h(R.data.data),console.log("bannersArr1",x)}catch(R){console.log("error",R)}}const we=(Q,R)=>{Q.preventDefault(),ye("subCategory",1,10,R.id);const Y=fe.filter(J=>J.parentId==R.id);if(l(Y),w(R),P(R.id),C(!1),u&&R.label&&(m(R),g(R.name.ru)),u){const J=r.filter(Be=>Be.label!==R.label);J.push(R),i(J)}ae(R),pe()},Ce=(Q,R)=>{if(Q.preventDefault(),w(R),v(R.id),C(!1),u&&R.label&&(m(R),g(R.name.ru)),u){const Y=r.filter(J=>J.name.ru!==R.name.ru);Y.push(R),console.log("newCategories",Y),i(Y)}S(R),pe()};async function re(Q){const R=ge.get("multi-store");try{const Y=await T.get(`web-nomenclatures?multiStoreId=${R}&categoryId=${Q}&page=${ne}&perPage=${_e}`);d(Y.data.data)}catch(Y){console.log("error",Y)}}const me=()=>{if(Object.keys(b).length===0){C(!0),te("Выберите Суперкотегорию");return}if(he.length>0&&B===0){C(!0),te("Выберите Категорию");return}if(fe.length>0&&j===0){C(!0),te("Выберите Подкотегорию");return}re(b.id),console.log("localPicked",b);const Q=[];z&&Q.push(z),ee&&Q.push(ee),L&&Q.push(L),i(Q),je()},je=()=>{a(b),s(!1),N(0),P(0),v(0),w({}),o([]),l([]),C(!1),te("Выберите категорию"),f(!1)},ye=async(Q,R,Y,J)=>{try{const Be=Q=="super"?`https://api.mcrm.uz/api/categories?&page=${R}&perPage=${Y}`:`https://api.mcrm.uz/api/categories?parentId=${J}&page=${R}&perPage=${Y}`,Ze=(await Fe.get(Be)).data.data.map(Rt=>({...Rt,label:Q==="super"?"Супер категория":Q==="category"?"Категория":"Субкатегория"}));Q==="super"&&G([...Ze]),Q==="category"&&ke([...Ze]),Q==="subCategory"&&X([...Ze])}catch(Be){console.error(`Ошибка произошла при получении ${Q} категорий`,Be)}};return e.jsx("div",{className:k.modalCategory,children:e.jsxs("div",{className:k.modalCategory_block,children:[!u&&e.jsx(yr,{setCancel:je}),e.jsx("p",{className:k.modalCategory_content_message,children:y?A:""}),e.jsxs("div",{className:k.modalCategory_content,children:[e.jsx(kr,{superId:$,superCategory:q,category:he,setLocalPicked:w,setSuperId:N,setMessageStatus:C,fetchCategories:ye,setSubCategories:X,setSuperCategoryObj:Z,getBannersItems:pe}),e.jsx(wr,{superId:$,categoryId:B,category:he,setSubCategory:we,fetchCategories:ye}),e.jsx(Cr,{subId:j,categoryId:B,subCategories:fe,setSubProductsList:Ce,fetchCategories:ye}),!t&&e.jsx(Nr,{setSettings:me,setCancel:je})]})]})})}const Pe=({title:n,currentProductEdit:t,isEdit:s,isCategory:a,isLinks:o,linkTextEdit:l,deleteBanner:u,isProduct:r,arrToUse:_,setArrToUse:i,typeOfBanner:d})=>{const{currentProductTable:m,changeCategoryStyles:g,categoriesArr:h,linksPageBannerText:x,openLinksPage:f,activeCategory:k,bannersArr1:$,setCurrentProductOpen:N,setOpenAddBanner:B}=be(),[P,j]=p.useState(null),[v,b]=p.useState(""),[w,y]=p.useState(null);async function C(X){if(X){const z=new FormData;z.append("files[]",X);try{const ee=await(await T.post("media-objects/uploads",z)).data;return console.log("data",ee),b(ee[0]),ee}catch(Z){console.log("не удалось добавить картинку на сервер",Z)}}}async function A(X){try{const Z=await(await T.post("web-banners",X)).data;console.log("data",Z)}catch(z){console.log("ошибка при добовления баннера к продукту",z)}}async function te(X,z){try{return await(await T.patch(`web-banners/${X.id}`,{image:z})).data}catch(Z){console.log(Z)}}const q=X=>{if(X.target.files&&X.target.files[0]){const z=X.target.files[0];y(z),C(z);const Z=new FileReader;Z.onloadend=()=>{const ee=Z.result;j(ee)},Z.readAsDataURL(z)}},G=()=>{document.getElementById("upload").click()},he=()=>{const X=Number(ge.get("multi-store"));if(w){if(d==="product"){const z={multiStoreId:X,type:"product",typeId:m==null?void 0:m.id,image:v};$.filter(ae=>ae.type==="product").some(ae=>ae.type_id===(m==null?void 0:m.id))||A(z),B(!1),j(null),y(null);const ee=document.getElementById("upload");ee&&(ee.value="")}if(d==="category"){const z={multiStoreId:X,type:"category",typeId:k.id,image:v};$.filter(ae=>ae.type==="category").some(ae=>ae.type_id===(k==null?void 0:k.id))||(A(z),B(!1)),j(null),y(null);const ee=document.getElementById("upload");ee&&(ee.value="")}}},ke=async()=>{if(r){const X=await te(t,v),z=_==null?void 0:_.map(Z=>Z.id===(t==null?void 0:t.id)?X:Z);i==null||i(z)}if(a){const X=$.filter(z=>z.type==="category").some(z=>z.type_id===(k==null?void 0:k.id));try{if(!X){const z=await te(t,v),ee=await(await T.patch(`web-banners/${t==null?void 0:t.id}`,{typeId:k.id})).data;console.log("activeCategory",k),console.log("currentProductEdit",t),console.log("data",ee);const ae=_==null?void 0:_.map(L=>L.id===(t==null?void 0:t.id)?{...L,image:z.image,title:ee.title,type_id:ee.type_id}:L);i==null||i(ae),console.log("updatedBannerCategory",ae)}}catch(z){console.log(z)}}N(!1),B(!1)},fe=()=>{u==null||u(t==null?void 0:t.id),B(!1)};return e.jsxs("div",{className:I.add_banner,children:[e.jsx("div",{className:I.add_banner_header,children:e.jsx("h3",{className:I.add_banner_header_title,children:"Баннер"})}),e.jsxs("div",{className:I.add_banner_content,children:[g?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:I.add_banner_content_product,children:[n,":",a&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]}),o&&e.jsxs("span",{children:[" ",t==null?void 0:t.title]})]}),h==null?void 0:h.map(X=>e.jsx("span",{className:I.add_banner_content_product,children:X.name.ru},X.name.ru))]}):e.jsx("p",{className:I.add_banner_content_product,children:f?`${n}: ${x}`:`${n}: ${m==null?void 0:m.title}`}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:q}),e.jsx("label",{htmlFor:"upload",className:I.add_banner_content_link,children:"Загрузить"}),e.jsx("div",{className:I.add_banner_content_info,children:e.jsx("p",{className:I.add_banner_content_info_text,children:"Оптимальный размер картинки 800x800px (прозрачный фон) максимальный размер 10MB"})}),s?e.jsx("div",{className:I.add_banner_content_download,children:e.jsx("img",{src:P||`https://api.mcrm.uz/${t==null?void 0:t.image}`,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})}):e.jsx("div",{className:I.add_banner_content_download,children:P?e.jsx("img",{src:P,alt:"Uploaded",className:I.add_banner_content_download_image,style:{width:"555px",height:"229px",objectFit:"cover"}}):e.jsxs("a",{className:I.add_banner_content_download_link,onClick:()=>G(),children:[e.jsx(W,{name:"PhotoIcon",width:72,height:72,color:"#C1C1C1"}),e.jsx("span",{children:"Загрузите баннер"})]})}),s?e.jsxs("div",{className:I.add_banner_content_btns,children:[e.jsx("button",{className:I.add_banner_content_btn,onClick:fe,style:{background:"#FFB5B5"},children:"Удалить"}),e.jsx("button",{className:I.add_banner_content_btn,style:{background:"#01C2EE"},onClick:()=>ke(),children:"Изменить"})]}):e.jsxs("div",{className:I.add_banner_content_btns,children:[e.jsx("button",{className:I.add_banner_content_btn,onClick:()=>N(!1),children:"Отмена"}),e.jsx("button",{className:I.add_banner_content_btn,onClick:()=>he(),children:"Сохранить"})]})]})]})};function ft({inputText:n,setInputText:t,filteredUsers:s,isProductEdit:a}){const{categoriesArr:o,setCurrentProductOpen:l,setChangeCategoryStyles:u,setOpenModalCategoryBanner:r,clearCategoriesArr:_}=be(),i=()=>{a&&l(!1),u(!1),r(!0),_()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:I.products_banner_wrap,children:[e.jsx("button",{className:I.products_banner_wrap_btn,onClick:i,children:e.jsx(W,{name:"FunnelIcon",width:20})}),(o==null?void 0:o.length)!==0&&e.jsx("div",{className:I.products_banner_wrap_filter,children:o==null?void 0:o.map(d=>e.jsx("span",{className:I.products_banner_wrap_filter_text,children:d.name.ru},d.id))}),e.jsxs("form",{action:"",className:I.products_banner_form,onSubmit:d=>s==null?void 0:s(d),children:[e.jsxs("div",{className:I.products_banner_form_wrap,children:[e.jsx("input",{type:"text",className:I.products_banner_form_wrap_input,placeholder:"Поиск товаров",value:n,onChange:d=>t==null?void 0:t(d.target.value)}),e.jsx(W,{className:I.products_banner_form_wrap_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:I.products_banner_form_wrap_btn,children:"Найти"})]})]})})}const Ir=[{id:"1",title:"Заголовок"},{id:"2",title:"Цена"},{id:"3",title:"Кол-во"},{id:"4",title:""}],Sr=()=>{const{openModalCategoryBanner:n,setOpenModalCategoryBanner:t,searchTextBanner:s,setSearchTextBanner:a,pickedProducts:o,clearPickedProductsArr:l,webProductsArr:u,setBannersArr1:r,bannersArr1:_,openAddBanner:i,setOpenAddBanner:d,setCurrentProductTable:m,clearCategoriesArr:g,setOpenLinksPage:h,setOpenProductsPage:x,setChangeCategoryStyles:f}=be(),[k]=p.useState(1),[$]=p.useState(10),[N,B]=p.useState(""),[P,j]=p.useState(u);async function v(){const y=ge.get("multi-store");try{const C=await T.get(`web-banners?multiStoreId=${y}&page=${k}&perPage=${$}`);r(C.data.data),console.log("bannersArr1",_)}catch(C){console.log("error",C)}}const b=y=>{y.preventDefault(),a(N)},w=async y=>{const C=P.find(A=>A.id===y);C&&(await v(),m(C),d(!0))};return p.useEffect(()=>{s&&j(P.filter(y=>{var C;return(C=y.title)==null?void 0:C.toLowerCase().includes(s.toLowerCase())})),o.length>0&&j(o)},[s,o]),p.useEffect(()=>{N===""?(j(u),a(""),l(),d(!1)):(j(u),g()),n&&B("")},[N,n]),p.useEffect(()=>{d(!1),h(!1),x(!0),t(!1),f(!1),g()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.products_banner,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(ft,{inputText:N,setInputText:B,filteredUsers:b}),e.jsx(Ae,{arrToUse:P,arr:Ir,setPickedProduct:w,selectionMode:"byId"})]}),n&&e.jsx(Ve,{isProduct:!0}),i&&e.jsx(Pe,{title:"Товар",typeOfBanner:"product"})]})},$r=()=>{const{categoriesArr:n,setOpenLinksPage:t,setChangeCategoryStyles:s,setOpenProductsPage:a,openAddBanner:o}=be();return p.useEffect(()=>{t(!1),s(!0),a(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:I.category_wrap,children:e.jsx(Ve,{isCategory:!0})}),o&&e.jsx(Pe,{title:"Каталог",categories:n,typeOfBanner:"category"})]})},Pr=()=>{const{linksPageBannerText:n,setLinksPageBannerText:t,setOpenLinksPage:s,setChangeCategoryStyles:a,setOpenProductsPage:o}=be();return p.useEffect(()=>{s(!0),a(!1),t(""),o(!1)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.add_link,children:[e.jsx("h3",{className:I.add_link_title,children:"Ссылка на станицу"}),e.jsx("input",{className:I.add_link_input,type:"text",value:n,onChange:l=>t(l.target.value)})]}),e.jsx(Pe,{title:"Страница"})]})};function Dr(){const{openBannerDropdown:n,setOpenBannerDropdown:t,setWebProductsArr:s}=be(),a=xe(),[o,l]=p.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Категория",href:"/admin/settings/banner/newBanner/category"},{id:3,title:"Страница",href:"/admin/settings/banner/newBanner/link"}]),[u]=p.useState(1),[r]=p.useState(10);async function _(){const i=ge.get("multi-store");try{const d=await T.get(`web-nomenclatures?multiStoreId=${i}&page=${u}&perPage=${r}`);s(d.data.data)}catch(d){console.log("error",d)}}return p.useEffect(()=>{_()},[]),e.jsxs("div",{className:I.banner,children:[e.jsx("h3",{className:I.banner_title,children:"Выберите вариант куда прикрепить баннер"}),e.jsx(xt,{openBlock:n,setOpenBlock:t,versionList:o,setVersionList:l}),e.jsxs("div",{className:I.banner_content,children:[a.pathname.startsWith("/admin/settings/banner/newBanner/products")&&e.jsx(Sr,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/category")&&e.jsx($r,{}),a.pathname.startsWith("/admin/settings/banner/newBanner/link")&&e.jsx(Pr,{})]})]})}const Br=[{id:"1",title:"Баннер"},{id:"2",title:"Продукт"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Mr=()=>{const{pickedProducts:n,currentProductOpen:t,openModalCategoryBanner:s,bannersArr1:a,searchTextBanner:o,currentProductTable:l,webProductsArr:u,clearPickedProductsArr:r,clearCategoriesArr:_,setCurrentProductOpen:i,setCurrentProductTable:d,setSearchTextBanner:m,setOpenLinksPage:g,setOpenProductsPage:h,setOpenModalCategoryBanner:x,setBannersArr1:f}=be(),[k,$]=p.useState(""),[N,B]=p.useState(u),[P,j]=p.useState([]),[v]=p.useState(1),[b]=p.useState(20);async function w(){const q=ge.get("multi-store");try{const ke=(await(await T.get(`web-banners?multiStoreId=${q}&page=${v}&perPage=${b}`)).data.data).filter(fe=>fe.type==="product");j(ke)}catch(G){console.log("не удалось получить обьекты с баннерами",G)}}async function y(q){try{T.delete(`web-banners/${q}`)}catch(G){console.log("не удалось удалить",G)}}const C=q=>{q.preventDefault(),m(k),_()},A=q=>{const G=P.find(he=>he.id===q);G&&(d(G),i(!0))};p.useEffect(()=>{o&&B(N.filter(q=>{var G;return(G=q.title)==null?void 0:G.toLowerCase().includes(o.toLowerCase())})),n.length>0&&B(n)},[o,n]);const te=q=>{j(P.filter(G=>G.id!==q)),f(a.filter(G=>G.id!==q)),y(q)};return p.useEffect(()=>{i(!1),g(!1),h(!0),x(!1),_()},[i,g,h,x,_]),p.useEffect(()=>{w()},[]),p.useEffect(()=>{k===""?(B(u),m(""),r()):(B(u),_())},[k]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ae,{arrToUse:P,setArrToUse:j,arr:Br,setPickedProductActive:A,selectionMode:"productId",isActive:!0}),t&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(ft,{filteredUsers:C,setInputText:$}),e.jsx(Ae,{arrToUse:N,bannersArrProduct:P,setArrToUse:j,isEdit:!0,selectionMode:"mxikCode"}),e.jsx(Pe,{arrToUse:P,setArrToUse:j,title:"Продукт",currentProductEdit:l,isEdit:!0,isProduct:!0,deleteBanner:te})]})]}),s&&e.jsx(Ve,{})]})},Or=[{id:"1",title:"Баннер"},{id:"2",title:"Каталог"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ar=()=>{const{currentProductTable:n,currentProductOpen:t,setCurrentProductOpen:s,setCurrentProductTable:a,setOpenAddBanner:o,openAddBanner:l}=be(),[u,r]=p.useState([]),[_]=p.useState(1),[i]=p.useState(20);async function d(){const x=ge.get("multi-store");try{const $=(await(await T.get(`web-banners?multiStoreId=${x}&page=${_}&perPage=${i}`)).data.data).filter(N=>N.type==="category");r($)}catch(f){console.log("не удалось получить обьекты с баннерами",f)}}async function m(x){try{T.delete(`web-banners/${x}`)}catch(f){console.log("не удалось удалить",f)}}const g=x=>{const f=u.find(k=>k.id===x);f&&(a(f),s(!0))},h=x=>{r(u.filter(f=>f.id!=x)),m(x)};return p.useEffect(()=>{d()},[]),p.useEffect(()=>{s(!1),o(!1)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ae,{arr:Or,arrToUse:u,setArrToUse:r,selectionMode:"productId",isCategory:!0,setPickedProductActive:g}),l&&e.jsx(Ve,{isCategory:!0}),l&&e.jsx(Pe,{arrToUse:u,setArrToUse:r,title:"Каталог",currentProductEdit:n,isEdit:!0,isCategory:!0,deleteBanner:h})]})},Wr=({setLinkText:n,currentProductEdit:t})=>{be();const[s,a]=p.useState(t.brandName||""),o=l=>{a(l),n(l)};return p.useEffect(()=>{a(t.brandName||"")},[t.brandName]),e.jsxs("div",{children:[e.jsx("p",{className:I.add_link_title,children:"Ссылка на страницу"}),e.jsx("input",{className:I.add_link_input,type:"text",onChange:l=>o(l.target.value),value:s})]})},Er=[{id:"1",title:"Баннер"},{id:"2",title:"Страницы"},{id:"3",title:""},{id:"4",title:"Откл / Выкл"}],Ur=()=>{const{currentProductOpen:n,currentProductTable:t,setCurrentProductTable:s,setCurrentProductOpen:a}=be(),[o,l]=p.useState(""),[u,r]=p.useState([]),[_]=p.useState(1),[i]=p.useState(20);async function d(){const x=ge.get("multi-store");try{const $=(await(await T.get(`web-banners?multiStoreId=${x}&page=${_}&perPage=${i}`)).data.data).filter(N=>N.type==="link");r($)}catch(f){console.log("не удалось получить обьекты с баннерами",f)}}async function m(x){try{T.delete(`web-banners/${x}`)}catch(f){console.log("не удалось удалить",f)}}p.useEffect(()=>{d()},[]);const g=x=>{const f=u.find(k=>k.id===x);f&&(s(f),console.log("currentProductTable",t),a(!0))},h=x=>{r(u.filter(f=>f.id!==x)),m(x)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsx(Ae,{arr:Er,arrToUse:u,selectionMode:"productId",setPickedProductActive:g,isLinks:!0}),n&&e.jsxs(e.Fragment,{children:[e.jsx(Wr,{setLinkText:l,currentProductEdit:t}),e.jsx(Pe,{title:"Страница",currentProductEdit:t,deleteBanner:h,isLinks:!0,isEdit:!0,linkTextEdit:o})]})]})};function Lr(){const{openBannerDropdown:n,setOpenBannerDropdown:t}=be(),s=xe(),[a,o]=p.useState([{id:1,title:"Продукт",href:"/admin/settings/banner/activeBanner/activeProducts"},{id:1,title:"Категория",href:"/admin/settings/banner/activeBanner/activeCategory"},{id:1,title:"Страница",href:"/admin/settings/banner/activeBanner/activeLink"}]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:I.banner_title,children:"Выберите вариант редактирования баннера"}),e.jsx(xt,{openBlock:n,setOpenBlock:t,versionList:a,setVersionList:o})]}),e.jsxs("div",{className:I.banner_content,children:[s.pathname.startsWith("/admin/settings/banner/activeBanner/activeProducts")&&e.jsx(Mr,{}),s.pathname.startsWith("/admin/settings/banner/activeBanner/activeCategory")&&e.jsx(Ar,{}),s.pathname.startsWith("/admin/settings/banner/activeBanner/activeLink")&&e.jsx(Ur,{})]})]})}const Rr=[{id:1,title:"Новый",href:"/admin/settings/banner/newBanner/products"},{id:2,title:"Активные",href:"/admin/settings/banner/activeBanner/activeProducts"}];function zr(){const t=xe().pathname,{setCurrentProductOpen:s}=be();return p.useEffect(()=>{s(!1)},[]),e.jsx("div",{className:c.banner,children:e.jsxs("div",{className:c.banner_nav,children:[e.jsx("ul",{className:c.banner_nav_list,children:Rr.map(a=>e.jsx("li",{children:e.jsx(H,{to:a.href,className:`${c.banner_nav_link} ${t.startsWith(a.href.split("/products")[0])||t.startsWith(a.href.split("/activeProducts")[0])?c.banner_nav_link_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:c.settings_content_base,children:[t.startsWith("/admin/settings/banner/newBanner")&&e.jsx(Dr,{}),t.startsWith("/admin/settings/banner/activeBanner")&&e.jsx(Lr,{})]})]})})}const Fr="_contacts_mxkpi_1",Tr="_contacts_content_mxkpi_4",qr="_contacts_nav_mxkpi_7",Vr="_contacts_nav_list_mxkpi_10",Hr="_contacts_nav_link_mxkpi_15",Xr="_contacts_nav_link_active_mxkpi_30",Gr="_contacts_btn_mxkpi_34",Zr="_socials_mxkpi_55",Jr="_socials_title_mxkpi_60",Qr="_socials_content_mxkpi_65",Yr="_socials_content_wrap_mxkpi_70",Kr="_socials_content_wrap_input_mxkpi_75",ec="_aboutUs_mxkpi_84",tc="_aboutUs_add_image_mxkpi_87",sc="_aboutUs_content_mxkpi_90",nc="_aboutUs_image_wrap_mxkpi_95",oc="_aboutUs_download_mxkpi_104",ac="_aboutUs_text_mxkpi_112",rc="_aboutUs_inputs_mxkpi_120",cc="_aboutUs_inputs_wrap_mxkpi_126",lc="_aboutUs_inputs_wrap_title_mxkpi_130",ic="_aboutUs_inputs_wrap_input_mxkpi_136",_c="_aboutUs_inputs_wrap_textarea_mxkpi_144",dc="_aboutUs_btn_mxkpi_152",uc="_aboutUs_week_info_mxkpi_172",pc="_aboutUs_week_info_text_mxkpi_178",mc="_aboutUs_week_content_mxkpi_183",hc="_aboutUs_week_wrap_mxkpi_189",gc="_aboutUs_week_wrap_colored_mxkpi_193",bc="_aboutUs_week_wrap_colored_active_mxkpi_203",xc="_aboutUs_week_wrap_colored_last_mxkpi_206",fc="_aboutUs_week_wrap_day_mxkpi_209",vc="_aboutUs_week_wrap_schedule_mxkpi_215",jc="_aboutUs_week_wrap_input_mxkpi_221",yc="_custom_checkbox_mxkpi_241",kc="_custom_checkbox_input_mxkpi_247",wc="_custom_checkbox_box_mxkpi_252",Cc="_custom_checkbox_box_icon_mxkpi_261",U={contacts:Fr,contacts_content:Tr,contacts_nav:qr,contacts_nav_list:Vr,contacts_nav_link:Hr,contacts_nav_link_active:Xr,contacts_btn:Gr,socials:Zr,socials_title:Jr,socials_content:Qr,socials_content_wrap:Yr,socials_content_wrap_input:Kr,aboutUs:ec,aboutUs_add_image:tc,aboutUs_content:sc,aboutUs_image_wrap:nc,aboutUs_download:oc,aboutUs_text:ac,aboutUs_inputs:rc,aboutUs_inputs_wrap:cc,aboutUs_inputs_wrap_title:lc,aboutUs_inputs_wrap_input:ic,aboutUs_inputs_wrap_textarea:_c,aboutUs_btn:dc,aboutUs_week_info:uc,aboutUs_week_info_text:pc,aboutUs_week_content:mc,aboutUs_week_wrap:hc,aboutUs_week_wrap_colored:gc,aboutUs_week_wrap_colored_active:bc,aboutUs_week_wrap_colored_last:xc,aboutUs_week_wrap_day:fc,aboutUs_week_wrap_schedule:vc,aboutUs_week_wrap_input:jc,custom_checkbox:yc,custom_checkbox_input:kc,custom_checkbox_box:wc,custom_checkbox_box_icon:Cc},Nc=({temporaryImageUrl:n,setTemporaryImageUrl:t})=>{Ke();const[s,a]=p.useState(null),[o,l]=p.useState(null);p.useEffect(()=>{const _=localStorage.getItem("savedLogoImageUrl");_&&(a(_),t(_))},[t]);const u=_=>{if(_.target.files&&_.target.files[0]){const i=_.target.files[0];l(i);const d=new FileReader;d.onloadend=()=>{const m=d.result;a(m),t(m),localStorage.setItem("savedLogoImageUrl",m)},d.readAsDataURL(i)}},r=()=>{document.getElementById("upload").click()};return e.jsxs("div",{className:U.aboutUs_add_image,children:[e.jsx("div",{className:U.aboutUs_image_wrap,children:s||n?e.jsx("img",{src:n||s,alt:"Uploaded",style:{width:"60px",height:"60px",objectFit:"contain"}}):e.jsx("a",{style:{cursor:"pointer"},onClick:()=>r(),children:e.jsx(W,{name:"PhotoIcon",width:33,height:33,color:"#C1C1C1"})})}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"upload",onChange:u}),e.jsx("label",{htmlFor:"upload",className:U.aboutUs_download,children:"Загрузить"}),e.jsx("p",{className:U.aboutUs_text,children:"Оптимальный размер картинки 500x500px (прозрачный фон) максимальный размер 10MB"})]})};function Ie(){return Ie=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},Ie.apply(this,arguments)}const vt=(n,t)=>{const s={};for(const a in n)t.indexOf(a)===-1&&(s[a]=n[a]);return s},jt=ce.createContext(null),He=ce.createContext(null),Ic=n=>t=>ce.createElement(He.Consumer,null,s=>ce.createElement(n,Ie({parent:s},t))),Sc=(n=[])=>{const[t,s]=p.useState(!1),a=p.useRef(n),o=(()=>{const u=p.useContext(jt);if(u===null)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that hook useYMaps is inside <YMaps /> provider");return u})(),l=o.getApi();return p.useEffect(()=>{o.load().then(()=>Promise.all(a.current.map(o.loadModule))).then(()=>s(!0))},[]),t&&l?l:null},$c=()=>{},Pc=["onLoad","onError","modules","apiLoader"];function yt(n,t=!1,s=[]){return a=>{const{width:o,height:l,modules:u=[],onLoad:r=$c}=a,_=Sc(s.concat(u)),i=!t||!!_,d=vt(a,Pc);return p.useEffect(()=>_?r(_):void 0,[_]),i?ce.createElement(n,Ie({ymaps:_},d)):ce.createElement("div",{style:{width:o,height:l}})}}const Dc=typeof window<"u",rt={lang:"ru_RU",load:"",ns:"",mode:"release"},Bc=n=>{const{version:t="2.1",enterprise:s=!1,query:a={lang:"ru_RU",load:"",ns:""},preload:o=!1,children:l}=n,u=p.useRef((r=>{const{query:_=rt}=r,i=Date.now().toString(32),d=_.ns||"",m="__yandex-maps-api-onload__$$"+i,g="__yandex-maps-api-onerror__$$"+i,h=Dc?window:{},x={};let f;const k=()=>d?h[d]:f,$=()=>{delete h[m],delete h[g]};return{load:()=>{if(k())return Promise.resolve(f);if(x[d])return x[d];const N={onload:m,onerror:g,...rt,..._},B=Object.keys(N).map(j=>`${j}=${N[j]}`).join("&"),P=[`https://${r.enterprise?"enterprise.":""}api-maps.yandex.ru`,r.version,"?"+B].join("/");return x[d]=new Promise((j,v)=>{h[m]=b=>{$(),b.ready(()=>{f=b,j(b)})},h[g]=b=>{$(),v(b)},(b=>new Promise((w,y)=>{const C=document.createElement("script");C.type="text/javascript",C.onload=w,C.onerror=y,C.src=b,C.async=!0,document.head.appendChild(C)}))(P).catch(h[g])}),x[d]},getApi:k,loadModule:N=>new Promise((B,P)=>{f.modules.require(N).done(j=>{j.forEach(v=>{((b,w,y,C=!1)=>{const A=typeof w=="string"?w.split("."):w.slice();let te,q=b;for(;A.length>1;)te=A.shift(),q[te]||(q[te]={}),q=q[te];const G=A[0];q[G]=C===!0&&q[G]||y})(f,N,v,!0)}),B(f)},P)})}})({version:t,enterprise:s,query:a,preload:o}));return p.useEffect(()=>{o&&u.current.load()},[u.current]),ce.createElement(jt.Provider,{value:u.current},l)},ct=/^on(?=[A-Z])/;function se(n){return Object.keys(n).reduce((t,s)=>{if(ct.test(s)){const a=s.replace(ct,"").toLowerCase();t._events[a]=n[s]}else t[s]=n[s];return t},{_events:{}})}function Se(n,t,s){typeof s=="function"&&n.events.add(t,s)}function $e(n,t,s){typeof s=="function"&&n.events.remove(t,s)}function De(n,t,s){Object.keys(Object.assign({},t,s)).forEach(a=>{t[a]!==s[a]&&($e(n,a,t[a]),Se(n,a,s[a]))})}const kt=n=>"default"+n.charAt(0).toUpperCase()+n.slice(1);function de(n,t){return n[t]!==void 0||n[kt(t)]===void 0}function D(n,t,s){return(de(n,t)?n[t]:n[kt(t)])||s}function ue(n,t,s=null){if(n!==t){if(n&&("current"in n?n.current=null:typeof n=="function"&&n(null)),!t)return;"current"in t?t.current=s:typeof t=="function"&&t(s)}}function wt(n){const{width:t,height:s,style:a,className:o}=n;return a!==void 0||o!==void 0?Object.assign({},a&&{style:a},o&&{className:o}):{style:{width:t,height:s}}}class Mc extends ce.Component{constructor(t){super(t),this.state={error:null,errorInfo:null}}componentDidCatch(t,s){const{onError:a=()=>{}}=this.props;a(t),this.setState({error:t,errorInfo:s})}render(){return this.state.error?null:this.props.children}}const Ct=n=>({onError:t,...s})=>ce.createElement(Mc,{onError:t},ce.createElement(n,s));class Me extends ce.Component{constructor(){super(),this.instance=null,this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this.instance=Me.mountObject(this._parentElement,this.props.ymaps.Map,this.props),this.setState({instance:this.instance})}componentDidUpdate(t){this.instance!==null&&Me.updateObject(this.instance,t,this.props)}componentWillUnmount(){Me.unmountObject(this.instance,this.props)}render(){const t=wt(this.props),s=se(this.props),a=vt(s,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return ce.createElement(He.Provider,{value:this.state.instance},ce.createElement("div",Ie({ref:this._getRef},t,a),this.props.children))}static mountObject(t,s,a){const{instanceRef:o,_events:l}=se(a),u=new s(t,D(a,"state"),D(a,"options"));return Object.keys(l).forEach(r=>Se(u,r,l[r])),ue(null,o,u),u}static updateObject(t,s,a){const{_events:o,instanceRef:l}=se(a),{_events:u,instanceRef:r}=se(s);if(de(a,"state")){const _=D(s,"state",{}),i=D(a,"state",{});_.type!==i.type&&t.setType(i.type),_.behaviors!==i.behaviors&&(_.behaviors&&t.behaviors.disable(_.behaviors),i.behaviors&&t.behaviors.enable(i.behaviors)),i.zoom&&_.zoom!==i.zoom&&t.setZoom(i.zoom),i.center&&_.center!==i.center&&t.setCenter(i.center),i.bounds&&_.bounds!==i.bounds&&t.setBounds(i.bounds)}if(de(a,"options")){const _=D(s,"options"),i=D(a,"options",{});_!==i&&t.options.set(i)}D(s,"width")===D(a,"width")&&D(s,"height")===D(a,"height")||t.container.fitToViewport(),De(t,u,o),ue(r,l,t)}static unmountObject(t,s){const{instanceRef:a,_events:o}=se(s);t!==null&&(Object.keys(o).forEach(l=>$e(t,l,o[l])),t.destroy(),ue(a))}}const Nt=Ct(yt(Me,!0,["Map"]));Nt.defaultProps={width:320,height:240};class Ee extends ce.Component{constructor(){super(),this.state={instance:null},this._parentElement=null,this._getRef=t=>{this._parentElement=t}}componentDidMount(){this._mounted=!0,this.props.ymaps.panorama.isSupported()&&Ee.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then(t=>this._mounted&&this.setState({instance:t}))}componentDidUpdate(t){this.state.instance!==null&&Ee.updateObject(this.state.instance,t,this.props)}componentWillUnmount(){this._mounted=!1,Ee.unmountObject(this.state.instance,this.props)}render(){const t=wt(this.props);return ce.createElement("div",Ie({ref:this._getRef},t))}static mountObject(t,s,a){const{instanceRef:o,_events:l}=se(a),u=D(a,"point"),r=D(a,"locateOptions"),_=D(a,"options");return new Promise((i,d)=>{s.locate(u,r).done(m=>{if(m.length>0){const g=new s.Player(t,m[0],_);ue(null,o,g),Object.keys(l).forEach(h=>Se(g,h,l[h])),i(g)}},d)})}static updateObject(t,s,a){const{_events:o,instanceRef:l}=se(a),{_events:u,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),i=D(a,"options");_!==i&&t.options.set(i)}if(de(a,"point")){const _=D(a,"point"),i=D(s,"point"),d=D(a,"locateOptions");_!==i&&t.moveTo(_,d)}De(t,u,o),ue(r,l,t)}static unmountObject(t,s){const{instanceRef:a,_events:o}=se(s);t!==null&&(Object.keys(o).forEach(l=>$e(t,l,o[l])),ue(a))}}class Oe extends ce.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Oe.mountControl(this.props.ymaps.control[this.props.name],this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Oe.updateControl(this.instance,t,this.props)}componentWillUnmount(){Oe.unmountControl(this.instance,this.props)}render(){return ce.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountControl(t,s){const{instanceRef:a,parent:o,lazy:l,_events:u}=se(s),r=new t({data:D(s,"data"),options:D(s,"options"),state:D(s,"state"),mapTypes:D(s,"mapTypes"),lazy:l});if(Object.keys(u).forEach(_=>Se(r,_,u[_])),o&&o.controls&&typeof o.controls.add=="function")o.controls.add(r);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${s.name}`);o.add(r)}return ue(null,a,r),r}static updateControl(t,s,a){const{_events:o,instanceRef:l}=se(a),{_events:u,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),i=D(a,"options");_!==i&&t.options.set(i)}if(de(a,"data")){const _=D(s,"data"),i=D(a,"data");_!==i&&t.data.set(i)}if(de(a,"state")){const _=D(s,"state"),i=D(a,"state");_!==i&&t.state.set(i)}if(de(a,"mapTypes")){const _=D(s,"mapTypes"),i=D(a,"mapTypes");_!==i&&(t.removeAllMapTypes(),i.forEach(d=>t.addMapType(d)))}De(t,u,o),ue(r,l,t)}static unmountControl(t,s){const{instanceRef:a,parent:o,_events:l}=se(s);t!==null&&(Object.keys(l).forEach(u=>$e(t,u,l[u])),o.controls&&typeof o.controls.remove=="function"?o.controls.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ue(a))}}var Oc=Ct(Ic(yt(n=>ce.createElement(Oe,Ie({},n,{name:"ZoomControl"})),!0,["control.ZoomControl"])));class Ue extends ce.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const t=Ue.mountObject(this.props.ymaps.Clusterer,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.state.instance!==null&&Ue.updateObject(this.instance,t,this.props)}componentWillUnmount(){Ue.unmountObject(this.instance,this.props)}render(){return ce.createElement(He.Provider,{value:this.state.instance},this.props.children)}static mountObject(t,s){const{instanceRef:a,parent:o,_events:l}=se(s),u=new t(D(s,"options"));if(Object.keys(l).forEach(r=>Se(u,r,l[r])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(u);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount Clusterer");o.add(u)}return ue(null,a,u),u}static updateObject(t,s,a){const{_events:o,instanceRef:l}=se(a),{_events:u,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),i=D(a,"options");_!==i&&t.options.set(i)}De(t,u,o),ue(r,l,t)}static unmountObject(t,s){const{instanceRef:a,parent:o,_events:l}=se(s);t!==null&&(Object.keys(l).forEach(u=>$e(t,u,l[u])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ue(a))}}class Le extends ce.Component{constructor(){super(),this.state={instance:null}}componentDidMount(){const t=Le.mountObject(this.props.ymaps.ObjectManager,this.props);this.instance=t,this.setState({instance:t})}componentDidUpdate(t){this.instance!==null&&Le.updateObject(this.instance,t,this.props)}componentWillUnmount(){Le.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:o,_events:l}=se(s),u=D(s,"options",{}),r=D(s,"features",{}),_=D(s,"filter",null),i=D(s,"objects",{}),d=D(s,"clusters",{}),m=new t(u);if(m.add(r||[]),m.setFilter(_),m.objects.options.set(i),m.clusters.options.set(d),Object.keys(l).forEach(g=>Se(m,g,l[g])),o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(m);else{if(!o.add||typeof o.add!="function")throw new Error("No parent found to mount ObjectManager");o.add(m)}return ue(null,a,m),m}static updateObject(t,s,a){const{_events:o,instanceRef:l}=se(a),{_events:u,instanceRef:r}=se(s);if(de(a,"options")){const _=D(s,"options"),i=D(a,"options");_!==i&&t.options.set(i)}if(de(a,"objects")){const _=D(s,"objects"),i=D(a,"objects");_!==i&&t.objects.options.set(i)}if(de(a,"clusters")){const _=D(s,"clusters"),i=D(a,"clusters");_!==i&&t.clusters.options.set(i)}if(de(a,"filter")){const _=D(s,"filter"),i=D(a,"filter");_!==i&&t.setFilter(i)}if(de(a,"features")){const _=D(s,"features"),i=D(a,"features");_!==i&&(t.remove(_),t.add(i))}De(t,u,o),ue(r,l,t)}static unmountObject(t,s){const{instanceRef:a,parent:o,_events:l}=se(s);t!==null&&(Object.keys(l).forEach(u=>$e(t,u,l[u])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ue(a))}}class Re extends ce.Component{constructor(){super(),this.state={instance:null},this.instance=null}componentDidMount(){const{name:t,ymaps:s,dangerZone:a}=this.props,o=Re.mountObject(a&&typeof a.modifyConstructor=="function"?a.modifyConstructor(s[t]):s[t],this.props);this.instance=o,this.setState({instance:o})}componentDidUpdate(t){this.instance!==null&&Re.updateObject(this.instance,t,this.props)}componentWillUnmount(){Re.unmountObject(this.instance,this.props)}render(){return null}static mountObject(t,s){const{instanceRef:a,parent:o,_events:l}=se(s),u=new t(D(s,"geometry"),D(s,"properties"),D(s,"options"));if(Object.keys(l).forEach(r=>Se(u,r,l[r])),o&&o.geoObjects&&typeof o.geoObjects.add=="function")o.geoObjects.add(u);else{if(!o||!o.add||typeof o.add!="function")throw new Error(`No parent found to mount ${s.name}`);o.add(u)}return ue(null,a,u),u}static updateObject(t,s,a){const{_events:o,instanceRef:l}=se(a),{_events:u,instanceRef:r}=se(s);if(de(a,"geometry")){const _=D(s,"geometry",{}),i=D(a,"geometry",{});Array.isArray(i)&&i!==_?Array.isArray(i[0])&&typeof i[1]=="number"?(t.geometry.setCoordinates(i[0]),t.geometry.setRadius(i[1])):t.geometry.setCoordinates(i):typeof i=="object"&&(i.coordinates!==_.coordinates&&t.geometry.setCoordinates(i.coordinates),i.radius!==_.radius&&t.geometry.setRadius(i.radius))}if(de(a,"properties")){const _=D(s,"properties"),i=D(a,"properties");_!==i&&t.properties.set(i)}if(de(a,"options")){const _=D(s,"options"),i=D(a,"options");_!==i&&t.options.set(i)}De(t,u,o),ue(r,l,t)}static unmountObject(t,s){const{instanceRef:a,parent:o,_events:l}=se(s);t!==null&&(Object.keys(l).forEach(u=>$e(t,u,l[u])),o.geoObjects&&typeof o.geoObjects.remove=="function"?o.geoObjects.remove(t):o.remove&&typeof o.remove=="function"&&o.remove(t),ue(a))}}const Ac=()=>{const n=p.useRef(null);return e.jsx(Bc,{children:e.jsx("div",{children:e.jsx(Nt,{defaultState:{center:[41.32,69.27],zoom:12,controls:[]},width:500,instanceRef:t=>{n.current=t,t&&t.behaviors.disable("scrollZoom")},children:e.jsx(Oc,{options:{position:{bottom:20,right:20}}})})})})},Wc=({temporarySocialPlatforms:n,setTemporarySocialPlatforms:t})=>{const s=(a,o)=>{t(l=>l.map(u=>u.id===o?{...u,text:a}:u))};return e.jsxs("div",{className:U.aboutUs_inputs,children:[n.map(a=>e.jsx("div",{className:U.aboutUs_inputs_wrap,children:a.type=="isTextarea"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:U.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("textarea",{className:U.aboutUs_inputs_wrap_textarea,onChange:o=>s(o.target.value,a.id),value:a.text})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:U.aboutUs_inputs_wrap_title,children:a.title}),e.jsx("input",{className:U.aboutUs_inputs_wrap_input,type:a.type==="isPhone"?"number":a.type==="isEmail"?"email":"text",onChange:o=>s(o.target.value,a.id),value:a.text})]})},a.id)),e.jsx(Ac,{})]})},Ec=({id:n,checked:t,onChange:s})=>{const a=o=>{s(n,o.target.checked)};return e.jsxs("label",{className:U.custom_checkbox,children:[e.jsx("input",{className:U.custom_checkbox_input,type:"checkbox",checked:t,onChange:a}),e.jsx("span",{className:U.custom_checkbox_box,children:e.jsx(W,{name:"CheckIcon",width:18,height:18,className:U.custom_checkbox_box_icon})})]})},Uc=({temporaryContactsSchedule:n,setTemporaryContactsSchedule:t})=>{const s=r=>{const _=r.replace(/\D/g,"");return _.length<=2?_:`${_.slice(0,2)}:${_.slice(2,4)}`},a=(r,_,i,d)=>{if(!d.isActive)return;const m=s(i);t(g=>g.map(h=>h.id===r?{...h,workHours:{...h.workHours,[_]:m}}:h))},o=(r,_)=>{t(i=>i.map(d=>d.id===r?{...d,isActive:_,workHours:_?d.workHours:{start:"",end:""}}:d))},l=p.useRef({}),u=p.useRef({});return p.useEffect(()=>{n.forEach(r=>{var _;r.isActive&&l.current[r.id]&&!u.current[r.id]&&((_=l.current[r.id])==null||_.focus(),u.current[r.id]=!0)})},[n]),e.jsxs("div",{className:U.aboutUs_week,children:[e.jsxs("div",{className:U.aboutUs_week_info,children:[e.jsx("span",{className:U.aboutUs_week_info_text,children:"Рабочие дни:"}),e.jsx("span",{className:U.aboutUs_week_info_text,children:"Рабочие время:"})]}),e.jsx("div",{className:U.aboutUs_week_content,children:n.map((r,_)=>{const i=_===n.length-1,d=i&&r.isActive?U.aboutUs_week_wrap_colored_active:"";return e.jsxs("div",{className:U.aboutUs_week_wrap,children:[e.jsxs("div",{className:`
                  ${U.aboutUs_week_wrap_colored} 
                  ${r.isActive?U.aboutUs_week_wrap_colored_active:""} 
                  ${i?U.aboutUs_week_wrap_colored_last:""} 
                  ${d}
                `,children:[e.jsx("span",{className:U.aboutUs_week_wrap_day,children:r.day}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{className:U.aboutUs_week_wrap_schedule,children:"c:"}),e.jsx("input",{ref:m=>l.current[r.id]=m,className:U.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:m=>a(r.id,"start",m.target.value,r),value:r.workHours.start}),e.jsx("span",{className:U.aboutUs_week_wrap_schedule,children:"до:"}),e.jsx("input",{className:U.aboutUs_week_wrap_input,type:"text",placeholder:"00:00",onChange:m=>a(r.id,"end",m.target.value,r),value:r.workHours.end})]})]}),e.jsx(Ec,{id:r.id,checked:r.isActive,onChange:o})]},r.id)})})]})},Lc=()=>{const{contactsFormInputsArr:n,setContactsFormInputsArr:t,contactsSchedule:s,setContactsSchedule:a,setImageUrlLogo:o}=Ke(),[l,u]=p.useState(n),[r,_]=p.useState(""),[i,d]=p.useState(s),m=()=>{t(l),o(r);const g=i.map(h=>h.workHours&&h.workHours.start===""&&h.workHours.end===""?{...h,isActive:!1}:h);a(g)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:U.aboutUs,children:[e.jsx(Nc,{temporaryImageUrl:r,setTemporaryImageUrl:_}),e.jsxs("div",{className:U.aboutUs_content,children:[e.jsx(Wc,{temporarySocialPlatforms:l,setTemporarySocialPlatforms:u}),e.jsx(Uc,{temporaryContactsSchedule:i,setTemporaryContactsSchedule:d})]})]}),e.jsx("button",{className:U.aboutUs_btn,onClick:m,children:"Сохранить"})]})};function Rc({width:n=78,color:t="white",backgroundOn:s="rgba(137, 250, 135, 1)",backgroundOff:a="rgba(193, 193, 193, 1)",speed:o=500,scale:l=1.1,status:u=!1,disabled:r=!1}){const _={width:`${n}px`,height:`${n/2-n/20}px`,background:u?s:a,borderRadius:`${n/2}px`,display:"flex",alignItems:"center",transition:`${o}ms`,cursor:"pointer"},i={background:`${t}`,height:`${n/2-n/20}px`,width:`${n/2-n/20}px`,border:`${n/25}px solid ${u?s:a}`,borderRadius:"50%",transition:`${o}ms`,transform:`scale(${l}) translateX(${u?"110%":"0"})`};return e.jsx("div",{style:_,children:e.jsx("div",{style:i})})}const zc=({temporarySocialPlatforms:n,setTemporarySocialPlatforms:t})=>{const s=(o,l)=>{t(u=>u.map(r=>r.id===o?{...r,url:l,isActive:l===""?!1:r.isActive}:r))},a=(o,l)=>{o.url!==""&&t(u=>u.map(r=>r.id===l?{...r,isActive:!r.isActive,url:o.isActive?"":o.url}:r))};return e.jsx(e.Fragment,{children:n.map(o=>e.jsxs("div",{className:U.socials_content_wrap,children:[e.jsx("img",{src:o.icon,alt:o.alt}),e.jsx("input",{type:"text",className:U.socials_content_wrap_input,value:o.url||"",onChange:l=>s(o.id,l.target.value)}),e.jsx("div",{onClick:()=>a(o,o.id),children:e.jsx(Rc,{status:o.isActive})})]},o.id))})},Fc=()=>{const{socialPlatforms:n,setSocialPlatforms:t,setActiveSocials:s}=Ke(),[a,o]=p.useState(n);async function l(){const r=ge.get("multi-store"),_=await T.get(`web-credentials/${r}`);if(_){const i=Object.entries(_.data.social).filter(([m,g])=>g.isActive).map(([m,g])=>({name:m,...g})),d=n.filter(m=>i.some(g=>g.name===m.name)).map(m=>{const g=i.find(h=>h.name===m.name);return{...m,...g,isActive:!0}});s(d)}}async function u(){t(a);const r=ge.get("multi-store"),_=a.reduce((i,d)=>(i[d.name]={url:d.url,isActive:d.isActive},i),{});try{const i=await T.patch(`web-credentials/${r}`,{social:_});l()}catch(i){console.log("error",i)}}return e.jsxs("div",{className:U.socials,children:[e.jsx("h3",{className:U.socials_title,children:"Соц-сети"}),e.jsx("div",{className:U.socials_content,children:e.jsx(zc,{temporarySocialPlatforms:a,setTemporarySocialPlatforms:o})}),e.jsx("button",{className:U.contacts_btn,onClick:u,children:"Сохранить"})]})},Tc=[{id:le(),title:"Соц-сети",href:"/admin/settings/contacts"},{id:le(),title:"О нас",href:"/admin/settings/contacts/aboutUs"}];function qc(){const t=xe().pathname;return e.jsx("div",{className:U.contacts,children:e.jsxs("div",{className:U.contacts_content,children:[e.jsx("div",{className:U.contacts_nav,children:e.jsx("ul",{className:U.contacts_nav_list,children:Tc.map(s=>e.jsx(H,{to:s.href,className:`${U.contacts_nav_link} ${s.href==t?U.contacts_nav_link_active:""}`,children:s.title},s.id))})}),t==="/admin/settings/contacts"&&e.jsx(Fc,{}),t==="/admin/settings/contacts/aboutUs"&&e.jsx(Lc,{})]})})}const Vc="_delivery_fas3b_1",Hc="_delivery_wrap_fas3b_5",Xc="_delivery_settingsAdd_fas3b_8",Gc="_delivery_brief_title_fas3b_29",Zc="_delivery_brief_wrap_fas3b_34",Jc="_delivery_brief_info_fas3b_40",Qc="_delivery_brief_info_header_fas3b_44",Yc="_delivery_brief_info_header_title_fas3b_50",Kc="_delivery_brief_info_content_fas3b_54",el="_delivery_brief_info_content_item_fas3b_59",tl="_delivery_brief_info_city_fas3b_64",sl="_delivery_brief_info_text_fas3b_68",nl="_delivery_brief_btn_fas3b_73",ol="_deliverySettings_fas3b_79",al="_deliverySettings_top_fas3b_82",rl="_deliverySettings_cities_fas3b_91",cl="_deliverySettings_selected_fas3b_96",ll="_deliverySettings_radio_fas3b_102",il="_deliverySettings_btn_fas3b_107",_l="_fixedDelivery_fas3b_114",dl="_fixedDelivery_wrap_fas3b_118",ul="_fixedDelivery_add_fas3b_124",pl="_fullInfo_header_fas3b_130",ml="_fullInfo_title_fas3b_136",hl="_fullInfo_wrap_fas3b_140",gl="_fullInfo_card_title_fas3b_145",bl="_fullInfo_card_price_fas3b_150",xl="_fullInfo_card_price_desc_fas3b_154",fl="_fullInfo_card_price_desc_text_fas3b_162",vl="_fullInfo_btn_fas3b_168",jl="_editDelivery_fas3b_174",yl="_editDelivery_title_fas3b_177",kl="_editDelivery_link_fas3b_183",wl="_editDelivery_content_fas3b_190",Cl="_editDelivery_settings_header_fas3b_195",Nl="_editDelivery_settings_content_fas3b_205",Il="_editDelivery_settings_content_container_fas3b_210",Sl="_editDelivery_settings_content_container_wrap_fas3b_214",$l="_editDelivery_settings_content_container_btn_fas3b_217",Pl="_editDelivery_btn_fas3b_221",Dl="_addCity_fas3b_231",Bl="_addCity_title_fas3b_235",Ml="_addCity_content_fas3b_241",Ol="_addCity_radio_fas3b_246",Al="_addCity_addBtn_fas3b_251",Wl="_addCity_saveBtn_fas3b_257",M={delivery:Vc,delivery_wrap:Hc,delivery_settingsAdd:Xc,delivery_brief_title:Gc,delivery_brief_wrap:Zc,delivery_brief_info:Jc,delivery_brief_info_header:Qc,delivery_brief_info_header_title:Yc,delivery_brief_info_content:Kc,delivery_brief_info_content_item:el,delivery_brief_info_city:tl,delivery_brief_info_text:sl,delivery_brief_btn:nl,deliverySettings:ol,deliverySettings_top:al,deliverySettings_cities:rl,deliverySettings_selected:cl,deliverySettings_radio:ll,deliverySettings_btn:il,fixedDelivery:_l,fixedDelivery_wrap:dl,fixedDelivery_add:ul,fullInfo_header:pl,fullInfo_title:ml,fullInfo_wrap:hl,fullInfo_card_title:gl,fullInfo_card_price:bl,fullInfo_card_price_desc:xl,fullInfo_card_price_desc_text:fl,fullInfo_btn:vl,editDelivery:jl,editDelivery_title:yl,editDelivery_link:kl,editDelivery_content:wl,editDelivery_settings_header:Cl,editDelivery_settings_content:Nl,editDelivery_settings_content_container:Il,editDelivery_settings_content_container_wrap:Sl,editDelivery_settings_content_container_btn:$l,editDelivery_btn:Pl,addCity:Dl,addCity_title:Bl,addCity_content:Ml,addCity_radio:Ol,addCity_addBtn:Al,addCity_saveBtn:Wl},Xe=zt()(Ft(Tt(n=>({cities:[{id:le(),city:"Ташкент",isActive:!0},{id:le(),city:"Самарканд",isActive:!0},{id:le(),city:"Бухара",isActive:!0}],setCities:t=>n({cities:t}),selectedCities:[],setSelectedCities:t=>n({selectedCities:t}),deliveryStores:[{id:le(),store:"Магазин1",checked:!1},{id:le(),store:"Магазин2",checked:!1},{id:le(),store:"Магазин3",checked:!1}],setDeliveryStores:t=>n({deliveryStores:t}),typeOfDelivery:"",setTypeOfDelivery:t=>n({typeOfDelivery:t}),saveSettingDelivery:[],setSaveSettingDelivery:t=>n({saveSettingDelivery:t})}),{name:"delivery-storage",partialize:n=>({...n})}))),El="_dropdown_block_16xgq_1",Ul="_dropdown_block_top_16xgq_6",Ll="_dropdown_block_top_title_16xgq_17",Rl="_dropdown_block_top_arrow_16xgq_21",zl="_dropdown_block_top_arrow_active_16xgq_30",Fl="_dropdown_block_dropdown_16xgq_33",Tl="_dropdown_block_dropdown_item_16xgq_45",ql="_dropdown_block_dropdown_open_16xgq_56",Vl="_dropdown_block_onOff_16xgq_62",Hl="_dropdown_block_delivery_16xgq_62",Xl="_radio_16xgq_68",Gl="_radio_selected_16xgq_74",Zl="_radio_radio_16xgq_74",Jl="_radio_input_16xgq_82",Ql="_radio_text_16xgq_95",Yl="_addBtn_16xgq_100",Kl="_fixed_inputs_16xgq_114",ei="_fixed_inputs_wrap_16xgq_119",ti="_fixed_inputs_subtitle_16xgq_123",si="_fixed_inputs_input_16xgq_126",ni="_fixed_inputs_price_16xgq_126",oi="_flexible_inputs_16xgq_136",ai="_flexible_inputs_top_16xgq_143",ri="_flexible_inputs_bottom_16xgq_148",ci="_flexible_inputs_wrapLarge_16xgq_154",li="_flexible_inputs_wrapSmall_16xgq_154",ii="_flexible_inputs_title_16xgq_166",_i="_flexible_inputs_input_16xgq_169",di="_flexible_inputs_btn_16xgq_175",ui="_deliveryStore_16xgq_179",pi="_deliveryCity_16xgq_187",mi="_deliveryCity_active_16xgq_196",hi="_btns_save_16xgq_203",gi="_btns_back_16xgq_203",E={dropdown_block:El,dropdown_block_top:Ul,dropdown_block_top_title:Ll,dropdown_block_top_arrow:Rl,dropdown_block_top_arrow_active:zl,dropdown_block_dropdown:Fl,dropdown_block_dropdown_item:Tl,dropdown_block_dropdown_open:ql,dropdown_block_onOff:Vl,dropdown_block_delivery:Hl,radio:Xl,radio_selected:Gl,radio_radio:Zl,radio_input:Jl,radio_text:Ql,addBtn:Yl,fixed_inputs:Kl,fixed_inputs_wrap:ei,fixed_inputs_subtitle:ti,fixed_inputs_input:si,fixed_inputs_price:ni,flexible_inputs:oi,flexible_inputs_top:ai,flexible_inputs_bottom:ri,flexible_inputs_wrapLarge:ci,flexible_inputs_wrapSmall:li,flexible_inputs_title:ii,flexible_inputs_input:_i,flexible_inputs_btn:di,deliveryStore:ui,deliveryCity:pi,deliveryCity_active:mi,btns_save:hi,btns_back:gi};function It({color:n="black",className:t,versionList:s,setVersionList:a,openBlock:o,currentVersion:l,setOpenBlock:u}){const{selectedCities:r,setSelectedCities:_,deliveryStores:i}=Xe(),d=g=>{r.some(x=>x.id===g.id)||(_([g,...r]),a==null||a(s==null?void 0:s.filter(x=>x.id!==g.id))),u(!1)},m=()=>{i.some(h=>h.checked)?u(!o):alert("выберите магазин"),(s==null?void 0:s.length)==0&&u(!1)};return e.jsx("div",{className:t??E.dropdown,children:e.jsxs("div",{className:E.dropdown_block,children:[e.jsxs("div",{className:E.dropdown_block_top,onClick:()=>m(),children:[e.jsx("h2",{className:E.dropdown_block_top_title,style:{color:n},children:l}),e.jsx("button",{className:E.dropdown_block_top_btn,children:e.jsx("div",{className:`${E.dropdown_block_top_arrow} ${o?E.dropdown_block_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${E.dropdown_block_dropdown} ${o?E.dropdown_block_dropdown_open:""}`,children:s==null?void 0:s.map(g=>e.jsx("span",{className:E.dropdown_block_dropdown_item,onClick:()=>d(g),children:g.city},g.id))})]})})}const St=({label:n,checked:t})=>{const s={backgroundColor:t?"#45D442":"#fff",border:"1px solid #D8D8D8",width:"20px",height:"20px",borderRadius:"3px",display:"flex",justifyContent:"center",alignItems:"center"};return e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",checked:t,style:{display:"none"},onChange:()=>!t}),e.jsxs("label",{style:{cursor:"pointer",display:n?"flex":"block",gap:n?"10px":"0",alignItems:n?"center":"initial"},children:[e.jsx("div",{style:s,children:t&&e.jsx(W,{name:"CheckIcon",width:17,color:"white"})}),e.jsx("span",{style:{fontSize:"14px"},children:n})]})]})},bi=({store:n,setChecked:t})=>e.jsx("div",{className:E.deliveryStore,children:e.jsx("div",{onClick:()=>t(n.id),children:e.jsx(St,{checked:n.checked,label:n.store})})}),ze=({id:n,value:t,checked:s,text:a,onChange:o})=>e.jsxs("label",{className:`${E.radio} ${s?E.radio_selected:""}`,children:[e.jsx("input",{type:"radio",id:n,value:t,checked:s,onChange:()=>o(n),className:E.radio_input}),e.jsx("span",{className:E.radio_radio}),e.jsx("span",{className:E.radio_text,children:a})]}),$t=({city:n,cityName:t})=>{const{selectedCities:s,cities:a,setSelectedCities:o,setCities:l}=Xe(),u=(r,_)=>{o(s.filter(i=>i.id!==r)),l([_,...a])};return e.jsxs("div",{className:`${E.deliveryCity} ${n!=null&&n.isActive?E.deliveryCity_active:""}`,children:[e.jsx("span",{children:(n==null?void 0:n.city)||t}),e.jsx("button",{onClick:()=>u(n==null?void 0:n.id,n),children:e.jsx(qe,{name:"TrashIcon",width:16})})]})},Pt=({id:n,onRemove:t,purchasePrice:s,price:a,onInputChange:o})=>{const l=u=>{const{name:r,value:_}=u.target;o==null||o(n,r,_)};return e.jsxs("div",{className:E.fixed_inputs,children:[e.jsxs("div",{className:E.fixed_inputs_wrap,children:[e.jsx("span",{className:E.fixed_inputs_subtitle,children:"Сумма покупки от"}),e.jsx("input",{className:E.fixed_inputs_input,type:"number",name:"purchasePrice",value:s,onChange:l})]}),e.jsxs("div",{className:E.fixed_inputs_wrap,children:[e.jsx("span",{className:E.fixed_inputs_subtitle,children:"Сумма"}),e.jsx("input",{className:E.fixed_inputs_price,type:"number",name:"price",value:a,onChange:l})]}),e.jsx("button",{style:{alignSelf:"end",cursor:"pointer"},onClick:()=>t==null?void 0:t(n),children:e.jsx(qe,{name:"TrashIcon",width:17})})]})},We=({text:n})=>e.jsxs("button",{className:E.addBtn,children:[n||"Добавить еще",e.jsx(W,{name:"PlusIcon",width:12})]}),Dt=()=>{Xe();const[n,t]=p.useState([{id:le(),purchasePrice:"",price:""}]),s=o=>{n.length!=1&&t(n.filter(l=>l.id!==o))},a=(o,l,u)=>{t(r=>r.map(_=>_.id===o?{..._,[l]:u}:_))};return e.jsxs("div",{className:M.fixedDelivery,children:[n.map(o=>e.jsx("div",{className:M.fixedDelivery_wrap,children:e.jsx(Pt,{id:o.id,purchasePrice:o.purchasePrice,price:o.price,onInputChange:a,onRemove:s})},o.id)),e.jsx("div",{className:M.fixedDelivery_add,children:e.jsx(We,{})})]})},Bt=()=>e.jsxs("div",{className:E.flexible_inputs,children:[e.jsxs("div",{className:E.flexible_inputs_top,children:[e.jsxs("div",{className:E.flexible_inputs_wrapLarge,children:[e.jsx("span",{className:E.flexible_inputs_title,children:"Сумма покупки от"}),e.jsx("input",{type:"text",className:E.flexible_inputs_input})]}),e.jsxs("div",{className:E.flexible_inputs_wrapSmall,children:[e.jsx("span",{className:E.flexible_inputs_title,children:"Первые км"}),e.jsx("input",{className:E.flexible_inputs_input,type:"text"})]}),e.jsxs("div",{className:E.flexible_inputs_wrapSmall,children:[e.jsx("span",{className:E.flexible_inputs_title,children:"Цена"}),e.jsx("input",{className:E.flexible_inputs_input,type:"text"})]})]}),e.jsxs("div",{className:E.flexible_inputs_bottom,children:[e.jsxs("div",{className:E.flexible_inputs_wrapLarge,children:[e.jsx("span",{className:E.flexible_inputs_title,children:"За каждый следующий км"}),e.jsx("input",{className:E.flexible_inputs_input,type:"text"})]}),e.jsx("button",{className:E.flexible_inputs_btn,children:e.jsx(qe,{name:"TrashIcon",width:17})})]})]}),Mt=()=>e.jsxs("div",{style:{maxWidth:"355px",width:"100%"},children:[e.jsx(Bt,{}),e.jsx("div",{style:{display:"flex",justifyContent:"end",marginTop:"10px"},children:e.jsx(We,{})})]}),Ge=({href:n,text:t})=>e.jsx(H,{to:n,className:E.btns,children:e.jsx("button",{className:E.btns_save,children:t||"Сохранить"})}),xi=()=>{const{cities:n,setCities:t,selectedCities:s,deliveryStores:a,setDeliveryStores:o,typeOfDelivery:l,setTypeOfDelivery:u}=Xe(),[r,_]=p.useState(!1),[i]=p.useState("Выбирите город"),[d,m]=p.useState(!1),g=()=>{if(s.length>0)return;const f=!d;o(a.map(k=>({...k,checked:f}))),m(f)},h=f=>{if(s.length>0)return;const k=a.map(N=>N.id===f?{...N,checked:!N.checked}:N);o(k);const $=k.every(N=>N.checked);m($)},x=f=>{u(f)};return p.useEffect(()=>{s.length===0&&u(""),s.length===0&&(m(!1),o(a.map(f=>({...f,checked:!1}))))},[s]),e.jsxs("div",{className:M.deliverySettings,children:[e.jsx("div",{onClick:g,style:{marginBottom:"20px",paddingLeft:"10px"},children:e.jsx(St,{label:d?"Отключить все":"Выбрать все",checked:d})}),e.jsx("div",{className:M.deliverySettings_cities,children:a.map(f=>e.jsx(bi,{store:f,setChecked:h},f.id))}),e.jsx("div",{style:{marginBottom:`${s.length>0?"20px":"0"}`},children:e.jsx(It,{openBlock:r,setOpenBlock:_,currentVersion:i,versionList:n,setVersionList:t})}),e.jsx("div",{className:M.deliverySettings_selected,children:s.map(f=>e.jsx($t,{city:f},f.id))}),s.length>0&&e.jsxs("div",{className:M.deliverySettings_radio,children:[e.jsx(ze,{text:"Фиксированная доставка",id:"fixedDelivery",value:"fixedDelivery",checked:l==="fixedDelivery",onChange:x}),e.jsx(ze,{text:"Гибкая доставка",id:"flexibleDelivery",value:"flexibleDelivery",checked:l==="flexibleDelivery",onChange:x})]}),l!==""&&e.jsxs("div",{children:[l==="fixedDelivery"&&e.jsx(Dt,{}),l==="flexibleDelivery"&&e.jsx(Mt,{})]}),e.jsx("div",{className:M.deliverySettings_btn,children:e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})})]})},fi=()=>e.jsxs("div",{className:M.delivery_brief_info,children:[e.jsxs("div",{className:M.delivery_brief_info_header,children:[e.jsx("span",{className:M.delivery_brief_info_header_title,children:"Магазин 1"}),e.jsx(H,{to:"/admin/settings/delivery/fullInfo",children:e.jsx(W,{name:"EyeIcon",width:18,height:16})})]}),e.jsxs("div",{className:M.delivery_brief_info_content,children:[e.jsxs("div",{className:M.delivery_brief_info_content_item,children:[e.jsx("span",{className:M.delivery_brief_info_city,children:"Ташкент"}),e.jsx("span",{className:M.delivery_brief_info_text,children:"Фиксированная"})]}),e.jsxs("div",{className:M.delivery_brief_info_content_item,children:[e.jsx("span",{className:M.delivery_brief_info_city,children:"Бухара"}),e.jsx("span",{className:M.delivery_brief_info_text,children:"Гибкая"})]})]})]}),vi=()=>e.jsxs("div",{className:M.delivery_brief,children:[e.jsx("h4",{className:M.delivery_brief_title,children:"Существующие настройки"}),e.jsx("div",{className:M.delivery_brief_wrap,children:e.jsx(fi,{})}),e.jsx("div",{className:M.delivery_brief_btn,children:e.jsx(Ge,{href:"/admin/settings/delivery/settingsDelivery",text:"Добавить еще настройку"})})]}),Qe=({city:n,type:t})=>e.jsxs("div",{className:M.fullInfo_card,children:[e.jsxs("p",{className:M.fullInfo_card_title,children:[n," - ",t]}),e.jsxs("div",{className:M.fullInfo_card_price,children:[e.jsxs("div",{className:M.fullInfo_card_price_desc,children:[e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"Мин сумма от:"}),e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"100 000"})]}),e.jsxs("div",{className:M.fullInfo_card_price_desc,children:[e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"Мин сумма от:"}),e.jsx("p",{className:M.fullInfo_card_price_desc_text,children:"100 000"})]})]})]}),et=({href:n})=>e.jsx(H,{to:n,className:E.btns,children:e.jsx("button",{className:E.btns_back,children:"Назад"})}),ji=()=>e.jsxs("div",{className:M.fullInfo,children:[e.jsxs("div",{className:M.fullInfo_header,children:[e.jsx("span",{className:M.fullInfo_title,children:"Магазин 1"}),e.jsx(H,{to:"/admin/settings/delivery/editDelivery",children:e.jsx(qe,{name:"PencilSquareIcon",width:20,height:20})})]}),e.jsxs("div",{className:M.fullInfo_wrap,children:[e.jsx(Qe,{city:"Ташкент",type:"Фиксированная"}),e.jsx(Qe,{city:"Бухара",type:"Гибкая"}),e.jsx(Qe,{city:"Самарканд",type:"Фиксированная"})]}),e.jsx("div",{className:M.fullInfo_btn,children:e.jsx(et,{href:"/admin/settings/delivery/briefInfo"})})]}),lt=({cityName:n,type:t})=>e.jsxs("div",{className:M.editDelivery_settings,children:[e.jsxs("div",{className:M.editDelivery_settings_header,children:[e.jsx($t,{cityName:n}),e.jsxs("span",{children:[t=="fixed"&&"Фиксированная",t=="flexible"&&"Гибкая"]})]}),e.jsx("div",{className:M.editDelivery_settings_content,children:e.jsxs("div",{className:M.editDelivery_settings_content_container,children:[e.jsxs("div",{className:M.editDelivery_settings_content_container_wrap,children:[t=="fixed"&&e.jsx(Pt,{}),t=="flexible"&&e.jsx(Bt,{})]}),e.jsx("div",{className:M.editDelivery_settings_content_container_btn,children:e.jsx(We,{})})]})})]}),yi=()=>e.jsxs("div",{className:M.editDelivery,children:[e.jsx("span",{className:M.editDelivery_title,children:"Магазин1"}),e.jsx("div",{className:M.editDelivery_link,children:e.jsx(H,{to:"/admin/settings/delivery/addCityPage",children:e.jsx(We,{text:"Добавить еще город"})})}),e.jsxs("div",{className:M.editDelivery_content,children:[e.jsx(lt,{cityName:"Ташкент",type:"fixed"}),e.jsx(lt,{cityName:"Ташкент",type:"flexible"})]}),e.jsxs("div",{className:M.editDelivery_btn,children:[e.jsx(et,{href:"/admin/settings/delivery/fullInfo"}),e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})]})]}),ki=()=>{const[n,t]=p.useState(!1),[s]=p.useState("Выбирите город"),[a,o]=p.useState(""),[l,u]=p.useState([{id:"1",city:"Ташкент"},{id:"2",city:"Бухара"},{id:"3",city:"Самарканд"}]),r=_=>{o(_)};return e.jsx("div",{className:M.addCity,children:e.jsxs("div",{className:M.addCity_content,children:[e.jsx(It,{openBlock:n,setOpenBlock:t,currentVersion:s,versionList:l,setVersionList:u}),e.jsxs("div",{className:M.addCity_radio,children:[e.jsx(ze,{text:"Фиксированная доставка",id:"fixedDelivery",value:"fixedDelivery",checked:a==="fixedDelivery",onChange:r}),e.jsx(ze,{text:"Гибкая доставка",id:"flexibleDelivery",value:"flexibleDelivery",checked:a==="flexibleDelivery",onChange:r})]}),e.jsx("div",{children:a!==""&&e.jsxs("div",{children:[a==="fixedDelivery"&&e.jsx(Dt,{}),a==="flexibleDelivery"&&e.jsx(Mt,{})]})})]})})},wi=()=>e.jsxs("div",{children:[e.jsx("span",{className:M.addCity_title,children:"Магазин1"}),e.jsx(ki,{}),e.jsx("div",{className:M.addCity_addBtn,children:e.jsx(We,{text:"Добавить город"})}),e.jsxs("div",{className:M.addCity_saveBtn,children:[e.jsx(et,{href:"/admin/settings/delivery/editDelivery"}),e.jsx(Ge,{href:"/admin/settings/delivery/briefInfo"})]})]}),Ci=()=>{const t=xe().pathname;return e.jsx("div",{children:e.jsx("div",{className:M.delivery,children:e.jsxs("div",{className:M.delivery_wrap,children:[t==="/admin/settings/delivery"&&e.jsxs("div",{className:M.delivery_settingsAdd,children:[e.jsx("p",{children:"У вас нет  настроенных  доставок "}),e.jsx(H,{to:"/admin/settings/delivery/settingsDelivery",children:"Добавить настройку"})]}),t==="/admin/settings/delivery/settingsDelivery"&&e.jsx(xi,{}),t==="/admin/settings/delivery/briefInfo"&&e.jsx(vi,{}),t==="/admin/settings/delivery/fullInfo"&&e.jsx(ji,{}),t==="/admin/settings/delivery/editDelivery"&&e.jsx(yi,{}),t==="/admin/settings/delivery/addCityPage"&&e.jsx(wi,{})]})})})};function Ni(){const{addBlockStatus:n,setAddBlockStatus:t,setAddBlockProducts:s}=ie();p.useEffect(()=>{s([])},[]);const a=o=>{o.stopPropagation(),t(!n)};return e.jsxs("button",{className:`${c.homePage_addBlock} ${n?c.homePage_addBlock_active:""}`,onClick:o=>a(o),children:[e.jsx("span",{className:c.homePage_addBlock_title,children:"Добавить блок"}),e.jsx(Ht,{name:"PlusIcon"})]})}function Ii({setSure:n,setDelModalStatus:t}){return e.jsx("div",{className:c.homePage_delModal,onClick:()=>t(!1),children:e.jsxs("div",{className:c.homePage_delModal_block,onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:"Вы уверены что хотите удалить блок ?"}),e.jsxs("div",{className:c.homePage_delModal_buttons,children:[e.jsx("button",{className:`${c.homePage_delModal_btn} ${c.homePage_delModal_del}`,onClick:()=>n(!0),children:"удалить"}),e.jsx("button",{className:`${c.homePage_delModal_btn} ${c.homePage_delModal_cancel}`,onClick:()=>t(!1),children:"отмена"})]})]})})}function Si({item:n,delModalStatus:t,setDelModalStatus:s}){const{addBlockStatus:a,homePageBlock:o,setHomePageBlock:l,addBlockProducts:u}=ie(),[r,_]=p.useState(!1),i=h=>{const x=o.filter(f=>f.id!=h);l([...x]),_(!1)};p.useEffect(()=>{r&&(i(n.id),s(!1))},[r]);const[d,m]=p.useState("");p.useEffect(()=>{m(n.title)},[]);const g=h=>{const x=o.map(f=>f.id==h.id?{id:h.id,title:d,superCategory:h.superCategory,category:h.category,subCategory:h.subCategory,products:h.products}:{...f});l([...x])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.homePage_wrapper,draggable:!t,children:[t&&e.jsx("div",{onDragStart:h=>h.stopPropagation(),onDragOver:h=>h.stopPropagation(),children:e.jsx(Ii,{setSure:_,setDelModalStatus:s})}),e.jsxs("div",{className:c.homePage_wrapper_title,children:[e.jsx("input",{type:"text",value:d,onChange:h=>m(h.target.value),onBlur:()=>g(n)}),e.jsx(W,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:`${c.homePage_addBlockItem} ${a?c.homePage_addBlockItem_active:""}`,children:[e.jsx("button",{className:c.homePage_addBlockItem_close,onClick:()=>s(!0),children:e.jsx(W,{name:"XMarkIcon"})}),e.jsxs("p",{className:c.homePage_addBlockItem_categories,children:[e.jsxs("span",{children:[n.superCategory.name.ru," / "]}),e.jsxs("span",{children:[n.category.name.ru," / "]}),e.jsx("span",{children:n.subCategory.name.ru})]}),e.jsx("h2",{className:c.homePage_addBlockItem_super_title,children:"Продукты"}),e.jsx("div",{className:c.homePage_addBlockItem_content,children:n.products.map(h=>{var x,f;return e.jsx("div",{className:c.homePage_addBlockItem_super_item,children:e.jsx("span",{children:(f=(x=h.nomenclature)==null?void 0:x.name)==null?void 0:f.ru})},h.id)})})]})]})})}const $i="_modalCategory_6mlu2_1",Pi="_modalCategory_block_6mlu2_10",Di="_modalCategory_block_createTitle_6mlu2_16",Bi="_modalCategory_nav_6mlu2_33",Mi="_modalCategory_nav_title_6mlu2_40",Oi="_modalCategory_content_6mlu2_46",Ai="_modalCategory_content_message_6mlu2_53",Wi="_modalCategory_content_allActive_6mlu2_61",Ei="_modalCategory_content_more_6mlu2_61",Ui="_modalCategory_content_link_6mlu2_76",Li="_modalCategory_content_link_product_6mlu2_76",Ri="_modalCategory_content_link_active_6mlu2_111",zi="_modalCategory_content_link_product_active_6mlu2_111",Fi="_modalCategory_content_item_6mlu2_124",Ti="_modalCategory_content_block_6mlu2_146",qi="_modalCategory_content_block_title_6mlu2_150",Vi="_settings_6mlu2_157",Hi="_settings_title_6mlu2_160",Xi="_settings_content_6mlu2_165",Gi="_settings_content_top_6mlu2_168",Zi="_settings_content_buttons_6mlu2_171",Ji="_settings_content_btn_6mlu2_181",Qi="_settings_content_btn_cancel_6mlu2_193",Yi="_settings_content_btn_save_6mlu2_196",Ki="_settings_tools_6mlu2_199",e_="_settings_tools_link_6mlu2_204",t_="_settings_tools_link_active_6mlu2_219",s_="_blink_6mlu2_1",F={modalCategory:$i,modalCategory_block:Pi,modalCategory_block_createTitle:Di,modalCategory_nav:Bi,modalCategory_nav_title:Mi,modalCategory_content:Oi,modalCategory_content_message:Ai,modalCategory_content_allActive:Wi,modalCategory_content_more:Ei,modalCategory_content_link:Ui,modalCategory_content_link_product:Li,modalCategory_content_link_active:Ri,modalCategory_content_link_product_active:zi,modalCategory_content_item:Fi,modalCategory_content_block:Ti,modalCategory_content_block_title:qi,settings:Vi,settings_title:Hi,settings_content:Xi,settings_content_top:Gi,settings_content_buttons:Zi,settings_content_btn:Ji,settings_content_btn_cancel:Qi,settings_content_btn_save:Yi,settings_tools:Ki,settings_tools_link:e_,settings_tools_link_active:t_,blink:s_};function n_({superCategory:n,category:t,superId:s,moreSuperStatus:a,setSubId:o,setLocalPicked:l,setSuperId:u,setMessageStatus:r,setSubCategories:_,fetchCategories:i}){const{setCurrentCategory:d}=ve(),[m,g]=p.useState(10),h=(f,k)=>{f.preventDefault(),i("category",1,10,k.id),_([]);const $=t.filter(N=>N.parentId==k.id);d($),l(k),u(k.id),r(!1),o(0)},x=f=>{f.preventDefault();const k=m+10;g(k),i("super",1,k)};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Суперкотегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[n.map(f=>e.jsxs("div",{className:`${F.modalCategory_content_link} ${f.id==s?F.modalCategory_content_link_active:""} `,onClick:k=>h(k,f),children:[e.jsx("span",{children:f.name.ru}),e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},f.id)),a&&e.jsx("span",{className:F.modalCategory_content_more,onClick:f=>x(f),children:"Ещё..."})]})]})}function o_({superId:n,categoryId:t,setCategoryId:s,category:a,moreStatus:o,setMoreStatus:l,setSubId:u,setSubCategory:r,fetchCategories:_}){const[i,d]=p.useState(10);p.useEffect(()=>{d(10),l(!0),s(0)},[n]);const m=h=>{h.preventDefault();const x=i+10;d(x),_("category",1,x,n)},g=(h,x)=>{u(0),r(h,x)};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Котегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[a==null?void 0:a.map(h=>e.jsxs("div",{className:`${F.modalCategory_content_link} ${h.id==t?F.modalCategory_content_link_active:""} `,onClick:x=>g(x,h),children:[e.jsx("span",{children:h.name.ru}),e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),o&&e.jsx("span",{className:F.modalCategory_content_more,onClick:h=>m(h),children:"Ещё..."})]})]})}function a_({subId:n,setSubId:t,categoryId:s,moreSubStatus:a,setMoreSubStatus:o,subCategories:l,setSubProductsList:u,fetchCategories:r}){ie();const[_]=p.useState(1),[i,d]=p.useState(10);p.useEffect(()=>{o(!0)},[s]);const m=h=>{h.preventDefault();const x=i+10;d(x),r("subCategory",_,x,s)},g=async(h,x)=>{u(h,x),t(x.id)};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[l==null?void 0:l.map(h=>e.jsxs("div",{className:`${F.modalCategory_content_link} ${h.id==n?F.modalCategory_content_link_active:""} `,onClick:x=>g(x,h),children:[e.jsx("span",{children:h.name.ru}),e.jsx(W,{name:"ChevronRightIcon",width:17,height:17,color:"rgba(113, 113, 113, 1)"})]},h.id)),a&&e.jsx("span",{className:F.modalCategory_content_more,onClick:h=>m(h),children:"Ещё..."})]})]})}function r_({setSettings:n,setCancel:t}){const{setAddBlockStatus:s}=ie(),a=()=>{t(),s(!1)};return e.jsxs("div",{className:F.settings_content_buttons,children:[e.jsx("button",{className:`${F.settings_content_btn} ${F.settings_content_btn_cancel}`,onClick:a,children:"Отмена"}),e.jsx(H,{to:"#",className:`${F.settings_content_btn} ${F.settings_content_btn_save}`,onClick:o=>n(o),children:"Сохранить"})]})}function c_({subId:n}){const{addBlockProducts:t,setAddBlockProducts:s}=ie(),[a,o]=p.useState(!1),[l,u]=p.useState([]),[r,_]=p.useState([]),[i]=p.useState(1),[d,m]=p.useState(10),[g,h]=p.useState(!0);p.useEffect(()=>{s([]),_([]),o(!1),u([]),n!=0&&B(n,d)},[n]);const x=p.useRef([]),f=p.useRef(null),k=(j,v)=>{if(j){u([...l,v]);const b=r.filter(w=>w.id==v)[0];s([...t,b])}else if(!j&&f.current){const b=l.filter(y=>y!=v);u([...b]);const w=t.filter(y=>y.id!=v);s([...w]),o(!1),f.current.checked=!1}f.current&&j&&l.length+1==r.length&&(o(!0),f.current.checked=!0,s([...r]))},$=j=>{j.preventDefault();const v=d+10;m(v),P(n,v)},N=j=>{if(o(j),j){x.current.forEach(b=>{b&&(b.checked=j)});const v=r.map(b=>b.id);u([...v]),s([...r])}else u([]),x.current.forEach(v=>{v&&(v.checked=j)}),s([])};async function B(j,v){const b=await P(j,v);_([...b])}const P=async(j,v)=>{const b=ge.get("multi-store");try{const w=await T.get(`web-nomenclatures?multiStoreId=${b}&categoryId=${j}&page=${i}&perPage=${v}`),y=await w.data.data,C=await w.data.pagination;return y.length<C.total?_([...y]):y.length==C.total&&(_([...y]),h(!1)),w.data.data}catch(w){console.log("Ошибка при получении продуктов по id",w)}};return e.jsxs("div",{className:F.modalCategory_content_block,children:[e.jsx("h2",{className:F.modalCategory_content_block_title,children:"Подкотегория"}),e.jsxs("div",{className:F.modalCategory_content_item,children:[r.length>1&&e.jsxs("label",{className:F.modalCategory_content_allActive,children:[e.jsx("input",{type:"checkbox",onChange:j=>N(j.target.checked),ref:f}),e.jsx("span",{children:a?"Отключить все":"Выбрать все"})]}),r==null?void 0:r.map((j,v)=>{var b,w;return e.jsxs("label",{className:`
              ${F.modalCategory_content_link_product}
              ${a||l.includes(j.id)?F.modalCategory_content_link_active:""}
              `,children:[e.jsx("input",{type:"checkbox",onChange:y=>k(y.target.checked,j.id),ref:y=>{x.current[v]=y}}),e.jsx("span",{children:(w=(b=j==null?void 0:j.nomenclature)==null?void 0:b.name)==null?void 0:w.ru})]},j.id)}),g&&e.jsx("span",{className:F.modalCategory_content_more,onClick:j=>$(j),children:"Ещё..."})]})]})}function l_(){const{TemporaryData:n,currentProduct:t,setCurrentCategory:s,setPickedCategory:a,setCurrentSubCategory:o,setTemporaryData:l,setOpenModalCategory:u,setCurrentProduct:r}=ve(),{homePageBlock:_,setHomePageBlock:i,setAddBlockStatus:d,homePageBlockName:m,setHomePageBlockName:g,setAddBlockStatusItem:h,addBlockProducts:x,setAddBlockProducts:f}=ie(),[k,$]=p.useState(0),[N,B]=p.useState(0),[P,j]=p.useState(0),[v,b]=p.useState({}),[w,y]=p.useState(!1),[C,A]=p.useState("Выберите категорию"),[te,q]=p.useState(!0),[G,he]=p.useState(!0),[ke,fe]=p.useState(!0),[X,z]=p.useState([]),[Z,ee]=p.useState([]),[ae,L]=p.useState([]);p.useEffect(()=>{we("super",1,10)},[]);const S=(re,me)=>{re.preventDefault(),we("subCategory",1,10,me.id);const je=ae.filter(ye=>ye.parentId==me.id);o(je),b(me),B(me.id),y(!1)},ne=(re,me)=>{re.preventDefault(),b(me),j(me.id),y(!1)},_e=async re=>{if(re.preventDefault(),Object.keys(v).length===0){y(!0),A("Выберите Суперкотегорию");return}if(Z.length>0&&N===0){y(!0),A("Выберите Категорию");return}if(ae.length>0&&P===0){y(!0),A("Выберите Подкотегорию");return}if(m==""){y(!0),A("Введите название блока");return}if(P){h(!0);const me=X.filter(J=>J.id==k)[0],je=Z.filter(J=>J.id==N)[0],ye=ae.filter(J=>J.id==P)[0],Q={id:le(),title:m||"Заголовок не добавлен",superCategory:me,category:je,subCategory:ye,products:x};i([Q,..._]);const R=n.find(J=>J.mxikCode==(t==null?void 0:t.mxikCode)),Y=n.findIndex(J=>J.mxikCode==(t==null?void 0:t.mxikCode));R&&(R.crmCategory=v,n.splice(Y,1,R),l([...n]))}pe()},pe=()=>{a(v),u(!1),$(0),B(0),r({}),j(0),b({}),s([]),o([]),f([]),y(!1),A("Выберите категорию"),d(!1),g("")},we=async(re,me,je,ye)=>{try{const Q=re=="super"?`https://api.mcrm.uz/api/categories?&page=${me}&perPage=${je}`:`https://api.mcrm.uz/api/categories?parentId=${ye}&page=${me}&perPage=${je}`,R=await Fe.get(Q),Y=R.data.data.map(J=>({...J,label:re==="super"?"Супер категория":re==="category"?"Категория":"Субкатегория"}));if(re==="super"){const J=await R.data.pagination;Y.length<J.total?z([...Y]):Y.length==J.total&&(z([...Y]),q(!1))}if(re==="category"){const J=await R.data.pagination;Y.length<J.total?ee([...Y]):Y.length==J.total&&(ee([...Y]),he(!1))}if(re==="subCategory"){const J=await R.data.pagination;Y.length<J.total?L([...Y]):Y.length==J.total&&(L([...Y]),fe(!1))}}catch(Q){console.error(`Ошибка произошла при получении ${re} категорий`,Q)}},Ce=p.useRef(null);return p.useEffect(()=>{Ce.current&&Ce.current.focus()},[Ce]),e.jsx("div",{className:F.modalCategory,onClick:re=>re.stopPropagation(),children:e.jsxs("div",{className:F.modalCategory_block,children:[e.jsx("p",{className:F.modalCategory_content_message,children:w?C:""}),e.jsxs("div",{className:`${F.modalCategory_block_createTitle}`,children:[e.jsx("input",{ref:Ce,type:"text",value:m,onChange:re=>g(re.target.value),placeholder:"Заголовок  блока"}),e.jsx(W,{name:"PencilIcon",width:20,height:20})]}),e.jsxs("div",{className:F.modalCategory_content,children:[e.jsx(n_,{moreSuperStatus:te,superId:k,setSubId:j,superCategory:X,category:Z,setLocalPicked:b,setSuperId:$,setMessageStatus:y,fetchCategories:we,setSubCategories:L}),Z.length>0&&e.jsx(o_,{setSubId:j,setCategoryId:B,setMoreStatus:he,moreStatus:G,superId:k,categoryId:N,category:Z,setSubCategory:S,fetchCategories:we}),ae.length>0&&e.jsx(a_,{subId:P,setSubId:j,moreSubStatus:ke,categoryId:N,subCategories:ae,setSubProductsList:ne,setMoreSubStatus:fe,fetchCategories:we}),P!=0&&e.jsx(c_,{subId:P}),e.jsx(r_,{setSettings:_e,setCancel:pe})]})]})})}function i_(){const{addBlockStatus:n,homePageBlock:t,setHomePageBlock:s}=ie(),[a,o]=p.useState(null),[l,u]=p.useState([]),[r,_]=p.useState(!1);p.useEffect(()=>{const h=l.length>0?l.reduce((f,k)=>k.order>f?k.order:f,-1/0):0,x=t.map((f,k)=>({...f,order:h+k+1}));u([...x])},[t]),p.useEffect(()=>{},[]);function i(h,x){o(x),h.target.style.cursor=r?"default":"grabbing"}function d(h){h.target.style.cursor=r?"default":"grab"}function m(h){h.preventDefault()}function g(h,x){h.preventDefault();const f=l&&l.map(k=>k.id===x.id?{...k,order:(a==null?void 0:a.order)||k.order}:k.id===(a==null?void 0:a.id)?{...k,order:x.order}:k).sort((k,$)=>(k&&k.order)-($&&$.order));f&&(u(f),s(f)),o(null)}return e.jsxs("div",{className:c.homePage,children:[e.jsx(Ni,{}),n&&e.jsx(l_,{}),e.jsx("div",{className:c.homePage_blocks,children:l.length>0&&l.map(h=>e.jsx("div",{draggable:!r,onDragStart:x=>i(x,h),onDragLeave:x=>d(x),onDragEnd:x=>d(x),onDragOver:x=>m(x),onDrop:x=>g(x,h),children:e.jsx(Si,{item:h,delModalStatus:r,setDelModalStatus:_})},h.id))})]})}const __=[{id:"1",label:"Модули",href:"/admin/settings/modules"},{id:"2",label:"Шаблоны",href:"/admin/settings/templates"},{id:"3",label:"Категории",href:"/admin/settings/categories"},{id:"4",label:"Баннер",href:"/admin/settings/banner"},{id:"5",label:"Основные",href:"/admin/settings/contacts"},{id:"6",label:"Доставка",href:"/admin/settings/delivery"},{id:"7",label:"Главная страница",href:"/admin/settings/homePage"}];function d_(){const t=xe().pathname,{setAddBlockStatus:s}=ie();return e.jsx("div",{className:c.settings,onClick:()=>s(!1),children:e.jsxs("div",{className:c.settings_content,children:[e.jsx("div",{className:c.settings_content_top,children:e.jsx("ul",{className:c.settings_tools,children:__.map(a=>e.jsx("li",{children:e.jsx(H,{to:a.href,className:`${c.settings_tools_link} ${t.startsWith(a.href)?c.settings_tools_link_active:""}`,children:a.label})},a.id))})}),t=="/admin/settings/modules"&&e.jsx(Ro,{}),t=="/admin/settings/templates"&&e.jsx(zo,{}),t=="/admin/settings/categories"&&e.jsx(ga,{}),t.startsWith("/admin/settings/banner")&&e.jsx(zr,{}),t.startsWith("/admin/settings/contacts")&&e.jsx(qc,{}),t.startsWith("/admin/settings/delivery")&&e.jsx(Ci,{}),t.startsWith("/admin/settings/homePage")&&e.jsx(i_,{})]})})}const it=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"},{id:5,title:""}];function u_(){const[n,t]=p.useState(""),[s]=p.useState(1),[a]=p.useState(10),[o,l]=p.useState({status:!1,message:""}),[u,r]=p.useState([]);p.useEffect(()=>{n||(r([]),l({status:!1,message:""}))},[n]);async function _(i){i.preventDefault();const d=ge.get("multi-store");try{const g=await(await T.get(`nomenclatures?multiStoreId=${d}&name=${n}&page=${s}&perPage=${a}`)).data.data;g.length>0?(r([...g]),l({status:!1,message:""})):(r([]),l({status:!0,message:"Совпадений не найдено"}))}catch(m){console.log("Ошибка произошла при поиске продуктов на складе",m)}}return e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("form",{action:"",className:c.addingWrapper_form,onSubmit:i=>_(i),children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:i=>t(i.target.value),value:n}),e.jsx(W,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsx("tr",{className:c.addingWrapper_thead_tr,children:it.map(i=>e.jsx("th",{className:c.addingWrapper_thead_th,children:i.title},i.id))})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:u==null?void 0:u.map(i=>e.jsxs("tr",{className:c.addingWrapper_tbody_tr,children:[it.map(d=>{var m;return e.jsxs("td",{className:c.addingWrapper_tbody_td,children:[d.title=="Наименование"?e.jsx("span",{children:(m=i==null?void 0:i.name)==null?void 0:m.ru}):"",d.title=="Штрих-код"?e.jsx("span",{children:i.mxik}):"",d.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},d.id)}),!i.hasWebNomenclature&&e.jsx("td",{className:c.addingWrapper_tbody_td,children:e.jsx(H,{to:`/admin/stock-product/${i.id}`,className:c.addingWrapper_tbody_add,children:"Добавить"})})]},i==null?void 0:i.mxik))})]}),o.status&&e.jsx("span",{className:c.addingWrapper_table_error,children:o.message})]})}const _t=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Статус"},{id:4,title:"Акции"}];function p_(){const[n,t]=p.useState(""),[s,a]=p.useState({status:!1,message:""}),[o,l]=p.useState([]),[u]=p.useState(1),[r]=p.useState(10);p.useEffect(()=>{n||(l([]),a({status:!1,message:""}))},[n]);async function _(){const g=ge.get("multi-store");try{console.log(222,"searchText",n);const x=(await T.get(`web-nomenclatures?multiStoreId=${g}&title=${n}&page=${u}&perPage=${r}`)).data.data;console.log(999,"data",x),x.length>0?(l([...x]),a({status:!1,message:""})):(l([]),a({status:!0,message:"Совпадений не найдено"}))}catch(h){console.log("Ошибка произошла при поиске продуктов на вебсайте по заголовку",h)}}async function i(g,h){g.preventDefault();try{const x=await T.patch(`web-nomenclatures/${h}`,{isActive:!1});t(""),l([]),console.log("Продукт успешно отключен с веб сайта",x)}catch(x){console.log("Ошибка произошла при удалении продукта с вебсайта",x)}}async function d(g,h){g.preventDefault();try{const x=await T.patch(`web-nomenclatures/${h}`,{isActive:!0});t(""),l([]),console.log("Продукт успешно включен на веб сайта",x)}catch(x){console.log("Ошибка произошла при удалении продукта с вебсайта",x)}}const m=async g=>{g.preventDefault(),_()};return e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("form",{action:"",className:c.addingWrapper_form,onSubmit:g=>m(g),children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:g=>t(g.target.value),value:n}),e.jsx(W,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsxs("tr",{className:c.addingWrapper_thead_tr,children:[_t.map(g=>e.jsx("th",{className:c.addingWrapper_thead_th,children:g.title},g.id)),e.jsx("th",{className:c.addingWrapper_thead_th})]})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:o==null?void 0:o.map(g=>e.jsxs("tr",{className:c.addingWrapper_tbody_tr,children:[_t.map(h=>e.jsxs("td",{className:c.addingWrapper_tbody_td,children:[h.title=="Наименование"?e.jsx("span",{children:g.title}):"",h.title=="Статус"?e.jsx("span",{children:"Статус"}):""]},h.id)),e.jsx("td",{className:c.addingWrapper_tbody_td,children:e.jsxs("div",{className:c.addingWrapper_tbody_buttons,children:[g.isActive&&e.jsx(H,{to:"#",className:c.addingWrapper_tbody_del,onClick:h=>i(h,g.id),children:"Отключить"}),!g.isActive&&e.jsx(H,{to:"#",className:c.addingWrapper_tbody_del,onClick:h=>d(h,g.id),children:"Включить"}),e.jsx(H,{to:`/admin/website-product/${g.id}`,className:c.addingWrapper_tbody_add,children:"Изменить"})]})})]},g==null?void 0:g.id))})]}),s.status&&e.jsx("span",{className:c.addingWrapper_table_error,children:s.message})]})}const m_=[{id:1,title:"На складе",href:"/admin/product/adding/stock"},{id:2,title:"На сайте",href:"/admin/product/adding/website"}];function h_(){const t=xe().pathname;return e.jsxs("div",{className:c.products,children:[e.jsx("div",{className:c.products_buttons,children:m_.map(s=>e.jsx(H,{to:s.href,className:`${c.products_btn} ${s.href==t?c.products_btn_active:""}`,children:s.title},s.id))}),t=="/admin/product/adding/stock"&&e.jsx(u_,{}),t=="/admin/product/adding/website"&&e.jsx(p_,{})]})}const g_=[{id:1,title:"Добавление",href:"/addingProducts"},{id:2,title:"Добавление на сайт",href:"/admin/product/adding"},{id:3,title:"Списание",href:"/admin/product/write-off"}];function b_(){const t=xe().pathname;return e.jsxs("div",{className:c.products,children:[e.jsx("div",{className:c.products_buttons,children:g_.map(s=>e.jsx(H,{to:s.href,className:`${c.products_btn} ${t.startsWith(`${s.href}`)||t.startsWith("/admin/product-item")?c.products_btn_active:""}`,children:s.title},s.id))}),t.startsWith("/admin/product/adding")&&e.jsx(h_,{})]})}const x_="_user_title_1uizv_1",f_="_user_list_1uizv_6",v_="_user_list_link_1uizv_12",j_="_user_list_link_active_1uizv_26",y_="_user_form_1uizv_30",k_="_user_form_btn_1uizv_35",w_="_user_form_wrap_1uizv_51",C_="_user_form_input_1uizv_57",N_="_user_form_icon_1uizv_65",I_="_user_table_1uizv_68",S_="_user_table_tbody_1uizv_71",$_="_user_table_tr_1uizv_74",P_="_user_table_th_1uizv_77",D_="_user_table_td_1uizv_85",B_="_user_table_btns_1uizv_89",M_="_user_table_btn_1uizv_89",O_="_user_table_btn_blocked_1uizv_107",A_="_modal_1uizv_111",W_="_modal_active_1uizv_120",E_="_modal_wrap_1uizv_123",U_="_modal_wrap_header_1uizv_131",L_="_modal_wrap_stores_1uizv_143",R_="_modal_wrap_stores_text_1uizv_165",z_="_modal_btns_1uizv_169",F_="_modal_btn_1uizv_169",T_="_modal_content_1uizv_193",q_="_modal_content_text_1uizv_197",V_="_versions_1uizv_206",H_="_versions_block_1uizv_211",X_="_versions_block_top_1uizv_216",G_="_versions_block_top_title_1uizv_226",Z_="_versions_block_top_arrow_1uizv_230",J_="_versions_block_top_arrow_active_1uizv_239",Q_="_versions_block_dropdown_1uizv_242",Y_="_versions_block_dropdown_item_1uizv_257",K_="_versions_block_dropdown_open_1uizv_268",ed="_shop_header_1uizv_275",td="_shop_header_title_1uizv_282",O={user_title:x_,user_list:f_,user_list_link:v_,user_list_link_active:j_,user_form:y_,user_form_btn:k_,user_form_wrap:w_,user_form_input:C_,user_form_icon:N_,user_table:I_,user_table_tbody:S_,user_table_tr:$_,user_table_th:P_,user_table_td:D_,user_table_btns:B_,user_table_btn:M_,user_table_btn_blocked:O_,modal:A_,modal_active:W_,modal_wrap:E_,modal_wrap_header:U_,modal_wrap_stores:L_,modal_wrap_stores_text:R_,modal_btns:z_,modal_btn:F_,modal_content:T_,modal_content_text:q_,versions:V_,versions_block:H_,versions_block_top:X_,versions_block_top_title:G_,versions_block_top_arrow:Z_,versions_block_top_arrow_active:J_,versions_block_dropdown:Q_,versions_block_dropdown_item:Y_,versions_block_dropdown_open:K_,shop_header:ed,shop_header_title:td},tt=({headers:n})=>e.jsx("thead",{className:O.user_table_thead,children:e.jsx("tr",{className:O.user_table_tr,children:n.map(t=>e.jsx("th",{className:O.user_table_th,children:t.title},t.id))})}),st=()=>{const[n,t]=p.useState(""),{setUserSearch:s}=ie(),a=o=>{o.preventDefault(),s(n)};return p.useEffect(()=>{n==""&&s("")},[n]),e.jsxs("form",{action:"",className:O.user_form,children:[e.jsxs("div",{className:O.user_form_wrap,children:[e.jsx("input",{type:"text",className:O.user_form_input,placeholder:"Поиск пользователей",onChange:o=>t(o.target.value),value:n}),e.jsx(W,{className:O.user_form_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:O.user_form_btn,onClick:o=>a(o),children:"Найти"})]})},nt=({arr:n,showStore:t})=>{const{usersList:s,userSearch:a,openModalAdmin:o,openAppointUser:l,shopListAdmin:u,setOpenAppointUser:r,setOpenModalAdmin:_,setUsersList:i,setEditUserAdmin:d,setShopListDropdownAdmin:m,setCloseBlock:g,setFilteredShopListAdmin:h}=ie(),f=xe().pathname,[k,$]=p.useState([]);p.useEffect(()=>{let v=n;f==="/clients"?v=n.filter(b=>b.isUser):f==="/employees"&&(v=n.filter(b=>!b.isUser)),v=v==null?void 0:v.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())),$(v)},[a,s,n,f]);const N=v=>{const b=s.map(w=>w.id===v?{...w,isBlocked:!w.isBlocked}:w);i(b)},B=v=>{_(!0),g(!0);const b=s.find(C=>C.id==v),w=[{id:le(),title:"Магазин 1",order:1},{id:le(),title:"Магазин 2",order:2},{id:le(),title:"Магазин 3",order:3}],y=w.filter(C=>!(b!=null&&b.shopList.some(A=>A.title===C.title)));console.log("editUser",b),console.log("shopListAdminArr",w),b&&(m(b.shopList),d(b),h(y))},P=v=>{r(!0),g(!0),m([]),h(u);const b=s.find(w=>w.id==v);b&&d(b)},j=o||l;return e.jsx(e.Fragment,{children:e.jsx("tbody",{className:O.user_table_tbody,children:k.map(v=>e.jsxs("tr",{children:[e.jsx("td",{className:O.user_table_td,children:v.name}),e.jsx("td",{className:O.user_table_td,children:t?v.shopList.map(b=>e.jsxs("p",{children:[b.title," ",`(${b.position})`]},b.id)):e.jsx("p",{children:v.isEmployes?"сотрудник":"пользователь"})}),e.jsx("td",{className:O.user_table_td,children:t?"Админ 1":v.registerDate}),e.jsx("td",{className:O.user_table_btns,children:v!=null&&v.isUser?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`${O.user_table_btn} ${v.isBlocked?O.user_table_btn_blocked:""}`,onClick:()=>N(v.id),children:v.isBlocked?"Разблокировать":"Заблокировать"}),e.jsx("button",{className:O.user_table_btn,onClick:()=>P(v.id),disabled:j,children:"Назначить"})]}):e.jsx("button",{className:O.user_table_btn,onClick:()=>B(v.id),style:{background:"#B5FFC7"},disabled:j,children:"Изменить"})})]},v.id))})})};function dt({color:n="black",className:t,header:s,isEnabled:a,dropdownItem:o,margin:l,versionList:u,closeBlock:r}){const{shopListAdmin:_,shopListDropdownAdmin:i,filteredShopListAdmin:d,setShopListDropdownAdmin:m,setShopListAdmin:g}=ie(),[h,x]=p.useState("Выберете должность"),[f,k]=p.useState("Выберете магазин"),[$,N]=p.useState(!1);p.useEffect(()=>{o!=null&&o.position?x(o.position):x("Выберете должность")},[o==null?void 0:o.position]),p.useEffect(()=>{r||N(!1)},[r]);const B=(b,w)=>{if(o){x(b.title);const y=i.filter(A=>A.title==o.title),C=i.findIndex(A=>A.title==o.title);y[0].position=b.title,i.splice(C,1,y[0]),m(i)}else k(b.title);if(a&&!i.some(y=>y.title==b.title)){x("Выберете должность");const y={...b,originalIndex:w};m([...i,y]),g(d.filter((C,A)=>A!==w))}N(!1)},P=b=>{const w=i.filter(y=>y.id!==b.id);if(m(w),b.originalIndex!==void 0){const y=[..._];y.splice(b.originalIndex,0,b),g(y)}else{const y=[...d,b].sort((C,A)=>C.order!==void 0&&A.order!==void 0?C.order-A.order:0);g(y),console.log("arr",y)}},j=()=>{N(!$)};function v(b,w){return b.order&&w.order&&(b==null?void 0:b.order)>(w==null?void 0:w.order)?1:-1}return e.jsx("div",{className:t??O.versions,style:{marginBottom:l},children:e.jsxs("div",{className:O.versions_block,children:[s&&e.jsxs("div",{className:O.shop_header,children:[e.jsx("p",{className:O.shop_header_title,children:o==null?void 0:o.title}),e.jsx("button",{onClick:()=>o&&P(o),children:e.jsx(W,{name:"XMarkIcon",width:16})})]}),e.jsxs("div",{className:O.versions_block_top,children:[e.jsx("h2",{className:O.versions_block_top_title,style:{color:n},children:o?h:f}),e.jsx("button",{className:O.versions_block_top_btn,onClick:()=>j(),children:e.jsx("div",{className:`${O.versions_block_top_arrow} ${$?O.versions_block_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${O.versions_block_dropdown} ${$?O.versions_block_dropdown_open:""}`,children:u==null?void 0:u.sort(v).map((b,w)=>e.jsx("span",{className:O.versions_block_dropdown_item,onClick:()=>B(b,w),children:b.title},w))})]})})}const ot=()=>{const{currentShopModal:n,shopListDropdownAdmin:t,shopListPositionAdmin:s,isEnabled:a,openModalAdmin:o,editUserAdmin:l,shopListAdmin:u,usersList:r,openAppointUser:_,closeBlock:i,filteredShopListAdmin:d,setCurrentShopModal:m,setShopListPositionAdmin:g,setCurrentShopPosition:h,setOpenModalAdmin:x,setShopListAdmin:f,setUsersList:k,setOpenAppointUser:$,setCloseBlock:N,setFilteredShopListAdmin:B}=ie();p.useEffect(()=>{},[d]);const P=()=>{const y=r.findIndex(C=>C.id==(l==null?void 0:l.id));l&&t.every(C=>"position"in C)&&(l.shopList=t,r.splice(y,1,l),k(r),f(u),console.log("filteredShopListAdmin",d)),console.log("shopListAdmin",u),b(),t.length==0&&j()},j=()=>{if(l){l.isUser=!0,l.isEmployes=!1,l.shopList=[];const y={id:le(),title:"",position:"пользователь"};l.shopList=[{...y}]}b()},v=()=>{const y=r.findIndex(C=>C.id==(l==null?void 0:l.id));if(l&&(l.shopList=t,r.splice(y,1,l),l.isUser=!1,l.isEmployes=!0,k(r),$(!1),!(l!=null&&l.shopList.some(C=>"position"in C)))){l.isUser=!0,l.shopList=[];const C={id:le(),title:"",position:"пользователь"};l.shopList=[{...C}]}},b=()=>{f(u),B([]),x(!1),$(!1),N(!1),console.log("close modal")},w=p.useRef(null);return p.useEffect(()=>{const y=C=>{var A;w.current&&!((A=w==null?void 0:w.current)!=null&&A.contains(C.target))&&b()};return o||_?document.addEventListener("mousedown",y):document.removeEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[o,_]),e.jsx("div",{className:`${O.modal} ${o?O.modal_active:""} ${_?O.modal_active:""}`,children:e.jsxs("div",{ref:w,className:O.modal_wrap,children:[e.jsxs("div",{className:O.modal_wrap_header,children:[e.jsx("h3",{children:"Редактирование должность"}),e.jsx("button",{onClick:()=>b(),children:e.jsx(W,{name:"XMarkIcon",width:24})})]}),e.jsxs("div",{className:O.modal_content,children:[e.jsxs("p",{className:O.modal_content_text,children:["Логин: ",l==null?void 0:l.name]}),e.jsxs("p",{className:O.modal_content_text,children:["Статус:",l==null?void 0:l.shopList.map(y=>e.jsx("span",{children:y.position},y.id))]}),e.jsx(dt,{color:"#717171",setVersionList:f,currentVersion:n,setCurrentVersion:m,isEnabled:a,versionList:d||u,closeBlock:i}),e.jsxs("div",{className:O.modal_wrap_stores,children:[e.jsx("p",{className:O.modal_wrap_stores_text,children:"Выбрано магазинов: "}),t==null?void 0:t.map((y,C)=>e.jsx(dt,{dropdownItem:y,margin:"12px",color:"#717171",versionList:s,setVersionList:g,setCurrentVersion:h,header:!0,closeBlock:i},C))]}),e.jsx("div",{className:O.modal_btns,children:_?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:O.modal_btn,onClick:()=>b(),style:{background:"#fff"},children:"Отмена"}),e.jsx("button",{className:O.modal_btn,onClick:()=>v(),children:"Сохранить"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:O.modal_btn,onClick:()=>j(),children:"Уволить"}),e.jsx("button",{className:O.modal_btn,onClick:()=>P(),children:"Сохранить"})]})})]})]})})},sd=[{id:"1",title:"Логин"},{id:"2",title:"Группа"},{id:"3",title:"Дата регистрации"},{id:"4",title:""}],nd=()=>{const{usersList:n}=ie();return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(tt,{headers:sd}),e.jsx(nt,{arr:n})]}),e.jsx(ot,{})]})},od=[{id:1,title:"Логин"},{id:2,title:"Группа"},{id:3,title:"Дата регистрации"},{id:4,title:""}],ad=()=>{const{usersList:n}=ie(),t=n.filter(s=>s.isUser==!0);return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(tt,{headers:od}),e.jsx(nt,{arr:t})]}),e.jsx(ot,{})]})},rd=[{id:1,title:"Логин"},{id:2,title:"Магазины"},{id:3,title:"Кто назначил"},{id:4,title:"Дата назначение"}],cd=()=>{const{usersList:n}=ie(),t=n.filter(s=>s.isUser!==!0);return e.jsxs(e.Fragment,{children:[e.jsx(st,{}),e.jsxs("table",{className:O.user_table,children:[e.jsx(tt,{headers:rd}),e.jsx(nt,{arr:t,showStore:!0})]}),e.jsx(ot,{})]})},ld=[{id:1,title:"Все",href:"/admin/users/all"},{id:2,title:"Клиенты",href:"/admin/users/clients"},{id:3,title:"Сотрудники",href:"/admin/users/employees"}],id=()=>{const t=xe().pathname;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O.users,children:e.jsxs("div",{className:O.users_header,children:[e.jsx("h2",{className:O.user_title,children:"Пользователи"}),e.jsx("ul",{className:O.user_list,children:ld.map(s=>e.jsx("li",{children:e.jsx(H,{className:`${O.user_list_link} ${t==s.href?O.user_list_link_active:""}`,to:s.href,children:s.title})},s.id))})]})}),e.jsxs("div",{children:[t=="/admin/users/all"&&e.jsx(nd,{}),t=="/admin/users/clients"&&e.jsx(ad,{}),t=="/admin/users/employees"&&e.jsx(cd,{})]})]})},ut=[{id:1,title:"фото"},{id:2,title:"Наименование"},{id:3,title:"Ед.изм"},{id:4,title:"Кол-во"},{id:5,title:"Приходная цена"},{id:6,title:"Продажная цена"},{id:7,title:"НДС 12%"},{id:8,title:"Цена без НДС"},{id:9,title:"QR"}];function _d(){const[n,t]=p.useState(""),[s]=p.useState(1),[a]=p.useState(10),[o,l]=p.useState([]);p.useEffect(()=>{u()},[n]);async function u(){const r=ge.get("multi-store");try{const i=await(await T.get(`nomenclatures?multiStoreId=${r}&page=${s}&perPage=${a}`)).data.data;console.log("data",i),l([...i])}catch(_){console.log("Ошибка произошла при получении всх продуктов со склада",_)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("h2",{className:c.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:c.addingWrapper_form,children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>t(r.target.value),value:n}),e.jsx(W,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsx("tr",{className:c.addingWrapper_thead_tr,children:ut.map(r=>e.jsx("th",{className:c.addingWrapper_thead_th,children:r.title},r.id))})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:o&&(o==null?void 0:o.map(r=>e.jsx("tr",{className:c.addingWrapper_tbody_tr,children:ut.map(_=>{var i,d;return e.jsxs("td",{className:c.addingWrapper_tbody_td,children:[_.title=="Наименование"?e.jsx("span",{children:((i=r==null?void 0:r.name)==null?void 0:i.ru)&&((d=r==null?void 0:r.name)==null?void 0:d.ru)}):"",_.title=="Штрих-код"?e.jsx("span",{children:r==null?void 0:r.barcode}):"",_.title=="Приходная цена"?e.jsx("span",{children:r.oldPrice}):"",_.title=="Продажная цена"?e.jsx("span",{children:r.price}):"",_.title=="НДС 12%"?e.jsx("span",{children:(r.price*1.12).toFixed(0)}):""]},_.id)})},r==null?void 0:r.id)))})]})]})})}const pt=[{id:1,title:"Наименование"},{id:2,title:"Штрих-код"},{id:3,title:"Фото"}];function dd(){const[n,t]=p.useState(""),[s]=p.useState(1),[a]=p.useState(10),[o,l]=p.useState([]);p.useEffect(()=>{u()},[n]);async function u(){const r=ge.get("multi-store");try{const _=await T.get(`web-nomenclatures?multiStoreId=${r}&page=${s}&perPage=${a}`),i=await _.data.data;console.log("res",_),l([...i])}catch(_){console.log("Ошибка произошла при получении всх продуктов со склада",_)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.addingWrapper,children:[e.jsxs("h2",{className:c.addingWrapper_title,children:["Всего товара: ",o.length]}),e.jsxs("form",{action:"",className:c.addingWrapper_form,children:[e.jsxs("div",{className:c.addingWrapper_search,children:[e.jsx("input",{type:"text",className:c.addingWrapper_search_input,placeholder:"Поиск товара",onChange:r=>t(r.target.value),value:n}),e.jsx(W,{className:c.addingWrapper_search_icon,width:25,height:25,name:"MagnifyingGlassIcon",color:"rgb(208, 208, 208)"})]}),e.jsx("button",{className:c.addingWrapper_form_btn,children:"Найти"})]}),e.jsxs("table",{className:c.addingWrapper_table,children:[e.jsx("thead",{className:c.addingWrapper_thead,children:e.jsx("tr",{className:c.addingWrapper_thead_tr,children:pt.map(r=>e.jsx("th",{className:c.addingWrapper_thead_th,children:r.title},r.id))})}),e.jsx("tbody",{className:c.addingWrapper_tbody,children:o==null?void 0:o.map(r=>e.jsx("tr",{className:c.addingWrapper_tbody_tr,children:pt.map(_=>e.jsx("td",{className:c.addingWrapper_tbody_td,children:_.title=="Наименование"?e.jsx("span",{children:r==null?void 0:r.title}):""},_.id))},r==null?void 0:r.id))})]})]})})}function ud(){const t=xe().pathname,{shopsStocks:s}=Ye();return e.jsxs("div",{className:c.layout,children:[e.jsx("ul",{className:c.layout_buttons,children:s.map(a=>e.jsx("li",{children:e.jsx(H,{to:`/admin/shops/shop/${a.url}`,className:`${c.layout_btn} ${t==`/admin/shops/shop/${a.url}`?c.layout_btn_active:""}`,children:a.title})},a.id))}),e.jsxs("div",{className:c.layout_content,children:[t==="/admin/shops/shop/stock"&&e.jsx(_d,{}),t==="/admin/shops/shop/website"&&e.jsx(dd,{})]})]})}function pd(){const{shopsAmount:n,currentShop:t,setCurrentShop:s}=Ye(),o=xe().pathname;return e.jsxs("div",{className:c.layout,children:[e.jsx("h2",{className:c.layout_title,children:"Магазины"}),e.jsx("ul",{className:c.layout_buttons,children:n.map(l=>e.jsx("li",{children:e.jsx(H,{to:"/admin/shops/shop",className:`${c.layout_btn} ${t==l.url?c.layout_btn_active:""}`,onClick:()=>s(l.url),children:l.title})},l.id))}),o.startsWith("/admin/shops/shop")&&e.jsx("div",{className:c.layout_content,children:e.jsx(ud,{})})]})}function md({item:n}){const{setErrorModal:t}=ve(),s=a=>{a.stopPropagation()};return e.jsx("div",{className:c.errorWrapper,onClick:()=>t({status:!1,message:""}),children:e.jsxs("div",{className:c.errorWrapper_block,onClick:s,children:[e.jsx("button",{className:c.errorWrapper_block_close,onClick:()=>t({status:!1,message:""}),children:e.jsx(W,{name:"XMarkIcon",width:25,height:25})}),e.jsx("span",{children:n.message})]})})}function hd({localNewImage:n,setLocalNewImage:t}){const[s,a]=p.useState(null);function o(d,m){return d.order>m.order?1:-1}function l(d,m){a(m)}function u(d){d.target.style.background="white"}function r(d){d.preventDefault(),d.target.style.background="lightgray"}function _(d,m){d.preventDefault(),d.target.style.background="white";const g=n&&n.map(h=>h.id===m.id?{...h,order:(s==null?void 0:s.order)||h.order}:h.id===(s==null?void 0:s.id)?{...h,order:m.order}:h).sort((h,x)=>h.order-x.order);console.log(555,"newImages",g),g&&t(g),a(null)}const i=d=>{const m=n.filter(g=>g.id!==d);t([...m])};return p.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:n&&n.sort(o).map((d,m)=>e.jsxs("div",{className:`${c.productItem_photo} ${m==0?c.productItem_photo_active:""}`,draggable:!0,onDragStart:g=>l(g,d),onDragLeave:g=>u(g),onDragEnd:g=>u(g),onDragOver:g=>r(g),onDrop:g=>_(g,d),children:[e.jsx("div",{className:c.productItem_photo_img,children:e.jsx("img",{src:d.src?`https://api.mcrm.uz/${d.src}`:d.localSrc?d.localSrc:"/add.webp",width:100,height:140,alt:"img"})}),e.jsx("div",{className:c.productItem_photo_close,onClick:()=>i(d.id),children:e.jsx(W,{width:18,height:18,name:"XMarkIcon"})})]},d.id))})}function Ot({stockName:n,myMxikCode:t,localNewImage:s,setLocalNewImage:a,setLocalFormData:o,localFormData:l}){const{errorModal:u}=ve(),r=p.useRef(null),_=()=>{r.current!=null&&r.current.click()},i=async d=>{var g,h;const m=(h=(g=d==null?void 0:d.target)==null?void 0:g.files)==null?void 0:h[0];if(m&&["image/jpeg","image/png","image/webp"].includes(m.type)){console.log(2,"выбрал новую картинку и она прошла проверку на рассширение files",m);const x=new FormData;x.append("files[]",m),console.log(3,"создал и инициализировал formData и сохранил в setLocalFormData(formData) formData",x),m&&o([...l,m]);const f=s&&(s==null?void 0:s.length)>0?s.reduce(($,N)=>N.order>$?N.order:$,-1/0):1,k=new FileReader;k.onload=$=>{var N;if((N=$.target)!=null&&N.result){const B={id:le(),order:f?f+1:1,localSrc:URL.createObjectURL(m)},P=[...s,B];console.log(4,"создал новый объект {id,order,localSrc} и localSrc добавил выбранную картинку files newImages",P),a&&a([...P]),console.log(5,"сохранил этот объект в массив setLocalNewImage")}},k.readAsDataURL(m),console.log(6,"отрисовал выбранную картинку files",m),r.current&&(r.current.value="")}};return e.jsxs("div",{className:c.productItem_top,children:[u.status&&e.jsx(md,{item:u}),e.jsx("h1",{className:c.productItem_title,children:"Добавление объявления"}),e.jsx("h4",{className:c.productItem_basePhoto,children:s&&s.length>0?"Главное фото":""}),e.jsxs("div",{className:c.productItem_photos,children:[e.jsx(hd,{stockName:n,myMxikCode:t,localNewImage:s,setLocalNewImage:a}),e.jsxs("div",{className:`${c.productItem_photo} ${c.productItem_add}`,onClick:_,children:[e.jsx(W,{width:24,height:24,name:"PlusIcon",color:"rgba(191, 187, 187, 1)"}),e.jsx("span",{className:c.productItem_add_text,children:"Добавить еще"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:i,ref:r})]})]}),e.jsx("p",{className:c.productItem_photos_desc,children:"Переместите фото чтоб поменят их порядок вывода"})]})}function At({localCategory:n,productName:t,productDescription:s,setProductDescription:a,setProductName:o,myBarcode:l,vendorCode:u,setVendorCode:r,myPrice:_}){var k,$,N,B;const{pickedCategory:i,currentProduct:d,setArticleModal:m,setOpenModalCategory:g}=ve();p.useEffect(()=>{(i||n)&&f()},[i,n]);const[h,x]=p.useState(""),f=async()=>{try{const j=(await T.get(`categories/${i.id?i.id:n}`)).data;x(j.name.ru)}catch(P){console.log("Ошибка произошла при получении категонии по id",P)}};return e.jsxs("div",{className:c.productItem_left,children:[e.jsxs("div",{className:c.productItem_left_info,children:[e.jsxs("div",{className:c.productItem_left_item,children:[e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Артикул"}),e.jsx("input",{type:"text",placeholder:"например:  #DF156651",className:c.productItem_left_item_top_input,value:u||"",onChange:P=>r(P.target.value)})]}),e.jsx("div",{className:c.productItem_left_item_bottom,children:e.jsx("button",{className:c.productItem_left_item_button,onClick:()=>m(!0),children:"Изменить"})})]}),e.jsxs("div",{className:c.productItem_left_item,children:[e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Категория:"}),e.jsx("span",{children:h||(($=(k=d==null?void 0:d.category)==null?void 0:k.name)!=null&&$.ru?(B=(N=d==null?void 0:d.category)==null?void 0:N.name)==null?void 0:B.ru:"")})]}),e.jsx("div",{className:c.productItem_left_item_bottom,children:e.jsx("button",{className:c.productItem_left_item_button,onClick:()=>g(!0),children:i!=null&&i.name||d!=null&&d.category?"Изменить":"Выбрать"})})]}),e.jsx("div",{className:c.productItem_left_item,children:e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Штрих-код"}),e.jsx("span",{children:l})]})}),e.jsx("div",{className:c.productItem_left_item,children:e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"Цена:"}),e.jsx("span",{children:_})]})}),e.jsx("div",{className:c.productItem_left_item,children:e.jsxs("div",{className:c.productItem_left_item_top,children:[e.jsx("span",{children:"PDF:"}),e.jsx("button",{className:c.productItem_left_item_button,children:"Загрузить"})]})})]}),e.jsxs("form",{className:c.productItem_left_form,children:[e.jsxs("label",{className:c.productItem_left_form_label,children:[e.jsx("span",{className:c.productItem_left_form_title,children:"Заголовок"}),e.jsx("input",{className:c.productItem_left_form_input,type:"text",value:t||"",onChange:P=>o(P.target.value)})]}),e.jsxs("label",{className:c.productItem_left_form_label,children:[e.jsx("span",{className:c.productItem_left_form_title,children:"Описание товара"}),e.jsx("textarea",{onChange:P=>a(P.target.value),value:s||"",className:c.productItem_left_form_textarea}),e.jsx("p",{className:c.productItem_left_form_size,children:e.jsx("span",{children:"200/200"})})]})]})]})}function gd({color:n="black",title:t="",extraOptionsList:s,className:a,openBlock:o,setOpenBlock:l,setExtraOptionsList:u}){const r=p.useRef([]);p.useEffect(()=>{r.current.length>0&&_()},[s]);const _=()=>{s&&s.forEach(d=>{r.current.forEach(m=>{m.name==d.title&&(m.checked=d.isActive)})})},i=(d,m)=>{const g=JSON.parse(JSON.stringify(s));g.forEach(h=>{h.title==m&&(h.isActive=!h.isActive)}),u&&u(g)};return e.jsxs("div",{className:a??V.versionExtraOptions,children:[t&&e.jsx("span",{className:V.versionExtraOptions_title,children:t}),e.jsxs("div",{className:V.versionExtraOptions_block,children:[e.jsxs("div",{className:V.versionExtraOptions_block_top,onClick:()=>l&&l(!o),children:[e.jsx("h2",{className:V.versionExtraOptions_block_top_title,style:{color:n},children:t||"Выберите параметры"}),e.jsx("button",{className:V.versionExtraOptions_block_top_btn,children:e.jsx("div",{className:`${V.versionExtraOptions_block_top_arrow} ${o?V.versionExtraOptions_block_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${V.versionExtraOptions_block_dropdown} ${o?V.versionExtraOptions_block_dropdown_open:""}`,children:s&&s.map((d,m)=>e.jsxs("label",{className:V.versionExtraOptions_block_dropdown_item,children:[d.title,e.jsx("input",{ref:g=>{g&&(r.current[m]=g)},type:"checkbox",name:d.title,"data-type":d.title,onChange:g=>i(g,d.title)})]},d.id))})]})]})}function bd({color:n="black",title:t="",versionList:s,className:a}){const[o,l]=p.useState(!1),[u,r]=p.useState("");p.useEffect(()=>{s==null||s.forEach(d=>{d.isActive&&r(d.title)})},[]);const _=()=>{l(!o)},i=d=>{s==null||s.forEach(m=>m.isActive=!1),s==null||s.forEach(m=>{m.title==d.title&&(m.isActive=!0,r(m.title))}),_()};return e.jsxs("div",{className:a??V.version3,children:[e.jsx("span",{className:V.version3_title,children:t}),e.jsxs("div",{className:V.version3_block,children:[e.jsxs("div",{className:V.version3_block_top,onClick:()=>_(),children:[e.jsx("h2",{className:V.version3_block_top_title,style:{color:n},children:u||"Выбрать"}),e.jsx("button",{className:V.version3_block_top_btn,children:e.jsx("div",{className:`${V.version3_block_top_arrow} ${o?V.version3_block_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${V.version3_block_dropdown} ${o?V.version3_block_dropdown_open:""}`,style:{height:`${s&&s.length==1?"50px":""}`},children:s&&s.map(d=>e.jsx("span",{className:V.version3_block_dropdown_item,onClick:()=>i(d),children:s.length>1?d.title:e.jsx("input",{type:"text",placeholder:"Введите вруччную",style:{width:"120px"}})},d.id))})]})]})}function xd({extraOptionsStatus:n,localCategory:t,setExtraOptionsStatus:s,extraOptions:a}){const[o,l]=p.useState(!1);return p.useEffect(()=>{},[t]),e.jsxs("div",{className:c.productItem_right_item,children:[e.jsxs("div",{className:c.productItem_right_top,onClick:()=>s(!n),children:[e.jsx("h5",{className:c.productItem_right_title,children:"Доп. параметры"}),e.jsx(Ne,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:n})]}),e.jsxs("div",{className:`${c.productItem_right_bottom_items} ${n?c.productItem_right_bottom_items_active:""}`,children:[e.jsx("div",{className:c.productItem_right_bottom_item,children:e.jsx(gd,{color:"",extraOptionsList:a,openBlock:o,setOpenBlock:l})}),a.map(u=>{if(u.isActive)return e.jsxs("div",{className:c.productItem_right_bottom_item,children:[e.jsx(bd,{color:"",title:u.title,versionList:u.type}),e.jsx("button",{className:c.productItem_right_bottom_del,children:"Удалить"})]},u.id)})]})]})}function mt({color:n="black",title:t="",versionList:s=[{id:"1",title:"версия 1",isActive:!0,navIcon:""},{id:"2",title:"версия 2",isActive:!1,navIcon:""},{id:"3",title:"версия 3",isActive:!1,navIcon:""}],className:a,openBlock:o,currentVersion:l,setOpenBlock:u,setCurrentVersion:r,setVersionList:_}){const i=d=>{r&&r(d.title);const m=s.map(x=>({id:x.id,title:x.title,isActive:!1})),g=m.find(x=>x.id==d.id),h=m.findIndex(x=>x.id==d.id);g&&(g.isActive=!0,m.splice(h,1,g),_&&_(m))};return e.jsxs("div",{className:a??V.version3,children:[e.jsx("span",{className:V.version3_title,children:t}),e.jsxs("div",{className:V.version3_block,children:[e.jsxs("div",{className:V.version3_block_top,children:[e.jsx("h2",{className:V.version3_block_top_title,style:{color:n},children:l}),e.jsx("button",{className:V.version3_block_top_btn,onClick:()=>u&&u(!o),children:e.jsx("div",{className:`${V.version3_block_top_arrow} ${o?V.version3_block_top_arrow_active:""}`,children:e.jsx(W,{name:"ChevronDownIcon",width:15})})})]}),e.jsx("div",{className:`${V.version3_block_dropdown} ${o?V.version3_block_dropdown_open:""}`,children:s.map(d=>e.jsx("span",{className:V.version3_block_dropdown_item,onClick:()=>i(d),children:d.title},d.id))})]})]})}function fd({brieflyProductStatus:n,setBrieflyProductStatus:t}){return e.jsxs("div",{className:c.productItem_right_item,children:[e.jsxs("div",{className:c.productItem_right_top,onClick:()=>t(!n),children:[e.jsx("h5",{className:c.productItem_right_title,children:"Коротко о товаре"}),e.jsx(Ne,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)",status:n})]}),e.jsx("div",{className:`${c.productItem_right_bottom_items} ${n?c.productItem_right_bottom_items_active:""}`,children:e.jsxs("div",{className:`${c.productItem_right_bottom_item} ${c.productItem_right_bottom_row}`,children:[e.jsx(mt,{color:"",title:"Объем, л"}),e.jsx(mt,{color:"",title:"Кол-во в упаковке"})]})})]})}function Wt({currentProduct:n,extraOptionsStatus:t,setExtraOptionsStatus:s,brieflyProductStatus:a,setBrieflyProductStatus:o,localCategory:l,extraOptions:u,setExtraOptions:r}){return e.jsxs("div",{className:c.productItem_right,children:[e.jsx("div",{className:c.productItem_right_item,children:e.jsxs("div",{className:c.productItem_right_top,children:[e.jsx("h5",{className:c.productItem_right_title,children:"Коментарии"}),e.jsx(Ne,{backgroundOn:"rgb(137, 250, 135)",backgroundOff:"rgb(193, 193, 193)"})]})}),e.jsx(xd,{extraOptionsStatus:t,setExtraOptionsStatus:s,localCategory:l,extraOptions:u,setExtraOptions:r,currentProduct:n}),e.jsx(fd,{brieflyProductStatus:a,setBrieflyProductStatus:o})]})}function Et({stockName:n,setAdminSettings:t}){return e.jsxs("div",{className:c.settings_content_buttons,children:[e.jsx(H,{to:n=="stock"?"/admin/product/adding/stock":"/admin/product/adding/website",className:`${c.settings_content_btn} ${c.settings_content_btn_cancel}`,children:"Отмена"}),e.jsx("button",{className:`${c.settings_content_btn} ${c.settings_content_btn_save}`,onClick:()=>t(),children:n=="website"?"Сохранить":"Добавить"})]})}function vd(){const{setArticleModal:n}=ve();return e.jsxs("div",{className:c.articleModal_block_nav,children:[e.jsx("h2",{className:c.articleModal_block_title,children:"Артикул"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(W,{name:"XMarkIcon"})})]})}function jd({productName:n}){const[t]=p.useState(""),[s]=p.useState("");return e.jsxs("div",{className:c.articleModal_block_info,children:[e.jsxs("div",{className:c.articleModal_block_info_item,children:[e.jsx("span",{children:"Товар:"}),e.jsx("span",{children:n})]}),e.jsxs("div",{className:c.articleModal_block_info_item,children:[e.jsx("span",{children:"Обьем:"}),e.jsxs("span",{children:[t,"1л"]})]}),e.jsxs("div",{className:c.articleModal_block_info_item,children:[e.jsx("span",{children:"Жирность:"}),e.jsxs("span",{children:[s,"1%"]})]})]})}function Ut({item:n}){return e.jsxs("div",{className:c.articleModal_block_recommended_item,children:[e.jsx("h3",{className:c.articleModal_block_recommended_item_title,children:n.title}),e.jsxs("div",{className:c.articleModal_block_recommended_content,children:[e.jsx("div",{className:c.articleModal_block_recommended_img,children:e.jsx("img",{src:"/молоко.jpg",alt:""})}),e.jsxs("div",{className:c.articleModal_block_recommended_info,children:[e.jsxs("div",{className:c.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]}),e.jsxs("div",{className:c.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"1.5%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1.5л"})]})]}),e.jsxs("div",{className:c.articleModal_block_recommended_desc,children:[e.jsxs("p",{children:["Жирность ",e.jsx("span",{children:"3%"})]}),e.jsxs("p",{children:["обьем ",e.jsx("span",{children:"1л"})]})]})]}),e.jsx("h2",{className:c.articleModal_block_recommended_article,children:n.article})]})]})}const yd=[{id:le(),title:"Молоко Nestle",article:"#DF262515"}];function kd(){return e.jsxs("div",{className:c.articleModal_block_recommended,children:[e.jsx("h2",{className:c.articleModal_block_recommended_title,children:"Рекомендуем"}),e.jsx("div",{className:c.articleModal_block_recommended_list,children:yd.map(n=>e.jsx(Ut,{item:n},n.id))})]})}function wd(){return e.jsx("div",{className:c.articleModal_block_search,children:e.jsxs("div",{className:c.articleModal_block_search_box,children:[e.jsxs("div",{className:c.articleModal_block_search_input,children:[e.jsx("input",{type:"text",placeholder:"Поиск товара"}),e.jsx(W,{name:"MagnifyingGlassIcon",width:17,height:17})]}),e.jsx("button",{className:c.articleModal_block_search_btn,children:"Найти"})]})})}const Cd=[{id:le(),title:"Молоко Nestle",article:"#DF262515"},{id:le(),title:"Молоко Nestle",article:"#DF262515"},{id:le(),title:"Молоко Nestle",article:"#DF262515"}];function Nd(){return e.jsx("div",{className:c.articleModal_block_found,children:Cd.map(n=>e.jsx(Ut,{item:n},n.id))})}function Lt({productName:n}){return e.jsx("div",{className:c.articleModal,children:e.jsxs("div",{className:c.articleModal_block,children:[e.jsx(vd,{}),e.jsx(jd,{productName:n}),e.jsx(kd,{}),e.jsx(wd,{}),e.jsx(Nd,{}),e.jsx("div",{className:c.articleModal_block_buttonBox,children:e.jsx("button",{className:c.articleModal_block_button,children:"Выбрать"})})]})})}function Id(){const n=ht(),t=xe(),{id:s}=gt(),{openModalCategory:a}=ve(),{pickedCategory:o,currentProduct:l,setErrorModal:u,setCurrentProduct:r,setPickedCategory:_,articleModal:i}=ve(),[d,m]=p.useState(""),[g,h]=p.useState(0),[x,f]=p.useState(0),[k,$]=p.useState(Number(s)),[N,B]=p.useState(!1),[P,j]=p.useState([]),[v,b]=p.useState(!1),[w,y]=p.useState(""),[C,A]=p.useState(""),[te,q]=p.useState([]),[G,he]=p.useState([]);async function ke(){try{return await(await T.get(`nomenclatures/${s}`)).data}catch(L){console.log("Ошибка произошла при получении продукта со склада по id",L)}}p.useEffect(()=>{_({})},[t.pathname]),p.useEffect(()=>{fe()},[s,o]);async function fe(){var S;const L=await ke();L&&(m((S=L==null?void 0:L.name)==null?void 0:S.ru),r({...L}),$(L==null?void 0:L.categoryId),h(L==null?void 0:L.barcode),f(L==null?void 0:L.price))}const X=async()=>{if(l){o.id&&(await Z(),$(o.id));const L=await ee(G),S=w||await ae(),ne={nomenclatureId:l.id,title:d,article:S||null,images:L.length>0?[...L]:null,description:C||null,document:"string"};console.log(333333,"newProduct",ne),await z(ne),_({}),j([]),n("/admin/product/adding/stock",{replace:!0})}else u({status:!0,message:'"Выберите категорию"'})};async function z(L){try{await T.post("web-nomenclatures",L)}catch(S){console.log("Ошибка произошла при добавлении web nomenclatures",S)}}async function Z(){try{await T.patch(`nomenclatures/${s}`,{categoryId:o.id}),$(o.id)}catch(L){console.log("Ошибка произошла при изменении котегории на складе",L)}}const ee=async L=>{if(L){const S=new FormData;L.forEach((ne,_e)=>{S.append(`files[${_e}]`,ne)});try{return await(await T.post("media-objects/uploads",S)).data}catch(ne){console.error("Ошибка при добавлении картинок на сервер",ne)}}},ae=async()=>{const L=ge.get("multi-store");try{const S=await T.get(`web-credentials/${L}`);return console.log("fetchArticle res",S),S.data.article}catch(S){console.log("Ошибка при получении артикля",S)}};return e.jsxs("div",{className:c.productItem,children:[a&&e.jsx(bt,{}),e.jsx(Ot,{stockName:"stock",myMxikCode:s,localFormData:G,setLocalFormData:he,localNewImage:te,setLocalNewImage:q}),e.jsxs("div",{className:c.productItem_settings,children:[e.jsx(At,{myPrice:x,setMyPrice:f,myBarcode:g,setMyBarcode:h,localCategory:k,productName:d,productDescription:C,setProductDescription:A,setProductName:m,vendorCode:w,setVendorCode:y}),e.jsx(Wt,{extraOptionsStatus:N,setExtraOptionsStatus:B,brieflyProductStatus:v,setBrieflyProductStatus:b,localCategory:k,extraOptions:P,setExtraOptions:j,currentProduct:l})]}),e.jsx(Et,{stockName:"stock",setAdminSettings:X}),i&&e.jsx(Lt,{productName:d})]})}function Sd(){const n=ht(),t=xe(),{id:s}=gt(),{openModalCategory:a}=ve(),{pickedCategory:o,webCurrentProduct:l,setWebCurrentProduct:u,setErrorModal:r,setPickedCategory:_,articleModal:i}=ve(),[d,m]=p.useState(""),[g,h]=p.useState(0),[x,f]=p.useState(0),[k,$]=p.useState(0),[N,B]=p.useState(Number(s)),[P,j]=p.useState(!1),[v,b]=p.useState([]),[w,y]=p.useState(!1),[C,A]=p.useState(""),[te,q]=p.useState(""),[G,he]=p.useState([]),[ke,fe]=p.useState([]);async function X(){try{return await(await T.get(`web-nomenclatures/${s}`)).data}catch(S){console.log("Ошибка произошла при получении продукта с сайта по id",S)}}p.useEffect(()=>{_({})},[t.pathname]),p.useEffect(()=>{z()},[s]);async function z(){var ne,_e,pe,we,Ce,re,me;const S=await X();if(S){f((ne=S==null?void 0:S.nomenclature)==null?void 0:ne.price),h((_e=S==null?void 0:S.nomenclature)==null?void 0:_e.barcode),$((pe=S==null?void 0:S.nomenclature)==null?void 0:pe.id),A(S==null?void 0:S.article),m(S!=null&&S.title?S==null?void 0:S.title:(Ce=(we=S==null?void 0:S.nomenclature)==null?void 0:we.name)==null?void 0:Ce.ru),u({...S}),B((me=(re=S==null?void 0:S.nomenclature)==null?void 0:re.category)==null?void 0:me.id);let je=1;const ye=S.images?S.images.map(Q=>({id:le(),order:je++,src:Q})):[];he(ye),je=1,q(S.description?S.description:"")}}const Z=async()=>{if(l||o.label){o.id&&await ae();const S=await L(ke);console.log(15,"получил ответ от функции fetchPhotos() images",S),console.log(16,"добавил localNewImage и images в один массив и сохранил в setLocalNewImage([...localNewImage, ...images])");const ne=G.filter(pe=>pe.src).map(pe=>{if(pe.src)return pe.src});console.log(17,"создал новый массив newImg и сохранил туда все содержимое localNewImage из ключей src",ne);const _e={nomenclatureId:l.id,title:d,article:C,images:S.length>0||ne.length>0?[...S]:null,description:te,document:"string"};console.log(18,"создал новый объект продукта newProduct",_e),console.log(18,"localNewImage",G),ee(_e),_({}),b([]),n("/admin/product/adding/website",{replace:!0})}else r({status:!0,message:'"Выберите категорию"'})};async function ee(S){try{await T.patch(`web-nomenclatures/${s}`,S)}catch(ne){console.log("Ошибка произошла при добавлении web nomenclatures",ne)}}async function ae(){try{await T.patch(`nomenclatures/${k}`,{categoryId:o.id}),B(o.id)}catch(S){console.log("Ошибка произошла при изменении котегории на сайте",S)}}const L=async S=>{if(S){const ne=new FormData;S.forEach((_e,pe)=>{ne.append(`files[${pe}]`,_e)});try{return await(await T.post("media-objects/uploads",ne)).data}catch(_e){console.error("Ошибка при добавлении картинок на сервер",_e)}}};return e.jsxs("div",{className:c.productItem,children:[a&&e.jsx(bt,{}),e.jsx(Ot,{stockName:"website",myMxikCode:s,localNewImage:G,setLocalNewImage:he,localFormData:ke,setLocalFormData:fe}),e.jsxs("div",{className:c.productItem_settings,children:[e.jsx(At,{myPrice:x,setMyPrice:f,myBarcode:g,setMyBarcode:h,localCategory:N,productName:d,productDescription:te,setProductDescription:q,setProductName:m,vendorCode:C,setVendorCode:A}),e.jsx(Wt,{extraOptionsStatus:P,setExtraOptionsStatus:j,brieflyProductStatus:w,setBrieflyProductStatus:y,localCategory:N,extraOptions:v,setExtraOptions:b,currentProduct:l})]}),e.jsx(Et,{stockName:"website",setAdminSettings:Z}),i&&e.jsx(Lt,{productName:d})]})}function Rd(){const{user:n}=qt(),{setCurrentShop:t}=Ye(),a=xe().pathname,{setTemporaryData:o,setCheckedProducts:l}=ve();p.useEffect(()=>{o([]),l([])},[]),p.useEffect(()=>{a.startsWith("/admin/shops")||t("0")},[a]);const u=[{id:"1",label:"Настройки",href:"/admin/settings",icon:e.jsx(W,{name:"CogIcon"}),isActive:!0},{id:"2",label:"Товар",href:"/admin/product",icon:e.jsx(W,{name:"ShoppingCartIcon"}),isActive:!1},{id:"3",label:"Пользователи",href:"/admin/users",icon:e.jsx(W,{name:"UsersIcon"}),isActive:!1},{id:"4",label:"Магазины",href:"/admin/shops",icon:e.jsx(W,{name:"BuildingStorefrontIcon"}),isActive:!1}],[r,_]=p.useState(u),i=d=>{const m=r.map(h=>({id:h.id,label:h.label,href:h.href,icon:h.icon,isActive:!1})),g=m.find(h=>h.id==d);g&&(g.isActive=!0),_(m)};return e.jsxs(e.Fragment,{children:[e.jsx(Vt,{}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:c.wrapper,children:[e.jsx("h1",{className:c.wrapper_title,children:n==null?void 0:n.username}),e.jsxs("div",{className:c.content,children:[e.jsx("div",{className:c.content_left,children:e.jsx("ul",{className:c.tools,children:r.map(d=>e.jsx("li",{children:e.jsxs(H,{to:d.href,className:`${c.tools_link} ${a.startsWith(d.href)?c.tools_link_active:""}`,onClick:()=>i(d.id),children:[d.icon,d.label]})},d.id))})}),a.startsWith("/admin")&&e.jsxs("div",{className:c.content_right,children:[a.startsWith("/admin/settings")&&e.jsx(d_,{}),a.startsWith("/admin/users")&&e.jsx(id,{}),a.startsWith("/admin/shops")&&e.jsx(pd,{}),a.startsWith("/admin/product")&&e.jsx(b_,{}),a.startsWith("/admin/stock-product")&&e.jsx(Id,{}),a.startsWith("/admin/website-product")&&e.jsx(Sd,{})]})]})]})})]})}export{Rd as default};
